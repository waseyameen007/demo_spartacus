{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, isDevMode, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { Config, provideDefaultConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { HttpResponse, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nclass PersonalizationConfig {}\nPersonalizationConfig.ɵfac = function PersonalizationConfig_Factory(t) {\n  return new (t || PersonalizationConfig)();\n};\nPersonalizationConfig.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: PersonalizationConfig,\n  factory: function PersonalizationConfig_Factory(t) {\n    let r = null;\n    if (t) {\n      r = new (t || PersonalizationConfig)();\n    } else {\n      r = i0.ɵɵinject(Config);\n    }\n    return r;\n  },\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PersonalizationConfig, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root',\n      useExisting: Config\n    }]\n  }], null, null);\n})();\nconst PERSONALIZATION_FEATURE = 'personalization';\nconst defaultPersonalizationConfig = {\n  personalization: {\n    enabled: false,\n    httpHeaderName: {\n      id: 'Occ-Personalization-Id',\n      timestamp: 'Occ-Personalization-Time'\n    },\n    context: {\n      slotPosition: 'PlaceholderContentSlot',\n      componentId: 'PersonalizationScriptComponent'\n    }\n  }\n};\nconst PERSONALIZATION_ID_KEY = 'personalization-id';\nclass OccPersonalizationIdInterceptor {\n  constructor(config, occEndpoints, winRef) {\n    var _a, _b, _c, _d, _e, _f;\n    this.config = config;\n    this.occEndpoints = occEndpoints;\n    this.winRef = winRef;\n    this.enabled = false;\n    if (this.winRef.isBrowser()) {\n      this.enabled = this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled) || false;\n      if (this.enabled) {\n        if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n          console.warn(`There is no httpHeaderName configured in Personalization`);\n        }\n        this.requestHeader = (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.id.toLowerCase();\n        this.personalizationId = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_ID_KEY);\n      } else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_ID_KEY)) {\n        this.winRef.localStorage.removeItem(PERSONALIZATION_ID_KEY);\n      }\n    }\n  }\n  intercept(request, next) {\n    if (!this.enabled) {\n      return next.handle(request);\n    }\n    if (this.requestHeader && this.personalizationId && request.url.includes(this.occEndpoints.getBaseUrl())) {\n      request = request.clone({\n        setHeaders: {\n          [this.requestHeader]: this.personalizationId\n        }\n      });\n    }\n    return next.handle(request).pipe(tap(event => {\n      var _a;\n      if (event instanceof HttpResponse) {\n        if (this.requestHeader && event.headers.keys().includes(this.requestHeader)) {\n          const receivedId = event.headers.get(this.requestHeader);\n          if (this.personalizationId !== receivedId) {\n            this.personalizationId = receivedId;\n            if (this.personalizationId) {\n              (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_ID_KEY, this.personalizationId);\n            }\n          }\n        }\n      }\n    }));\n  }\n}\nOccPersonalizationIdInterceptor.ɵfac = function OccPersonalizationIdInterceptor_Factory(t) {\n  return new (t || OccPersonalizationIdInterceptor)(i0.ɵɵinject(PersonalizationConfig), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.WindowRef));\n};\nOccPersonalizationIdInterceptor.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccPersonalizationIdInterceptor,\n  factory: OccPersonalizationIdInterceptor.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccPersonalizationIdInterceptor, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: PersonalizationConfig\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.WindowRef\n    }];\n  }, null);\n})();\nconst PERSONALIZATION_TIME_KEY = 'personalization-time';\nclass OccPersonalizationTimeInterceptor {\n  constructor(config, occEndpoints, winRef) {\n    var _a, _b, _c, _d, _e, _f;\n    this.config = config;\n    this.occEndpoints = occEndpoints;\n    this.winRef = winRef;\n    this.enabled = false;\n    if (this.winRef.isBrowser()) {\n      this.enabled = this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled) || false;\n      if (this.enabled) {\n        if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n          console.warn(`There is no httpHeaderName configured in Personalization`);\n        }\n        this.requestHeader = (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.timestamp.toLowerCase();\n        this.timestamp = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_TIME_KEY);\n      } else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_TIME_KEY)) {\n        this.winRef.localStorage.removeItem(PERSONALIZATION_TIME_KEY);\n      }\n    }\n  }\n  intercept(request, next) {\n    if (!this.enabled) {\n      return next.handle(request);\n    }\n    if (this.requestHeader && this.timestamp && request.url.includes(this.occEndpoints.getBaseUrl())) {\n      request = request.clone({\n        setHeaders: {\n          [this.requestHeader]: this.timestamp\n        }\n      });\n    }\n    return next.handle(request).pipe(tap(event => {\n      var _a;\n      if (event instanceof HttpResponse) {\n        if (this.requestHeader && event.headers.keys().includes(this.requestHeader)) {\n          const receivedTimestamp = event.headers.get(this.requestHeader);\n          if (this.timestamp !== receivedTimestamp) {\n            this.timestamp = receivedTimestamp;\n            if (this.timestamp) {\n              (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_TIME_KEY, this.timestamp);\n            }\n          }\n        }\n      }\n    }));\n  }\n}\nOccPersonalizationTimeInterceptor.ɵfac = function OccPersonalizationTimeInterceptor_Factory(t) {\n  return new (t || OccPersonalizationTimeInterceptor)(i0.ɵɵinject(PersonalizationConfig), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.WindowRef));\n};\nOccPersonalizationTimeInterceptor.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccPersonalizationTimeInterceptor,\n  factory: OccPersonalizationTimeInterceptor.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccPersonalizationTimeInterceptor, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: PersonalizationConfig\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.WindowRef\n    }];\n  }, null);\n})();\nconst interceptors = [{\n  provide: HTTP_INTERCEPTORS,\n  useExisting: OccPersonalizationIdInterceptor,\n  multi: true\n}, {\n  provide: HTTP_INTERCEPTORS,\n  useExisting: OccPersonalizationTimeInterceptor,\n  multi: true\n}];\n\n// TODO: Inline this factory when we start releasing Ivy compiled libraries\nfunction defaultPersonalizationComponentsConfig() {\n  const config = {\n    featureModules: {\n      [PERSONALIZATION_FEATURE]: {\n        cmsComponents: ['PersonalizationScriptComponent']\n      }\n    }\n  };\n  return config;\n}\nclass PersonalizationRootModule {}\nPersonalizationRootModule.ɵfac = function PersonalizationRootModule_Factory(t) {\n  return new (t || PersonalizationRootModule)();\n};\nPersonalizationRootModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: PersonalizationRootModule\n});\nPersonalizationRootModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [...interceptors, provideDefaultConfig(defaultPersonalizationConfig), provideDefaultConfigFactory(defaultPersonalizationComponentsConfig)]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PersonalizationRootModule, [{\n    type: NgModule,\n    args: [{\n      providers: [...interceptors, provideDefaultConfig(defaultPersonalizationConfig), provideDefaultConfigFactory(defaultPersonalizationComponentsConfig)]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { PERSONALIZATION_FEATURE, PersonalizationConfig, PersonalizationRootModule, defaultPersonalizationComponentsConfig };\n//# sourceMappingURL=spartacus-tracking-personalization-root.js.map","map":{"version":3,"names":["i0","Injectable","isDevMode","NgModule","i2","Config","provideDefaultConfig","provideDefaultConfigFactory","HttpResponse","HTTP_INTERCEPTORS","tap","PersonalizationConfig","ɵfac","PersonalizationConfig_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","r","ɵɵinject","providedIn","ngDevMode","ɵsetClassMetadata","type","args","useExisting","PERSONALIZATION_FEATURE","defaultPersonalizationConfig","personalization","enabled","httpHeaderName","id","timestamp","context","slotPosition","componentId","PERSONALIZATION_ID_KEY","OccPersonalizationIdInterceptor","constructor","config","occEndpoints","winRef","_a","_b","_c","_d","_e","_f","isBrowser","localStorage","console","warn","requestHeader","toLowerCase","personalizationId","getItem","removeItem","intercept","request","next","handle","url","includes","getBaseUrl","clone","setHeaders","pipe","event","headers","keys","receivedId","get","setItem","OccPersonalizationIdInterceptor_Factory","OccEndpointsService","WindowRef","PERSONALIZATION_TIME_KEY","OccPersonalizationTimeInterceptor","receivedTimestamp","OccPersonalizationTimeInterceptor_Factory","interceptors","provide","multi","defaultPersonalizationComponentsConfig","featureModules","cmsComponents","PersonalizationRootModule","PersonalizationRootModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers"],"sources":["D:/demo_spartacus/node_modules/@spartacus/tracking/fesm2015/spartacus-tracking-personalization-root.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, isDevMode, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { Config, provideDefaultConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { HttpResponse, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\n\nclass PersonalizationConfig {\n}\nPersonalizationConfig.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationConfig, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nPersonalizationConfig.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationConfig, providedIn: 'root', useExisting: Config });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationConfig, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                    useExisting: Config,\n                }]\n        }] });\n\nconst PERSONALIZATION_FEATURE = 'personalization';\n\nconst defaultPersonalizationConfig = {\n    personalization: {\n        enabled: false,\n        httpHeaderName: {\n            id: 'Occ-Personalization-Id',\n            timestamp: 'Occ-Personalization-Time',\n        },\n        context: {\n            slotPosition: 'PlaceholderContentSlot',\n            componentId: 'PersonalizationScriptComponent',\n        },\n    },\n};\n\nconst PERSONALIZATION_ID_KEY = 'personalization-id';\nclass OccPersonalizationIdInterceptor {\n    constructor(config, occEndpoints, winRef) {\n        var _a, _b, _c, _d, _e, _f;\n        this.config = config;\n        this.occEndpoints = occEndpoints;\n        this.winRef = winRef;\n        this.enabled = false;\n        if (this.winRef.isBrowser()) {\n            this.enabled =\n                (this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled)) ||\n                    false;\n            if (this.enabled) {\n                if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n                    console.warn(`There is no httpHeaderName configured in Personalization`);\n                }\n                this.requestHeader =\n                    (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.id.toLowerCase();\n                this.personalizationId = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_ID_KEY);\n            }\n            else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_ID_KEY)) {\n                this.winRef.localStorage.removeItem(PERSONALIZATION_ID_KEY);\n            }\n        }\n    }\n    intercept(request, next) {\n        if (!this.enabled) {\n            return next.handle(request);\n        }\n        if (this.requestHeader &&\n            this.personalizationId &&\n            request.url.includes(this.occEndpoints.getBaseUrl())) {\n            request = request.clone({\n                setHeaders: {\n                    [this.requestHeader]: this.personalizationId,\n                },\n            });\n        }\n        return next.handle(request).pipe(tap((event) => {\n            var _a;\n            if (event instanceof HttpResponse) {\n                if (this.requestHeader &&\n                    event.headers.keys().includes(this.requestHeader)) {\n                    const receivedId = event.headers.get(this.requestHeader);\n                    if (this.personalizationId !== receivedId) {\n                        this.personalizationId = receivedId;\n                        if (this.personalizationId) {\n                            (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_ID_KEY, this.personalizationId);\n                        }\n                    }\n                }\n            }\n        }));\n    }\n}\nOccPersonalizationIdInterceptor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationIdInterceptor, deps: [{ token: PersonalizationConfig }, { token: i2.OccEndpointsService }, { token: i2.WindowRef }], target: i0.ɵɵFactoryTarget.Injectable });\nOccPersonalizationIdInterceptor.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationIdInterceptor, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationIdInterceptor, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: PersonalizationConfig }, { type: i2.OccEndpointsService }, { type: i2.WindowRef }]; } });\n\nconst PERSONALIZATION_TIME_KEY = 'personalization-time';\nclass OccPersonalizationTimeInterceptor {\n    constructor(config, occEndpoints, winRef) {\n        var _a, _b, _c, _d, _e, _f;\n        this.config = config;\n        this.occEndpoints = occEndpoints;\n        this.winRef = winRef;\n        this.enabled = false;\n        if (this.winRef.isBrowser()) {\n            this.enabled =\n                (this.winRef.localStorage && ((_a = this.config.personalization) === null || _a === void 0 ? void 0 : _a.enabled)) ||\n                    false;\n            if (this.enabled) {\n                if (!((_b = this.config.personalization) === null || _b === void 0 ? void 0 : _b.httpHeaderName) && isDevMode()) {\n                    console.warn(`There is no httpHeaderName configured in Personalization`);\n                }\n                this.requestHeader =\n                    (_d = (_c = this.config.personalization) === null || _c === void 0 ? void 0 : _c.httpHeaderName) === null || _d === void 0 ? void 0 : _d.timestamp.toLowerCase();\n                this.timestamp = (_e = this.winRef.localStorage) === null || _e === void 0 ? void 0 : _e.getItem(PERSONALIZATION_TIME_KEY);\n            }\n            else if ((_f = this.winRef.localStorage) === null || _f === void 0 ? void 0 : _f.getItem(PERSONALIZATION_TIME_KEY)) {\n                this.winRef.localStorage.removeItem(PERSONALIZATION_TIME_KEY);\n            }\n        }\n    }\n    intercept(request, next) {\n        if (!this.enabled) {\n            return next.handle(request);\n        }\n        if (this.requestHeader &&\n            this.timestamp &&\n            request.url.includes(this.occEndpoints.getBaseUrl())) {\n            request = request.clone({\n                setHeaders: {\n                    [this.requestHeader]: this.timestamp,\n                },\n            });\n        }\n        return next.handle(request).pipe(tap((event) => {\n            var _a;\n            if (event instanceof HttpResponse) {\n                if (this.requestHeader &&\n                    event.headers.keys().includes(this.requestHeader)) {\n                    const receivedTimestamp = event.headers.get(this.requestHeader);\n                    if (this.timestamp !== receivedTimestamp) {\n                        this.timestamp = receivedTimestamp;\n                        if (this.timestamp) {\n                            (_a = this.winRef.localStorage) === null || _a === void 0 ? void 0 : _a.setItem(PERSONALIZATION_TIME_KEY, this.timestamp);\n                        }\n                    }\n                }\n            }\n        }));\n    }\n}\nOccPersonalizationTimeInterceptor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationTimeInterceptor, deps: [{ token: PersonalizationConfig }, { token: i2.OccEndpointsService }, { token: i2.WindowRef }], target: i0.ɵɵFactoryTarget.Injectable });\nOccPersonalizationTimeInterceptor.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationTimeInterceptor, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccPersonalizationTimeInterceptor, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: PersonalizationConfig }, { type: i2.OccEndpointsService }, { type: i2.WindowRef }]; } });\n\nconst interceptors = [\n    {\n        provide: HTTP_INTERCEPTORS,\n        useExisting: OccPersonalizationIdInterceptor,\n        multi: true,\n    },\n    {\n        provide: HTTP_INTERCEPTORS,\n        useExisting: OccPersonalizationTimeInterceptor,\n        multi: true,\n    },\n];\n\n// TODO: Inline this factory when we start releasing Ivy compiled libraries\nfunction defaultPersonalizationComponentsConfig() {\n    const config = {\n        featureModules: {\n            [PERSONALIZATION_FEATURE]: {\n                cmsComponents: ['PersonalizationScriptComponent'],\n            },\n        },\n    };\n    return config;\n}\nclass PersonalizationRootModule {\n}\nPersonalizationRootModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nPersonalizationRootModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule });\nPersonalizationRootModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule, providers: [\n        ...interceptors,\n        provideDefaultConfig(defaultPersonalizationConfig),\n        provideDefaultConfigFactory(defaultPersonalizationComponentsConfig),\n    ] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: PersonalizationRootModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [\n                        ...interceptors,\n                        provideDefaultConfig(defaultPersonalizationConfig),\n                        provideDefaultConfigFactory(defaultPersonalizationComponentsConfig),\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { PERSONALIZATION_FEATURE, PersonalizationConfig, PersonalizationRootModule, defaultPersonalizationComponentsConfig };\n//# sourceMappingURL=spartacus-tracking-personalization-root.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}