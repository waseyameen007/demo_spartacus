{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { CommandStrategy, LanguageSetEvent, UserActions } from '@spartacus/core';\nimport { switchMap, take, tap, map } from 'rxjs/operators';\nimport * as i1 from '@spartacus/user/account/root';\nimport { UserAccountChangedEvent } from '@spartacus/user/account/root';\nimport * as i4 from '@ngrx/store';\nimport { UserEmailFacade, UserPasswordFacade, UserProfileFacade, UserRegisterFacade } from '@spartacus/user/profile/root';\nconst USER_PROFILE_NORMALIZER = new InjectionToken('UserProfileNormalizer');\nconst USER_PROFILE_SERIALIZER = new InjectionToken('UserProfileSerializer');\nconst USER_SERIALIZER = new InjectionToken('UserSerializer');\nconst USER_SIGN_UP_SERIALIZER = new InjectionToken('UserSignUpSerializer');\nconst TITLE_NORMALIZER = new InjectionToken('TitleNormalizer');\nclass UserProfileAdapter {}\nclass UserProfileConnector {\n  constructor(userProfileAdapter) {\n    this.userProfileAdapter = userProfileAdapter;\n  }\n  update(username, user) {\n    return this.userProfileAdapter.update(username, user);\n  }\n  register(user) {\n    return this.userProfileAdapter.register(user);\n  }\n  registerGuest(guid, password) {\n    return this.userProfileAdapter.registerGuest(guid, password);\n  }\n  requestForgotPasswordEmail(userEmailAddress) {\n    return this.userProfileAdapter.requestForgotPasswordEmail(userEmailAddress);\n  }\n  resetPassword(token, newPassword) {\n    return this.userProfileAdapter.resetPassword(token, newPassword);\n  }\n  updateEmail(userId, currentPassword, newUserId) {\n    return this.userProfileAdapter.updateEmail(userId, currentPassword, newUserId);\n  }\n  updatePassword(userId, oldPassword, newPassword) {\n    return this.userProfileAdapter.updatePassword(userId, oldPassword, newPassword);\n  }\n  remove(userId) {\n    return this.userProfileAdapter.close(userId);\n  }\n  getTitles() {\n    return this.userProfileAdapter.loadTitles();\n  }\n}\nUserProfileConnector.ɵfac = function UserProfileConnector_Factory(t) {\n  return new (t || UserProfileConnector)(i0.ɵɵinject(UserProfileAdapter));\n};\nUserProfileConnector.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: UserProfileConnector,\n  factory: UserProfileConnector.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserProfileConnector, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: UserProfileAdapter\n    }];\n  }, null);\n})();\nclass UserEmailService {\n  constructor(userIdService, userProfileConnector, command) {\n    this.userIdService = userIdService;\n    this.userProfileConnector = userProfileConnector;\n    this.command = command;\n    this.updateCommand = this.command.create(payload => this.userIdService.takeUserId(true).pipe(switchMap(uid => this.userProfileConnector.updateEmail(uid, payload.password, payload.newUid))), {\n      strategy: CommandStrategy.Queue\n    });\n  }\n  /**\n   * Updates the user's email.\n   *\n   * @param password to users password to confirm the users\n   * @param newUid the new proposed email address.\n   */\n  update(password, newUid) {\n    return this.updateCommand.execute({\n      password,\n      newUid\n    });\n  }\n}\nUserEmailService.ɵfac = function UserEmailService_Factory(t) {\n  return new (t || UserEmailService)(i0.ɵɵinject(i2.UserIdService), i0.ɵɵinject(UserProfileConnector), i0.ɵɵinject(i2.CommandService));\n};\nUserEmailService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: UserEmailService,\n  factory: UserEmailService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserEmailService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i2.UserIdService\n    }, {\n      type: UserProfileConnector\n    }, {\n      type: i2.CommandService\n    }];\n  }, null);\n})();\nclass UserPasswordService {\n  constructor(userProfileConnector, userIdService, command) {\n    this.userProfileConnector = userProfileConnector;\n    this.userIdService = userIdService;\n    this.command = command;\n    this.updateCommand = this.command.create(payload => this.userIdService.takeUserId(true).pipe(take(1), switchMap(uid => this.userProfileConnector.updatePassword(uid, payload.oldPassword, payload.newPassword))));\n    this.resetCommand = this.command.create(payload => this.userProfileConnector.resetPassword(payload.token, payload.password));\n    this.requestForgotPasswordEmailCommand = this.command.create(payload => this.userProfileConnector.requestForgotPasswordEmail(payload.email));\n  }\n  /**\n   * Updates the password for the user\n   *\n   * The method returns an observable with `LoaderState` information, including the\n   * actual user data.\n   *\n   * @param oldPassword the current password that will be changed\n   * @param newPassword the new password\n   */\n  update(oldPassword, newPassword) {\n    return this.updateCommand.execute({\n      oldPassword,\n      newPassword\n    });\n  }\n  /**\n   * Reset new password. Part of the forgot password flow.\n   *\n   * @param token\n   * @param password\n   */\n  reset(token, password) {\n    return this.resetCommand.execute({\n      token,\n      password\n    });\n  }\n  /*\n   * Request an email to reset a forgotten password.\n   */\n  requestForgotPasswordEmail(email) {\n    return this.requestForgotPasswordEmailCommand.execute({\n      email\n    });\n  }\n}\nUserPasswordService.ɵfac = function UserPasswordService_Factory(t) {\n  return new (t || UserPasswordService)(i0.ɵɵinject(UserProfileConnector), i0.ɵɵinject(i2.UserIdService), i0.ɵɵinject(i2.CommandService));\n};\nUserPasswordService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: UserPasswordService,\n  factory: UserPasswordService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserPasswordService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: UserProfileConnector\n    }, {\n      type: i2.UserIdService\n    }, {\n      type: i2.CommandService\n    }];\n  }, null);\n})();\nclass UserProfileService {\n  constructor(userAccountService, authService, userProfileConnector, eventService, userIdService, query, command) {\n    this.userAccountService = userAccountService;\n    this.authService = authService;\n    this.userProfileConnector = userProfileConnector;\n    this.eventService = eventService;\n    this.userIdService = userIdService;\n    this.query = query;\n    this.command = command;\n    this.updateCommand = this.command.create(payload => this.userIdService.takeUserId(true).pipe(switchMap(uid => this.userProfileConnector.update(uid, payload.details).pipe(tap(() => {\n      this.eventService.dispatch({\n        user: payload.details\n      }, UserAccountChangedEvent);\n    })))), {\n      strategy: CommandStrategy.Queue\n    });\n    this.closeCommand = this.command.create(() => this.userIdService.takeUserId(true).pipe(switchMap(uid => this.userProfileConnector.remove(uid).pipe(tap(() => this.authService.logout())))));\n    this.titleQuery = this.query.create(() => this.userProfileConnector.getTitles(), {\n      reloadOn: [LanguageSetEvent]\n    });\n  }\n  get() {\n    return this.userAccountService.get();\n  }\n  /**\n   * Updates the user's details.\n   *\n   * @param details User details to be updated.\n   */\n  update(details) {\n    return this.updateCommand.execute({\n      details\n    });\n  }\n  /**\n   * Closes the user account.\n   */\n  close() {\n    return this.closeCommand.execute(undefined);\n  }\n  /**\n   * Returns titles that can be used for the user profiles.\n   */\n  getTitles() {\n    return this.titleQuery.get().pipe(map(titles => titles !== null && titles !== void 0 ? titles : []));\n  }\n}\nUserProfileService.ɵfac = function UserProfileService_Factory(t) {\n  return new (t || UserProfileService)(i0.ɵɵinject(i1.UserAccountFacade), i0.ɵɵinject(i2.AuthService), i0.ɵɵinject(UserProfileConnector), i0.ɵɵinject(i2.EventService), i0.ɵɵinject(i2.UserIdService), i0.ɵɵinject(i2.QueryService), i0.ɵɵinject(i2.CommandService));\n};\nUserProfileService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: UserProfileService,\n  factory: UserProfileService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserProfileService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.UserAccountFacade\n    }, {\n      type: i2.AuthService\n    }, {\n      type: UserProfileConnector\n    }, {\n      type: i2.EventService\n    }, {\n      type: i2.UserIdService\n    }, {\n      type: i2.QueryService\n    }, {\n      type: i2.CommandService\n    }];\n  }, null);\n})();\nclass UserRegisterService {\n  constructor(userProfile, userConnector, authService, command, store) {\n    this.userProfile = userProfile;\n    this.userConnector = userConnector;\n    this.authService = authService;\n    this.command = command;\n    this.store = store;\n    this.registerCommand = this.command.create(({\n      user\n    }) => this.userConnector.register(user).pipe(tap(() => {\n      // this is a compatibility mechanism only, to make anonymous consents\n      // management work properly in transitional period (when we move logic\n      // to separate libraries)\n      this.store.dispatch(new UserActions.RegisterUserSuccess());\n    })));\n    this.registerGuestCommand = this.command.create(payload => this.userConnector.registerGuest(payload.guid, payload.password).pipe(tap(user => {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      this.authService.loginWithCredentials(user.uid, payload.password);\n    })));\n  }\n  /**\n   * Register a new user.\n   *\n   * @param submitFormData as UserRegisterFormData\n   */\n  register(user) {\n    return this.registerCommand.execute({\n      user\n    });\n  }\n  /**\n   * Register a new user from guest.\n   *\n   * @param guid\n   * @param password\n   */\n  registerGuest(guid, password) {\n    return this.registerGuestCommand.execute({\n      guid,\n      password\n    });\n  }\n  /**\n   * Returns titles that can be used for the user profiles.\n   */\n  getTitles() {\n    return this.userProfile.getTitles();\n  }\n}\nUserRegisterService.ɵfac = function UserRegisterService_Factory(t) {\n  return new (t || UserRegisterService)(i0.ɵɵinject(UserProfileService), i0.ɵɵinject(UserProfileConnector), i0.ɵɵinject(i2.AuthService), i0.ɵɵinject(i2.CommandService), i0.ɵɵinject(i4.Store));\n};\nUserRegisterService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: UserRegisterService,\n  factory: UserRegisterService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserRegisterService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: UserProfileService\n    }, {\n      type: UserProfileConnector\n    }, {\n      type: i2.AuthService\n    }, {\n      type: i2.CommandService\n    }, {\n      type: i4.Store\n    }];\n  }, null);\n})();\nconst facadeProviders = [UserEmailService, UserPasswordService, UserProfileService, UserRegisterService, {\n  provide: UserEmailFacade,\n  useExisting: UserEmailService\n}, {\n  provide: UserPasswordFacade,\n  useExisting: UserPasswordService\n}, {\n  provide: UserProfileFacade,\n  useExisting: UserProfileService\n}, {\n  provide: UserRegisterFacade,\n  useExisting: UserRegisterService\n}];\nclass UserProfileCoreModule {}\nUserProfileCoreModule.ɵfac = function UserProfileCoreModule_Factory(t) {\n  return new (t || UserProfileCoreModule)();\n};\nUserProfileCoreModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: UserProfileCoreModule\n});\nUserProfileCoreModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [UserProfileConnector, ...facadeProviders]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserProfileCoreModule, [{\n    type: NgModule,\n    args: [{\n      providers: [UserProfileConnector, ...facadeProviders]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TITLE_NORMALIZER, USER_PROFILE_NORMALIZER, USER_PROFILE_SERIALIZER, USER_SERIALIZER, USER_SIGN_UP_SERIALIZER, UserEmailService, UserPasswordService, UserProfileAdapter, UserProfileConnector, UserProfileCoreModule, UserProfileService, UserRegisterService };\n//# sourceMappingURL=spartacus-user-profile-core.js.map","map":{"version":3,"names":["i0","InjectionToken","Injectable","NgModule","i2","CommandStrategy","LanguageSetEvent","UserActions","switchMap","take","tap","map","i1","UserAccountChangedEvent","i4","UserEmailFacade","UserPasswordFacade","UserProfileFacade","UserRegisterFacade","USER_PROFILE_NORMALIZER","USER_PROFILE_SERIALIZER","USER_SERIALIZER","USER_SIGN_UP_SERIALIZER","TITLE_NORMALIZER","UserProfileAdapter","UserProfileConnector","constructor","userProfileAdapter","update","username","user","register","registerGuest","guid","password","requestForgotPasswordEmail","userEmailAddress","resetPassword","token","newPassword","updateEmail","userId","currentPassword","newUserId","updatePassword","oldPassword","remove","close","getTitles","loadTitles","ɵfac","UserProfileConnector_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","factory","ngDevMode","ɵsetClassMetadata","type","UserEmailService","userIdService","userProfileConnector","command","updateCommand","create","payload","takeUserId","pipe","uid","newUid","strategy","Queue","execute","UserEmailService_Factory","UserIdService","CommandService","UserPasswordService","resetCommand","requestForgotPasswordEmailCommand","email","reset","UserPasswordService_Factory","UserProfileService","userAccountService","authService","eventService","query","details","dispatch","closeCommand","logout","titleQuery","reloadOn","get","undefined","titles","UserProfileService_Factory","UserAccountFacade","AuthService","EventService","QueryService","UserRegisterService","userProfile","userConnector","store","registerCommand","RegisterUserSuccess","registerGuestCommand","loginWithCredentials","UserRegisterService_Factory","Store","facadeProviders","provide","useExisting","UserProfileCoreModule","UserProfileCoreModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","args"],"sources":["D:/demo_spartacus/node_modules/@spartacus/user/fesm2015/spartacus-user-profile-core.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { CommandStrategy, LanguageSetEvent, UserActions } from '@spartacus/core';\nimport { switchMap, take, tap, map } from 'rxjs/operators';\nimport * as i1 from '@spartacus/user/account/root';\nimport { UserAccountChangedEvent } from '@spartacus/user/account/root';\nimport * as i4 from '@ngrx/store';\nimport { UserEmailFacade, UserPasswordFacade, UserProfileFacade, UserRegisterFacade } from '@spartacus/user/profile/root';\n\nconst USER_PROFILE_NORMALIZER = new InjectionToken('UserProfileNormalizer');\nconst USER_PROFILE_SERIALIZER = new InjectionToken('UserProfileSerializer');\nconst USER_SERIALIZER = new InjectionToken('UserSerializer');\nconst USER_SIGN_UP_SERIALIZER = new InjectionToken('UserSignUpSerializer');\nconst TITLE_NORMALIZER = new InjectionToken('TitleNormalizer');\n\nclass UserProfileAdapter {\n}\n\nclass UserProfileConnector {\n    constructor(userProfileAdapter) {\n        this.userProfileAdapter = userProfileAdapter;\n    }\n    update(username, user) {\n        return this.userProfileAdapter.update(username, user);\n    }\n    register(user) {\n        return this.userProfileAdapter.register(user);\n    }\n    registerGuest(guid, password) {\n        return this.userProfileAdapter.registerGuest(guid, password);\n    }\n    requestForgotPasswordEmail(userEmailAddress) {\n        return this.userProfileAdapter.requestForgotPasswordEmail(userEmailAddress);\n    }\n    resetPassword(token, newPassword) {\n        return this.userProfileAdapter.resetPassword(token, newPassword);\n    }\n    updateEmail(userId, currentPassword, newUserId) {\n        return this.userProfileAdapter.updateEmail(userId, currentPassword, newUserId);\n    }\n    updatePassword(userId, oldPassword, newPassword) {\n        return this.userProfileAdapter.updatePassword(userId, oldPassword, newPassword);\n    }\n    remove(userId) {\n        return this.userProfileAdapter.close(userId);\n    }\n    getTitles() {\n        return this.userProfileAdapter.loadTitles();\n    }\n}\nUserProfileConnector.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileConnector, deps: [{ token: UserProfileAdapter }], target: i0.ɵɵFactoryTarget.Injectable });\nUserProfileConnector.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileConnector });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileConnector, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: UserProfileAdapter }]; } });\n\nclass UserEmailService {\n    constructor(userIdService, userProfileConnector, command) {\n        this.userIdService = userIdService;\n        this.userProfileConnector = userProfileConnector;\n        this.command = command;\n        this.updateCommand = this.command.create((payload) => this.userIdService\n            .takeUserId(true)\n            .pipe(switchMap((uid) => this.userProfileConnector.updateEmail(uid, payload.password, payload.newUid))), {\n            strategy: CommandStrategy.Queue,\n        });\n    }\n    /**\n     * Updates the user's email.\n     *\n     * @param password to users password to confirm the users\n     * @param newUid the new proposed email address.\n     */\n    update(password, newUid) {\n        return this.updateCommand.execute({ password, newUid });\n    }\n}\nUserEmailService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserEmailService, deps: [{ token: i2.UserIdService }, { token: UserProfileConnector }, { token: i2.CommandService }], target: i0.ɵɵFactoryTarget.Injectable });\nUserEmailService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserEmailService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserEmailService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i2.UserIdService }, { type: UserProfileConnector }, { type: i2.CommandService }]; } });\n\nclass UserPasswordService {\n    constructor(userProfileConnector, userIdService, command) {\n        this.userProfileConnector = userProfileConnector;\n        this.userIdService = userIdService;\n        this.command = command;\n        this.updateCommand = this.command.create((payload) => this.userIdService.takeUserId(true).pipe(take(1), switchMap((uid) => this.userProfileConnector.updatePassword(uid, payload.oldPassword, payload.newPassword))));\n        this.resetCommand = this.command.create((payload) => this.userProfileConnector.resetPassword(payload.token, payload.password));\n        this.requestForgotPasswordEmailCommand = this.command.create((payload) => this.userProfileConnector.requestForgotPasswordEmail(payload.email));\n    }\n    /**\n     * Updates the password for the user\n     *\n     * The method returns an observable with `LoaderState` information, including the\n     * actual user data.\n     *\n     * @param oldPassword the current password that will be changed\n     * @param newPassword the new password\n     */\n    update(oldPassword, newPassword) {\n        return this.updateCommand.execute({ oldPassword, newPassword });\n    }\n    /**\n     * Reset new password. Part of the forgot password flow.\n     *\n     * @param token\n     * @param password\n     */\n    reset(token, password) {\n        return this.resetCommand.execute({ token, password });\n    }\n    /*\n     * Request an email to reset a forgotten password.\n     */\n    requestForgotPasswordEmail(email) {\n        return this.requestForgotPasswordEmailCommand.execute({ email });\n    }\n}\nUserPasswordService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserPasswordService, deps: [{ token: UserProfileConnector }, { token: i2.UserIdService }, { token: i2.CommandService }], target: i0.ɵɵFactoryTarget.Injectable });\nUserPasswordService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserPasswordService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserPasswordService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: UserProfileConnector }, { type: i2.UserIdService }, { type: i2.CommandService }]; } });\n\nclass UserProfileService {\n    constructor(userAccountService, authService, userProfileConnector, eventService, userIdService, query, command) {\n        this.userAccountService = userAccountService;\n        this.authService = authService;\n        this.userProfileConnector = userProfileConnector;\n        this.eventService = eventService;\n        this.userIdService = userIdService;\n        this.query = query;\n        this.command = command;\n        this.updateCommand = this.command.create((payload) => this.userIdService.takeUserId(true).pipe(switchMap((uid) => this.userProfileConnector.update(uid, payload.details).pipe(tap(() => {\n            this.eventService.dispatch({ user: payload.details }, UserAccountChangedEvent);\n        })))), {\n            strategy: CommandStrategy.Queue,\n        });\n        this.closeCommand = this.command.create(() => this.userIdService\n            .takeUserId(true)\n            .pipe(switchMap((uid) => this.userProfileConnector\n            .remove(uid)\n            .pipe(tap(() => this.authService.logout())))));\n        this.titleQuery = this.query.create(() => this.userProfileConnector.getTitles(), {\n            reloadOn: [LanguageSetEvent],\n        });\n    }\n    get() {\n        return this.userAccountService.get();\n    }\n    /**\n     * Updates the user's details.\n     *\n     * @param details User details to be updated.\n     */\n    update(details) {\n        return this.updateCommand.execute({ details });\n    }\n    /**\n     * Closes the user account.\n     */\n    close() {\n        return this.closeCommand.execute(undefined);\n    }\n    /**\n     * Returns titles that can be used for the user profiles.\n     */\n    getTitles() {\n        return this.titleQuery.get().pipe(map((titles) => titles !== null && titles !== void 0 ? titles : []));\n    }\n}\nUserProfileService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileService, deps: [{ token: i1.UserAccountFacade }, { token: i2.AuthService }, { token: UserProfileConnector }, { token: i2.EventService }, { token: i2.UserIdService }, { token: i2.QueryService }, { token: i2.CommandService }], target: i0.ɵɵFactoryTarget.Injectable });\nUserProfileService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.UserAccountFacade }, { type: i2.AuthService }, { type: UserProfileConnector }, { type: i2.EventService }, { type: i2.UserIdService }, { type: i2.QueryService }, { type: i2.CommandService }]; } });\n\nclass UserRegisterService {\n    constructor(userProfile, userConnector, authService, command, store) {\n        this.userProfile = userProfile;\n        this.userConnector = userConnector;\n        this.authService = authService;\n        this.command = command;\n        this.store = store;\n        this.registerCommand = this.command.create(({ user }) => this.userConnector.register(user).pipe(tap(() => {\n            // this is a compatibility mechanism only, to make anonymous consents\n            // management work properly in transitional period (when we move logic\n            // to separate libraries)\n            this.store.dispatch(new UserActions.RegisterUserSuccess());\n        })));\n        this.registerGuestCommand = this.command.create((payload) => this.userConnector.registerGuest(payload.guid, payload.password).pipe(tap((user) => {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.authService.loginWithCredentials(user.uid, payload.password);\n        })));\n    }\n    /**\n     * Register a new user.\n     *\n     * @param submitFormData as UserRegisterFormData\n     */\n    register(user) {\n        return this.registerCommand.execute({ user });\n    }\n    /**\n     * Register a new user from guest.\n     *\n     * @param guid\n     * @param password\n     */\n    registerGuest(guid, password) {\n        return this.registerGuestCommand.execute({ guid, password });\n    }\n    /**\n     * Returns titles that can be used for the user profiles.\n     */\n    getTitles() {\n        return this.userProfile.getTitles();\n    }\n}\nUserRegisterService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserRegisterService, deps: [{ token: UserProfileService }, { token: UserProfileConnector }, { token: i2.AuthService }, { token: i2.CommandService }, { token: i4.Store }], target: i0.ɵɵFactoryTarget.Injectable });\nUserRegisterService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserRegisterService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserRegisterService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: UserProfileService }, { type: UserProfileConnector }, { type: i2.AuthService }, { type: i2.CommandService }, { type: i4.Store }]; } });\n\nconst facadeProviders = [\n    UserEmailService,\n    UserPasswordService,\n    UserProfileService,\n    UserRegisterService,\n    {\n        provide: UserEmailFacade,\n        useExisting: UserEmailService,\n    },\n    {\n        provide: UserPasswordFacade,\n        useExisting: UserPasswordService,\n    },\n    {\n        provide: UserProfileFacade,\n        useExisting: UserProfileService,\n    },\n    {\n        provide: UserRegisterFacade,\n        useExisting: UserRegisterService,\n    },\n];\n\nclass UserProfileCoreModule {\n}\nUserProfileCoreModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileCoreModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nUserProfileCoreModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileCoreModule });\nUserProfileCoreModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileCoreModule, providers: [UserProfileConnector, ...facadeProviders] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: UserProfileCoreModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [UserProfileConnector, ...facadeProviders],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TITLE_NORMALIZER, USER_PROFILE_NORMALIZER, USER_PROFILE_SERIALIZER, USER_SERIALIZER, USER_SIGN_UP_SERIALIZER, UserEmailService, UserPasswordService, UserProfileAdapter, UserProfileConnector, UserProfileCoreModule, UserProfileService, UserRegisterService };\n//# sourceMappingURL=spartacus-user-profile-core.js.map\n"],"mappings":"AAAA,OAAO,KAAKA,EAAE,MAAM,eAAe;AACnC,SAASC,cAAc,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,eAAe;AACpE,OAAO,KAAKC,EAAE,MAAM,iBAAiB;AACrC,SAASC,eAAe,EAAEC,gBAAgB,EAAEC,WAAW,QAAQ,iBAAiB;AAChF,SAASC,SAAS,EAAEC,IAAI,EAAEC,GAAG,EAAEC,GAAG,QAAQ,gBAAgB;AAC1D,OAAO,KAAKC,EAAE,MAAM,8BAA8B;AAClD,SAASC,uBAAuB,QAAQ,8BAA8B;AACtE,OAAO,KAAKC,EAAE,MAAM,aAAa;AACjC,SAASC,eAAe,EAAEC,kBAAkB,EAAEC,iBAAiB,EAAEC,kBAAkB,QAAQ,8BAA8B;AAEzH,MAAMC,uBAAuB,GAAG,IAAIlB,cAAc,CAAC,uBAAuB,CAAC;AAC3E,MAAMmB,uBAAuB,GAAG,IAAInB,cAAc,CAAC,uBAAuB,CAAC;AAC3E,MAAMoB,eAAe,GAAG,IAAIpB,cAAc,CAAC,gBAAgB,CAAC;AAC5D,MAAMqB,uBAAuB,GAAG,IAAIrB,cAAc,CAAC,sBAAsB,CAAC;AAC1E,MAAMsB,gBAAgB,GAAG,IAAItB,cAAc,CAAC,iBAAiB,CAAC;AAE9D,MAAMuB,kBAAkB,CAAC;AAGzB,MAAMC,oBAAoB,CAAC;EACvBC,WAAWA,CAACC,kBAAkB,EAAE;IAC5B,IAAI,CAACA,kBAAkB,GAAGA,kBAAkB;EAChD;EACAC,MAAMA,CAACC,QAAQ,EAAEC,IAAI,EAAE;IACnB,OAAO,IAAI,CAACH,kBAAkB,CAACC,MAAM,CAACC,QAAQ,EAAEC,IAAI,CAAC;EACzD;EACAC,QAAQA,CAACD,IAAI,EAAE;IACX,OAAO,IAAI,CAACH,kBAAkB,CAACI,QAAQ,CAACD,IAAI,CAAC;EACjD;EACAE,aAAaA,CAACC,IAAI,EAAEC,QAAQ,EAAE;IAC1B,OAAO,IAAI,CAACP,kBAAkB,CAACK,aAAa,CAACC,IAAI,EAAEC,QAAQ,CAAC;EAChE;EACAC,0BAA0BA,CAACC,gBAAgB,EAAE;IACzC,OAAO,IAAI,CAACT,kBAAkB,CAACQ,0BAA0B,CAACC,gBAAgB,CAAC;EAC/E;EACAC,aAAaA,CAACC,KAAK,EAAEC,WAAW,EAAE;IAC9B,OAAO,IAAI,CAACZ,kBAAkB,CAACU,aAAa,CAACC,KAAK,EAAEC,WAAW,CAAC;EACpE;EACAC,WAAWA,CAACC,MAAM,EAAEC,eAAe,EAAEC,SAAS,EAAE;IAC5C,OAAO,IAAI,CAAChB,kBAAkB,CAACa,WAAW,CAACC,MAAM,EAAEC,eAAe,EAAEC,SAAS,CAAC;EAClF;EACAC,cAAcA,CAACH,MAAM,EAAEI,WAAW,EAAEN,WAAW,EAAE;IAC7C,OAAO,IAAI,CAACZ,kBAAkB,CAACiB,cAAc,CAACH,MAAM,EAAEI,WAAW,EAAEN,WAAW,CAAC;EACnF;EACAO,MAAMA,CAACL,MAAM,EAAE;IACX,OAAO,IAAI,CAACd,kBAAkB,CAACoB,KAAK,CAACN,MAAM,CAAC;EAChD;EACAO,SAASA,CAAA,EAAG;IACR,OAAO,IAAI,CAACrB,kBAAkB,CAACsB,UAAU,CAAC,CAAC;EAC/C;AACJ;AACAxB,oBAAoB,CAACyB,IAAI,YAAAC,6BAAAC,CAAA;EAAA,YAAAA,CAAA,IAAwF3B,oBAAoB,EAA9BzB,EAAE,CAAAqD,QAAA,CAA8C7B,kBAAkB;AAAA,CAA6C;AACtNC,oBAAoB,CAAC6B,KAAK,kBAD6EtD,EAAE,CAAAuD,kBAAA;EAAAjB,KAAA,EACYb,oBAAoB;EAAA+B,OAAA,EAApB/B,oBAAoB,CAAAyB;AAAA,EAAG;AAC5I;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAFuGzD,EAAE,CAAA0D,iBAAA,CAEdjC,oBAAoB,EAAc,CAAC;IAClHkC,IAAI,EAAEzD;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyD,IAAI,EAAEnC;IAAmB,CAAC,CAAC;EAAE,CAAC;AAAA;AAElF,MAAMoC,gBAAgB,CAAC;EACnBlC,WAAWA,CAACmC,aAAa,EAAEC,oBAAoB,EAAEC,OAAO,EAAE;IACtD,IAAI,CAACF,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACC,oBAAoB,GAAGA,oBAAoB;IAChD,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI,CAACD,OAAO,CAACE,MAAM,CAAEC,OAAO,IAAK,IAAI,CAACL,aAAa,CACnEM,UAAU,CAAC,IAAI,CAAC,CAChBC,IAAI,CAAC5D,SAAS,CAAE6D,GAAG,IAAK,IAAI,CAACP,oBAAoB,CAACtB,WAAW,CAAC6B,GAAG,EAAEH,OAAO,CAAChC,QAAQ,EAAEgC,OAAO,CAACI,MAAM,CAAC,CAAC,CAAC,EAAE;MACzGC,QAAQ,EAAElE,eAAe,CAACmE;IAC9B,CAAC,CAAC;EACN;EACA;AACJ;AACA;AACA;AACA;AACA;EACI5C,MAAMA,CAACM,QAAQ,EAAEoC,MAAM,EAAE;IACrB,OAAO,IAAI,CAACN,aAAa,CAACS,OAAO,CAAC;MAAEvC,QAAQ;MAAEoC;IAAO,CAAC,CAAC;EAC3D;AACJ;AACAV,gBAAgB,CAACV,IAAI,YAAAwB,yBAAAtB,CAAA;EAAA,YAAAA,CAAA,IAAwFQ,gBAAgB,EA3BtB5D,EAAE,CAAAqD,QAAA,CA2BsCjD,EAAE,CAACuE,aAAa,GA3BxD3E,EAAE,CAAAqD,QAAA,CA2BmE5B,oBAAoB,GA3BzFzB,EAAE,CAAAqD,QAAA,CA2BoGjD,EAAE,CAACwE,cAAc;AAAA,CAA6C;AAC3QhB,gBAAgB,CAACN,KAAK,kBA5BiFtD,EAAE,CAAAuD,kBAAA;EAAAjB,KAAA,EA4BQsB,gBAAgB;EAAAJ,OAAA,EAAhBI,gBAAgB,CAAAV;AAAA,EAAG;AACpI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA7BuGzD,EAAE,CAAA0D,iBAAA,CA6BdE,gBAAgB,EAAc,CAAC;IAC9GD,IAAI,EAAEzD;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyD,IAAI,EAAEvD,EAAE,CAACuE;IAAc,CAAC,EAAE;MAAEhB,IAAI,EAAElC;IAAqB,CAAC,EAAE;MAAEkC,IAAI,EAAEvD,EAAE,CAACwE;IAAe,CAAC,CAAC;EAAE,CAAC;AAAA;AAE7I,MAAMC,mBAAmB,CAAC;EACtBnD,WAAWA,CAACoC,oBAAoB,EAAED,aAAa,EAAEE,OAAO,EAAE;IACtD,IAAI,CAACD,oBAAoB,GAAGA,oBAAoB;IAChD,IAAI,CAACD,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACE,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI,CAACD,OAAO,CAACE,MAAM,CAAEC,OAAO,IAAK,IAAI,CAACL,aAAa,CAACM,UAAU,CAAC,IAAI,CAAC,CAACC,IAAI,CAAC3D,IAAI,CAAC,CAAC,CAAC,EAAED,SAAS,CAAE6D,GAAG,IAAK,IAAI,CAACP,oBAAoB,CAAClB,cAAc,CAACyB,GAAG,EAAEH,OAAO,CAACrB,WAAW,EAAEqB,OAAO,CAAC3B,WAAW,CAAC,CAAC,CAAC,CAAC;IACrN,IAAI,CAACuC,YAAY,GAAG,IAAI,CAACf,OAAO,CAACE,MAAM,CAAEC,OAAO,IAAK,IAAI,CAACJ,oBAAoB,CAACzB,aAAa,CAAC6B,OAAO,CAAC5B,KAAK,EAAE4B,OAAO,CAAChC,QAAQ,CAAC,CAAC;IAC9H,IAAI,CAAC6C,iCAAiC,GAAG,IAAI,CAAChB,OAAO,CAACE,MAAM,CAAEC,OAAO,IAAK,IAAI,CAACJ,oBAAoB,CAAC3B,0BAA0B,CAAC+B,OAAO,CAACc,KAAK,CAAC,CAAC;EAClJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIpD,MAAMA,CAACiB,WAAW,EAAEN,WAAW,EAAE;IAC7B,OAAO,IAAI,CAACyB,aAAa,CAACS,OAAO,CAAC;MAAE5B,WAAW;MAAEN;IAAY,CAAC,CAAC;EACnE;EACA;AACJ;AACA;AACA;AACA;AACA;EACI0C,KAAKA,CAAC3C,KAAK,EAAEJ,QAAQ,EAAE;IACnB,OAAO,IAAI,CAAC4C,YAAY,CAACL,OAAO,CAAC;MAAEnC,KAAK;MAAEJ;IAAS,CAAC,CAAC;EACzD;EACA;AACJ;AACA;EACIC,0BAA0BA,CAAC6C,KAAK,EAAE;IAC9B,OAAO,IAAI,CAACD,iCAAiC,CAACN,OAAO,CAAC;MAAEO;IAAM,CAAC,CAAC;EACpE;AACJ;AACAH,mBAAmB,CAAC3B,IAAI,YAAAgC,4BAAA9B,CAAA;EAAA,YAAAA,CAAA,IAAwFyB,mBAAmB,EAtE5B7E,EAAE,CAAAqD,QAAA,CAsE4C5B,oBAAoB,GAtElEzB,EAAE,CAAAqD,QAAA,CAsE6EjD,EAAE,CAACuE,aAAa,GAtE/F3E,EAAE,CAAAqD,QAAA,CAsE0GjD,EAAE,CAACwE,cAAc;AAAA,CAA6C;AACjRC,mBAAmB,CAACvB,KAAK,kBAvE8EtD,EAAE,CAAAuD,kBAAA;EAAAjB,KAAA,EAuEWuC,mBAAmB;EAAArB,OAAA,EAAnBqB,mBAAmB,CAAA3B;AAAA,EAAG;AAC1I;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAxEuGzD,EAAE,CAAA0D,iBAAA,CAwEdmB,mBAAmB,EAAc,CAAC;IACjHlB,IAAI,EAAEzD;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyD,IAAI,EAAElC;IAAqB,CAAC,EAAE;MAAEkC,IAAI,EAAEvD,EAAE,CAACuE;IAAc,CAAC,EAAE;MAAEhB,IAAI,EAAEvD,EAAE,CAACwE;IAAe,CAAC,CAAC;EAAE,CAAC;AAAA;AAE7I,MAAMO,kBAAkB,CAAC;EACrBzD,WAAWA,CAAC0D,kBAAkB,EAAEC,WAAW,EAAEvB,oBAAoB,EAAEwB,YAAY,EAAEzB,aAAa,EAAE0B,KAAK,EAAExB,OAAO,EAAE;IAC5G,IAAI,CAACqB,kBAAkB,GAAGA,kBAAkB;IAC5C,IAAI,CAACC,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACvB,oBAAoB,GAAGA,oBAAoB;IAChD,IAAI,CAACwB,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACzB,aAAa,GAAGA,aAAa;IAClC,IAAI,CAAC0B,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACxB,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI,CAACD,OAAO,CAACE,MAAM,CAAEC,OAAO,IAAK,IAAI,CAACL,aAAa,CAACM,UAAU,CAAC,IAAI,CAAC,CAACC,IAAI,CAAC5D,SAAS,CAAE6D,GAAG,IAAK,IAAI,CAACP,oBAAoB,CAAClC,MAAM,CAACyC,GAAG,EAAEH,OAAO,CAACsB,OAAO,CAAC,CAACpB,IAAI,CAAC1D,GAAG,CAAC,MAAM;MACpL,IAAI,CAAC4E,YAAY,CAACG,QAAQ,CAAC;QAAE3D,IAAI,EAAEoC,OAAO,CAACsB;MAAQ,CAAC,EAAE3E,uBAAuB,CAAC;IAClF,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACH0D,QAAQ,EAAElE,eAAe,CAACmE;IAC9B,CAAC,CAAC;IACF,IAAI,CAACkB,YAAY,GAAG,IAAI,CAAC3B,OAAO,CAACE,MAAM,CAAC,MAAM,IAAI,CAACJ,aAAa,CAC3DM,UAAU,CAAC,IAAI,CAAC,CAChBC,IAAI,CAAC5D,SAAS,CAAE6D,GAAG,IAAK,IAAI,CAACP,oBAAoB,CACjDhB,MAAM,CAACuB,GAAG,CAAC,CACXD,IAAI,CAAC1D,GAAG,CAAC,MAAM,IAAI,CAAC2E,WAAW,CAACM,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,IAAI,CAACC,UAAU,GAAG,IAAI,CAACL,KAAK,CAACtB,MAAM,CAAC,MAAM,IAAI,CAACH,oBAAoB,CAACd,SAAS,CAAC,CAAC,EAAE;MAC7E6C,QAAQ,EAAE,CAACvF,gBAAgB;IAC/B,CAAC,CAAC;EACN;EACAwF,GAAGA,CAAA,EAAG;IACF,OAAO,IAAI,CAACV,kBAAkB,CAACU,GAAG,CAAC,CAAC;EACxC;EACA;AACJ;AACA;AACA;AACA;EACIlE,MAAMA,CAAC4D,OAAO,EAAE;IACZ,OAAO,IAAI,CAACxB,aAAa,CAACS,OAAO,CAAC;MAAEe;IAAQ,CAAC,CAAC;EAClD;EACA;AACJ;AACA;EACIzC,KAAKA,CAAA,EAAG;IACJ,OAAO,IAAI,CAAC2C,YAAY,CAACjB,OAAO,CAACsB,SAAS,CAAC;EAC/C;EACA;AACJ;AACA;EACI/C,SAASA,CAAA,EAAG;IACR,OAAO,IAAI,CAAC4C,UAAU,CAACE,GAAG,CAAC,CAAC,CAAC1B,IAAI,CAACzD,GAAG,CAAEqF,MAAM,IAAKA,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAGA,MAAM,GAAG,EAAE,CAAC,CAAC;EAC1G;AACJ;AACAb,kBAAkB,CAACjC,IAAI,YAAA+C,2BAAA7C,CAAA;EAAA,YAAAA,CAAA,IAAwF+B,kBAAkB,EA3H1BnF,EAAE,CAAAqD,QAAA,CA2H0CzC,EAAE,CAACsF,iBAAiB,GA3HhElG,EAAE,CAAAqD,QAAA,CA2H2EjD,EAAE,CAAC+F,WAAW,GA3H3FnG,EAAE,CAAAqD,QAAA,CA2HsG5B,oBAAoB,GA3H5HzB,EAAE,CAAAqD,QAAA,CA2HuIjD,EAAE,CAACgG,YAAY,GA3HxJpG,EAAE,CAAAqD,QAAA,CA2HmKjD,EAAE,CAACuE,aAAa,GA3HrL3E,EAAE,CAAAqD,QAAA,CA2HgMjD,EAAE,CAACiG,YAAY,GA3HjNrG,EAAE,CAAAqD,QAAA,CA2H4NjD,EAAE,CAACwE,cAAc;AAAA,CAA6C;AACnYO,kBAAkB,CAAC7B,KAAK,kBA5H+EtD,EAAE,CAAAuD,kBAAA;EAAAjB,KAAA,EA4HU6C,kBAAkB;EAAA3B,OAAA,EAAlB2B,kBAAkB,CAAAjC;AAAA,EAAG;AACxI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA7HuGzD,EAAE,CAAA0D,iBAAA,CA6HdyB,kBAAkB,EAAc,CAAC;IAChHxB,IAAI,EAAEzD;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyD,IAAI,EAAE/C,EAAE,CAACsF;IAAkB,CAAC,EAAE;MAAEvC,IAAI,EAAEvD,EAAE,CAAC+F;IAAY,CAAC,EAAE;MAAExC,IAAI,EAAElC;IAAqB,CAAC,EAAE;MAAEkC,IAAI,EAAEvD,EAAE,CAACgG;IAAa,CAAC,EAAE;MAAEzC,IAAI,EAAEvD,EAAE,CAACuE;IAAc,CAAC,EAAE;MAAEhB,IAAI,EAAEvD,EAAE,CAACiG;IAAa,CAAC,EAAE;MAAE1C,IAAI,EAAEvD,EAAE,CAACwE;IAAe,CAAC,CAAC;EAAE,CAAC;AAAA;AAE7P,MAAM0B,mBAAmB,CAAC;EACtB5E,WAAWA,CAAC6E,WAAW,EAAEC,aAAa,EAAEnB,WAAW,EAAEtB,OAAO,EAAE0C,KAAK,EAAE;IACjE,IAAI,CAACF,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACnB,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACtB,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC0C,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,eAAe,GAAG,IAAI,CAAC3C,OAAO,CAACE,MAAM,CAAC,CAAC;MAAEnC;IAAK,CAAC,KAAK,IAAI,CAAC0E,aAAa,CAACzE,QAAQ,CAACD,IAAI,CAAC,CAACsC,IAAI,CAAC1D,GAAG,CAAC,MAAM;MACtG;MACA;MACA;MACA,IAAI,CAAC+F,KAAK,CAAChB,QAAQ,CAAC,IAAIlF,WAAW,CAACoG,mBAAmB,CAAC,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC,CAAC;IACJ,IAAI,CAACC,oBAAoB,GAAG,IAAI,CAAC7C,OAAO,CAACE,MAAM,CAAEC,OAAO,IAAK,IAAI,CAACsC,aAAa,CAACxE,aAAa,CAACkC,OAAO,CAACjC,IAAI,EAAEiC,OAAO,CAAChC,QAAQ,CAAC,CAACkC,IAAI,CAAC1D,GAAG,CAAEoB,IAAI,IAAK;MAC7I;MACA,IAAI,CAACuD,WAAW,CAACwB,oBAAoB,CAAC/E,IAAI,CAACuC,GAAG,EAAEH,OAAO,CAAChC,QAAQ,CAAC;IACrE,CAAC,CAAC,CAAC,CAAC;EACR;EACA;AACJ;AACA;AACA;AACA;EACIH,QAAQA,CAACD,IAAI,EAAE;IACX,OAAO,IAAI,CAAC4E,eAAe,CAACjC,OAAO,CAAC;MAAE3C;IAAK,CAAC,CAAC;EACjD;EACA;AACJ;AACA;AACA;AACA;AACA;EACIE,aAAaA,CAACC,IAAI,EAAEC,QAAQ,EAAE;IAC1B,OAAO,IAAI,CAAC0E,oBAAoB,CAACnC,OAAO,CAAC;MAAExC,IAAI;MAAEC;IAAS,CAAC,CAAC;EAChE;EACA;AACJ;AACA;EACIc,SAASA,CAAA,EAAG;IACR,OAAO,IAAI,CAACuD,WAAW,CAACvD,SAAS,CAAC,CAAC;EACvC;AACJ;AACAsD,mBAAmB,CAACpD,IAAI,YAAA4D,4BAAA1D,CAAA;EAAA,YAAAA,CAAA,IAAwFkD,mBAAmB,EA3K5BtG,EAAE,CAAAqD,QAAA,CA2K4C8B,kBAAkB,GA3KhEnF,EAAE,CAAAqD,QAAA,CA2K2E5B,oBAAoB,GA3KjGzB,EAAE,CAAAqD,QAAA,CA2K4GjD,EAAE,CAAC+F,WAAW,GA3K5HnG,EAAE,CAAAqD,QAAA,CA2KuIjD,EAAE,CAACwE,cAAc,GA3K1J5E,EAAE,CAAAqD,QAAA,CA2KqKvC,EAAE,CAACiG,KAAK;AAAA,CAA6C;AACnUT,mBAAmB,CAAChD,KAAK,kBA5K8EtD,EAAE,CAAAuD,kBAAA;EAAAjB,KAAA,EA4KWgE,mBAAmB;EAAA9C,OAAA,EAAnB8C,mBAAmB,CAAApD;AAAA,EAAG;AAC1I;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA7KuGzD,EAAE,CAAA0D,iBAAA,CA6Kd4C,mBAAmB,EAAc,CAAC;IACjH3C,IAAI,EAAEzD;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyD,IAAI,EAAEwB;IAAmB,CAAC,EAAE;MAAExB,IAAI,EAAElC;IAAqB,CAAC,EAAE;MAAEkC,IAAI,EAAEvD,EAAE,CAAC+F;IAAY,CAAC,EAAE;MAAExC,IAAI,EAAEvD,EAAE,CAACwE;IAAe,CAAC,EAAE;MAAEjB,IAAI,EAAE7C,EAAE,CAACiG;IAAM,CAAC,CAAC;EAAE,CAAC;AAAA;AAE7L,MAAMC,eAAe,GAAG,CACpBpD,gBAAgB,EAChBiB,mBAAmB,EACnBM,kBAAkB,EAClBmB,mBAAmB,EACnB;EACIW,OAAO,EAAElG,eAAe;EACxBmG,WAAW,EAAEtD;AACjB,CAAC,EACD;EACIqD,OAAO,EAAEjG,kBAAkB;EAC3BkG,WAAW,EAAErC;AACjB,CAAC,EACD;EACIoC,OAAO,EAAEhG,iBAAiB;EAC1BiG,WAAW,EAAE/B;AACjB,CAAC,EACD;EACI8B,OAAO,EAAE/F,kBAAkB;EAC3BgG,WAAW,EAAEZ;AACjB,CAAC,CACJ;AAED,MAAMa,qBAAqB,CAAC;AAE5BA,qBAAqB,CAACjE,IAAI,YAAAkE,8BAAAhE,CAAA;EAAA,YAAAA,CAAA,IAAwF+D,qBAAqB;AAAA,CAAkD;AACzLA,qBAAqB,CAACE,IAAI,kBA3M6ErH,EAAE,CAAAsH,gBAAA;EAAA3D,IAAA,EA2MUwD;AAAqB,EAAG;AAC3IA,qBAAqB,CAACI,IAAI,kBA5M6EvH,EAAE,CAAAwH,gBAAA;EAAAC,SAAA,EA4M4C,CAAChG,oBAAoB,EAAE,GAAGuF,eAAe;AAAC,EAAG;AAClM;EAAA,QAAAvD,SAAA,oBAAAA,SAAA,KA7MuGzD,EAAE,CAAA0D,iBAAA,CA6MdyD,qBAAqB,EAAc,CAAC;IACnHxD,IAAI,EAAExD,QAAQ;IACduH,IAAI,EAAE,CAAC;MACCD,SAAS,EAAE,CAAChG,oBAAoB,EAAE,GAAGuF,eAAe;IACxD,CAAC;EACT,CAAC,CAAC;AAAA;;AAEV;AACA;AACA;;AAEA,SAASzF,gBAAgB,EAAEJ,uBAAuB,EAAEC,uBAAuB,EAAEC,eAAe,EAAEC,uBAAuB,EAAEsC,gBAAgB,EAAEiB,mBAAmB,EAAErD,kBAAkB,EAAEC,oBAAoB,EAAE0F,qBAAqB,EAAEhC,kBAAkB,EAAEmB,mBAAmB;AACtQ"},"metadata":{},"sourceType":"module"}