{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { TimeUtils, CART_NORMALIZER, ADDRESS_SERIALIZER, ADDRESS_NORMALIZER, PAYMENT_DETAILS_NORMALIZER, HttpParamsURIEncoder, REPLENISHMENT_ORDER_NORMALIZER, OCC_USER_ID_ANONYMOUS, InterceptorUtil, USE_CLIENT_TOKEN, ORDER_NORMALIZER, provideDefaultConfig } from '@spartacus/core';\nimport * as i1 from '@angular/common/http';\nimport { HttpHeaders, HttpParams } from '@angular/common/http';\nimport { DELIVERY_MODE_NORMALIZER, PAYMENT_TYPE_NORMALIZER, PAYMENT_DETAILS_SERIALIZER, CARD_TYPE_NORMALIZER, REPLENISHMENT_ORDER_FORM_SERIALIZER, CheckoutAdapter, CheckoutDeliveryAdapter, CheckoutPaymentAdapter, PaymentTypeAdapter, CheckoutCostCenterAdapter, CheckoutReplenishmentOrderAdapter } from '@spartacus/checkout/core';\nimport { pluck, map, mergeMap } from 'rxjs/operators';\nimport { CommonModule } from '@angular/common';\nclass OccReplenishmentOrderFormSerializer {\n  convert(source, target) {\n    if (target === undefined) {\n      target = Object.assign({}, source);\n    }\n    if (source.replenishmentStartDate) {\n      target.replenishmentStartDate = this.convertDate(source.replenishmentStartDate);\n    }\n    return target;\n  }\n  /**\n   * Adds the current timestamp (including timezone offset) to a date string in the format YYYY-mm-dd\n   * @Example\n   * Converts 2021-10-15 to 2021-10-15T15:38:05-05:00\n   */\n  convertDate(date) {\n    const localTime = new Date().toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit',\n      hourCycle: 'h23'\n    });\n    return `${date}T${localTime}:00${TimeUtils.getLocalTimezoneOffset()}`;\n  }\n}\nOccReplenishmentOrderFormSerializer.ɵfac = function OccReplenishmentOrderFormSerializer_Factory(t) {\n  return new (t || OccReplenishmentOrderFormSerializer)();\n};\nOccReplenishmentOrderFormSerializer.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccReplenishmentOrderFormSerializer,\n  factory: OccReplenishmentOrderFormSerializer.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccReplenishmentOrderFormSerializer, [{\n    type: Injectable\n  }], null, null);\n})();\nclass OccCheckoutCostCenterAdapter {\n  constructor(http, occEndpoints, converter) {\n    this.http = http;\n    this.occEndpoints = occEndpoints;\n    this.converter = converter;\n  }\n  setCostCenter(userId, cartId, costCenterId) {\n    return this.http.put(this.getSetCartCostCenterEndpoint(userId, cartId, costCenterId), {}).pipe(this.converter.pipeable(CART_NORMALIZER));\n  }\n  getSetCartCostCenterEndpoint(userId, cartId, costCenterId) {\n    return this.occEndpoints.buildUrl('setCartCostCenter', {\n      urlParams: {\n        userId,\n        cartId\n      },\n      queryParams: {\n        costCenterId\n      }\n    });\n  }\n}\nOccCheckoutCostCenterAdapter.ɵfac = function OccCheckoutCostCenterAdapter_Factory(t) {\n  return new (t || OccCheckoutCostCenterAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccCheckoutCostCenterAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccCheckoutCostCenterAdapter,\n  factory: OccCheckoutCostCenterAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccCheckoutCostCenterAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\nclass OccCheckoutDeliveryAdapter {\n  constructor(http, occEndpoints, converter) {\n    this.http = http;\n    this.occEndpoints = occEndpoints;\n    this.converter = converter;\n  }\n  getCreateDeliveryAddressEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('createDeliveryAddress', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  getSetDeliveryAddressEndpoint(userId, cartId, addressId) {\n    return this.occEndpoints.buildUrl('setDeliveryAddress', {\n      urlParams: {\n        userId,\n        cartId\n      },\n      queryParams: {\n        addressId\n      }\n    });\n  }\n  getDeliveryModeEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('deliveryMode', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  getSetDeliveryModeEndpoint(userId, cartId, deliveryModeId) {\n    return this.occEndpoints.buildUrl('setDeliveryMode', {\n      urlParams: {\n        userId,\n        cartId\n      },\n      queryParams: {\n        deliveryModeId\n      }\n    });\n  }\n  getDeliveryModesEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('deliveryModes', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  createAddress(userId, cartId, address) {\n    address = this.converter.convert(address, ADDRESS_SERIALIZER);\n    return this.http.post(this.getCreateDeliveryAddressEndpoint(userId, cartId), address, {\n      headers: new HttpHeaders().set('Content-Type', 'application/json')\n    }).pipe(this.converter.pipeable(ADDRESS_NORMALIZER));\n  }\n  setAddress(userId, cartId, addressId) {\n    return this.http.put(this.getSetDeliveryAddressEndpoint(userId, cartId, addressId), {});\n  }\n  setMode(userId, cartId, deliveryModeId) {\n    return this.http.put(this.getSetDeliveryModeEndpoint(userId, cartId, deliveryModeId), {});\n  }\n  getMode(userId, cartId) {\n    return this.http.get(this.getDeliveryModeEndpoint(userId, cartId)).pipe(this.converter.pipeable(DELIVERY_MODE_NORMALIZER));\n  }\n  getSupportedModes(userId, cartId) {\n    return this.http.get(this.getDeliveryModesEndpoint(userId, cartId)).pipe(pluck('deliveryModes'), map(modes => modes !== null && modes !== void 0 ? modes : []), this.converter.pipeableMany(DELIVERY_MODE_NORMALIZER));\n  }\n}\nOccCheckoutDeliveryAdapter.ɵfac = function OccCheckoutDeliveryAdapter_Factory(t) {\n  return new (t || OccCheckoutDeliveryAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccCheckoutDeliveryAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccCheckoutDeliveryAdapter,\n  factory: OccCheckoutDeliveryAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccCheckoutDeliveryAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\nclass OccCheckoutPaymentTypeAdapter {\n  constructor(http, occEndpoints, converter) {\n    this.http = http;\n    this.occEndpoints = occEndpoints;\n    this.converter = converter;\n  }\n  loadPaymentTypes() {\n    return this.http.get(this.getPaymentTypesEndpoint()).pipe(map(paymentTypeList => {\n      var _a;\n      return (_a = paymentTypeList.paymentTypes) !== null && _a !== void 0 ? _a : [];\n    }), this.converter.pipeableMany(PAYMENT_TYPE_NORMALIZER));\n  }\n  setPaymentType(userId, cartId, paymentType, purchaseOrderNumber) {\n    return this.http.put(this.getSetCartPaymentTypeEndpoint(userId, cartId, paymentType, purchaseOrderNumber), {}).pipe(this.converter.pipeable(CART_NORMALIZER));\n  }\n  getPaymentTypesEndpoint() {\n    return this.occEndpoints.buildUrl('paymentTypes');\n  }\n  getSetCartPaymentTypeEndpoint(userId, cartId, paymentType, purchaseOrderNumber) {\n    const queryParams = purchaseOrderNumber ? {\n      paymentType,\n      purchaseOrderNumber\n    } : {\n      paymentType\n    };\n    return this.occEndpoints.buildUrl('setCartPaymentType', {\n      urlParams: {\n        userId,\n        cartId\n      },\n      queryParams\n    });\n  }\n}\nOccCheckoutPaymentTypeAdapter.ɵfac = function OccCheckoutPaymentTypeAdapter_Factory(t) {\n  return new (t || OccCheckoutPaymentTypeAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccCheckoutPaymentTypeAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccCheckoutPaymentTypeAdapter,\n  factory: OccCheckoutPaymentTypeAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccCheckoutPaymentTypeAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\nclass OccCheckoutPaymentAdapter {\n  constructor(http, occEndpoints, converter) {\n    this.http = http;\n    this.occEndpoints = occEndpoints;\n    this.converter = converter;\n    if (typeof DOMParser !== 'undefined') {\n      this.domparser = new DOMParser();\n    }\n  }\n  getSetPaymentDetailsEndpoint(userId, cartId, paymentDetailsId) {\n    return this.occEndpoints.buildUrl('setCartPaymentDetails', {\n      urlParams: {\n        userId,\n        cartId\n      },\n      queryParams: {\n        paymentDetailsId\n      }\n    });\n  }\n  getPaymentProviderSubInfoEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('paymentProviderSubInfo', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  getCreatePaymentDetailsEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('createPaymentDetails', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  getCardTypesEndpoint() {\n    return this.occEndpoints.buildUrl('cardTypes');\n  }\n  create(userId, cartId, paymentDetails) {\n    paymentDetails = this.converter.convert(paymentDetails, PAYMENT_DETAILS_SERIALIZER);\n    return this.getProviderSubInfo(userId, cartId).pipe(map(data => {\n      const labelsMap = this.convertToMap(data.mappingLabels.entry);\n      return {\n        url: data.postUrl,\n        parameters: this.getParamsForPaymentProvider(paymentDetails, data.parameters.entry, labelsMap),\n        mappingLabels: labelsMap\n      };\n    }), mergeMap(sub => {\n      // create a subscription directly with payment provider\n      return this.createSubWithProvider(sub.url, sub.parameters).pipe(map(response => this.extractPaymentDetailsFromHtml(response)), mergeMap(fromPaymentProvider => {\n        var _a;\n        fromPaymentProvider['defaultPayment'] = (_a = paymentDetails.defaultPayment) !== null && _a !== void 0 ? _a : false;\n        fromPaymentProvider['savePaymentInfo'] = true;\n        return this.createDetailsWithParameters(userId, cartId, fromPaymentProvider).pipe(this.converter.pipeable(PAYMENT_DETAILS_NORMALIZER));\n      }));\n    }));\n  }\n  set(userId, cartId, paymentDetailsId) {\n    return this.http.put(this.getSetPaymentDetailsEndpoint(userId, cartId, paymentDetailsId), {});\n  }\n  loadCardTypes() {\n    return this.http.get(this.getCardTypesEndpoint()).pipe(map(cardTypeList => {\n      var _a;\n      return (_a = cardTypeList.cardTypes) !== null && _a !== void 0 ? _a : [];\n    }), this.converter.pipeableMany(CARD_TYPE_NORMALIZER));\n  }\n  getProviderSubInfo(userId, cartId) {\n    return this.http.get(this.getPaymentProviderSubInfoEndpoint(userId, cartId));\n  }\n  createSubWithProvider(postUrl, parameters) {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded',\n      Accept: 'text/html'\n    });\n    let httpParams = new HttpParams({\n      encoder: new HttpParamsURIEncoder()\n    });\n    Object.keys(parameters).forEach(key => {\n      httpParams = httpParams.append(key, parameters[key]);\n    });\n    return this.http.post(postUrl, httpParams, {\n      headers,\n      responseType: 'text'\n    });\n  }\n  createDetailsWithParameters(userId, cartId, parameters) {\n    let httpParams = new HttpParams({\n      encoder: new HttpParamsURIEncoder()\n    });\n    Object.keys(parameters).forEach(key => {\n      httpParams = httpParams.append(key, parameters[key]);\n    });\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    });\n    return this.http.post(this.getCreatePaymentDetailsEndpoint(userId, cartId), httpParams, {\n      headers\n    });\n  }\n  getParamsForPaymentProvider(paymentDetails, parameters, mappingLabels) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    const params = this.convertToMap(parameters);\n    params[mappingLabels['hybris_account_holder_name']] = paymentDetails.accountHolderName;\n    params[mappingLabels['hybris_card_type']] = (_a = paymentDetails.cardType) === null || _a === void 0 ? void 0 : _a.code;\n    params[mappingLabels['hybris_card_number']] = paymentDetails.cardNumber;\n    if (mappingLabels['hybris_combined_expiry_date'] === 'true') {\n      params[mappingLabels['hybris_card_expiry_date']] = paymentDetails.expiryMonth + mappingLabels['hybris_separator_expiry_date'] + paymentDetails.expiryYear;\n    } else {\n      params[mappingLabels['hybris_card_expiration_month']] = paymentDetails.expiryMonth;\n      params[mappingLabels['hybris_card_expiration_year']] = paymentDetails.expiryYear;\n    }\n    params[mappingLabels['hybris_card_cvn']] = paymentDetails.cvn;\n    // billing address\n    params[mappingLabels['hybris_billTo_country']] = (_c = (_b = paymentDetails.billingAddress) === null || _b === void 0 ? void 0 : _b.country) === null || _c === void 0 ? void 0 : _c.isocode;\n    params[mappingLabels['hybris_billTo_firstname']] = (_d = paymentDetails.billingAddress) === null || _d === void 0 ? void 0 : _d.firstName;\n    params[mappingLabels['hybris_billTo_lastname']] = (_e = paymentDetails.billingAddress) === null || _e === void 0 ? void 0 : _e.lastName;\n    params[mappingLabels['hybris_billTo_street1']] = ((_f = paymentDetails.billingAddress) === null || _f === void 0 ? void 0 : _f.line1) + ' ' + ((_g = paymentDetails.billingAddress) === null || _g === void 0 ? void 0 : _g.line2);\n    params[mappingLabels['hybris_billTo_city']] = (_h = paymentDetails.billingAddress) === null || _h === void 0 ? void 0 : _h.town;\n    if ((_j = paymentDetails.billingAddress) === null || _j === void 0 ? void 0 : _j.region) {\n      params[mappingLabels['hybris_billTo_region']] = paymentDetails.billingAddress.region.isocodeShort;\n    } else {\n      params[mappingLabels['hybris_billTo_region']] = '';\n    }\n    params[mappingLabels['hybris_billTo_postalcode']] = (_k = paymentDetails.billingAddress) === null || _k === void 0 ? void 0 : _k.postalCode;\n    return params;\n  }\n  extractPaymentDetailsFromHtml(html) {\n    const domdoc = this.domparser.parseFromString(html, 'text/xml');\n    const responseForm = domdoc.getElementsByTagName('form')[0];\n    const inputs = responseForm.getElementsByTagName('input');\n    const values = {};\n    for (let i = 0; inputs[i]; i++) {\n      const input = inputs[i];\n      const name = input.getAttribute('name');\n      const value = input.getAttribute('value');\n      if (name && name !== '{}' && value && value !== '') {\n        values[name] = value;\n      }\n    }\n    return values;\n  }\n  convertToMap(paramList) {\n    return paramList.reduce(function (result, item) {\n      const key = item.key;\n      result[key] = item.value;\n      return result;\n    }, {});\n  }\n}\nOccCheckoutPaymentAdapter.ɵfac = function OccCheckoutPaymentAdapter_Factory(t) {\n  return new (t || OccCheckoutPaymentAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccCheckoutPaymentAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccCheckoutPaymentAdapter,\n  factory: OccCheckoutPaymentAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccCheckoutPaymentAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\nclass OccCheckoutReplenishmentOrderAdapter {\n  constructor(http, occEndpoints, converter) {\n    this.http = http;\n    this.occEndpoints = occEndpoints;\n    this.converter = converter;\n  }\n  getScheduleReplenishmentOrderEndpoint(userId, cartId, termsChecked) {\n    return this.occEndpoints.buildUrl('scheduleReplenishmentOrder', {\n      urlParams: {\n        userId\n      },\n      queryParams: {\n        cartId,\n        termsChecked\n      }\n    });\n  }\n  scheduleReplenishmentOrder(cartId, scheduleReplenishmentForm, termsChecked, userId) {\n    scheduleReplenishmentForm = this.converter.convert(scheduleReplenishmentForm, REPLENISHMENT_ORDER_FORM_SERIALIZER);\n    const headers = new HttpHeaders().set('Content-Type', 'application/json');\n    return this.http.post(this.getScheduleReplenishmentOrderEndpoint(userId, cartId, termsChecked.toString()), scheduleReplenishmentForm, {\n      headers\n    }).pipe(this.converter.pipeable(REPLENISHMENT_ORDER_NORMALIZER));\n  }\n}\nOccCheckoutReplenishmentOrderAdapter.ɵfac = function OccCheckoutReplenishmentOrderAdapter_Factory(t) {\n  return new (t || OccCheckoutReplenishmentOrderAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccCheckoutReplenishmentOrderAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccCheckoutReplenishmentOrderAdapter,\n  factory: OccCheckoutReplenishmentOrderAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccCheckoutReplenishmentOrderAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\nclass OccCheckoutAdapter {\n  constructor(http, occEndpoints, converter) {\n    this.http = http;\n    this.occEndpoints = occEndpoints;\n    this.converter = converter;\n  }\n  getPlaceOrderEndpoint(userId, cartId, termsChecked) {\n    return this.occEndpoints.buildUrl('placeOrder', {\n      urlParams: {\n        userId\n      },\n      queryParams: {\n        cartId,\n        termsChecked\n      }\n    });\n  }\n  getRemoveDeliveryAddressEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('removeDeliveryAddress', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  getClearDeliveryModeEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('clearDeliveryMode', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  getLoadCheckoutDetailsEndpoint(userId, cartId) {\n    return this.occEndpoints.buildUrl('loadCheckoutDetails', {\n      urlParams: {\n        userId,\n        cartId\n      }\n    });\n  }\n  placeOrder(userId, cartId, termsChecked) {\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    });\n    if (userId === OCC_USER_ID_ANONYMOUS) {\n      headers = InterceptorUtil.createHeader(USE_CLIENT_TOKEN, true, headers);\n    }\n    return this.http.post(this.getPlaceOrderEndpoint(userId, cartId, termsChecked.toString()), {}, {\n      headers\n    }).pipe(this.converter.pipeable(ORDER_NORMALIZER));\n  }\n  loadCheckoutDetails(userId, cartId) {\n    return this.http.get(this.getLoadCheckoutDetailsEndpoint(userId, cartId));\n  }\n  clearCheckoutDeliveryAddress(userId, cartId) {\n    return this.http.delete(this.getRemoveDeliveryAddressEndpoint(userId, cartId));\n  }\n  clearCheckoutDeliveryMode(userId, cartId) {\n    return this.http.delete(this.getClearDeliveryModeEndpoint(userId, cartId));\n  }\n}\nOccCheckoutAdapter.ɵfac = function OccCheckoutAdapter_Factory(t) {\n  return new (t || OccCheckoutAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccCheckoutAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccCheckoutAdapter,\n  factory: OccCheckoutAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccCheckoutAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\nconst defaultOccCheckoutConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        /* eslint-disable max-len */\n        setDeliveryAddress: 'users/${userId}/carts/${cartId}/addresses/delivery',\n        placeOrder: 'users/${userId}/orders?fields=FULL',\n        cardTypes: 'cardtypes',\n        paymentTypes: 'paymenttypes',\n        createDeliveryAddress: 'users/${userId}/carts/${cartId}/addresses/delivery',\n        removeDeliveryAddress: 'users/${userId}/carts/${cartId}/addresses/delivery',\n        deliveryMode: 'users/${userId}/carts/${cartId}/deliverymode',\n        setDeliveryMode: 'users/${userId}/carts/${cartId}/deliverymode',\n        clearDeliveryMode: 'users/${userId}/carts/${cartId}/deliverymode',\n        deliveryModes: 'users/${userId}/carts/${cartId}/deliverymodes',\n        setCartCostCenter: 'users/${userId}/carts/${cartId}/costcenter?fields=DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),user',\n        setCartPaymentType: 'users/${userId}/carts/${cartId}/paymenttype?fields=DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),user',\n        setCartPaymentDetails: 'users/${userId}/carts/${cartId}/paymentdetails',\n        paymentProviderSubInfo: 'users/${userId}/carts/${cartId}/payment/sop/request?responseUrl=sampleUrl',\n        createPaymentDetails: 'users/${userId}/carts/${cartId}/payment/sop/response',\n        loadCheckoutDetails: 'users/${userId}/carts/${cartId}?fields=deliveryAddress(FULL),deliveryMode,paymentInfo(FULL)'\n        /* eslint-enable */\n      }\n    }\n  }\n};\n\nclass CheckoutOccModule {}\nCheckoutOccModule.ɵfac = function CheckoutOccModule_Factory(t) {\n  return new (t || CheckoutOccModule)();\n};\nCheckoutOccModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: CheckoutOccModule\n});\nCheckoutOccModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [provideDefaultConfig(defaultOccCheckoutConfig), OccReplenishmentOrderFormSerializer, {\n    provide: CheckoutAdapter,\n    useClass: OccCheckoutAdapter\n  }, {\n    provide: CheckoutDeliveryAdapter,\n    useClass: OccCheckoutDeliveryAdapter\n  }, {\n    provide: CheckoutPaymentAdapter,\n    useClass: OccCheckoutPaymentAdapter\n  }, {\n    provide: PaymentTypeAdapter,\n    useClass: OccCheckoutPaymentTypeAdapter\n  }, {\n    provide: CheckoutCostCenterAdapter,\n    useClass: OccCheckoutCostCenterAdapter\n  }, {\n    provide: CheckoutReplenishmentOrderAdapter,\n    useClass: OccCheckoutReplenishmentOrderAdapter\n  }, {\n    provide: REPLENISHMENT_ORDER_FORM_SERIALIZER,\n    useExisting: OccReplenishmentOrderFormSerializer,\n    multi: true\n  }],\n  imports: [[CommonModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CheckoutOccModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule],\n      providers: [provideDefaultConfig(defaultOccCheckoutConfig), OccReplenishmentOrderFormSerializer, {\n        provide: CheckoutAdapter,\n        useClass: OccCheckoutAdapter\n      }, {\n        provide: CheckoutDeliveryAdapter,\n        useClass: OccCheckoutDeliveryAdapter\n      }, {\n        provide: CheckoutPaymentAdapter,\n        useClass: OccCheckoutPaymentAdapter\n      }, {\n        provide: PaymentTypeAdapter,\n        useClass: OccCheckoutPaymentTypeAdapter\n      }, {\n        provide: CheckoutCostCenterAdapter,\n        useClass: OccCheckoutCostCenterAdapter\n      }, {\n        provide: CheckoutReplenishmentOrderAdapter,\n        useClass: OccCheckoutReplenishmentOrderAdapter\n      }, {\n        provide: REPLENISHMENT_ORDER_FORM_SERIALIZER,\n        useExisting: OccReplenishmentOrderFormSerializer,\n        multi: true\n      }]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CheckoutOccModule, OccCheckoutAdapter, OccCheckoutCostCenterAdapter, OccCheckoutDeliveryAdapter, OccCheckoutPaymentAdapter, OccCheckoutPaymentTypeAdapter, OccCheckoutReplenishmentOrderAdapter, OccReplenishmentOrderFormSerializer };\n//# sourceMappingURL=spartacus-checkout-occ.js.map","map":{"version":3,"names":["i0","Injectable","NgModule","i2","TimeUtils","CART_NORMALIZER","ADDRESS_SERIALIZER","ADDRESS_NORMALIZER","PAYMENT_DETAILS_NORMALIZER","HttpParamsURIEncoder","REPLENISHMENT_ORDER_NORMALIZER","OCC_USER_ID_ANONYMOUS","InterceptorUtil","USE_CLIENT_TOKEN","ORDER_NORMALIZER","provideDefaultConfig","i1","HttpHeaders","HttpParams","DELIVERY_MODE_NORMALIZER","PAYMENT_TYPE_NORMALIZER","PAYMENT_DETAILS_SERIALIZER","CARD_TYPE_NORMALIZER","REPLENISHMENT_ORDER_FORM_SERIALIZER","CheckoutAdapter","CheckoutDeliveryAdapter","CheckoutPaymentAdapter","PaymentTypeAdapter","CheckoutCostCenterAdapter","CheckoutReplenishmentOrderAdapter","pluck","map","mergeMap","CommonModule","OccReplenishmentOrderFormSerializer","convert","source","target","undefined","Object","assign","replenishmentStartDate","convertDate","date","localTime","Date","toLocaleTimeString","hour","minute","hourCycle","getLocalTimezoneOffset","ɵfac","OccReplenishmentOrderFormSerializer_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","ngDevMode","ɵsetClassMetadata","type","OccCheckoutCostCenterAdapter","constructor","http","occEndpoints","converter","setCostCenter","userId","cartId","costCenterId","put","getSetCartCostCenterEndpoint","pipe","pipeable","buildUrl","urlParams","queryParams","OccCheckoutCostCenterAdapter_Factory","ɵɵinject","HttpClient","OccEndpointsService","ConverterService","OccCheckoutDeliveryAdapter","getCreateDeliveryAddressEndpoint","getSetDeliveryAddressEndpoint","addressId","getDeliveryModeEndpoint","getSetDeliveryModeEndpoint","deliveryModeId","getDeliveryModesEndpoint","createAddress","address","post","headers","set","setAddress","setMode","getMode","get","getSupportedModes","modes","pipeableMany","OccCheckoutDeliveryAdapter_Factory","OccCheckoutPaymentTypeAdapter","loadPaymentTypes","getPaymentTypesEndpoint","paymentTypeList","_a","paymentTypes","setPaymentType","paymentType","purchaseOrderNumber","getSetCartPaymentTypeEndpoint","OccCheckoutPaymentTypeAdapter_Factory","OccCheckoutPaymentAdapter","DOMParser","domparser","getSetPaymentDetailsEndpoint","paymentDetailsId","getPaymentProviderSubInfoEndpoint","getCreatePaymentDetailsEndpoint","getCardTypesEndpoint","create","paymentDetails","getProviderSubInfo","data","labelsMap","convertToMap","mappingLabels","entry","url","postUrl","parameters","getParamsForPaymentProvider","sub","createSubWithProvider","response","extractPaymentDetailsFromHtml","fromPaymentProvider","defaultPayment","createDetailsWithParameters","loadCardTypes","cardTypeList","cardTypes","Accept","httpParams","encoder","keys","forEach","key","append","responseType","_b","_c","_d","_e","_f","_g","_h","_j","_k","params","accountHolderName","cardType","code","cardNumber","expiryMonth","expiryYear","cvn","billingAddress","country","isocode","firstName","lastName","line1","line2","town","region","isocodeShort","postalCode","html","domdoc","parseFromString","responseForm","getElementsByTagName","inputs","values","i","input","name","getAttribute","value","paramList","reduce","result","item","OccCheckoutPaymentAdapter_Factory","OccCheckoutReplenishmentOrderAdapter","getScheduleReplenishmentOrderEndpoint","termsChecked","scheduleReplenishmentOrder","scheduleReplenishmentForm","toString","OccCheckoutReplenishmentOrderAdapter_Factory","OccCheckoutAdapter","getPlaceOrderEndpoint","getRemoveDeliveryAddressEndpoint","getClearDeliveryModeEndpoint","getLoadCheckoutDetailsEndpoint","placeOrder","createHeader","loadCheckoutDetails","clearCheckoutDeliveryAddress","delete","clearCheckoutDeliveryMode","OccCheckoutAdapter_Factory","defaultOccCheckoutConfig","backend","occ","endpoints","setDeliveryAddress","createDeliveryAddress","removeDeliveryAddress","deliveryMode","setDeliveryMode","clearDeliveryMode","deliveryModes","setCartCostCenter","setCartPaymentType","setCartPaymentDetails","paymentProviderSubInfo","createPaymentDetails","CheckoutOccModule","CheckoutOccModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","provide","useClass","useExisting","multi","imports","args"],"sources":["D:/demo_spartacus/node_modules/@spartacus/checkout/fesm2015/spartacus-checkout-occ.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport * as i2 from '@spartacus/core';\nimport { TimeUtils, CART_NORMALIZER, ADDRESS_SERIALIZER, ADDRESS_NORMALIZER, PAYMENT_DETAILS_NORMALIZER, HttpParamsURIEncoder, REPLENISHMENT_ORDER_NORMALIZER, OCC_USER_ID_ANONYMOUS, InterceptorUtil, USE_CLIENT_TOKEN, ORDER_NORMALIZER, provideDefaultConfig } from '@spartacus/core';\nimport * as i1 from '@angular/common/http';\nimport { HttpHeaders, HttpParams } from '@angular/common/http';\nimport { DELIVERY_MODE_NORMALIZER, PAYMENT_TYPE_NORMALIZER, PAYMENT_DETAILS_SERIALIZER, CARD_TYPE_NORMALIZER, REPLENISHMENT_ORDER_FORM_SERIALIZER, CheckoutAdapter, CheckoutDeliveryAdapter, CheckoutPaymentAdapter, PaymentTypeAdapter, CheckoutCostCenterAdapter, CheckoutReplenishmentOrderAdapter } from '@spartacus/checkout/core';\nimport { pluck, map, mergeMap } from 'rxjs/operators';\nimport { CommonModule } from '@angular/common';\n\nclass OccReplenishmentOrderFormSerializer {\n    convert(source, target) {\n        if (target === undefined) {\n            target = Object.assign({}, source);\n        }\n        if (source.replenishmentStartDate) {\n            target.replenishmentStartDate = this.convertDate(source.replenishmentStartDate);\n        }\n        return target;\n    }\n    /**\n     * Adds the current timestamp (including timezone offset) to a date string in the format YYYY-mm-dd\n     * @Example\n     * Converts 2021-10-15 to 2021-10-15T15:38:05-05:00\n     */\n    convertDate(date) {\n        const localTime = new Date().toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit',\n            hourCycle: 'h23',\n        });\n        return `${date}T${localTime}:00${TimeUtils.getLocalTimezoneOffset()}`;\n    }\n}\nOccReplenishmentOrderFormSerializer.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccReplenishmentOrderFormSerializer, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nOccReplenishmentOrderFormSerializer.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccReplenishmentOrderFormSerializer });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccReplenishmentOrderFormSerializer, decorators: [{\n            type: Injectable\n        }] });\n\nclass OccCheckoutCostCenterAdapter {\n    constructor(http, occEndpoints, converter) {\n        this.http = http;\n        this.occEndpoints = occEndpoints;\n        this.converter = converter;\n    }\n    setCostCenter(userId, cartId, costCenterId) {\n        return this.http\n            .put(this.getSetCartCostCenterEndpoint(userId, cartId, costCenterId), {})\n            .pipe(this.converter.pipeable(CART_NORMALIZER));\n    }\n    getSetCartCostCenterEndpoint(userId, cartId, costCenterId) {\n        return this.occEndpoints.buildUrl('setCartCostCenter', {\n            urlParams: { userId, cartId },\n            queryParams: { costCenterId },\n        });\n    }\n}\nOccCheckoutCostCenterAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutCostCenterAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccCheckoutCostCenterAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutCostCenterAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutCostCenterAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\nclass OccCheckoutDeliveryAdapter {\n    constructor(http, occEndpoints, converter) {\n        this.http = http;\n        this.occEndpoints = occEndpoints;\n        this.converter = converter;\n    }\n    getCreateDeliveryAddressEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('createDeliveryAddress', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n        });\n    }\n    getSetDeliveryAddressEndpoint(userId, cartId, addressId) {\n        return this.occEndpoints.buildUrl('setDeliveryAddress', {\n            urlParams: { userId, cartId },\n            queryParams: { addressId },\n        });\n    }\n    getDeliveryModeEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('deliveryMode', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n        });\n    }\n    getSetDeliveryModeEndpoint(userId, cartId, deliveryModeId) {\n        return this.occEndpoints.buildUrl('setDeliveryMode', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n            queryParams: { deliveryModeId },\n        });\n    }\n    getDeliveryModesEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('deliveryModes', {\n            urlParams: { userId, cartId },\n        });\n    }\n    createAddress(userId, cartId, address) {\n        address = this.converter.convert(address, ADDRESS_SERIALIZER);\n        return this.http\n            .post(this.getCreateDeliveryAddressEndpoint(userId, cartId), address, {\n            headers: new HttpHeaders().set('Content-Type', 'application/json'),\n        })\n            .pipe(this.converter.pipeable(ADDRESS_NORMALIZER));\n    }\n    setAddress(userId, cartId, addressId) {\n        return this.http.put(this.getSetDeliveryAddressEndpoint(userId, cartId, addressId), {});\n    }\n    setMode(userId, cartId, deliveryModeId) {\n        return this.http.put(this.getSetDeliveryModeEndpoint(userId, cartId, deliveryModeId), {});\n    }\n    getMode(userId, cartId) {\n        return this.http\n            .get(this.getDeliveryModeEndpoint(userId, cartId))\n            .pipe(this.converter.pipeable(DELIVERY_MODE_NORMALIZER));\n    }\n    getSupportedModes(userId, cartId) {\n        return this.http\n            .get(this.getDeliveryModesEndpoint(userId, cartId))\n            .pipe(pluck('deliveryModes'), map((modes) => modes !== null && modes !== void 0 ? modes : []), this.converter.pipeableMany(DELIVERY_MODE_NORMALIZER));\n    }\n}\nOccCheckoutDeliveryAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutDeliveryAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccCheckoutDeliveryAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutDeliveryAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutDeliveryAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\nclass OccCheckoutPaymentTypeAdapter {\n    constructor(http, occEndpoints, converter) {\n        this.http = http;\n        this.occEndpoints = occEndpoints;\n        this.converter = converter;\n    }\n    loadPaymentTypes() {\n        return this.http\n            .get(this.getPaymentTypesEndpoint())\n            .pipe(map((paymentTypeList) => { var _a; return (_a = paymentTypeList.paymentTypes) !== null && _a !== void 0 ? _a : []; }), this.converter.pipeableMany(PAYMENT_TYPE_NORMALIZER));\n    }\n    setPaymentType(userId, cartId, paymentType, purchaseOrderNumber) {\n        return this.http\n            .put(this.getSetCartPaymentTypeEndpoint(userId, cartId, paymentType, purchaseOrderNumber), {})\n            .pipe(this.converter.pipeable(CART_NORMALIZER));\n    }\n    getPaymentTypesEndpoint() {\n        return this.occEndpoints.buildUrl('paymentTypes');\n    }\n    getSetCartPaymentTypeEndpoint(userId, cartId, paymentType, purchaseOrderNumber) {\n        const queryParams = purchaseOrderNumber\n            ? { paymentType, purchaseOrderNumber }\n            : { paymentType };\n        return this.occEndpoints.buildUrl('setCartPaymentType', {\n            urlParams: { userId, cartId },\n            queryParams,\n        });\n    }\n}\nOccCheckoutPaymentTypeAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutPaymentTypeAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccCheckoutPaymentTypeAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutPaymentTypeAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutPaymentTypeAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\nclass OccCheckoutPaymentAdapter {\n    constructor(http, occEndpoints, converter) {\n        this.http = http;\n        this.occEndpoints = occEndpoints;\n        this.converter = converter;\n        if (typeof DOMParser !== 'undefined') {\n            this.domparser = new DOMParser();\n        }\n    }\n    getSetPaymentDetailsEndpoint(userId, cartId, paymentDetailsId) {\n        return this.occEndpoints.buildUrl('setCartPaymentDetails', {\n            urlParams: { userId, cartId },\n            queryParams: { paymentDetailsId },\n        });\n    }\n    getPaymentProviderSubInfoEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('paymentProviderSubInfo', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n        });\n    }\n    getCreatePaymentDetailsEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('createPaymentDetails', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n        });\n    }\n    getCardTypesEndpoint() {\n        return this.occEndpoints.buildUrl('cardTypes');\n    }\n    create(userId, cartId, paymentDetails) {\n        paymentDetails = this.converter.convert(paymentDetails, PAYMENT_DETAILS_SERIALIZER);\n        return this.getProviderSubInfo(userId, cartId).pipe(map((data) => {\n            const labelsMap = this.convertToMap(data.mappingLabels.entry);\n            return {\n                url: data.postUrl,\n                parameters: this.getParamsForPaymentProvider(paymentDetails, data.parameters.entry, labelsMap),\n                mappingLabels: labelsMap,\n            };\n        }), mergeMap((sub) => {\n            // create a subscription directly with payment provider\n            return this.createSubWithProvider(sub.url, sub.parameters).pipe(map((response) => this.extractPaymentDetailsFromHtml(response)), mergeMap((fromPaymentProvider) => {\n                var _a;\n                fromPaymentProvider['defaultPayment'] =\n                    (_a = paymentDetails.defaultPayment) !== null && _a !== void 0 ? _a : false;\n                fromPaymentProvider['savePaymentInfo'] = true;\n                return this.createDetailsWithParameters(userId, cartId, fromPaymentProvider).pipe(this.converter.pipeable(PAYMENT_DETAILS_NORMALIZER));\n            }));\n        }));\n    }\n    set(userId, cartId, paymentDetailsId) {\n        return this.http.put(this.getSetPaymentDetailsEndpoint(userId, cartId, paymentDetailsId), {});\n    }\n    loadCardTypes() {\n        return this.http.get(this.getCardTypesEndpoint()).pipe(map((cardTypeList) => { var _a; return (_a = cardTypeList.cardTypes) !== null && _a !== void 0 ? _a : []; }), this.converter.pipeableMany(CARD_TYPE_NORMALIZER));\n    }\n    getProviderSubInfo(userId, cartId) {\n        return this.http.get(this.getPaymentProviderSubInfoEndpoint(userId, cartId));\n    }\n    createSubWithProvider(postUrl, parameters) {\n        const headers = new HttpHeaders({\n            'Content-Type': 'application/x-www-form-urlencoded',\n            Accept: 'text/html',\n        });\n        let httpParams = new HttpParams({ encoder: new HttpParamsURIEncoder() });\n        Object.keys(parameters).forEach((key) => {\n            httpParams = httpParams.append(key, parameters[key]);\n        });\n        return this.http.post(postUrl, httpParams, {\n            headers,\n            responseType: 'text',\n        });\n    }\n    createDetailsWithParameters(userId, cartId, parameters) {\n        let httpParams = new HttpParams({ encoder: new HttpParamsURIEncoder() });\n        Object.keys(parameters).forEach((key) => {\n            httpParams = httpParams.append(key, parameters[key]);\n        });\n        const headers = new HttpHeaders({\n            'Content-Type': 'application/x-www-form-urlencoded',\n        });\n        return this.http.post(this.getCreatePaymentDetailsEndpoint(userId, cartId), httpParams, { headers });\n    }\n    getParamsForPaymentProvider(paymentDetails, parameters, mappingLabels) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const params = this.convertToMap(parameters);\n        params[mappingLabels['hybris_account_holder_name']] =\n            paymentDetails.accountHolderName;\n        params[mappingLabels['hybris_card_type']] = (_a = paymentDetails.cardType) === null || _a === void 0 ? void 0 : _a.code;\n        params[mappingLabels['hybris_card_number']] = paymentDetails.cardNumber;\n        if (mappingLabels['hybris_combined_expiry_date'] === 'true') {\n            params[mappingLabels['hybris_card_expiry_date']] =\n                paymentDetails.expiryMonth +\n                    mappingLabels['hybris_separator_expiry_date'] +\n                    paymentDetails.expiryYear;\n        }\n        else {\n            params[mappingLabels['hybris_card_expiration_month']] =\n                paymentDetails.expiryMonth;\n            params[mappingLabels['hybris_card_expiration_year']] =\n                paymentDetails.expiryYear;\n        }\n        params[mappingLabels['hybris_card_cvn']] = paymentDetails.cvn;\n        // billing address\n        params[mappingLabels['hybris_billTo_country']] =\n            (_c = (_b = paymentDetails.billingAddress) === null || _b === void 0 ? void 0 : _b.country) === null || _c === void 0 ? void 0 : _c.isocode;\n        params[mappingLabels['hybris_billTo_firstname']] =\n            (_d = paymentDetails.billingAddress) === null || _d === void 0 ? void 0 : _d.firstName;\n        params[mappingLabels['hybris_billTo_lastname']] =\n            (_e = paymentDetails.billingAddress) === null || _e === void 0 ? void 0 : _e.lastName;\n        params[mappingLabels['hybris_billTo_street1']] =\n            ((_f = paymentDetails.billingAddress) === null || _f === void 0 ? void 0 : _f.line1) +\n                ' ' +\n                ((_g = paymentDetails.billingAddress) === null || _g === void 0 ? void 0 : _g.line2);\n        params[mappingLabels['hybris_billTo_city']] =\n            (_h = paymentDetails.billingAddress) === null || _h === void 0 ? void 0 : _h.town;\n        if ((_j = paymentDetails.billingAddress) === null || _j === void 0 ? void 0 : _j.region) {\n            params[mappingLabels['hybris_billTo_region']] =\n                paymentDetails.billingAddress.region.isocodeShort;\n        }\n        else {\n            params[mappingLabels['hybris_billTo_region']] = '';\n        }\n        params[mappingLabels['hybris_billTo_postalcode']] =\n            (_k = paymentDetails.billingAddress) === null || _k === void 0 ? void 0 : _k.postalCode;\n        return params;\n    }\n    extractPaymentDetailsFromHtml(html) {\n        const domdoc = this.domparser.parseFromString(html, 'text/xml');\n        const responseForm = domdoc.getElementsByTagName('form')[0];\n        const inputs = responseForm.getElementsByTagName('input');\n        const values = {};\n        for (let i = 0; inputs[i]; i++) {\n            const input = inputs[i];\n            const name = input.getAttribute('name');\n            const value = input.getAttribute('value');\n            if (name && name !== '{}' && value && value !== '') {\n                values[name] = value;\n            }\n        }\n        return values;\n    }\n    convertToMap(paramList) {\n        return paramList.reduce(function (result, item) {\n            const key = item.key;\n            result[key] = item.value;\n            return result;\n        }, {});\n    }\n}\nOccCheckoutPaymentAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutPaymentAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccCheckoutPaymentAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutPaymentAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutPaymentAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\nclass OccCheckoutReplenishmentOrderAdapter {\n    constructor(http, occEndpoints, converter) {\n        this.http = http;\n        this.occEndpoints = occEndpoints;\n        this.converter = converter;\n    }\n    getScheduleReplenishmentOrderEndpoint(userId, cartId, termsChecked) {\n        return this.occEndpoints.buildUrl('scheduleReplenishmentOrder', {\n            urlParams: {\n                userId,\n            },\n            queryParams: { cartId, termsChecked },\n        });\n    }\n    scheduleReplenishmentOrder(cartId, scheduleReplenishmentForm, termsChecked, userId) {\n        scheduleReplenishmentForm = this.converter.convert(scheduleReplenishmentForm, REPLENISHMENT_ORDER_FORM_SERIALIZER);\n        const headers = new HttpHeaders().set('Content-Type', 'application/json');\n        return this.http\n            .post(this.getScheduleReplenishmentOrderEndpoint(userId, cartId, termsChecked.toString()), scheduleReplenishmentForm, { headers })\n            .pipe(this.converter.pipeable(REPLENISHMENT_ORDER_NORMALIZER));\n    }\n}\nOccCheckoutReplenishmentOrderAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutReplenishmentOrderAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccCheckoutReplenishmentOrderAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutReplenishmentOrderAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutReplenishmentOrderAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\nclass OccCheckoutAdapter {\n    constructor(http, occEndpoints, converter) {\n        this.http = http;\n        this.occEndpoints = occEndpoints;\n        this.converter = converter;\n    }\n    getPlaceOrderEndpoint(userId, cartId, termsChecked) {\n        return this.occEndpoints.buildUrl('placeOrder', {\n            urlParams: { userId },\n            queryParams: { cartId, termsChecked },\n        });\n    }\n    getRemoveDeliveryAddressEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('removeDeliveryAddress', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n        });\n    }\n    getClearDeliveryModeEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('clearDeliveryMode', {\n            urlParams: { userId, cartId },\n        });\n    }\n    getLoadCheckoutDetailsEndpoint(userId, cartId) {\n        return this.occEndpoints.buildUrl('loadCheckoutDetails', {\n            urlParams: {\n                userId,\n                cartId,\n            },\n        });\n    }\n    placeOrder(userId, cartId, termsChecked) {\n        let headers = new HttpHeaders({\n            'Content-Type': 'application/x-www-form-urlencoded',\n        });\n        if (userId === OCC_USER_ID_ANONYMOUS) {\n            headers = InterceptorUtil.createHeader(USE_CLIENT_TOKEN, true, headers);\n        }\n        return this.http\n            .post(this.getPlaceOrderEndpoint(userId, cartId, termsChecked.toString()), {}, { headers })\n            .pipe(this.converter.pipeable(ORDER_NORMALIZER));\n    }\n    loadCheckoutDetails(userId, cartId) {\n        return this.http.get(this.getLoadCheckoutDetailsEndpoint(userId, cartId));\n    }\n    clearCheckoutDeliveryAddress(userId, cartId) {\n        return this.http.delete(this.getRemoveDeliveryAddressEndpoint(userId, cartId));\n    }\n    clearCheckoutDeliveryMode(userId, cartId) {\n        return this.http.delete(this.getClearDeliveryModeEndpoint(userId, cartId));\n    }\n}\nOccCheckoutAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccCheckoutAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccCheckoutAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\nconst defaultOccCheckoutConfig = {\n    backend: {\n        occ: {\n            endpoints: {\n                /* eslint-disable max-len */\n                setDeliveryAddress: 'users/${userId}/carts/${cartId}/addresses/delivery',\n                placeOrder: 'users/${userId}/orders?fields=FULL',\n                cardTypes: 'cardtypes',\n                paymentTypes: 'paymenttypes',\n                createDeliveryAddress: 'users/${userId}/carts/${cartId}/addresses/delivery',\n                removeDeliveryAddress: 'users/${userId}/carts/${cartId}/addresses/delivery',\n                deliveryMode: 'users/${userId}/carts/${cartId}/deliverymode',\n                setDeliveryMode: 'users/${userId}/carts/${cartId}/deliverymode',\n                clearDeliveryMode: 'users/${userId}/carts/${cartId}/deliverymode',\n                deliveryModes: 'users/${userId}/carts/${cartId}/deliverymodes',\n                setCartCostCenter: 'users/${userId}/carts/${cartId}/costcenter?fields=DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),user',\n                setCartPaymentType: 'users/${userId}/carts/${cartId}/paymenttype?fields=DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),user',\n                setCartPaymentDetails: 'users/${userId}/carts/${cartId}/paymentdetails',\n                paymentProviderSubInfo: 'users/${userId}/carts/${cartId}/payment/sop/request?responseUrl=sampleUrl',\n                createPaymentDetails: 'users/${userId}/carts/${cartId}/payment/sop/response',\n                loadCheckoutDetails: 'users/${userId}/carts/${cartId}?fields=deliveryAddress(FULL),deliveryMode,paymentInfo(FULL)',\n                /* eslint-enable */\n            },\n        },\n    },\n};\n\nclass CheckoutOccModule {\n}\nCheckoutOccModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CheckoutOccModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nCheckoutOccModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CheckoutOccModule, imports: [CommonModule] });\nCheckoutOccModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CheckoutOccModule, providers: [\n        provideDefaultConfig(defaultOccCheckoutConfig),\n        OccReplenishmentOrderFormSerializer,\n        {\n            provide: CheckoutAdapter,\n            useClass: OccCheckoutAdapter,\n        },\n        {\n            provide: CheckoutDeliveryAdapter,\n            useClass: OccCheckoutDeliveryAdapter,\n        },\n        {\n            provide: CheckoutPaymentAdapter,\n            useClass: OccCheckoutPaymentAdapter,\n        },\n        {\n            provide: PaymentTypeAdapter,\n            useClass: OccCheckoutPaymentTypeAdapter,\n        },\n        {\n            provide: CheckoutCostCenterAdapter,\n            useClass: OccCheckoutCostCenterAdapter,\n        },\n        {\n            provide: CheckoutReplenishmentOrderAdapter,\n            useClass: OccCheckoutReplenishmentOrderAdapter,\n        },\n        {\n            provide: REPLENISHMENT_ORDER_FORM_SERIALIZER,\n            useExisting: OccReplenishmentOrderFormSerializer,\n            multi: true,\n        },\n    ], imports: [[CommonModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CheckoutOccModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    providers: [\n                        provideDefaultConfig(defaultOccCheckoutConfig),\n                        OccReplenishmentOrderFormSerializer,\n                        {\n                            provide: CheckoutAdapter,\n                            useClass: OccCheckoutAdapter,\n                        },\n                        {\n                            provide: CheckoutDeliveryAdapter,\n                            useClass: OccCheckoutDeliveryAdapter,\n                        },\n                        {\n                            provide: CheckoutPaymentAdapter,\n                            useClass: OccCheckoutPaymentAdapter,\n                        },\n                        {\n                            provide: PaymentTypeAdapter,\n                            useClass: OccCheckoutPaymentTypeAdapter,\n                        },\n                        {\n                            provide: CheckoutCostCenterAdapter,\n                            useClass: OccCheckoutCostCenterAdapter,\n                        },\n                        {\n                            provide: CheckoutReplenishmentOrderAdapter,\n                            useClass: OccCheckoutReplenishmentOrderAdapter,\n                        },\n                        {\n                            provide: REPLENISHMENT_ORDER_FORM_SERIALIZER,\n                            useExisting: OccReplenishmentOrderFormSerializer,\n                            multi: true,\n                        },\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CheckoutOccModule, OccCheckoutAdapter, OccCheckoutCostCenterAdapter, OccCheckoutDeliveryAdapter, OccCheckoutPaymentAdapter, OccCheckoutPaymentTypeAdapter, OccCheckoutReplenishmentOrderAdapter, OccReplenishmentOrderFormSerializer };\n//# sourceMappingURL=spartacus-checkout-occ.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}