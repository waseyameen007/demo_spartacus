{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { STORE_FINDER_SEARCH_PAGE_NORMALIZER, STORE_COUNT_NORMALIZER, StoreFinderAdapter } from '@spartacus/storefinder/core';\nimport * as i2 from '@spartacus/core';\nimport { POINT_OF_SERVICE_NORMALIZER, provideDefaultConfig } from '@spartacus/core';\nimport * as i1 from '@angular/common/http';\nclass OccStoreFinderAdapter {\n  constructor(http, occEndpointsService, converterService) {\n    this.http = http;\n    this.occEndpointsService = occEndpointsService;\n    this.converterService = converterService;\n  }\n  search(query, searchConfig, longitudeLatitude, radius) {\n    return this.callOccFindStores(query, searchConfig, longitudeLatitude, radius).pipe(this.converterService.pipeable(STORE_FINDER_SEARCH_PAGE_NORMALIZER));\n  }\n  loadCounts() {\n    return this.http.get(this.occEndpointsService.buildUrl('storescounts')).pipe(map(({\n      countriesAndRegionsStoreCount\n    }) => countriesAndRegionsStoreCount), this.converterService.pipeableMany(STORE_COUNT_NORMALIZER));\n  }\n  load(storeId) {\n    return this.http.get(this.occEndpointsService.buildUrl('store', {\n      urlParams: {\n        storeId\n      }\n    })).pipe(this.converterService.pipeable(POINT_OF_SERVICE_NORMALIZER));\n  }\n  callOccFindStores(query, searchConfig, longitudeLatitude, radius) {\n    const params = {};\n    if (longitudeLatitude) {\n      params['longitude'] = String(longitudeLatitude.longitude);\n      params['latitude'] = String(longitudeLatitude.latitude);\n      params['radius'] = String(radius);\n    } else {\n      params['query'] = query;\n    }\n    if (searchConfig.pageSize) {\n      params['pageSize'] = String(searchConfig.pageSize);\n    }\n    if (searchConfig.currentPage) {\n      params['currentPage'] = String(searchConfig.currentPage);\n    }\n    if (searchConfig.sort) {\n      params['sort'] = searchConfig.sort;\n    }\n    return this.http.get(this.occEndpointsService.buildUrl('stores', {\n      queryParams: params\n    }));\n  }\n}\nOccStoreFinderAdapter.ɵfac = function OccStoreFinderAdapter_Factory(t) {\n  return new (t || OccStoreFinderAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\nOccStoreFinderAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccStoreFinderAdapter,\n  factory: OccStoreFinderAdapter.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccStoreFinderAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})();\n\n// Imported for side effects (module augmentation)\n\nconst defaultOccStoreFinderConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        store: 'stores/${storeId}?fields=FULL',\n        stores: 'stores?fields=stores(name,displayName,formattedDistance,openingHours(weekDayOpeningList(FULL),specialDayOpeningList(FULL)),geoPoint(latitude,longitude),address(line1,line2,town,region(FULL),postalCode,phone,country,email), features),pagination(DEFAULT),sorts(DEFAULT)',\n        storescounts: 'stores/storescounts'\n      }\n    }\n  }\n};\nclass StoreFinderOccModule {}\nStoreFinderOccModule.ɵfac = function StoreFinderOccModule_Factory(t) {\n  return new (t || StoreFinderOccModule)();\n};\nStoreFinderOccModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StoreFinderOccModule\n});\nStoreFinderOccModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [provideDefaultConfig(defaultOccStoreFinderConfig), {\n    provide: StoreFinderAdapter,\n    useClass: OccStoreFinderAdapter\n  }]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StoreFinderOccModule, [{\n    type: NgModule,\n    args: [{\n      providers: [provideDefaultConfig(defaultOccStoreFinderConfig), {\n        provide: StoreFinderAdapter,\n        useClass: OccStoreFinderAdapter\n      }]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { OccStoreFinderAdapter, StoreFinderOccModule };\n//# sourceMappingURL=spartacus-storefinder-occ.js.map","map":{"version":3,"names":["i0","Injectable","NgModule","map","STORE_FINDER_SEARCH_PAGE_NORMALIZER","STORE_COUNT_NORMALIZER","StoreFinderAdapter","i2","POINT_OF_SERVICE_NORMALIZER","provideDefaultConfig","i1","OccStoreFinderAdapter","constructor","http","occEndpointsService","converterService","search","query","searchConfig","longitudeLatitude","radius","callOccFindStores","pipe","pipeable","loadCounts","get","buildUrl","countriesAndRegionsStoreCount","pipeableMany","load","storeId","urlParams","params","String","longitude","latitude","pageSize","currentPage","sort","queryParams","ɵfac","OccStoreFinderAdapter_Factory","t","ɵɵinject","HttpClient","OccEndpointsService","ConverterService","ɵprov","ɵɵdefineInjectable","token","factory","ngDevMode","ɵsetClassMetadata","type","defaultOccStoreFinderConfig","backend","occ","endpoints","store","stores","storescounts","StoreFinderOccModule","StoreFinderOccModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","provide","useClass","args"],"sources":["D:/demo_spartacus/node_modules/@spartacus/storefinder/fesm2015/spartacus-storefinder-occ.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { STORE_FINDER_SEARCH_PAGE_NORMALIZER, STORE_COUNT_NORMALIZER, StoreFinderAdapter } from '@spartacus/storefinder/core';\nimport * as i2 from '@spartacus/core';\nimport { POINT_OF_SERVICE_NORMALIZER, provideDefaultConfig } from '@spartacus/core';\nimport * as i1 from '@angular/common/http';\n\nclass OccStoreFinderAdapter {\n    constructor(http, occEndpointsService, converterService) {\n        this.http = http;\n        this.occEndpointsService = occEndpointsService;\n        this.converterService = converterService;\n    }\n    search(query, searchConfig, longitudeLatitude, radius) {\n        return this.callOccFindStores(query, searchConfig, longitudeLatitude, radius).pipe(this.converterService.pipeable(STORE_FINDER_SEARCH_PAGE_NORMALIZER));\n    }\n    loadCounts() {\n        return this.http\n            .get(this.occEndpointsService.buildUrl('storescounts'))\n            .pipe(map(({ countriesAndRegionsStoreCount }) => countriesAndRegionsStoreCount), this.converterService.pipeableMany(STORE_COUNT_NORMALIZER));\n    }\n    load(storeId) {\n        return this.http\n            .get(this.occEndpointsService.buildUrl('store', { urlParams: { storeId } }))\n            .pipe(this.converterService.pipeable(POINT_OF_SERVICE_NORMALIZER));\n    }\n    callOccFindStores(query, searchConfig, longitudeLatitude, radius) {\n        const params = {};\n        if (longitudeLatitude) {\n            params['longitude'] = String(longitudeLatitude.longitude);\n            params['latitude'] = String(longitudeLatitude.latitude);\n            params['radius'] = String(radius);\n        }\n        else {\n            params['query'] = query;\n        }\n        if (searchConfig.pageSize) {\n            params['pageSize'] = String(searchConfig.pageSize);\n        }\n        if (searchConfig.currentPage) {\n            params['currentPage'] = String(searchConfig.currentPage);\n        }\n        if (searchConfig.sort) {\n            params['sort'] = searchConfig.sort;\n        }\n        return this.http.get(this.occEndpointsService.buildUrl('stores', { queryParams: params }));\n    }\n}\nOccStoreFinderAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccStoreFinderAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccStoreFinderAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccStoreFinderAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccStoreFinderAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\n// Imported for side effects (module augmentation)\n\nconst defaultOccStoreFinderConfig = {\n    backend: {\n        occ: {\n            endpoints: {\n                store: 'stores/${storeId}?fields=FULL',\n                stores: 'stores?fields=stores(name,displayName,formattedDistance,openingHours(weekDayOpeningList(FULL),specialDayOpeningList(FULL)),geoPoint(latitude,longitude),address(line1,line2,town,region(FULL),postalCode,phone,country,email), features),pagination(DEFAULT),sorts(DEFAULT)',\n                storescounts: 'stores/storescounts',\n            },\n        },\n    },\n};\n\nclass StoreFinderOccModule {\n}\nStoreFinderOccModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nStoreFinderOccModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule });\nStoreFinderOccModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule, providers: [\n        provideDefaultConfig(defaultOccStoreFinderConfig),\n        { provide: StoreFinderAdapter, useClass: OccStoreFinderAdapter },\n    ] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [\n                        provideDefaultConfig(defaultOccStoreFinderConfig),\n                        { provide: StoreFinderAdapter, useClass: OccStoreFinderAdapter },\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { OccStoreFinderAdapter, StoreFinderOccModule };\n//# sourceMappingURL=spartacus-storefinder-occ.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}