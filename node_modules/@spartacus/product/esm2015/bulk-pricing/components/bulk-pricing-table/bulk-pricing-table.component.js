import { Component } from '@angular/core';
import { switchMap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/core";
import * as i2 from "@spartacus/product/bulk-pricing/core";
import * as i3 from "@angular/common";
export class BulkPricingTableComponent {
    constructor(routingService, bulkPricingService) {
        this.routingService = routingService;
        this.bulkPricingService = bulkPricingService;
        this.PRODUCT_KEY = 'productCode';
    }
    ngOnInit() {
        this.priceTiers$ = this.getPrices();
    }
    formatQuantity(tier) {
        let formattedQuantityRange = '';
        if (!tier.maxQuantity) {
            formattedQuantityRange = tier.minQuantity + '+';
        }
        else {
            formattedQuantityRange = tier.minQuantity + ' - ' + tier.maxQuantity;
        }
        return formattedQuantityRange;
    }
    getPrices() {
        return this.routingService.getRouterState().pipe(switchMap((state) => {
            const productCode = state.state.params[this.PRODUCT_KEY];
            return this.bulkPricingService.getBulkPrices(productCode);
        }));
    }
}
BulkPricingTableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: BulkPricingTableComponent, deps: [{ token: i1.RoutingService }, { token: i2.BulkPricingService }], target: i0.ɵɵFactoryTarget.Component });
BulkPricingTableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.0.5", type: BulkPricingTableComponent, selector: "cx-bulk-pricing-table", ngImport: i0, template: "<ng-container *ngIf=\"priceTiers$ | async as priceTiers\">\n  <div class=\"container\" *ngIf=\"priceTiers.length > 0\">\n    <table class=\"table\">\n      <thead class=\"thead-light\">\n        <tr>\n          <th scope=\"col\">{{ 'bulkPricingTable.quantity' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.price' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.discount' | cxTranslate }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let tier of priceTiers\">\n          <td>{{ formatQuantity(tier) }}</td>\n          <td>{{ tier.formattedValue }}</td>\n          <td>{{ tier.formattedDiscount }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</ng-container>\n", directives: [{ type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], pipes: { "async": i3.AsyncPipe, "cxTranslate": i1.TranslatePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: BulkPricingTableComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'cx-bulk-pricing-table',
                    templateUrl: './bulk-pricing-table.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.RoutingService }, { type: i2.BulkPricingService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVsay1wcmljaW5nLXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmUtbGlicy9wcm9kdWN0L2J1bGstcHJpY2luZy9jb21wb25lbnRzL2J1bGstcHJpY2luZy10YWJsZS9idWxrLXByaWNpbmctdGFibGUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL3Byb2R1Y3QvYnVsay1wcmljaW5nL2NvbXBvbmVudHMvYnVsay1wcmljaW5nLXRhYmxlL2J1bGstcHJpY2luZy10YWJsZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBS2xELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7QUFNM0MsTUFBTSxPQUFPLHlCQUF5QjtJQUtwQyxZQUNZLGNBQThCLEVBQzlCLGtCQUFzQztRQUR0QyxtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFvQjtRQU4vQixnQkFBVyxHQUFHLGFBQWEsQ0FBQztJQU81QyxDQUFDO0lBRUosUUFBUTtRQUNOLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxjQUFjLENBQUMsSUFBZTtRQUM1QixJQUFJLHNCQUFzQixHQUFHLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNyQixzQkFBc0IsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQztTQUNqRDthQUFNO1lBQ0wsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztTQUN0RTtRQUNELE9BQU8sc0JBQXNCLENBQUM7SUFDaEMsQ0FBQztJQUVELFNBQVM7UUFDUCxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLENBQUMsSUFBSSxDQUM5QyxTQUFTLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUNsQixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDekQsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDOztzSEEvQlUseUJBQXlCOzBHQUF6Qix5QkFBeUIsNkRDWHRDLGt2QkFvQkE7MkZEVGEseUJBQXlCO2tCQUpyQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSx1QkFBdUI7b0JBQ2pDLFdBQVcsRUFBRSxxQ0FBcUM7aUJBQ25EIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJ1bGtQcmljaW5nU2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvcHJvZHVjdC9idWxrLXByaWNpbmcvY29yZSc7XG5pbXBvcnQgeyBSb3V0aW5nU2VydmljZSB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQgeyBCdWxrUHJpY2UgfSBmcm9tICdAc3BhcnRhY3VzL3Byb2R1Y3QvYnVsay1wcmljaW5nL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1idWxrLXByaWNpbmctdGFibGUnLFxuICB0ZW1wbGF0ZVVybDogJy4vYnVsay1wcmljaW5nLXRhYmxlLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgQnVsa1ByaWNpbmdUYWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIHByb3RlY3RlZCByZWFkb25seSBQUk9EVUNUX0tFWSA9ICdwcm9kdWN0Q29kZSc7XG5cbiAgcHJpY2VUaWVycyQ6IE9ic2VydmFibGU8QnVsa1ByaWNlW10gfCB1bmRlZmluZWQ+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCByb3V0aW5nU2VydmljZTogUm91dGluZ1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGJ1bGtQcmljaW5nU2VydmljZTogQnVsa1ByaWNpbmdTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnByaWNlVGllcnMkID0gdGhpcy5nZXRQcmljZXMoKTtcbiAgfVxuXG4gIGZvcm1hdFF1YW50aXR5KHRpZXI6IEJ1bGtQcmljZSk6IHN0cmluZyB7XG4gICAgbGV0IGZvcm1hdHRlZFF1YW50aXR5UmFuZ2UgPSAnJztcbiAgICBpZiAoIXRpZXIubWF4UXVhbnRpdHkpIHtcbiAgICAgIGZvcm1hdHRlZFF1YW50aXR5UmFuZ2UgPSB0aWVyLm1pblF1YW50aXR5ICsgJysnO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtYXR0ZWRRdWFudGl0eVJhbmdlID0gdGllci5taW5RdWFudGl0eSArICcgLSAnICsgdGllci5tYXhRdWFudGl0eTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdHRlZFF1YW50aXR5UmFuZ2U7XG4gIH1cblxuICBnZXRQcmljZXMoKTogT2JzZXJ2YWJsZTxCdWxrUHJpY2VbXSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnJvdXRpbmdTZXJ2aWNlLmdldFJvdXRlclN0YXRlKCkucGlwZShcbiAgICAgIHN3aXRjaE1hcCgoc3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgcHJvZHVjdENvZGUgPSBzdGF0ZS5zdGF0ZS5wYXJhbXNbdGhpcy5QUk9EVUNUX0tFWV07XG4gICAgICAgIHJldHVybiB0aGlzLmJ1bGtQcmljaW5nU2VydmljZS5nZXRCdWxrUHJpY2VzKHByb2R1Y3RDb2RlKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cInByaWNlVGllcnMkIHwgYXN5bmMgYXMgcHJpY2VUaWVyc1wiPlxuICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCIgKm5nSWY9XCJwcmljZVRpZXJzLmxlbmd0aCA+IDBcIj5cbiAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZVwiPlxuICAgICAgPHRoZWFkIGNsYXNzPVwidGhlYWQtbGlnaHRcIj5cbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPnt7ICdidWxrUHJpY2luZ1RhYmxlLnF1YW50aXR5JyB8IGN4VHJhbnNsYXRlIH19PC90aD5cbiAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj57eyAnYnVsa1ByaWNpbmdUYWJsZS5wcmljZScgfCBjeFRyYW5zbGF0ZSB9fTwvdGg+XG4gICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+e3sgJ2J1bGtQcmljaW5nVGFibGUuZGlzY291bnQnIHwgY3hUcmFuc2xhdGUgfX08L3RoPlxuICAgICAgICA8L3RyPlxuICAgICAgPC90aGVhZD5cbiAgICAgIDx0Ym9keT5cbiAgICAgICAgPHRyICpuZ0Zvcj1cImxldCB0aWVyIG9mIHByaWNlVGllcnNcIj5cbiAgICAgICAgICA8dGQ+e3sgZm9ybWF0UXVhbnRpdHkodGllcikgfX08L3RkPlxuICAgICAgICAgIDx0ZD57eyB0aWVyLmZvcm1hdHRlZFZhbHVlIH19PC90ZD5cbiAgICAgICAgICA8dGQ+e3sgdGllci5mb3JtYXR0ZWREaXNjb3VudCB9fTwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICA8L3Rib2R5PlxuICAgIDwvdGFibGU+XG4gIDwvZGl2PlxuPC9uZy1jb250YWluZXI+XG4iXX0=