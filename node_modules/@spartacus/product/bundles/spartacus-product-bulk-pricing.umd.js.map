{"version":3,"file":"spartacus-product-bulk-pricing.umd.js","sources":["../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.component.ts","../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.component.html","../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.module.ts","../../../feature-libs/product/bulk-pricing/occ/config/default-occ-bulk-pricing-config.ts","../../../feature-libs/product/bulk-pricing/occ/bulk-pricing-occ.module.ts","../../../feature-libs/product/bulk-pricing/bulk-pricing.module.ts","../../../feature-libs/product/bulk-pricing/spartacus-product-bulk-pricing.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BulkPricingService } from '@spartacus/product/bulk-pricing/core';\nimport { RoutingService } from '@spartacus/core';\nimport { BulkPrice } from '@spartacus/product/bulk-pricing/core';\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-bulk-pricing-table',\n  templateUrl: './bulk-pricing-table.component.html',\n})\nexport class BulkPricingTableComponent implements OnInit {\n  protected readonly PRODUCT_KEY = 'productCode';\n\n  priceTiers$: Observable<BulkPrice[] | undefined>;\n\n  constructor(\n    protected routingService: RoutingService,\n    protected bulkPricingService: BulkPricingService\n  ) {}\n\n  ngOnInit() {\n    this.priceTiers$ = this.getPrices();\n  }\n\n  formatQuantity(tier: BulkPrice): string {\n    let formattedQuantityRange = '';\n    if (!tier.maxQuantity) {\n      formattedQuantityRange = tier.minQuantity + '+';\n    } else {\n      formattedQuantityRange = tier.minQuantity + ' - ' + tier.maxQuantity;\n    }\n    return formattedQuantityRange;\n  }\n\n  getPrices(): Observable<BulkPrice[] | undefined> {\n    return this.routingService.getRouterState().pipe(\n      switchMap((state) => {\n        const productCode = state.state.params[this.PRODUCT_KEY];\n        return this.bulkPricingService.getBulkPrices(productCode);\n      })\n    );\n  }\n}\n","<ng-container *ngIf=\"priceTiers$ | async as priceTiers\">\n  <div class=\"container\" *ngIf=\"priceTiers.length > 0\">\n    <table class=\"table\">\n      <thead class=\"thead-light\">\n        <tr>\n          <th scope=\"col\">{{ 'bulkPricingTable.quantity' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.price' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.discount' | cxTranslate }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let tier of priceTiers\">\n          <td>{{ formatQuantity(tier) }}</td>\n          <td>{{ tier.formattedValue }}</td>\n          <td>{{ tier.formattedDiscount }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { SpinnerModule } from '@spartacus/storefront';\nimport { BulkPricingTableComponent } from './bulk-pricing-table.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    SpinnerModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        BulkPricingTableComponent: {\n          component: BulkPricingTableComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BulkPricingTableComponent],\n  exports: [BulkPricingTableComponent],\n})\nexport class BulkPricingTableModule {}\n","import { OccConfig } from '@spartacus/core';\n\nexport const defaultOccBulkPricingConfig: OccConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        product: {\n          bulkPrices:\n            'orgProducts/${productCode}?fields=price(DEFAULT),volumePrices(FULL)',\n        },\n      },\n    },\n  },\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultOccBulkPricingConfig } from './config/default-occ-bulk-pricing-config';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [provideDefaultConfig(defaultOccBulkPricingConfig)],\n})\nexport class BulkPricingOccModule {}\n","import { NgModule } from '@angular/core';\nimport { BulkPricingTableModule } from './components/bulk-pricing-table/bulk-pricing-table.module';\nimport { BulkPricingOccModule } from './occ/bulk-pricing-occ.module';\n\n@NgModule({\n  imports: [BulkPricingOccModule, BulkPricingTableModule],\n})\nexport class BulkPricingModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["switchMap","Component","CommonModule","I18nModule","SpinnerModule","ConfigModule","NgModule","provideDefaultConfig"],"mappings":"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"}