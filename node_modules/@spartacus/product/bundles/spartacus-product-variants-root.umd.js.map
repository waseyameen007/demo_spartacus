{"version":3,"file":"spartacus-product-variants-root.umd.js","sources":["../../../feature-libs/product/variants/root/feature-name.ts","../../../feature-libs/product/variants/root/components/variant-style-icons/product-variant-style-icons.component.ts","../../../feature-libs/product/variants/root/components/variant-style-icons/product-variant-style-icons.component.html","../../../feature-libs/product/variants/root/components/variant-style-icons/product-variant-style-icons.module.ts","../../../feature-libs/product/variants/root/product-variants-root.module.ts","../../../feature-libs/product/variants/root/spartacus-product-variants-root.ts"],"sourcesContent":["export const PRODUCT_VARIANTS_FEATURE = 'productVariants';\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n} from '@angular/core';\nimport {\n  OccConfig,\n  Product,\n  VariantOption,\n  VariantOptionQualifier,\n  VariantQualifier,\n} from '@spartacus/core';\nimport {\n  ProductListItemContext,\n  ProductListOutlets,\n} from '@spartacus/storefront';\nimport { EMPTY, Observable, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'cx-variant-style-icons',\n  templateUrl: './product-variant-style-icons.component.html',\n  styleUrls: ['./product-variant-style-icons.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductVariantStyleIconsComponent implements OnInit, OnDestroy {\n  constructor(\n    private config: OccConfig,\n    @Optional()\n    protected productListItemContext?: ProductListItemContext\n  ) {}\n\n  protected subscriptions = new Subscription();\n  readonly ProductListOutlets = ProductListOutlets;\n  readonly product$: Observable<Product> =\n    this.productListItemContext?.product$ ?? EMPTY;\n\n  @Input()\n  variants: VariantOption[];\n\n  variantNames: { [key: string]: string } = {};\n\n  ngOnInit() {\n    this.setVariantsNames();\n\n    this.subscriptions.add(\n      this.product$.subscribe((product: Product) => {\n        if (product.variantOptions && product.variantOptions.length) {\n          this.variants = product.variantOptions;\n          this.setVariantsNames();\n        }\n      })\n    );\n  }\n\n  private setVariantsNames() {\n    this.variants?.forEach((variant) => {\n      if (variant.code && variant.variantOptionQualifiers) {\n        this.variantNames[variant.code] =\n          this.getVariantName(variant.variantOptionQualifiers) || '';\n      }\n    });\n  }\n\n  getVariantThumbnailUrl(\n    variantOptionQualifiers: VariantOptionQualifier[]\n  ): string {\n    const thumbnail = variantOptionQualifiers.find(\n      (item) => item.qualifier === VariantQualifier.THUMBNAIL\n    );\n    return thumbnail\n      ? `${this.config?.backend?.occ?.baseUrl}${thumbnail.image?.url}`\n      : '';\n  }\n\n  private getVariantName(\n    variantOptionQualifiers: VariantOptionQualifier[]\n  ): string | undefined {\n    const rollupProperty = variantOptionQualifiers.find(\n      (item) => item.qualifier === VariantQualifier.ROLLUP_PROPERTY\n    );\n    const property = rollupProperty\n      ? variantOptionQualifiers.find(\n          (item) => item.qualifier === rollupProperty.value\n        )\n      : null;\n    return property ? property.value : '';\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<ul class=\"variant-list\" *ngIf=\"variants && variants.length\">\n  <li *ngFor=\"let v of variants\">\n    <img\n      [attr.src]=\"getVariantThumbnailUrl(v.variantOptionQualifiers)\"\n      [attr.title]=\"variantNames[v.code]\"\n      [attr.alt]=\"variantNames[v.code]\"\n    />\n  </li>\n</ul>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { UrlModule, I18nModule } from '@spartacus/core';\nimport { ProductVariantStyleIconsComponent } from './product-variant-style-icons.component';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [ProductVariantStyleIconsComponent],\n  exports: [ProductVariantStyleIconsComponent],\n})\nexport class ProductVariantStyleIconsModule {}\n","import { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { PRODUCT_VARIANTS_FEATURE } from './feature-name';\nimport {\n  ProductListOutlets,\n  OutletPosition,\n  provideOutlet,\n} from '@spartacus/storefront';\nimport { ProductVariantStyleIconsComponent } from './components/variant-style-icons/product-variant-style-icons.component';\nimport { ProductVariantStyleIconsModule } from './components/variant-style-icons/product-variant-style-icons.module';\n\n// TODO: Inline this factory when we start releasing Ivy compiled libraries\nexport function defaultProductVariantsComponentsConfig(): CmsConfig {\n  const config: CmsConfig = {\n    featureModules: {\n      [PRODUCT_VARIANTS_FEATURE]: {\n        cmsComponents: ['ProductVariantSelectorComponent'],\n      },\n    },\n  };\n\n  return config;\n}\n\n@NgModule({\n  imports: [ProductVariantStyleIconsModule],\n  providers: [\n    provideDefaultConfigFactory(defaultProductVariantsComponentsConfig),\n    provideOutlet({\n      id: ProductListOutlets.ITEM_DETAILS,\n      position: OutletPosition.AFTER,\n      component: ProductVariantStyleIconsComponent,\n    }),\n  ],\n})\nexport class ProductVariantsRootModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["Subscription","ProductListOutlets","EMPTY","VariantQualifier","Component","ChangeDetectionStrategy","Optional","Input","CommonModule","RouterModule","UrlModule","I18nModule","NgModule","provideDefaultConfigFactory","provideOutlet","OutletPosition"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAa,wBAAwB,GAAG;;;QC4BtC,2CACU,MAAiB,EAEf,sBAA+C;;YAFjD,WAAM,GAAN,MAAM,CAAW;YAEf,2BAAsB,GAAtB,sBAAsB,CAAyB;YAGjD,kBAAa,GAAG,IAAIA,iBAAY,EAAE,CAAC;YACpC,uBAAkB,GAAGC,qBAAkB,CAAC;YACxC,aAAQ,GACf,MAAA,MAAA,IAAI,CAAC,sBAAsB,0CAAE,QAAQ,mCAAIC,UAAK,CAAC;YAKjD,iBAAY,GAA8B,EAAE,CAAC;SAVzC;QAYJ,oDAAQ,GAAR;YAAA,iBAWC;YAVC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAExB,IAAI,CAAC,aAAa,CAAC,GAAG,CACpB,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAC,OAAgB;gBACvC,IAAI,OAAO,CAAC,cAAc,IAAI,OAAO,CAAC,cAAc,CAAC,MAAM,EAAE;oBAC3D,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,cAAc,CAAC;oBACvC,KAAI,CAAC,gBAAgB,EAAE,CAAC;iBACzB;aACF,CAAC,CACH,CAAC;SACH;QAEO,4DAAgB,GAAhB;YAAA,iBAOP;;YANC,MAAA,IAAI,CAAC,QAAQ,0CAAE,OAAO,CAAC,UAAC,OAAO;gBAC7B,IAAI,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,uBAAuB,EAAE;oBACnD,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC;wBAC7B,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,uBAAuB,CAAC,IAAI,EAAE,CAAC;iBAC9D;aACF,CAAC,CAAC;SACJ;QAED,kEAAsB,GAAtB,UACE,uBAAiD;;YAEjD,IAAM,SAAS,GAAG,uBAAuB,CAAC,IAAI,CAC5C,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,SAAS,KAAKC,mBAAgB,CAAC,SAAS,GAAA,CACxD,CAAC;YACF,OAAO,SAAS;kBACZ,MAAG,MAAA,MAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,OAAO,0CAAE,GAAG,0CAAE,OAAO,KAAG,MAAA,SAAS,CAAC,KAAK,0CAAE,GAAG,CAAE;kBAC9D,EAAE,CAAC;SACR;QAEO,0DAAc,GAAd,UACN,uBAAiD;YAEjD,IAAM,cAAc,GAAG,uBAAuB,CAAC,IAAI,CACjD,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,SAAS,KAAKA,mBAAgB,CAAC,eAAe,GAAA,CAC9D,CAAC;YACF,IAAM,QAAQ,GAAG,cAAc;kBAC3B,uBAAuB,CAAC,IAAI,CAC1B,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,SAAS,KAAK,cAAc,CAAC,KAAK,GAAA,CAClD;kBACD,IAAI,CAAC;YACT,OAAO,QAAQ,GAAG,QAAQ,CAAC,KAAK,GAAG,EAAE,CAAC;SACvC;QAED,uDAAW,GAAX;YACE,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;SAClC;;;wJAlEU,iCAAiC;iIAAjC,iCAAiC,2GC3B9C,4SASA;qHDkBa,iCAAiC;sBAN7CC,YAAS;uBAAC;wBACT,QAAQ,EAAE,wBAAwB;wBAClC,WAAW,EAAE,8CAA8C;wBAC3D,SAAS,EAAE,CAAC,8CAA8C,CAAC;wBAC3D,eAAe,EAAEC,0BAAuB,CAAC,MAAM;qBAChD;;;kCAIIC,WAAQ;;6BAUX,QAAQ;0BADPC,QAAK;;;;QE5BR;;;;qJAAa,8BAA8B;sJAA9B,8BAA8B,iBAH1B,iCAAiC,aADtCC,eAAY,EAAEC,mBAAY,EAAEC,YAAS,EAAEC,aAAU,aAEjD,iCAAiC;sJAEhC,8BAA8B,YAJhC,CAACH,eAAY,EAAEC,mBAAY,EAAEC,YAAS,EAAEC,aAAU,CAAC;qHAIjD,8BAA8B;sBAL1CC,WAAQ;uBAAC;wBACR,OAAO,EAAE,CAACJ,eAAY,EAAEC,mBAAY,EAAEC,YAAS,EAAEC,aAAU,CAAC;wBAC5D,YAAY,EAAE,CAAC,iCAAiC,CAAC;wBACjD,OAAO,EAAE,CAAC,iCAAiC,CAAC;qBAC7C;;;ICCD;aACgB,sCAAsC;;QACpD,IAAM,MAAM,GAAc;YACxB,cAAc;gBACZ,GAAC,wBAAwB,IAAG;oBAC1B,aAAa,EAAE,CAAC,iCAAiC,CAAC;iBACnD;mBACF;SACF,CAAC;QAEF,OAAO,MAAM,CAAC;IAChB,CAAC;;QAaD;;;;gJAAa,yBAAyB;iJAAzB,yBAAyB,YAV1B,8BAA8B;iJAU7B,yBAAyB,aATzB;YACTE,8BAA2B,CAAC,sCAAsC,CAAC;YACnEC,gBAAa,CAAC;gBACZ,EAAE,EAAEb,qBAAkB,CAAC,YAAY;gBACnC,QAAQ,EAAEc,iBAAc,CAAC,KAAK;gBAC9B,SAAS,EAAE,iCAAiC;aAC7C,CAAC;SACH,YARQ,CAAC,8BAA8B,CAAC;qHAU9B,yBAAyB;sBAXrCH,WAAQ;uBAAC;wBACR,OAAO,EAAE,CAAC,8BAA8B,CAAC;wBACzC,SAAS,EAAE;4BACTC,8BAA2B,CAAC,sCAAsC,CAAC;4BACnEC,gBAAa,CAAC;gCACZ,EAAE,EAAEb,qBAAkB,CAAC,YAAY;gCACnC,QAAQ,EAAEc,iBAAc,CAAC,KAAK;gCAC9B,SAAS,EAAE,iCAAiC;6BAC7C,CAAC;yBACH;qBACF;;;IClCD;;;;;;;;;;;;;;;;"}