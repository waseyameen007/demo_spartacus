{"version":3,"file":"spartacus-product-bulk-pricing-components.js","sources":["../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.component.ts","../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.component.html","../../../feature-libs/product/bulk-pricing/components/bulk-pricing-table/bulk-pricing-table.module.ts","../../../feature-libs/product/bulk-pricing/components/spartacus-product-bulk-pricing-components.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { BulkPricingService } from '@spartacus/product/bulk-pricing/core';\nimport { RoutingService } from '@spartacus/core';\nimport { BulkPrice } from '@spartacus/product/bulk-pricing/core';\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-bulk-pricing-table',\n  templateUrl: './bulk-pricing-table.component.html',\n})\nexport class BulkPricingTableComponent implements OnInit {\n  protected readonly PRODUCT_KEY = 'productCode';\n\n  priceTiers$: Observable<BulkPrice[] | undefined>;\n\n  constructor(\n    protected routingService: RoutingService,\n    protected bulkPricingService: BulkPricingService\n  ) {}\n\n  ngOnInit() {\n    this.priceTiers$ = this.getPrices();\n  }\n\n  formatQuantity(tier: BulkPrice): string {\n    let formattedQuantityRange = '';\n    if (!tier.maxQuantity) {\n      formattedQuantityRange = tier.minQuantity + '+';\n    } else {\n      formattedQuantityRange = tier.minQuantity + ' - ' + tier.maxQuantity;\n    }\n    return formattedQuantityRange;\n  }\n\n  getPrices(): Observable<BulkPrice[] | undefined> {\n    return this.routingService.getRouterState().pipe(\n      switchMap((state) => {\n        const productCode = state.state.params[this.PRODUCT_KEY];\n        return this.bulkPricingService.getBulkPrices(productCode);\n      })\n    );\n  }\n}\n","<ng-container *ngIf=\"priceTiers$ | async as priceTiers\">\n  <div class=\"container\" *ngIf=\"priceTiers.length > 0\">\n    <table class=\"table\">\n      <thead class=\"thead-light\">\n        <tr>\n          <th scope=\"col\">{{ 'bulkPricingTable.quantity' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.price' | cxTranslate }}</th>\n          <th scope=\"col\">{{ 'bulkPricingTable.discount' | cxTranslate }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let tier of priceTiers\">\n          <td>{{ formatQuantity(tier) }}</td>\n          <td>{{ tier.formattedValue }}</td>\n          <td>{{ tier.formattedDiscount }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { SpinnerModule } from '@spartacus/storefront';\nimport { BulkPricingTableComponent } from './bulk-pricing-table.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    SpinnerModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        BulkPricingTableComponent: {\n          component: BulkPricingTableComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BulkPricingTableComponent],\n  exports: [BulkPricingTableComponent],\n})\nexport class BulkPricingTableModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;;;;MAWa,yBAAyB;IAKpC,YACY,cAA8B,EAC9B,kBAAsC;QADtC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,uBAAkB,GAAlB,kBAAkB,CAAoB;QAN/B,gBAAW,GAAG,aAAa,CAAC;KAO3C;IAEJ,QAAQ;QACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;KACrC;IAED,cAAc,CAAC,IAAe;QAC5B,IAAI,sBAAsB,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,sBAAsB,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;SACjD;aAAM;YACL,sBAAsB,GAAG,IAAI,CAAC,WAAW,GAAG,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;SACtE;QACD,OAAO,sBAAsB,CAAC;KAC/B;IAED,SAAS;QACP,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC,IAAI,CAC9C,SAAS,CAAC,CAAC,KAAK;YACd,MAAM,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACzD,OAAO,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;SAC3D,CAAC,CACH,CAAC;KACH;;sHA/BU,yBAAyB;0GAAzB,yBAAyB,6DCXtC,kvBAoBA;2FDTa,yBAAyB;kBAJrC,SAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,WAAW,EAAE,qCAAqC;iBACnD;;;MEaY,sBAAsB;;mHAAtB,sBAAsB;oHAAtB,sBAAsB,iBAHlB,yBAAyB,aAXtC,YAAY;QACZ,UAAU;QACV,aAAa,8BAUL,yBAAyB;oHAExB,sBAAsB,YAfxB;YACP,YAAY;YACZ,UAAU;YACV,aAAa;YACb,YAAY,CAAC,UAAU,CAAY;gBACjC,aAAa,EAAE;oBACb,yBAAyB,EAAE;wBACzB,SAAS,EAAE,yBAAyB;qBACrC;iBACF;aACF,CAAC;SACH;2FAIU,sBAAsB;kBAhBlC,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,YAAY;wBACZ,UAAU;wBACV,aAAa;wBACb,YAAY,CAAC,UAAU,CAAY;4BACjC,aAAa,EAAE;gCACb,yBAAyB,EAAE;oCACzB,SAAS,EAAE,yBAAyB;iCACrC;6BACF;yBACF,CAAC;qBACH;oBACD,YAAY,EAAE,CAAC,yBAAyB,CAAC;oBACzC,OAAO,EAAE,CAAC,yBAAyB,CAAC;iBACrC;;;ACtBD;;;;;;"}