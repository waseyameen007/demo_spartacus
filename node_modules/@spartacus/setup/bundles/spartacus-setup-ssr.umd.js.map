{"version":3,"file":"spartacus-setup-ssr.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../core-libs/setup/ssr/util/request-origin.ts","../../../core-libs/setup/ssr/util/request-url.ts","../../../core-libs/setup/ssr/optimized-engine/rendering-cache.ts","../../../core-libs/setup/ssr/optimized-engine/ssr-optimization-options.ts","../../../core-libs/setup/ssr/optimized-engine/optimized-ssr-engine.ts","../../../core-libs/setup/ssr/providers/ssr-providers.ts","../../../core-libs/setup/ssr/engine-decorator/ng-express-engine-decorator.ts","../../../core-libs/setup/ssr/spartacus-setup-ssr.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Request } from 'express';\n\nexport function getRequestOrigin(req: Request): string {\n  // If express is resolving and trusting X-Forwarded-Host, we want to take it\n  // into an account to properly generate request origin.\n  const trustProxyFn = req.app.get('trust proxy fn');\n  let forwardedHost = req.get('X-Forwarded-Host');\n  if (forwardedHost && trustProxyFn(req.connection.remoteAddress, 0)) {\n    if (forwardedHost.indexOf(',') !== -1) {\n      // Note: X-Forwarded-Host is normally only ever a\n      //       single value, but this is to be safe.\n      forwardedHost = forwardedHost\n        .substring(0, forwardedHost.indexOf(','))\n        .trimRight();\n    }\n    return req.protocol + '://' + forwardedHost;\n  } else {\n    return req.protocol + '://' + req.get('host');\n  }\n}\n","import { Request } from 'express';\nimport { getRequestOrigin } from './request-origin';\n\nexport function getRequestUrl(req: Request): string {\n  return getRequestOrigin(req) + req.originalUrl;\n}\n","import { SsrOptimizationOptions } from './ssr-optimization-options';\n\nexport interface RenderingEntry {\n  html?: any;\n  err?: any;\n  time?: number;\n  rendering?: boolean;\n}\n\nexport class RenderingCache {\n  protected renders = new Map<string, RenderingEntry>();\n\n  constructor(private options?: SsrOptimizationOptions) {}\n\n  setAsRendering(key: string) {\n    this.renders.set(key, { rendering: true });\n  }\n\n  isRendering(key: string): boolean {\n    return !!this.renders.get(key)?.rendering;\n  }\n\n  store(key: string, err?: Error | null, html?: string) {\n    const entry: RenderingEntry = { err, html };\n    if (this.options?.ttl) {\n      entry.time = Date.now();\n    }\n    if (this.options?.cacheSize) {\n      this.renders.delete(key);\n      if (this.renders.size >= this.options.cacheSize) {\n        this.renders.delete(this.renders.keys().next().value);\n      }\n    }\n    this.renders.set(key, entry);\n  }\n\n  get(key: string): RenderingEntry | undefined {\n    return this.renders.get(key);\n  }\n\n  clear(key: string) {\n    this.renders.delete(key);\n  }\n\n  isReady(key: string): boolean {\n    const entry = this.renders.get(key);\n    const isRenderPresent = entry?.html || entry?.err;\n    return isRenderPresent && this.isFresh(key);\n  }\n\n  isFresh(key: string): boolean {\n    if (!this.options?.ttl) {\n      return true;\n    }\n\n    return Date.now() - (this.renders.get(key)?.time ?? 0) < this.options?.ttl;\n  }\n}\n","import { Request } from 'express';\n\nexport interface SsrOptimizationOptions {\n  /**\n   * Time in milliseconds to wait for SSR rendering to happen.\n   */\n  timeout?: number;\n\n  /**\n   * Enable in-memory cache for pre-rendered urls.\n   *\n   * If disabled, the cache will still be used to temporarily store\n   * renders finished after csr fallback in order to serve them with\n   * next request only.\n   */\n  cache?: boolean;\n\n  /**\n   * Limit the cache size\n   *\n   * Specified number of entries that will be kept in cache, allows to keep\n   * memory usage under control.\n   *\n   * Can also be use when `cache` option is set to false. It will then limit the\n   * number of renders that timeouts and are kept in temporary cache, waiting\n   * to be served with next request.\n   */\n  cacheSize?: number;\n\n  /**\n   * Limit number of concurrent rendering\n   */\n  concurrency?: number;\n\n  /**\n   * Time in milliseconds after prerendered page is becoming stale and should\n   * be rendered again.\n   */\n  ttl?: number;\n\n  /**\n   * Allows overriding default key generator for custom differentiating\n   * between rendered pages. By default it uses the full request URL.\n   *\n   * @param req\n   */\n  renderKeyResolver?: (req: Request) => string;\n\n  /**\n   * Allows defining custom rendering strategy per request\n   *\n   * @param req\n   */\n  renderingStrategyResolver?: (req: Request) => RenderingStrategy;\n\n  /**\n   * Time in milliseconds to wait for rendering when SSR_ALWAYS render strategy is set for the request.\n   * Default value is 60000 milliseconds (1 minute).\n   */\n  forcedSsrTimeout?: number;\n\n  /**\n   * The time for how long the render is expected to finish in.\n   * Exceeding this timeout will decrease the concurrency limit\n   * and allow for the new request to be server-side rendered.\n   * However, this may not release the rendering resources for the hanging render,\n   * which may cause additional memory usage on the server.\n   *\n   * It will log which render is exceeding the render time,\n   * which is useful for debugging issues.\n   *\n   * The value should always be higher than `timeout` and `forcedSsrTimeout`.\n   *\n   * Default value is 300000 milliseconds (5 minutes).\n   */\n  maxRenderTime?: number;\n\n  /**\n   * Instead of immediately falling back to CSR\n   * while a render for the same key is in progress, this option will make\n   * the subsequent requests for this key wait for the current render.\n   *\n   * All pending requests that for the same rendering key will\n   * take up only _one_ concurrency slot, because there is only\n   * one actual rendering task being performed.\n   *\n   * Each request independently honors the `timeout` option.\n   * E.g., consider the following setup where `timeout` option\n   * is set to 3s, and the given request takes 4s to render.\n   * The flow is as follows:\n   *\n   * - 1st request arrives and triggers the SSR.\n   * - 2nd request for the same URL arrives 2s after the 1st one.\n   *    Instead of falling back to CSR, it waits (with its own timeout)\n   *    for the render of the first request.\n   * - 1st request times out after 3s, and falls back to CSR.\n   * - one second after the timeout, the current render finishes.\n   * - the 2nd request returns SSR after only 2s of waiting.\n   */\n  reuseCurrentRendering?: boolean;\n\n  /**\n   * Enable detailed logs for troubleshooting problems\n   */\n  debug?: boolean;\n}\n\nexport enum RenderingStrategy {\n  ALWAYS_CSR = -1,\n  DEFAULT = 0,\n  ALWAYS_SSR = 1,\n}\n","/* webpackIgnore: true */\nimport { Request, Response } from 'express';\nimport * as fs from 'fs';\nimport { NgExpressEngineInstance } from '../engine-decorator/ng-express-engine-decorator';\nimport { getRequestUrl } from '../util/request-url';\nimport { RenderingCache } from './rendering-cache';\nimport {\n  RenderingStrategy,\n  SsrOptimizationOptions,\n} from './ssr-optimization-options';\n\n/**\n * Returns the full url for the given SSR Request.\n */\nexport const getDefaultRenderKey = getRequestUrl;\n\nexport type SsrCallbackFn = (\n  /**\n   * Error that might've occurred while rendering.\n   */\n  err?: Error | null | undefined,\n  /**\n   * HTML response.\n   */\n  html?: string | undefined\n) => void;\n\n/**\n * The rendered pages are kept in memory to be served on next request. If the `cache` is set to `false`, the\n * response is evicted as soon as the first successful response is successfully returned.\n */\nexport class OptimizedSsrEngine {\n  protected currentConcurrency = 0;\n  protected renderingCache = new RenderingCache(this.ssrOptions);\n  private templateCache = new Map<string, string>();\n\n  /**\n   * When the config `reuseCurrentRendering` is enabled, we want perform\n   * only one render for one rendering key and reuse the html result\n   * for all the pending requests for the same rendering key.\n   * Therefore we need to store the callbacks for all the pending requests\n   * and invoke them with the html after the render completes.\n   *\n   * This Map should be used only when `reuseCurrentRendering` config is enabled.\n   * It's indexed by the rendering keys.\n   */\n  private renderCallbacks = new Map<string, SsrCallbackFn[]>();\n\n  get engineInstance(): NgExpressEngineInstance {\n    return this.renderResponse.bind(this);\n  }\n\n  constructor(\n    protected expressEngine: NgExpressEngineInstance,\n    protected ssrOptions?: SsrOptimizationOptions\n  ) {}\n\n  /**\n   * When SSR page can not be returned in time, we're returning index.html of\n   * the CSR application.\n   * The CSR application is returned with the \"Cache-Control: no-store\" response-header. This notifies external cache systems to not use the CSR application for the subsequent request.\n   */\n  protected fallbackToCsr(\n    response: Response,\n    filePath: string,\n    callback: SsrCallbackFn\n  ): void {\n    response.set('Cache-Control', 'no-store');\n    callback(undefined, this.getDocument(filePath));\n  }\n\n  protected getRenderingKey(request: Request): string {\n    return this.ssrOptions?.renderKeyResolver\n      ? this.ssrOptions.renderKeyResolver(request)\n      : getDefaultRenderKey(request);\n  }\n\n  protected getRenderingStrategy(request: Request): RenderingStrategy {\n    return this.ssrOptions?.renderingStrategyResolver\n      ? this.ssrOptions.renderingStrategyResolver(request)\n      : RenderingStrategy.DEFAULT;\n  }\n\n  /**\n   * When returns true, the server side rendering should be performed.\n   * When returns false, the CSR fallback should be returned.\n   *\n   * We should not render, when there is already\n   * a pending rendering for the same rendering key\n   * (unless the `reuseCurrentRendering` config option is enabled)\n   * OR when the concurrency limit is exceeded.\n   */\n  protected shouldRender(request: Request): boolean {\n    const renderingKey = this.getRenderingKey(request);\n    const concurrencyLimitExceeded =\n      this.isConcurrencyLimitExceeded(renderingKey);\n    const fallBack =\n      this.renderingCache.isRendering(renderingKey) &&\n      !this.ssrOptions?.reuseCurrentRendering;\n\n    if (fallBack) {\n      this.log(`CSR fallback: rendering in progress (${request?.originalUrl})`);\n    } else if (concurrencyLimitExceeded) {\n      this.log(\n        `CSR fallback: Concurrency limit exceeded (${this.ssrOptions?.concurrency})`\n      );\n    }\n\n    return (\n      (!fallBack &&\n        !concurrencyLimitExceeded &&\n        this.getRenderingStrategy(request) !== RenderingStrategy.ALWAYS_CSR) ||\n      this.getRenderingStrategy(request) === RenderingStrategy.ALWAYS_SSR\n    );\n  }\n\n  /**\n   * Checks for the concurrency limit\n   *\n   * @returns true if rendering this request would exceed the concurrency limit\n   */\n  private isConcurrencyLimitExceeded(renderingKey: string): boolean {\n    // If we can reuse a pending render for this request, we don't take up a new concurrency slot.\n    // In that case we don't exceed the concurrency limit even if the `currentConcurrency`\n    // already reaches the limit.\n    if (\n      this.ssrOptions?.reuseCurrentRendering &&\n      this.renderingCache.isRendering(renderingKey)\n    ) {\n      return false;\n    }\n\n    return this.ssrOptions?.concurrency\n      ? this.currentConcurrency >= this.ssrOptions.concurrency\n      : false;\n  }\n\n  /**\n   * Returns true, when the `timeout` option has been configured to non-zero value OR\n   * when the rendering strategy for the given request is ALWAYS_SSR.\n   * Otherwise, it returns false.\n   */\n  protected shouldTimeout(request: Request): boolean {\n    return (\n      !!this.ssrOptions?.timeout ||\n      this.getRenderingStrategy(request) === RenderingStrategy.ALWAYS_SSR\n    );\n  }\n\n  /**\n   * Returns the timeout value.\n   *\n   * In case of the rendering strategy ALWAYS_SSR, it returns the config `forcedSsrTimeout`.\n   * Otherwise, it returns the config `timeout`.\n   */\n  protected getTimeout(request: Request): number {\n    return this.getRenderingStrategy(request) === RenderingStrategy.ALWAYS_SSR\n      ? this.ssrOptions?.forcedSsrTimeout ?? 60000\n      : this.ssrOptions?.timeout ?? 0;\n  }\n\n  /**\n   * If there is an available cached response for this rendering key,\n   * it invokes the given render callback with the response and returns true.\n   *\n   * Otherwise, it returns false.\n   */\n  protected returnCachedRender(\n    request: Request,\n    callback: SsrCallbackFn\n  ): boolean {\n    const key = this.getRenderingKey(request);\n\n    if (this.renderingCache.isReady(key)) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const cached = this.renderingCache.get(key)!;\n      callback(cached.err, cached.html);\n\n      if (!this.ssrOptions?.cache) {\n        // we drop cached rendering if caching is disabled\n        this.renderingCache.clear(key);\n      }\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Handles the request and invokes the given `callback` with the result html / error.\n   *\n   * The result might be ether:\n   * - a CSR fallback with a basic `index.html` content\n   * - a result rendered by the original Angular Universal express engine\n   * - a result from the in-memory cache (which was previously rendered by Angular Universal express engine).\n   */\n  protected renderResponse(\n    filePath: string,\n    options: any,\n    callback: SsrCallbackFn\n  ): void {\n    const request: Request = options.req;\n    const response: Response = options.res || options.req.res;\n\n    if (this.returnCachedRender(request, callback)) {\n      this.log(`Render from cache (${request?.originalUrl})`);\n      return;\n    }\n    if (!this.shouldRender(request)) {\n      this.fallbackToCsr(response, filePath, callback);\n      return;\n    }\n\n    let requestTimeout: NodeJS.Timeout | undefined;\n    if (this.shouldTimeout(request)) {\n      // establish timeout for rendering\n      const timeout = this.getTimeout(request);\n      requestTimeout = setTimeout(() => {\n        requestTimeout = undefined;\n        this.fallbackToCsr(response, filePath, callback);\n        this.log(\n          `SSR rendering exceeded timeout ${timeout}, fallbacking to CSR for ${request?.originalUrl}`,\n          false\n        );\n      }, timeout);\n    } else {\n      // Here we respond with the fallback to CSR, but we don't `return`.\n      // We let the actual rendering task to happen in the background\n      // to eventually store the rendered result in the cache.\n      this.fallbackToCsr(response, filePath, callback);\n    }\n\n    const renderingKey = this.getRenderingKey(request);\n    const renderCallback: SsrCallbackFn = (err, html): void => {\n      if (requestTimeout) {\n        // if request is still waiting for render, return it\n        clearTimeout(requestTimeout);\n        callback(err, html);\n\n        this.log(\n          `Request is resolved with the SSR rendering result (${request?.originalUrl})`\n        );\n\n        // store the render only if caching is enabled\n        if (this.ssrOptions?.cache) {\n          this.renderingCache.store(renderingKey, err, html);\n        } else {\n          this.renderingCache.clear(renderingKey);\n        }\n      } else {\n        // store the render for future use\n        this.renderingCache.store(renderingKey, err, html);\n      }\n    };\n\n    this.handleRender({\n      filePath,\n      options,\n      renderCallback,\n      request,\n    });\n  }\n\n  protected log(message: string, debug = true): void {\n    if (!debug || this.ssrOptions?.debug) {\n      console.log(message);\n    }\n  }\n\n  /** Retrieve the document from the cache or the filesystem */\n  protected getDocument(filePath: string): string {\n    let doc = this.templateCache.get(filePath);\n\n    if (!doc) {\n      // fs.readFileSync could be missing in a browser, specifically\n      // in a unit tests with { node: { fs: 'empty' } } webpack configuration\n      doc = fs?.readFileSync ? fs.readFileSync(filePath, 'utf-8') : '';\n      this.templateCache.set(filePath, doc);\n    }\n\n    return doc;\n  }\n\n  /**\n   * Delegates the render to the original _Angular Universal express engine_.\n   *\n   * In case when the config `reuseCurrentRendering` is enabled and **if there is already a pending\n   * render task for the same rendering key**, it doesn't delegate a new render to Angular Universal.\n   * Instead, it waits for the current rendering to complete and then reuse the result for all waiting requests.\n   */\n  private handleRender({\n    filePath,\n    options,\n    renderCallback,\n    request,\n  }: {\n    filePath: string;\n    options: any;\n    renderCallback: SsrCallbackFn;\n    request: Request;\n  }): void {\n    if (!this.ssrOptions?.reuseCurrentRendering) {\n      this.startRender({\n        filePath,\n        options,\n        renderCallback,\n        request,\n      });\n      return;\n    }\n\n    const renderingKey = this.getRenderingKey(request);\n    if (!this.renderCallbacks.has(renderingKey)) {\n      this.renderCallbacks.set(renderingKey, []);\n    }\n    this.renderCallbacks.get(renderingKey)?.push(renderCallback);\n\n    if (!this.renderingCache.isRendering(renderingKey)) {\n      this.startRender({\n        filePath,\n        options,\n        request,\n        renderCallback: (err, html) => {\n          // Share the result of the render with all awaiting requests for the same key:\n\n          // Note: we access the Map at the moment of the render finished (don't store value in a local variable),\n          //       because in the meantime something might have deleted the value (i.e. when `maxRenderTime` passed).\n          this.renderCallbacks\n            .get(renderingKey)\n            ?.forEach((cb) => cb(err, html)); // pass the shared result to all waiting rendering callbacks\n          this.renderCallbacks.delete(renderingKey);\n        },\n      });\n    }\n\n    this.log(\n      `Request is waiting for the SSR rendering to complete (${request?.originalUrl})`\n    );\n  }\n\n  /**\n   * Delegates the render to the original _Angular Universal express engine_.\n   *\n   * There is no way to abort the running render of Angular Universal.\n   * So if the render doesn't complete in the configured `maxRenderTime`,\n   * we just consider the render task as hanging (note: it's a potential memory leak!).\n   * Later on, even if the render completes somewhen in the future, we will ignore\n   * its result.\n   */\n  private startRender({\n    filePath,\n    options,\n    renderCallback,\n    request,\n  }: {\n    filePath: string;\n    options: any;\n    renderCallback: SsrCallbackFn;\n    request: Request;\n  }): void {\n    const renderingKey = this.getRenderingKey(request);\n\n    // Setting the timeout for hanging renders that might not ever finish due to various reasons.\n    // After the configured `maxRenderTime` passes, we consider the rendering task as hanging,\n    // and release the concurrency slot and forget all callbacks waiting for the render's result.\n    let maxRenderTimeout: NodeJS.Timeout | undefined = setTimeout(() => {\n      this.renderingCache.clear(renderingKey);\n      maxRenderTimeout = undefined;\n      this.currentConcurrency--;\n      if (this.ssrOptions?.reuseCurrentRendering) {\n        this.renderCallbacks.delete(renderingKey);\n      }\n      this.log(\n        `Rendering of ${request?.originalUrl} was not able to complete. This might cause memory leaks!`,\n        false\n      );\n    }, this.ssrOptions?.maxRenderTime ?? 300000); // 300000ms == 5 minutes\n\n    this.log(`Rendering started (${request?.originalUrl})`);\n    this.renderingCache.setAsRendering(renderingKey);\n    this.currentConcurrency++;\n\n    this.expressEngine(filePath, options, (err, html) => {\n      if (!maxRenderTimeout) {\n        // ignore this render's result because it exceeded maxRenderTimeout\n        this.log(\n          `Rendering of ${request.originalUrl} completed after the specified maxRenderTime, therefore it was ignored.`,\n          false\n        );\n        return;\n      }\n      clearTimeout(maxRenderTimeout);\n\n      this.log(`Rendering completed (${request?.originalUrl})`);\n      this.currentConcurrency--;\n\n      renderCallback(err, html);\n    });\n  }\n}\n","import { StaticProvider } from '@angular/core';\nimport { REQUEST } from '@nguniversal/express-engine/tokens';\nimport { SERVER_REQUEST_ORIGIN, SERVER_REQUEST_URL } from '@spartacus/core';\nimport { getRequestOrigin } from '../util/request-origin';\nimport { getRequestUrl } from '../util/request-url';\n\n/**\n * Returns Spartacus providers to be passed to the Angular express engine (in SSR)\n *\n * @param options\n */\nexport function getServerRequestProviders(): StaticProvider[] {\n  return [\n    {\n      provide: SERVER_REQUEST_URL,\n      useFactory: getRequestUrl,\n      deps: [REQUEST],\n    },\n    {\n      provide: SERVER_REQUEST_ORIGIN,\n      useFactory: getRequestOrigin,\n      deps: [REQUEST],\n    },\n  ];\n}\n","import { NgSetupOptions } from '@nguniversal/express-engine';\nimport {\n  OptimizedSsrEngine,\n  SsrCallbackFn,\n} from '../optimized-engine/optimized-ssr-engine';\nimport { SsrOptimizationOptions } from '../optimized-engine/ssr-optimization-options';\nimport { getServerRequestProviders } from '../providers/ssr-providers';\n\nexport type NgExpressEngineInstance = (\n  filePath: string,\n  options: object,\n  callback: SsrCallbackFn\n) => void;\n\nexport type NgExpressEngine = (\n  setupOptions: Readonly<NgSetupOptions>\n) => NgExpressEngineInstance;\n\n/**\n * The wrapper over the standard ngExpressEngine, that provides tokens for Spartacus\n * @param ngExpressEngine\n */\nexport class NgExpressEngineDecorator {\n  /**\n   * Returns the higher order ngExpressEngine with provided tokens for Spartacus\n   *\n   * @param ngExpressEngine\n   */\n  static get(\n    ngExpressEngine: NgExpressEngine,\n    optimizationOptions?: SsrOptimizationOptions | null\n  ): NgExpressEngine {\n    return decorateExpressEngine(ngExpressEngine, optimizationOptions);\n  }\n}\n\nexport function decorateExpressEngine(\n  ngExpressEngine: NgExpressEngine,\n  optimizationOptions: SsrOptimizationOptions | null = {\n    concurrency: 20,\n    timeout: 3000,\n  }\n): NgExpressEngine {\n  return function (setupOptions: NgSetupOptions) {\n    const engineInstance = ngExpressEngine({\n      ...setupOptions,\n      providers: [\n        // add spartacus related providers\n        ...getServerRequestProviders(),\n        ...(setupOptions.providers ?? []),\n      ],\n    });\n\n    // apply optimization wrapper if optimization options were defined\n    return optimizationOptions\n      ? new OptimizedSsrEngine(engineInstance, optimizationOptions)\n          .engineInstance\n      : engineInstance;\n  };\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["RenderingStrategy","fs","SERVER_REQUEST_URL","REQUEST","SERVER_REQUEST_ORIGIN"],"mappings":"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"}