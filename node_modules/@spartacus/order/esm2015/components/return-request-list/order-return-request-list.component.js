import { ChangeDetectionStrategy, Component } from '@angular/core';
import { isNotUndefined, } from '@spartacus/core';
import { combineLatest } from 'rxjs';
import { filter, map, take, tap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@spartacus/order/root";
import * as i2 from "@spartacus/core";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@angular/common";
import * as i5 from "@angular/router";
export class OrderReturnRequestListComponent {
    constructor(returnRequestService, translation) {
        this.returnRequestService = returnRequestService;
        this.translation = translation;
        this.PAGE_SIZE = 5;
        this.returnRequests$ = this.returnRequestService.getOrderReturnRequestList(this.PAGE_SIZE).pipe(tap((requestList) => {
            var _a;
            if ((_a = requestList === null || requestList === void 0 ? void 0 : requestList.pagination) === null || _a === void 0 ? void 0 : _a.sort) {
                this.sortType = requestList.pagination.sort;
            }
        }));
        /**
         * When "Order Return" feature is enabled, this component becomes one tab in
         * TabParagraphContainerComponent. This can be read from TabParagraphContainer.
         */
        this.tabTitleParam$ = this.returnRequests$.pipe(map((returnRequests) => { var _a; return (_a = returnRequests === null || returnRequests === void 0 ? void 0 : returnRequests.pagination) === null || _a === void 0 ? void 0 : _a.totalResults; }), filter(isNotUndefined), take(1));
    }
    ngOnDestroy() {
        this.returnRequestService.clearOrderReturnRequestList();
    }
    changeSortCode(sortCode) {
        const event = {
            sortCode,
            currentPage: 0,
        };
        this.sortType = sortCode;
        this.fetchReturnRequests(event);
    }
    pageChange(page) {
        const event = {
            sortCode: this.sortType,
            currentPage: page,
        };
        this.fetchReturnRequests(event);
    }
    getSortLabels() {
        return combineLatest([
            this.translation.translate('sorting.date'),
            this.translation.translate('sorting.rma'),
        ]).pipe(map(([textByDate, textByRma]) => {
            return {
                byDate: textByDate,
                byRMA: textByRma,
            };
        }));
    }
    fetchReturnRequests(event) {
        this.returnRequestService.loadOrderReturnRequestList(this.PAGE_SIZE, event.currentPage, event.sortCode);
    }
}
OrderReturnRequestListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: OrderReturnRequestListComponent, deps: [{ token: i1.OrderReturnRequestFacade }, { token: i2.TranslationService }], target: i0.ɵɵFactoryTarget.Component });
OrderReturnRequestListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.0.5", type: OrderReturnRequestListComponent, selector: "cx-order-return-request-list", ngImport: i0, template: "<ng-container *ngIf=\"returnRequests$ | async as returnRequests\">\n  <div class=\"container\">\n    <!-- BODY -->\n    <div class=\"cx-order-history-body\">\n      <ng-container *ngIf=\"returnRequests.pagination.totalResults > 0\">\n        <!-- Select Form and Pagination Top -->\n        <div class=\"cx-order-history-sort top row\">\n          <label\n            class=\"\n              cx-order-history-form-group\n              form-group\n              col-sm-12 col-md-4 col-lg-4\n            \"\n            ><span>{{ 'returnRequestList.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"returnRequests.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"returnRequests.pagination.sort\"\n            ></cx-sorting>\n          </label>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"returnRequests.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <!-- TABLE -->\n        <table class=\"table cx-order-history-table\">\n          <thead class=\"cx-order-history-thead-mobile\">\n            <th scope=\"col\">\n              {{ 'returnRequestList.returnRequestId' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'returnRequestList.orderId' | cxTranslate }}</th>\n            <th scope=\"col\">\n              {{ 'returnRequestList.date' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'returnRequestList.status' | cxTranslate }}</th>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let return of returnRequests.returnRequests\">\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.returnRequestId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'returnRequestDetails',\n                      params: return\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ return?.rma }}</a\n                >\n              </td>\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.orderId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: return?.order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ return?.order?.code }}</a\n                >\n              </td>\n\n              <td class=\"cx-order-history-placed\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.date' | cxTranslate }}\n                </div>\n                {{ return?.creationTime | cxDate: 'longDate' }}\n              </td>\n              <td class=\"cx-order-history-status\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.status' | cxTranslate }}\n                </div>\n                {{\n                  'returnRequestList.statusDisplay_' + return?.status\n                    | cxTranslate\n                }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <!-- Select Form and Pagination Bottom -->\n        <div class=\"cx-order-history-sort bottom row\">\n          <label\n            class=\"\n              cx-order-history-form-group\n              form-group\n              col-sm-12 col-md-4 col-lg-4\n            \"\n            ><span>{{ 'returnRequestList.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"returnRequests.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"returnRequests.pagination.sort\"\n            ></cx-sorting>\n          </label>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"returnRequests.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</ng-container>\n", components: [{ type: i3.SortingComponent, selector: "cx-sorting", inputs: ["sortOptions", "selectedOption", "placeholder", "sortLabels"], outputs: ["sortListEvent"] }, { type: i3.PaginationComponent, selector: "cx-pagination", inputs: ["pageRoute", "queryParam", "defaultPage", "pagination"], outputs: ["viewPageEvent"] }], directives: [{ type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i5.RouterLinkWithHref, selector: "a[routerLink],area[routerLink]", inputs: ["routerLink", "target", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo"] }], pipes: { "async": i4.AsyncPipe, "cxTranslate": i2.TranslatePipe, "cxUrl": i2.UrlPipe, "cxDate": i2.CxDatePipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.5", ngImport: i0, type: OrderReturnRequestListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'cx-order-return-request-list',
                    templateUrl: './order-return-request-list.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.OrderReturnRequestFacade }, { type: i2.TranslationService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItcmV0dXJuLXJlcXVlc3QtbGlzdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JkZXIvY29tcG9uZW50cy9yZXR1cm4tcmVxdWVzdC1saXN0L29yZGVyLXJldHVybi1yZXF1ZXN0LWxpc3QuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL29yZGVyL2NvbXBvbmVudHMvcmV0dXJuLXJlcXVlc3QtbGlzdC9vcmRlci1yZXR1cm4tcmVxdWVzdC1saXN0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQWEsTUFBTSxlQUFlLENBQUM7QUFDOUUsT0FBTyxFQUNMLGNBQWMsR0FHZixNQUFNLGlCQUFpQixDQUFDO0FBRXpCLE9BQU8sRUFBRSxhQUFhLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFDakQsT0FBTyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7O0FBT3hELE1BQU0sT0FBTywrQkFBK0I7SUFDMUMsWUFDVSxvQkFBOEMsRUFDOUMsV0FBK0I7UUFEL0IseUJBQW9CLEdBQXBCLG9CQUFvQixDQUEwQjtRQUM5QyxnQkFBVyxHQUFYLFdBQVcsQ0FBb0I7UUFHakMsY0FBUyxHQUFHLENBQUMsQ0FBQztRQUd0QixvQkFBZSxHQUNiLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUN0RSxHQUFHLENBQUMsQ0FBQyxXQUEwQyxFQUFFLEVBQUU7O1lBQ2pELElBQUksTUFBQSxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsVUFBVSwwQ0FBRSxJQUFJLEVBQUU7Z0JBQ2pDLElBQUksQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUM7YUFDN0M7UUFDSCxDQUFDLENBQUMsQ0FDSCxDQUFDO1FBRUo7OztXQUdHO1FBQ0gsbUJBQWMsR0FBdUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQzVELEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxFQUFFLFdBQUMsT0FBQSxNQUFBLGNBQWMsYUFBZCxjQUFjLHVCQUFkLGNBQWMsQ0FBRSxVQUFVLDBDQUFFLFlBQVksQ0FBQSxFQUFBLENBQUMsRUFDakUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUN0QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQ1IsQ0FBQztJQXRCQyxDQUFDO0lBd0JKLFdBQVc7UUFDVCxJQUFJLENBQUMsb0JBQW9CLENBQUMsMkJBQTJCLEVBQUUsQ0FBQztJQUMxRCxDQUFDO0lBRUQsY0FBYyxDQUFDLFFBQWdCO1FBQzdCLE1BQU0sS0FBSyxHQUE4QztZQUN2RCxRQUFRO1lBQ1IsV0FBVyxFQUFFLENBQUM7U0FDZixDQUFDO1FBQ0YsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFFRCxVQUFVLENBQUMsSUFBWTtRQUNyQixNQUFNLEtBQUssR0FBOEM7WUFDdkQsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3ZCLFdBQVcsRUFBRSxJQUFJO1NBQ2xCLENBQUM7UUFDRixJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVELGFBQWE7UUFDWCxPQUFPLGFBQWEsQ0FBQztZQUNuQixJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUM7WUFDMUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDO1NBQzFDLENBQUMsQ0FBQyxJQUFJLENBQ0wsR0FBRyxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUUsRUFBRTtZQUM5QixPQUFPO2dCQUNMLE1BQU0sRUFBRSxVQUFVO2dCQUNsQixLQUFLLEVBQUUsU0FBUzthQUNqQixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7SUFFTyxtQkFBbUIsQ0FBQyxLQUczQjtRQUNDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQywwQkFBMEIsQ0FDbEQsSUFBSSxDQUFDLFNBQVMsRUFDZCxLQUFLLENBQUMsV0FBVyxFQUNqQixLQUFLLENBQUMsUUFBUSxDQUNmLENBQUM7SUFDSixDQUFDOzs0SEF4RVUsK0JBQStCO2dIQUEvQiwrQkFBK0Isb0VDZjVDLDBsSkF3SEE7MkZEekdhLCtCQUErQjtrQkFMM0MsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsOEJBQThCO29CQUN4QyxXQUFXLEVBQUUsNENBQTRDO29CQUN6RCxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtpQkFDaEQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIGlzTm90VW5kZWZpbmVkLFxuICBSZXR1cm5SZXF1ZXN0TGlzdCxcbiAgVHJhbnNsYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHsgT3JkZXJSZXR1cm5SZXF1ZXN0RmFjYWRlIH0gZnJvbSAnQHNwYXJ0YWN1cy9vcmRlci9yb290JztcbmltcG9ydCB7IGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbHRlciwgbWFwLCB0YWtlLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2N4LW9yZGVyLXJldHVybi1yZXF1ZXN0LWxpc3QnLFxuICB0ZW1wbGF0ZVVybDogJy4vb3JkZXItcmV0dXJuLXJlcXVlc3QtbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBPcmRlclJldHVyblJlcXVlc3RMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZXR1cm5SZXF1ZXN0U2VydmljZTogT3JkZXJSZXR1cm5SZXF1ZXN0RmFjYWRlLFxuICAgIHByaXZhdGUgdHJhbnNsYXRpb246IFRyYW5zbGF0aW9uU2VydmljZVxuICApIHt9XG5cbiAgcHJpdmF0ZSBQQUdFX1NJWkUgPSA1O1xuICBzb3J0VHlwZTogc3RyaW5nO1xuXG4gIHJldHVyblJlcXVlc3RzJDogT2JzZXJ2YWJsZTxSZXR1cm5SZXF1ZXN0TGlzdCB8IHVuZGVmaW5lZD4gPVxuICAgIHRoaXMucmV0dXJuUmVxdWVzdFNlcnZpY2UuZ2V0T3JkZXJSZXR1cm5SZXF1ZXN0TGlzdCh0aGlzLlBBR0VfU0laRSkucGlwZShcbiAgICAgIHRhcCgocmVxdWVzdExpc3Q6IFJldHVyblJlcXVlc3RMaXN0IHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICAgIGlmIChyZXF1ZXN0TGlzdD8ucGFnaW5hdGlvbj8uc29ydCkge1xuICAgICAgICAgIHRoaXMuc29ydFR5cGUgPSByZXF1ZXN0TGlzdC5wYWdpbmF0aW9uLnNvcnQ7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcblxuICAvKipcbiAgICogV2hlbiBcIk9yZGVyIFJldHVyblwiIGZlYXR1cmUgaXMgZW5hYmxlZCwgdGhpcyBjb21wb25lbnQgYmVjb21lcyBvbmUgdGFiIGluXG4gICAqIFRhYlBhcmFncmFwaENvbnRhaW5lckNvbXBvbmVudC4gVGhpcyBjYW4gYmUgcmVhZCBmcm9tIFRhYlBhcmFncmFwaENvbnRhaW5lci5cbiAgICovXG4gIHRhYlRpdGxlUGFyYW0kOiBPYnNlcnZhYmxlPG51bWJlcj4gPSB0aGlzLnJldHVyblJlcXVlc3RzJC5waXBlKFxuICAgIG1hcCgocmV0dXJuUmVxdWVzdHMpID0+IHJldHVyblJlcXVlc3RzPy5wYWdpbmF0aW9uPy50b3RhbFJlc3VsdHMpLFxuICAgIGZpbHRlcihpc05vdFVuZGVmaW5lZCksXG4gICAgdGFrZSgxKVxuICApO1xuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMucmV0dXJuUmVxdWVzdFNlcnZpY2UuY2xlYXJPcmRlclJldHVyblJlcXVlc3RMaXN0KCk7XG4gIH1cblxuICBjaGFuZ2VTb3J0Q29kZShzb3J0Q29kZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQ6IHsgc29ydENvZGU6IHN0cmluZzsgY3VycmVudFBhZ2U6IG51bWJlciB9ID0ge1xuICAgICAgc29ydENvZGUsXG4gICAgICBjdXJyZW50UGFnZTogMCxcbiAgICB9O1xuICAgIHRoaXMuc29ydFR5cGUgPSBzb3J0Q29kZTtcbiAgICB0aGlzLmZldGNoUmV0dXJuUmVxdWVzdHMoZXZlbnQpO1xuICB9XG5cbiAgcGFnZUNoYW5nZShwYWdlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudDogeyBzb3J0Q29kZTogc3RyaW5nOyBjdXJyZW50UGFnZTogbnVtYmVyIH0gPSB7XG4gICAgICBzb3J0Q29kZTogdGhpcy5zb3J0VHlwZSxcbiAgICAgIGN1cnJlbnRQYWdlOiBwYWdlLFxuICAgIH07XG4gICAgdGhpcy5mZXRjaFJldHVyblJlcXVlc3RzKGV2ZW50KTtcbiAgfVxuXG4gIGdldFNvcnRMYWJlbHMoKTogT2JzZXJ2YWJsZTx7IGJ5RGF0ZTogc3RyaW5nOyBieVJNQTogc3RyaW5nIH0+IHtcbiAgICByZXR1cm4gY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnc29ydGluZy5kYXRlJyksXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uLnRyYW5zbGF0ZSgnc29ydGluZy5ybWEnKSxcbiAgICBdKS5waXBlKFxuICAgICAgbWFwKChbdGV4dEJ5RGF0ZSwgdGV4dEJ5Um1hXSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJ5RGF0ZTogdGV4dEJ5RGF0ZSxcbiAgICAgICAgICBieVJNQTogdGV4dEJ5Um1hLFxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBmZXRjaFJldHVyblJlcXVlc3RzKGV2ZW50OiB7XG4gICAgc29ydENvZGU6IHN0cmluZztcbiAgICBjdXJyZW50UGFnZTogbnVtYmVyO1xuICB9KTogdm9pZCB7XG4gICAgdGhpcy5yZXR1cm5SZXF1ZXN0U2VydmljZS5sb2FkT3JkZXJSZXR1cm5SZXF1ZXN0TGlzdChcbiAgICAgIHRoaXMuUEFHRV9TSVpFLFxuICAgICAgZXZlbnQuY3VycmVudFBhZ2UsXG4gICAgICBldmVudC5zb3J0Q29kZVxuICAgICk7XG4gIH1cbn1cbiIsIjxuZy1jb250YWluZXIgKm5nSWY9XCJyZXR1cm5SZXF1ZXN0cyQgfCBhc3luYyBhcyByZXR1cm5SZXF1ZXN0c1wiPlxuICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgPCEtLSBCT0RZIC0tPlxuICAgIDxkaXYgY2xhc3M9XCJjeC1vcmRlci1oaXN0b3J5LWJvZHlcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJyZXR1cm5SZXF1ZXN0cy5wYWdpbmF0aW9uLnRvdGFsUmVzdWx0cyA+IDBcIj5cbiAgICAgICAgPCEtLSBTZWxlY3QgRm9ybSBhbmQgUGFnaW5hdGlvbiBUb3AgLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1vcmRlci1oaXN0b3J5LXNvcnQgdG9wIHJvd1wiPlxuICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgY2xhc3M9XCJcbiAgICAgICAgICAgICAgY3gtb3JkZXItaGlzdG9yeS1mb3JtLWdyb3VwXG4gICAgICAgICAgICAgIGZvcm0tZ3JvdXBcbiAgICAgICAgICAgICAgY29sLXNtLTEyIGNvbC1tZC00IGNvbC1sZy00XG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgPjxzcGFuPnt7ICdyZXR1cm5SZXF1ZXN0TGlzdC5zb3J0QnknIHwgY3hUcmFuc2xhdGUgfX08L3NwYW4+XG4gICAgICAgICAgICA8Y3gtc29ydGluZ1xuICAgICAgICAgICAgICBbc29ydE9wdGlvbnNdPVwicmV0dXJuUmVxdWVzdHMuc29ydHNcIlxuICAgICAgICAgICAgICBbc29ydExhYmVsc109XCJnZXRTb3J0TGFiZWxzKCkgfCBhc3luY1wiXG4gICAgICAgICAgICAgIChzb3J0TGlzdEV2ZW50KT1cImNoYW5nZVNvcnRDb2RlKCRldmVudClcIlxuICAgICAgICAgICAgICBbc2VsZWN0ZWRPcHRpb25dPVwicmV0dXJuUmVxdWVzdHMucGFnaW5hdGlvbi5zb3J0XCJcbiAgICAgICAgICAgID48L2N4LXNvcnRpbmc+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtb3JkZXItaGlzdG9yeS1wYWdpbmF0aW9uXCI+XG4gICAgICAgICAgICA8Y3gtcGFnaW5hdGlvblxuICAgICAgICAgICAgICBbcGFnaW5hdGlvbl09XCJyZXR1cm5SZXF1ZXN0cy5wYWdpbmF0aW9uXCJcbiAgICAgICAgICAgICAgKHZpZXdQYWdlRXZlbnQpPVwicGFnZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgID48L2N4LXBhZ2luYXRpb24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8IS0tIFRBQkxFIC0tPlxuICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSBjeC1vcmRlci1oaXN0b3J5LXRhYmxlXCI+XG4gICAgICAgICAgPHRoZWFkIGNsYXNzPVwiY3gtb3JkZXItaGlzdG9yeS10aGVhZC1tb2JpbGVcIj5cbiAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPlxuICAgICAgICAgICAgICB7eyAncmV0dXJuUmVxdWVzdExpc3QucmV0dXJuUmVxdWVzdElkJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+e3sgJ3JldHVyblJlcXVlc3RMaXN0Lm9yZGVySWQnIHwgY3hUcmFuc2xhdGUgfX08L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+XG4gICAgICAgICAgICAgIHt7ICdyZXR1cm5SZXF1ZXN0TGlzdC5kYXRlJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+e3sgJ3JldHVyblJlcXVlc3RMaXN0LnN0YXR1cycgfCBjeFRyYW5zbGF0ZSB9fTwvdGg+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICA8dHIgKm5nRm9yPVwibGV0IHJldHVybiBvZiByZXR1cm5SZXF1ZXN0cy5yZXR1cm5SZXF1ZXN0c1wiPlxuICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJjeC1vcmRlci1oaXN0b3J5LWNvZGVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1tZC1ub25lIGN4LW9yZGVyLWhpc3RvcnktbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgIHt7ICdyZXR1cm5SZXF1ZXN0TGlzdC5yZXR1cm5SZXF1ZXN0SWQnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgW3JvdXRlckxpbmtdPVwiXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBjeFJvdXRlOiAncmV0dXJuUmVxdWVzdERldGFpbHMnLFxuICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH0gfCBjeFVybFxuICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY3gtb3JkZXItaGlzdG9yeS12YWx1ZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3sgcmV0dXJuPy5ybWEgfX08L2FcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImN4LW9yZGVyLWhpc3RvcnktY29kZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLW1kLW5vbmUgY3gtb3JkZXItaGlzdG9yeS1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAge3sgJ3JldHVyblJlcXVlc3RMaXN0Lm9yZGVySWQnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgW3JvdXRlckxpbmtdPVwiXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBjeFJvdXRlOiAnb3JkZXJEZXRhaWxzJyxcbiAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHJldHVybj8ub3JkZXJcbiAgICAgICAgICAgICAgICAgICAgfSB8IGN4VXJsXG4gICAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjeC1vcmRlci1oaXN0b3J5LXZhbHVlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7eyByZXR1cm4/Lm9yZGVyPy5jb2RlIH19PC9hXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8L3RkPlxuXG4gICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImN4LW9yZGVyLWhpc3RvcnktcGxhY2VkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtbWQtbm9uZSBjeC1vcmRlci1oaXN0b3J5LWxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICB7eyAncmV0dXJuUmVxdWVzdExpc3QuZGF0ZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHt7IHJldHVybj8uY3JlYXRpb25UaW1lIHwgY3hEYXRlOiAnbG9uZ0RhdGUnIH19XG4gICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImN4LW9yZGVyLWhpc3Rvcnktc3RhdHVzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtbWQtbm9uZSBjeC1vcmRlci1oaXN0b3J5LWxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICB7eyAncmV0dXJuUmVxdWVzdExpc3Quc3RhdHVzJyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICAgICdyZXR1cm5SZXF1ZXN0TGlzdC5zdGF0dXNEaXNwbGF5XycgKyByZXR1cm4/LnN0YXR1c1xuICAgICAgICAgICAgICAgICAgICB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgICAgPCEtLSBTZWxlY3QgRm9ybSBhbmQgUGFnaW5hdGlvbiBCb3R0b20gLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjeC1vcmRlci1oaXN0b3J5LXNvcnQgYm90dG9tIHJvd1wiPlxuICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgY2xhc3M9XCJcbiAgICAgICAgICAgICAgY3gtb3JkZXItaGlzdG9yeS1mb3JtLWdyb3VwXG4gICAgICAgICAgICAgIGZvcm0tZ3JvdXBcbiAgICAgICAgICAgICAgY29sLXNtLTEyIGNvbC1tZC00IGNvbC1sZy00XG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgPjxzcGFuPnt7ICdyZXR1cm5SZXF1ZXN0TGlzdC5zb3J0QnknIHwgY3hUcmFuc2xhdGUgfX08L3NwYW4+XG4gICAgICAgICAgICA8Y3gtc29ydGluZ1xuICAgICAgICAgICAgICBbc29ydE9wdGlvbnNdPVwicmV0dXJuUmVxdWVzdHMuc29ydHNcIlxuICAgICAgICAgICAgICBbc29ydExhYmVsc109XCJnZXRTb3J0TGFiZWxzKCkgfCBhc3luY1wiXG4gICAgICAgICAgICAgIChzb3J0TGlzdEV2ZW50KT1cImNoYW5nZVNvcnRDb2RlKCRldmVudClcIlxuICAgICAgICAgICAgICBbc2VsZWN0ZWRPcHRpb25dPVwicmV0dXJuUmVxdWVzdHMucGFnaW5hdGlvbi5zb3J0XCJcbiAgICAgICAgICAgID48L2N4LXNvcnRpbmc+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtb3JkZXItaGlzdG9yeS1wYWdpbmF0aW9uXCI+XG4gICAgICAgICAgICA8Y3gtcGFnaW5hdGlvblxuICAgICAgICAgICAgICBbcGFnaW5hdGlvbl09XCJyZXR1cm5SZXF1ZXN0cy5wYWdpbmF0aW9uXCJcbiAgICAgICAgICAgICAgKHZpZXdQYWdlRXZlbnQpPVwicGFnZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgICAgID48L2N4LXBhZ2luYXRpb24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy1jb250YWluZXI+XG4iXX0=