import { InjectionToken } from '@angular/core';
import { STORE_FINDER_DATA } from '../store-finder-state';
import { SiteContextActions, StateUtils } from '@spartacus/core';
import { StoreFinderActions } from '../actions';
import { findStoresReducer } from './find-stores.reducer';
import { viewAllStoresReducer } from './view-all-stores.reducer';
export function getReducers() {
    return {
        findStores: StateUtils.loaderReducer(STORE_FINDER_DATA, findStoresReducer),
        viewAllStores: StateUtils.loaderReducer(STORE_FINDER_DATA, viewAllStoresReducer),
    };
}
export const reducerToken = new InjectionToken('StoreFinderReducers');
export const reducerProvider = {
    provide: reducerToken,
    useFactory: getReducers,
};
export function clearStoreFinderState(reducer) {
    return function (state, action) {
        if (action.type === SiteContextActions.LANGUAGE_CHANGE) {
            state = undefined;
        }
        if (action.type === StoreFinderActions.CLEAR_STORE_FINDER_DATA) {
            state = undefined;
        }
        return reducer(state, action);
    };
}
export const metaReducers = [clearStoreFinderState];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvc3RvcmVmaW5kZXIvY29yZS9zdG9yZS9yZWR1Y2Vycy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxPQUFPLEVBQUUsY0FBYyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBZSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDaEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDMUQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFakUsTUFBTSxVQUFVLFdBQVc7SUFDekIsT0FBTztRQUNMLFVBQVUsRUFBRSxVQUFVLENBQUMsYUFBYSxDQUFDLGlCQUFpQixFQUFFLGlCQUFpQixDQUFDO1FBQzFFLGFBQWEsRUFBRSxVQUFVLENBQUMsYUFBYSxDQUNyQyxpQkFBaUIsRUFDakIsb0JBQW9CLENBQ3JCO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQ3ZCLElBQUksY0FBYyxDQUFnQyxxQkFBcUIsQ0FBQyxDQUFDO0FBRTNFLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBYTtJQUN2QyxPQUFPLEVBQUUsWUFBWTtJQUNyQixVQUFVLEVBQUUsV0FBVztDQUN4QixDQUFDO0FBRUYsTUFBTSxVQUFVLHFCQUFxQixDQUNuQyxPQUEyQztJQUUzQyxPQUFPLFVBQVUsS0FBSyxFQUFFLE1BQU07UUFDNUIsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLGVBQWUsRUFBRTtZQUN0RCxLQUFLLEdBQUcsU0FBUyxDQUFDO1NBQ25CO1FBQ0QsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLGtCQUFrQixDQUFDLHVCQUF1QixFQUFFO1lBQzlELEtBQUssR0FBRyxTQUFTLENBQUM7U0FDbkI7UUFDRCxPQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBdUIsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWN0aW9uLFxuICBBY3Rpb25SZWR1Y2VyLFxuICBBY3Rpb25SZWR1Y2VyTWFwLFxuICBNZXRhUmVkdWNlcixcbn0gZnJvbSAnQG5ncngvc3RvcmUnO1xuXG5pbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN0b3Jlc1N0YXRlLCBTVE9SRV9GSU5ERVJfREFUQSB9IGZyb20gJy4uL3N0b3JlLWZpbmRlci1zdGF0ZSc7XG5pbXBvcnQgeyBTaXRlQ29udGV4dEFjdGlvbnMsIFN0YXRlVXRpbHMgfSBmcm9tICdAc3BhcnRhY3VzL2NvcmUnO1xuaW1wb3J0IHsgU3RvcmVGaW5kZXJBY3Rpb25zIH0gZnJvbSAnLi4vYWN0aW9ucyc7XG5pbXBvcnQgeyBmaW5kU3RvcmVzUmVkdWNlciB9IGZyb20gJy4vZmluZC1zdG9yZXMucmVkdWNlcic7XG5pbXBvcnQgeyB2aWV3QWxsU3RvcmVzUmVkdWNlciB9IGZyb20gJy4vdmlldy1hbGwtc3RvcmVzLnJlZHVjZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVkdWNlcnMoKTogQWN0aW9uUmVkdWNlck1hcDxTdG9yZXNTdGF0ZT4ge1xuICByZXR1cm4ge1xuICAgIGZpbmRTdG9yZXM6IFN0YXRlVXRpbHMubG9hZGVyUmVkdWNlcihTVE9SRV9GSU5ERVJfREFUQSwgZmluZFN0b3Jlc1JlZHVjZXIpLFxuICAgIHZpZXdBbGxTdG9yZXM6IFN0YXRlVXRpbHMubG9hZGVyUmVkdWNlcihcbiAgICAgIFNUT1JFX0ZJTkRFUl9EQVRBLFxuICAgICAgdmlld0FsbFN0b3Jlc1JlZHVjZXJcbiAgICApLFxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgcmVkdWNlclRva2VuOiBJbmplY3Rpb25Ub2tlbjxBY3Rpb25SZWR1Y2VyTWFwPFN0b3Jlc1N0YXRlPj4gPVxuICBuZXcgSW5qZWN0aW9uVG9rZW48QWN0aW9uUmVkdWNlck1hcDxTdG9yZXNTdGF0ZT4+KCdTdG9yZUZpbmRlclJlZHVjZXJzJyk7XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyUHJvdmlkZXI6IFByb3ZpZGVyID0ge1xuICBwcm92aWRlOiByZWR1Y2VyVG9rZW4sXG4gIHVzZUZhY3Rvcnk6IGdldFJlZHVjZXJzLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU3RvcmVGaW5kZXJTdGF0ZShcbiAgcmVkdWNlcjogQWN0aW9uUmVkdWNlcjxTdG9yZXNTdGF0ZSwgQWN0aW9uPlxuKTogQWN0aW9uUmVkdWNlcjxTdG9yZXNTdGF0ZSwgQWN0aW9uPiB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gU2l0ZUNvbnRleHRBY3Rpb25zLkxBTkdVQUdFX0NIQU5HRSkge1xuICAgICAgc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChhY3Rpb24udHlwZSA9PT0gU3RvcmVGaW5kZXJBY3Rpb25zLkNMRUFSX1NUT1JFX0ZJTkRFUl9EQVRBKSB7XG4gICAgICBzdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBtZXRhUmVkdWNlcnM6IE1ldGFSZWR1Y2VyPGFueT5bXSA9IFtjbGVhclN0b3JlRmluZGVyU3RhdGVdO1xuIl19