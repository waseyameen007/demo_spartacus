{"version":3,"file":"spartacus-tracking-tms-aep.umd.js","sources":["../../../feature-libs/tracking/tms/aep/services/aep-collector.service.ts","../../../feature-libs/tracking/tms/aep/config/default-aep.config.ts","../../../feature-libs/tracking/tms/aep/aep.module.ts","../../../feature-libs/tracking/tms/aep/spartacus-tracking-tms-aep.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { CxEvent, ScriptLoader } from '@spartacus/core';\nimport {\n  TmsCollector,\n  TmsCollectorConfig,\n  WindowObject,\n} from '@spartacus/tracking/tms/core';\nimport { AepCollectorConfig } from '../config/default-aep.config';\n\n/**\n * Default Adobe Experience Platform Launch collector.\n */\n@Injectable({ providedIn: 'root' })\nexport class AepCollectorService implements TmsCollector {\n  constructor(protected scriptLoader: ScriptLoader) {}\n  /**\n   * If the `TmsCollectorConfig.dataLayerProperty` is not specified, it uses the default `digitalData`\n   */\n  init(config: AepCollectorConfig, windowObject: WindowObject): void {\n    const dataLayerProperty = config.dataLayerProperty ?? 'digitalData';\n    windowObject[dataLayerProperty] = windowObject[dataLayerProperty] ?? {};\n\n    if (config.scriptUrl) {\n      this.scriptLoader.embedScript({ src: config.scriptUrl });\n    }\n  }\n\n  pushEvent<T extends CxEvent>(\n    config: TmsCollectorConfig,\n    windowObject: WindowObject,\n    event: T | any\n  ): void {\n    const dataLayerProperty = config.dataLayerProperty ?? 'digitalData';\n    windowObject[dataLayerProperty] = {\n      ...windowObject[dataLayerProperty],\n      ...event,\n    };\n  }\n}\n","import { TmsCollectorConfig, TmsConfig } from '@spartacus/tracking/tms/core';\nimport { AepCollectorService } from '../services/aep-collector.service';\n\nexport interface AepCollectorConfig extends TmsCollectorConfig {\n  scriptUrl?: string;\n}\n\ndeclare module '@spartacus/tracking/tms/core' {\n  interface TmsCollectors {\n    aep?: AepCollectorConfig;\n  }\n}\n\nexport const defaultAdobeExperiencePlatformConfig: TmsConfig = {\n  tagManager: {\n    aep: {\n      collector: AepCollectorService,\n    },\n  },\n};\n","import { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultAdobeExperiencePlatformConfig } from './config/default-aep.config';\n\n@NgModule({\n  providers: [provideDefaultConfig(defaultAdobeExperiencePlatformConfig)],\n})\nexport class AepModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["Injectable","provideDefaultConfig","NgModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASA;;;;QAKE,6BAAsB,YAA0B;YAA1B,iBAAY,GAAZ,YAAY,CAAc;SAAI;;;;QAIpD,kCAAI,GAAJ,UAAK,MAA0B,EAAE,YAA0B;;YACzD,IAAM,iBAAiB,GAAG,MAAA,MAAM,CAAC,iBAAiB,mCAAI,aAAa,CAAC;YACpE,YAAY,CAAC,iBAAiB,CAAC,GAAG,MAAA,YAAY,CAAC,iBAAiB,CAAC,mCAAI,EAAE,CAAC;YAExE,IAAI,MAAM,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;aAC1D;SACF;QAED,uCAAS,GAAT,UACE,MAA0B,EAC1B,YAA0B,EAC1B,KAAc;;YAEd,IAAM,iBAAiB,GAAG,MAAA,MAAM,CAAC,iBAAiB,mCAAI,aAAa,CAAC;YACpE,YAAY,CAAC,iBAAiB,CAAC,mCAC1B,YAAY,CAAC,iBAAiB,CAAC,GAC/B,KAAK,CACT,CAAC;SACH;;;0IAxBU,mBAAmB;8IAAnB,mBAAmB,cADN,MAAM;qHACnB,mBAAmB;sBAD/BA,aAAU;uBAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;ICC3B,IAAM,oCAAoC,GAAc;QAC7D,UAAU,EAAE;YACV,GAAG,EAAE;gBACH,SAAS,EAAE,mBAAmB;aAC/B;SACF;KACF;;;QCZD;;;;gIAAa,SAAS;iIAAT,SAAS;iIAAT,SAAS,aAFT,CAACC,uBAAoB,CAAC,oCAAoC,CAAC,CAAC;qHAE5D,SAAS;sBAHrBC,WAAQ;uBAAC;wBACR,SAAS,EAAE,CAACD,uBAAoB,CAAC,oCAAoC,CAAC,CAAC;qBACxE;;;ICND;;;;;;;;;;;;;"}