{"version":3,"file":"spartacus-storefront.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/storefrontlib/layout/a11y/keyboard-focus/keyboard-focus.model.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/base/base-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/base/base-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/visible/visible-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/block/block-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/persist/persist-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/persist/persist-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/services/select-focus.util.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/escape/escape-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/escape/escape-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/autofocus/auto-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/autofocus/auto-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/tab/tab-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/tab/tab-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/trap/trap-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/trap/trap-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/lock/lock-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/lock/lock-focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/services/keyboard-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/focus.directive.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/config/default-keyboard-focus.config.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/config/keyboard-focus.config.ts","../../../projects/storefrontlib/layout/config/layout-config.ts","../../../projects/storefrontlib/layout/breakpoint/breakpoint.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/on-navigate/on-navigate-focus.service.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/keyboard-focus.module.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/focus-testing.module.ts","../../../projects/storefrontlib/layout/a11y/keyboard-focus/index.ts","../../../projects/storefrontlib/layout/launch-dialog/config/launch-config.ts","../../../projects/storefrontlib/layout/launch-dialog/services/launch-render.strategy.ts","../../../projects/storefrontlib/layout/launch-dialog/services/launch-dialog.service.ts","../../../projects/storefrontlib/cms-components/anonymous-consent-management/banner/anonymous-consent-management-banner.component.ts","../../../projects/storefrontlib/cms-components/anonymous-consent-management/banner/anonymous-consent-management-banner.component.html","../../../projects/storefrontlib/layout/launch-dialog/services/inline-render.strategy.ts","../../../projects/storefrontlib/layout/launch-dialog/services/inline-root-render.strategy.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet.model.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet.service.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet-ref/outlet-ref.directive.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet-ref/outlet-ref.module.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet-renderer.service.ts","../../../projects/storefrontlib/layout/loading/intersection.service.ts","../../../projects/storefrontlib/layout/loading/defer-loader.service.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet.directive.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet.providers.ts","../../../projects/storefrontlib/cms-structure/outlet/outlet.module.ts","../../../projects/storefrontlib/layout/launch-dialog/services/outlet-render.strategy.ts","../../../projects/storefrontlib/layout/launch-dialog/services/routing-render.strategy.ts","../../../projects/storefrontlib/layout/launch-dialog/launch-dialog.module.ts","../../../projects/storefrontlib/cms-components/misc/icon/icon.model.ts","../../../projects/storefrontlib/cms-components/misc/icon/fontawesome-icon.config.ts","../../../projects/storefrontlib/cms-components/misc/icon/icon-loader.service.ts","../../../projects/storefrontlib/layout/direction/config/direction.model.ts","../../../projects/storefrontlib/cms-components/misc/icon/icon.component.ts","../../../projects/storefrontlib/cms-components/misc/icon/icon.component.html","../../../projects/storefrontlib/cms-components/misc/icon/default-icon.config.ts","../../../projects/storefrontlib/cms-components/misc/icon/icon.module.ts","../../../projects/storefrontlib/cms-components/misc/icon/testing/icon-testing.module.ts","../../../projects/storefrontlib/shared/components/spinner/spinner.component.ts","../../../projects/storefrontlib/shared/components/spinner/spinner.component.html","../../../projects/storefrontlib/cms-components/myaccount/consent-management/components/consent-form/consent-management-form.component.ts","../../../projects/storefrontlib/cms-components/myaccount/consent-management/components/consent-form/consent-management-form.component.html","../../../projects/storefrontlib/shared/components/anonymous-consents-dialog/anonymous-consent-dialog.component.ts","../../../projects/storefrontlib/shared/components/anonymous-consents-dialog/anonymous-consent-dialog.component.html","../../../projects/storefrontlib/cms-components/anonymous-consent-management/default-anonymous-consent-layout.config.ts","../../../projects/storefrontlib/cms-components/anonymous-consent-management/open-dialog/anonymous-consent-open-dialog.component.ts","../../../projects/storefrontlib/cms-components/anonymous-consent-management/open-dialog/anonymous-consent-open-dialog.component.html","../../../projects/storefrontlib/cms-components/anonymous-consent-management/anonymous-consent-management.module.ts","../../../projects/storefrontlib/shared/components/modal/modal.service.ts","../../../projects/storefrontlib/cms-components/cart/cart-outlets.model.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-item/model/cart-item-context-source.model.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-item/model/cart-item-context.model.ts","../../../projects/storefrontlib/cms-components/cart/validation/cart-validation-state.service.ts","../../../projects/storefrontlib/cms-components/cart/validation/cart-item-warning/cart-item-validation-warning.component.ts","../../../projects/storefrontlib/cms-components/cart/validation/cart-item-warning/cart-item-validation-warning.component.html","../../../projects/storefrontlib/shared/components/media/media.model.ts","../../../projects/storefrontlib/shared/components/media/media.service.ts","../../../projects/storefrontlib/shared/components/media/media.component.ts","../../../projects/storefrontlib/shared/components/media/media.component.html","../../../projects/storefrontlib/shared/components/item-counter/item-counter.component.ts","../../../projects/storefrontlib/shared/components/item-counter/item-counter.component.html","../../../projects/storefrontlib/cms-components/misc/promotions/promotions.component.ts","../../../projects/storefrontlib/cms-components/misc/promotions/promotions.component.html","../../../projects/storefrontlib/shared/components/modal/modal.directive.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-item/cart-item.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-item/cart-item.component.html","../../../projects/storefrontlib/cms-components/cart/add-to-cart/added-to-cart-dialog/added-to-cart-dialog.component.ts","../../../projects/storefrontlib/cms-components/cart/add-to-cart/added-to-cart-dialog/added-to-cart-dialog.component.html","../../../projects/storefrontlib/cms-components/product/current-product.service.ts","../../../projects/storefrontlib/cms-structure/page/model/cms-component-data.ts","../../../projects/storefrontlib/cms-components/cart/add-to-cart/add-to-cart.component.ts","../../../projects/storefrontlib/cms-components/cart/add-to-cart/add-to-cart.component.html","../../../projects/storefrontlib/shared/components/spinner/spinner.module.ts","../../../projects/storefrontlib/cms-components/myaccount/consent-management/components/consent-management.component.ts","../../../projects/storefrontlib/cms-components/myaccount/consent-management/components/consent-management.component.html","../../../projects/storefrontlib/cms-components/myaccount/consent-management/consent-management.module.ts","../../../projects/storefrontlib/shared/components/anonymous-consents-dialog/anonymous-consents-dialog.module.ts","../../../projects/storefrontlib/shared/components/popover/popover.model.ts","../../../projects/storefrontlib/shared/services/positioning/positioning.service.ts","../../../projects/storefrontlib/shared/components/popover/popover.component.ts","../../../projects/storefrontlib/shared/components/popover/popover.component.html","../../../projects/storefrontlib/shared/components/popover/popover.service.ts","../../../projects/storefrontlib/shared/components/popover/popover.directive.ts","../../../projects/storefrontlib/shared/components/truncate-text-popover/truncate.pipe.ts","../../../projects/storefrontlib/shared/components/truncate-text-popover/truncate-text-popover.component.ts","../../../projects/storefrontlib/shared/components/truncate-text-popover/truncate-text-popover.component.html","../../../projects/storefrontlib/shared/components/card/card.component.ts","../../../projects/storefrontlib/shared/components/card/card.component.html","../../../projects/storefrontlib/shared/components/popover/popover.module.ts","../../../projects/storefrontlib/shared/components/truncate-text-popover/truncate-text-popover.module.ts","../../../projects/storefrontlib/shared/components/card/card.module.ts","../../../projects/storefrontlib/shared/components/carousel/carousel.service.ts","../../../projects/storefrontlib/shared/components/carousel/carousel.component.ts","../../../projects/storefrontlib/shared/components/carousel/carousel.component.html","../../../projects/storefrontlib/shared/components/media/media.module.ts","../../../projects/storefrontlib/shared/components/carousel/carousel.module.ts","../../../projects/storefrontlib/shared/components/form/date-picker/date-picker.service.ts","../../../projects/storefrontlib/shared/components/form/form-errors/form-errors.component.ts","../../../projects/storefrontlib/shared/components/form/form-errors/form-errors.component.html","../../../projects/storefrontlib/shared/components/form/date-picker/date-picker.component.ts","../../../projects/storefrontlib/shared/components/form/date-picker/date-picker.component.html","../../../projects/storefrontlib/shared/components/form/form-errors/form-errors.module.ts","../../../projects/storefrontlib/shared/components/form/date-picker/date-picker.module.ts","../../../projects/storefrontlib/shared/components/form/file-upload/file-upload.component.ts","../../../projects/storefrontlib/shared/components/form/file-upload/file-upload.component.html","../../../projects/storefrontlib/shared/components/form/file-upload/file-upload.module.ts","../../../projects/storefrontlib/shared/components/generic-link/generic-link-component.service.ts","../../../projects/storefrontlib/shared/components/generic-link/generic-link.component.ts","../../../projects/storefrontlib/shared/components/generic-link/generic-link.component.html","../../../projects/storefrontlib/shared/components/generic-link/generic-link.module.ts","../../../projects/storefrontlib/shared/components/item-counter/item-counter.module.ts","../../../projects/storefrontlib/shared/components/list-navigation/pagination/config/default-pagination.config.ts","../../../projects/storefrontlib/shared/components/list-navigation/pagination/config/pagination.config.ts","../../../projects/storefrontlib/shared/components/list-navigation/pagination/pagination.model.ts","../../../projects/storefrontlib/shared/components/list-navigation/pagination/pagination.builder.ts","../../../projects/storefrontlib/shared/components/list-navigation/pagination/pagination.component.ts","../../../projects/storefrontlib/shared/components/list-navigation/pagination/pagination.component.html","../../../projects/storefrontlib/shared/components/list-navigation/pagination/pagination.module.ts","../../../projects/storefrontlib/shared/components/list-navigation/sorting/sorting.component.ts","../../../projects/storefrontlib/shared/components/list-navigation/sorting/sorting.component.html","../../../projects/storefrontlib/shared/components/list-navigation/list-navigation.module.ts","../../../projects/storefrontlib/shared/components/media/media.config.ts","../../../projects/storefrontlib/shared/components/modal/modal-ref.ts","../../../projects/storefrontlib/shared/components/modal/modal.module.ts","../../../projects/storefrontlib/shared/components/order-overview/order-overview.component.ts","../../../projects/storefrontlib/shared/components/order-overview/order-overview.component.html","../../../projects/storefrontlib/shared/components/order-overview/order-overview.module.ts","../../../projects/storefrontlib/shared/components/progress-button/progress-button.component.ts","../../../projects/storefrontlib/shared/components/progress-button/progress-button.component.html","../../../projects/storefrontlib/shared/components/progress-button/progress-button.module.ts","../../../projects/storefrontlib/shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.component.ts","../../../projects/storefrontlib/shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.component.html","../../../projects/storefrontlib/shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.module.ts","../../../projects/storefrontlib/shared/components/split-view/split-view.service.ts","../../../projects/storefrontlib/shared/components/split-view/split/split-view.component.ts","../../../projects/storefrontlib/shared/components/split-view/split/split-view.component.html","../../../projects/storefrontlib/shared/components/split-view/view/view.component.ts","../../../projects/storefrontlib/shared/components/split-view/view/view.component.html","../../../projects/storefrontlib/shared/components/split-view/split-view.module.ts","../../../projects/storefrontlib/cms-components/misc/global-message/global-message.component.ts","../../../projects/storefrontlib/cms-components/misc/global-message/global-message.component.html","../../../projects/storefrontlib/cms-components/misc/global-message/global-message.module.ts","../../../projects/storefrontlib/cms-components/misc/message/message.component.ts","../../../projects/storefrontlib/cms-components/misc/message/message.component.html","../../../projects/storefrontlib/cms-components/misc/message/message.module.ts","../../../projects/storefrontlib/cms-components/misc/promotions/promotions.module.ts","../../../projects/storefrontlib/cms-components/misc/site-context-selector/site-context-component.service.ts","../../../projects/storefrontlib/cms-components/misc/site-context-selector/site-context-selector.component.ts","../../../projects/storefrontlib/cms-components/misc/site-context-selector/site-context-selector.component.html","../../../projects/storefrontlib/cms-components/misc/site-context-selector/language-currency.component.ts","../../../projects/storefrontlib/cms-components/misc/site-context-selector/site-context-selector.module.ts","../../../projects/storefrontlib/cms-components/misc/site-context-selector/site-context.model.ts","../../../projects/storefrontlib/shared/components/star-rating/star-rating.component.ts","../../../projects/storefrontlib/shared/components/star-rating/star-rating.component.html","../../../projects/storefrontlib/shared/components/star-rating/star-rating.module.ts","../../../projects/storefrontlib/shared/components/table/table-data-cell/table-data-cell.component.ts","../../../projects/storefrontlib/shared/components/table/table-header-cell/table-header-cell.component.ts","../../../projects/storefrontlib/shared/components/table/config/default-table.config.ts","../../../projects/storefrontlib/shared/components/table/config/table.config.ts","../../../projects/storefrontlib/shared/components/table/table-data-cell/table-data-cell.module.ts","../../../projects/storefrontlib/shared/components/table/table-header-cell/table-header-cell.module.ts","../../../projects/storefrontlib/shared/components/table/table-renderer.service.ts","../../../projects/storefrontlib/shared/components/table/table.model.ts","../../../projects/storefrontlib/shared/components/table/table.component.ts","../../../projects/storefrontlib/shared/components/table/table.component.html","../../../projects/storefrontlib/shared/components/table/table.module.ts","../../../projects/storefrontlib/shared/components/table/table.service.ts","../../../projects/storefrontlib/shared/config/view-config.ts","../../../projects/storefrontlib/shared/pipes/suplement-hash-anchors/supplement-hash-anchors.pipe.ts","../../../projects/storefrontlib/shared/pipes/suplement-hash-anchors/supplement-hash-anchors.module.ts","../../../projects/storefrontlib/shared/services/file/file-download.service.ts","../../../projects/storefrontlib/shared/services/file/csv/export-csv-file.service.ts","../../../projects/storefrontlib/shared/services/file/file-reader.service.ts","../../../projects/storefrontlib/shared/services/file/csv/import-csv-file.service.ts","../../../projects/storefrontlib/shared/services/file/files-form-validators.ts","../../../projects/storefrontlib/shared/utils/validators/custom-form-validators.ts","../../../projects/storefrontlib/shared/utils/forms/title-utils.ts","../../../projects/storefrontlib/cms-components/cart/cart-coupon/applied-coupons/applied-coupons.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-coupon/applied-coupons/applied-coupons.component.html","../../../projects/storefrontlib/cms-components/cart/cart-coupon/cart-coupon.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-coupon/cart-coupon.component.html","../../../projects/storefrontlib/cms-components/cart/cart-coupon/cart-coupon.module.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-item-list/cart-item-list.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-item-list/cart-item-list.component.html","../../../projects/storefrontlib/cms-components/cart/cart-shared/order-summary/order-summary.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/order-summary/order-summary.component.html","../../../projects/storefrontlib/cms-components/cart/validation/cart-item-warning/cart-item-validation-warning.module.ts","../../../projects/storefrontlib/cms-components/cart/cart-shared/cart-shared.module.ts","../../../projects/storefrontlib/cms-components/cart/add-to-cart/add-to-cart.module.ts","../../../projects/storefrontlib/cms-components/cart/add-to-wishlist/add-to-wish-list.component.ts","../../../projects/storefrontlib/cms-components/cart/add-to-wishlist/add-to-wish-list.component.html","../../../projects/storefrontlib/cms-components/cart/add-to-wishlist/add-to-wish-list.module.ts","../../../projects/storefrontlib/cms-components/cart/validation/cart-warnings/cart-validation-warnings.component.ts","../../../projects/storefrontlib/cms-components/cart/validation/cart-warnings/cart-validation-warnings.component.html","../../../projects/storefrontlib/cms-components/cart/cart-details/cart-details.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-details/cart-details.component.html","../../../projects/storefrontlib/cms-components/cart/validation/cart-warnings/cart-validation-warnings.module.ts","../../../projects/storefrontlib/cms-components/cart/cart-details/cart-details.module.ts","../../../projects/storefrontlib/cms-components/cart/cart-page-layout-handler.ts","../../../projects/storefrontlib/cms-components/cart/order-entries-context/import-to-cart.model.ts","../../../projects/storefrontlib/cms-components/cart/order-entries-context/cart-order-entries.context.ts","../../../projects/storefrontlib/cms-components/cart/order-entries-context/import-export.model.ts","../../../projects/storefrontlib/cms-components/cart/cart-page/active-cart-order-entries-context.ts","../../../projects/storefrontlib/cms-components/cart/cart-totals/cart-totals.component.ts","../../../projects/storefrontlib/cms-components/cart/cart-totals/cart-totals.component.html","../../../projects/storefrontlib/cms-components/cart/cart-totals/cart-totals.module.ts","../../../projects/storefrontlib/cms-structure/page/page-layout/page-layout-handler.ts","../../../projects/storefrontlib/cms-structure/page/page-layout/page-layout.service.ts","../../../projects/storefrontlib/cms-structure/services/cms-features.service.ts","../../../projects/storefrontlib/cms-structure/services/cms-components.service.ts","../../../projects/storefrontlib/cms-structure/page/slot/page-slot.service.ts","../../../projects/storefrontlib/cms-structure/page/component/events/component.event.ts","../../../projects/storefrontlib/cms-structure/page/component/handlers/component-handler.ts","../../../projects/storefrontlib/cms-structure/page/component/services/component-handler.service.ts","../../../projects/storefrontlib/cms-structure/page/component/services/component-data.provider.ts","../../../projects/storefrontlib/cms-structure/page/component/services/cms-injector.service.ts","../../../projects/storefrontlib/cms-structure/page/component/component-wrapper.directive.ts","../../../projects/storefrontlib/cms-structure/page/slot/page-slot.component.ts","../../../projects/storefrontlib/cms-structure/page/slot/page-slot.component.html","../../../projects/storefrontlib/cms-structure/page/page-layout/page-template.directive.ts","../../../projects/storefrontlib/cms-structure/page/page-layout/page-layout.component.ts","../../../projects/storefrontlib/cms-structure/page/page-layout/page-layout.component.html","../../../projects/storefrontlib/cms-structure/services/cms-routes-impl.service.ts","../../../projects/storefrontlib/cms-structure/services/cms-routes.service.ts","../../../projects/storefrontlib/cms-structure/services/cms-i18n.service.ts","../../../projects/storefrontlib/cms-structure/services/cms-guards.service.ts","../../../projects/storefrontlib/cms-structure/guards/cms-page-guard.service.ts","../../../projects/storefrontlib/cms-structure/guards/cms-page.guard.ts","../../../projects/storefrontlib/cms-components/cart/mini-cart/mini-cart.component.ts","../../../projects/storefrontlib/cms-components/cart/mini-cart/mini-cart.component.html","../../../projects/storefrontlib/cms-components/cart/mini-cart/mini-cart.module.ts","../../../projects/storefrontlib/cms-components/cart/order-entries-context/order-entires.context.ts","../../../projects/storefrontlib/cms-components/cart/save-for-later/save-for-later.component.ts","../../../projects/storefrontlib/cms-components/cart/save-for-later/save-for-later.component.html","../../../projects/storefrontlib/cms-components/cart/save-for-later/save-for-later.module.ts","../../../projects/storefrontlib/cms-components/cart/cart.module.ts","../../../projects/storefrontlib/cms-components/cart/validation/cart-validation-components.module.ts","../../../projects/storefrontlib/cms-components/cart/validation/guards/cart-validation.guard.ts","../../../projects/storefrontlib/cms-components/content/banner/banner.component.ts","../../../projects/storefrontlib/cms-components/content/banner/banner.component.html","../../../projects/storefrontlib/cms-components/content/banner/banner.module.ts","../../../projects/storefrontlib/cms-structure/page/component/handlers/default-component.handler.ts","../../../projects/storefrontlib/cms-structure/page/component/handlers/lazy-component.handler.ts","../../../projects/storefrontlib/cms-structure/page/component/inner-components-host.directive.ts","../../../projects/storefrontlib/cms-structure/page/component/page-component.module.ts","../../../projects/storefrontlib/cms-structure/page/slot/page-slot.module.ts","../../../projects/storefrontlib/cms-structure/page/page-layout/page-layout.module.ts","../../../projects/storefrontlib/cms-structure/pwa/pwa.module-config.ts","../../../projects/storefrontlib/cms-structure/pwa/services/add-to-home-screen.service.ts","../../../projects/storefrontlib/cms-structure/pwa/components/add-to-home-screen.component.ts","../../../projects/storefrontlib/cms-structure/pwa/components/add-to-home-screen-banner/add-to-home-screen-banner.component.ts","../../../projects/storefrontlib/cms-structure/pwa/components/add-to-home-screen-banner/add-to-home-screen-banner.component.html","../../../projects/storefrontlib/cms-structure/pwa/components/add-to-home-screen-btn/add-to-home-screen-btn.component.ts","../../../projects/storefrontlib/cms-structure/pwa/components/add-to-home-screen-btn/add-to-home-screen-btn.component.html","../../../projects/storefrontlib/cms-structure/pwa/pwa.module.ts","../../../projects/storefrontlib/cms-structure/routing/cms-route/add-cms-route.ts","../../../projects/storefrontlib/cms-structure/routing/cms-route/cms-route.module.ts","../../../projects/storefrontlib/cms-structure/routing/default-routing-config.ts","../../../projects/storefrontlib/cms-structure/routing/routing.module.ts","../../../projects/storefrontlib/cms-structure/routing/suffix-routes/suffix-url-matcher.ts","../../../projects/storefrontlib/cms-structure/seo/page-meta-link.service.ts","../../../projects/storefrontlib/cms-structure/seo/seo-meta.service.ts","../../../projects/storefrontlib/cms-structure/seo/config/default-seo.config.ts","../../../projects/storefrontlib/cms-structure/seo/config/seo.config.ts","../../../projects/storefrontlib/cms-structure/seo/html-lang-provider.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/json-ld-script.factory.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/json-ld.directive.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/tokens.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/structured-data.factory.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/structured-data.module.ts","../../../projects/storefrontlib/cms-structure/seo/seo.module.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/breadcrumb/breadcrumb-schema.builder.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/product/jsonld-base-product.builder.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/product/jsonld-product-offer.builder.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/product/jsonld-product-review.builder.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/product/product-schema.builder.ts","../../../projects/storefrontlib/cms-structure/seo/structured-data/builders/json-ld-builder.module.ts","../../../projects/storefrontlib/cms-structure/utils/cms-structure.model.ts","../../../projects/storefrontlib/cms-structure/utils/cms-structure.util.ts","../../../projects/storefrontlib/cms-components/content/banner-carousel/banner-carousel.component.ts","../../../projects/storefrontlib/cms-components/content/banner-carousel/banner-carousel.component.html","../../../projects/storefrontlib/cms-components/content/banner-carousel/banner-carousel.module.ts","../../../projects/storefrontlib/cms-components/content/link/link.component.ts","../../../projects/storefrontlib/cms-components/content/link/link.component.html","../../../projects/storefrontlib/cms-components/content/link/link.module.ts","../../../projects/storefrontlib/cms-components/content/paragraph/paragraph.component.ts","../../../projects/storefrontlib/cms-components/content/paragraph/paragraph.component.html","../../../projects/storefrontlib/cms-components/content/paragraph/paragraph.module.ts","../../../projects/storefrontlib/cms-components/content/tab-paragraph-container/tab-paragraph-container.component.ts","../../../projects/storefrontlib/cms-components/content/tab-paragraph-container/tab-paragraph-container.component.html","../../../projects/storefrontlib/cms-components/content/tab-paragraph-container/tab-paragraph-container.module.ts","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-book.component.service.ts","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-form/suggested-addresses-dialog/suggested-addresses-dialog.component.ts","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-form/suggested-addresses-dialog/suggested-addresses-dialog.component.html","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-form/address-form.component.ts","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-form/address-form.component.html","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-book.component.ts","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-book.component.html","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-form/address-form.module.ts","../../../projects/storefrontlib/cms-components/myaccount/address-book/address-book.module.ts","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/my-coupons.component.service.ts","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/coupon-card/coupon-dialog/coupon-dialog.component.ts","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/coupon-card/coupon-dialog/coupon-dialog.component.html","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/coupon-card/coupon-card.component.ts","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/coupon-card/coupon-card.component.html","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/my-coupons.component.ts","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/my-coupons.component.html","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/coupon-claim/coupon-claim.component.ts","../../../projects/storefrontlib/cms-components/myaccount/my-coupons/my-coupons.module.ts","../../../projects/storefrontlib/cms-components/myaccount/my-interests/my-interests.component.ts","../../../projects/storefrontlib/cms-components/myaccount/my-interests/my-interests.component.html","../../../projects/storefrontlib/cms-components/myaccount/my-interests/my-interests.module.ts","../../../projects/storefrontlib/cms-components/myaccount/notification-preference/notification-preference.component.ts","../../../projects/storefrontlib/cms-components/myaccount/notification-preference/notification-preference.component.html","../../../projects/storefrontlib/cms-components/myaccount/notification-preference/notification-preference.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order-actions/amend-order-actions.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order-actions/amend-order-actions.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order-actions/amend-order-actions.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order.model.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-transitional-tokens.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-details.service.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order.service.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order-items/amend-order-items.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order-items/amend-order-items.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/amend-order-items/amend-order-items.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/cancel-order-confirmation/cancel-order-confirmation.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/cancel-order-confirmation/cancel-order-confirmation.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/order-cancellation.service.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/order-cancellation.guard.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/cancel-order-confirmation/cancel-order-confirmation.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/cancel-order/cancel-order.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/cancel-order/cancel-order.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/cancel-order/cancel-order.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/cancellations/order-cancellation.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/order-return.service.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/order-return.guard.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/return-order-confirmation/return-order-confirmation.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/return-order-confirmation/return-order-confirmation.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/return-order-confirmation/return-order-confirmation.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/return-order/return-order.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/return-order/return-order.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/return-order/return-order.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/amend-order/returns/order-return.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-actions/order-detail-actions.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-actions/order-detail-actions.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/tracking-events/tracking-events.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/tracking-events/tracking-events.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/consignment-tracking.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/consignment-tracking.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/order-consigned-entries/order-consigned-entries.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/order-consigned-entries/order-consigned-entries.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/order-consigned-entries/order-consigned-entries.model.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/order-detail-items.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-items/order-detail-items.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-shipping/order-detail-shipping.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-shipping/order-detail-shipping.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-totals/order-detail-totals.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-detail-totals/order-detail-totals.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-details/order-details.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-history/order-history.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order-history/order-history.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/order-history/order-history.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-details/default-replenishment-order-cancellation-layout.config.ts","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-details/replenishment-order-cancellation/replenishment-order-cancellation.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-details/replenishment-order-cancellation/replenishment-order-cancellation.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-details/replenishment-order-details.service.ts","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-details/replenishment-order-details.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-history/replenishment-order-history.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-history/replenishment-order-history.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/replenishment-order-history/replenishment-order-history.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request.service.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-items/return-request-items.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-items/return-request-items.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-overview/return-request-overview.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-overview/return-request-overview.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-totals/return-request-totals.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-totals/return-request-totals.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-detail/return-request-detail.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-list/order-return-request-list.component.ts","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-list/order-return-request-list.component.html","../../../projects/storefrontlib/cms-components/myaccount/order/return-request-list/order-return-request-list.module.ts","../../../projects/storefrontlib/cms-components/myaccount/order/order.module.ts","../../../projects/storefrontlib/cms-components/myaccount/payment-methods/payment-methods.component.ts","../../../projects/storefrontlib/cms-components/myaccount/payment-methods/payment-methods.component.html","../../../projects/storefrontlib/cms-components/myaccount/payment-methods/payment-methods.module.ts","../../../projects/storefrontlib/cms-components/navigation/page-header/page-title.component.ts","../../../projects/storefrontlib/cms-components/navigation/page-header/page-title.component.html","../../../projects/storefrontlib/cms-components/navigation/breadcrumb/breadcrumb.component.ts","../../../projects/storefrontlib/cms-components/navigation/breadcrumb/breadcrumb.component.html","../../../projects/storefrontlib/cms-components/navigation/breadcrumb/breadcrumb.module.ts","../../../projects/storefrontlib/cms-components/navigation/navigation/navigation.service.ts","../../../projects/storefrontlib/layout/header/hamburger-menu/hamburger-menu.service.ts","../../../projects/storefrontlib/cms-components/navigation/navigation/navigation-ui.component.ts","../../../projects/storefrontlib/cms-components/navigation/navigation/navigation-ui.component.html","../../../projects/storefrontlib/cms-components/navigation/category-navigation/category-navigation.component.ts","../../../projects/storefrontlib/cms-components/navigation/category-navigation/category-navigation.component.html","../../../projects/storefrontlib/cms-components/navigation/navigation/navigation.component.ts","../../../projects/storefrontlib/cms-components/navigation/navigation/navigation.component.html","../../../projects/storefrontlib/cms-components/navigation/navigation/navigation.module.ts","../../../projects/storefrontlib/cms-components/navigation/category-navigation/category-navigation.module.ts","../../../projects/storefrontlib/cms-components/navigation/footer-navigation/footer-navigation.component.ts","../../../projects/storefrontlib/cms-components/navigation/footer-navigation/footer-navigation.component.html","../../../projects/storefrontlib/cms-components/navigation/footer-navigation/footer-navigation.module.ts","../../../projects/storefrontlib/cms-components/navigation/page-header/page-title.module.ts","../../../projects/storefrontlib/cms-components/navigation/search-box/highlight.pipe.ts","../../../projects/storefrontlib/cms-components/navigation/search-box/search-box.events.ts","../../../projects/storefrontlib/cms-components/navigation/search-box/search-box-component.service.ts","../../../projects/storefrontlib/cms-components/navigation/search-box/search-box.component.ts","../../../projects/storefrontlib/cms-components/navigation/search-box/search-box.component.html","../../../projects/storefrontlib/cms-components/navigation/search-box/search-box.module.ts","../../../projects/storefrontlib/cms-components/product/carousel/product-carousel.service.ts","../../../projects/storefrontlib/cms-components/product/carousel/product-carousel/product-carousel.component.ts","../../../projects/storefrontlib/cms-components/product/carousel/product-carousel/product-carousel.component.html","../../../projects/storefrontlib/cms-components/product/carousel/product-carousel/product-carousel.module.ts","../../../projects/storefrontlib/cms-components/product/carousel/product-references/product-references.component.ts","../../../projects/storefrontlib/cms-components/product/carousel/product-references/product-references.component.html","../../../projects/storefrontlib/cms-components/product/carousel/product-references/product-references.module.ts","../../../projects/storefrontlib/cms-components/product/config/default-view-config.ts","../../../projects/storefrontlib/cms-components/product/product-images/product-images.component.ts","../../../projects/storefrontlib/cms-components/product/product-images/product-images.component.html","../../../projects/storefrontlib/cms-components/product/product-images/product-images.module.ts","../../../projects/storefrontlib/cms-components/product/product-intro/product-intro.component.ts","../../../projects/storefrontlib/cms-components/product/product-intro/product-intro.component.html","../../../projects/storefrontlib/cms-components/product/product-intro/product-intro.module.ts","../../../projects/storefrontlib/cms-components/product/product-list/container/product-list-component.service.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-view/product-view.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-view/product-view.component.html","../../../projects/storefrontlib/cms-components/product/product-outlets.model.ts","../../../projects/storefrontlib/cms-components/product/product-list/model/product-list-item-context.model.ts","../../../projects/storefrontlib/cms-components/product/product-list/model/product-list-item-context-source.model.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-grid-item/product-grid-item.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-grid-item/product-grid-item.component.html","../../../projects/storefrontlib/cms-components/product/product-list/product-list-item/product-list-item.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-list-item/product-list-item.component.html","../../../projects/storefrontlib/cms-components/product/product-list/container/product-scroll/product-scroll.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/container/product-scroll/product-scroll.component.html","../../../projects/storefrontlib/cms-components/product/product-list/container/product-list.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/container/product-list.component.html","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet.model.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/services/product-facet.service.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/services/facet.service.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/active-facets/active-facets.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/active-facets/active-facets.component.html","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/active-facets/active-facets.module.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet/facet.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet/facet.component.html","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet-list/facet-list.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet-list/facet-list.component.html","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet/facet.module.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/facet-list/facet-list.module.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/product-facet-navigation.component.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/product-facet-navigation.component.html","../../../projects/storefrontlib/cms-components/product/product-list/product-facet-navigation/product-facet-navigation.module.ts","../../../projects/storefrontlib/cms-components/product/product-list/product-list.module.ts","../../../projects/storefrontlib/cms-components/product/product-summary/product-summary.component.ts","../../../projects/storefrontlib/cms-components/product/product-summary/product-summary.component.html","../../../projects/storefrontlib/cms-components/product/product-summary/product-summary.module.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-attributes/product-attributes.component.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-attributes/product-attributes.component.html","../../../projects/storefrontlib/cms-components/product/product-tabs/product-attributes/product-attributes.module.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-details-tab/product-details-tab.component.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-details-tab/product-details-tab.component.html","../../../projects/storefrontlib/cms-components/product/product-tabs/product-details-tab/product-details-tab.module.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-reviews/product-reviews.component.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-reviews/product-reviews.component.html","../../../projects/storefrontlib/cms-components/product/product-tabs/product-reviews/product-reviews.module.ts","../../../projects/storefrontlib/cms-components/product/product-tabs/product-tabs.module.ts","../../../projects/storefrontlib/cms-components/product/stock-notification/stock-notification-dialog/stock-notification-dialog.component.ts","../../../projects/storefrontlib/cms-components/product/stock-notification/stock-notification-dialog/stock-notification-dialog.component.html","../../../projects/storefrontlib/cms-components/product/stock-notification/stock-notification.component.ts","../../../projects/storefrontlib/cms-components/product/stock-notification/stock-notification.component.html","../../../projects/storefrontlib/cms-components/product/stock-notification/stock-notification.module.ts","../../../projects/storefrontlib/cms-components/user/login-route/login.guard.ts","../../../projects/storefrontlib/cms-components/user/login-route/login-route.module.ts","../../../projects/storefrontlib/cms-components/user/logout/logout.guard.ts","../../../projects/storefrontlib/cms-components/user/logout/logout.module.ts","../../../projects/storefrontlib/cms-components/user/user.module.ts","../../../projects/storefrontlib/cms-components/wish-list/components/wish-list-item/wish-list-item.component.ts","../../../projects/storefrontlib/cms-components/wish-list/components/wish-list-item/wish-list-item.component.html","../../../projects/storefrontlib/cms-components/wish-list/components/wish-list/wish-list.component.ts","../../../projects/storefrontlib/cms-components/wish-list/components/wish-list/wish-list.component.html","../../../projects/storefrontlib/cms-components/wish-list/wish-list.module.ts","../../../projects/storefrontlib/cms-pages/product-details-page/product-details-url-matcher.ts","../../../projects/storefrontlib/cms-pages/product-details-page/product-details-page.module.ts","../../../projects/storefrontlib/cms-pages/product-listing-page/product-listing-url-matcher.ts","../../../projects/storefrontlib/cms-pages/product-listing-page/product-listing-page.module.ts","../../../projects/storefrontlib/context/routing-context.service.ts","../../../projects/storefrontlib/context/context.service.ts","../../../projects/storefrontlib/events/navigation/navigation.event.ts","../../../projects/storefrontlib/events/page/page.events.ts","../../../projects/storefrontlib/events/cart/cart-page.events.ts","../../../projects/storefrontlib/events/cart/cart-page-event.builder.ts","../../../projects/storefrontlib/events/cart/cart-page-event.module.ts","../../../projects/storefrontlib/events/home/home-page.events.ts","../../../projects/storefrontlib/events/home/home-page-event.builder.ts","../../../projects/storefrontlib/events/home/home-page-event.module.ts","../../../projects/storefrontlib/events/navigation/navigation-event.builder.ts","../../../projects/storefrontlib/events/navigation/navigation-event.module.ts","../../../projects/storefrontlib/events/product/product-page.events.ts","../../../projects/storefrontlib/events/product/product-page-event.builder.ts","../../../projects/storefrontlib/events/product/product-page-event.module.ts","../../../projects/storefrontlib/layout/a11y/skip-link/config/skip-link.config.ts","../../../projects/storefrontlib/layout/a11y/skip-link/service/skip-link.service.ts","../../../projects/storefrontlib/layout/a11y/skip-link/component/skip-link.component.ts","../../../projects/storefrontlib/layout/a11y/skip-link/component/skip-link.component.html","../../../projects/storefrontlib/layout/a11y/skip-link/config/default-skip-link.config.ts","../../../projects/storefrontlib/layout/a11y/skip-link/directive/skip-link.directive.ts","../../../projects/storefrontlib/layout/a11y/skip-link/skip-link.module.ts","../../../projects/storefrontlib/layout/config/default-layout.config.ts","../../../projects/storefrontlib/layout/direction/config/direction.config.ts","../../../projects/storefrontlib/layout/direction/config/default-direction.config.ts","../../../projects/storefrontlib/layout/direction/direction.service.ts","../../../projects/storefrontlib/layout/direction/direction.module.ts","../../../projects/storefrontlib/layout/header/hamburger-menu/hamburger-menu.component.ts","../../../projects/storefrontlib/layout/header/hamburger-menu/hamburger-menu.component.html","../../../projects/storefrontlib/layout/header/hamburger-menu/hamburger-menu.module.ts","../../../projects/storefrontlib/layout/theme/theme.service.ts","../../../projects/storefrontlib/layout/theme/theme.module.ts","../../../projects/storefrontlib/layout/layout.module.ts","../../../projects/storefrontlib/layout/main/storefront-outlets.model.ts","../../../projects/storefrontlib/layout/main/storefront.component.ts","../../../projects/storefrontlib/layout/main/storefront.component.html","../../../projects/storefrontlib/layout/main/storefront-component.module.ts","../../../projects/storefrontlib/recipes/config/default-media.config.ts","../../../projects/storefrontlib/recipes/config/layout-config.ts","../../../projects/storefrontlib/recipes/config/static-cms-structure.ts","../../../projects/storefrontlib/router/config/default-on-navigate-config.ts","../../../projects/storefrontlib/router/config/on-navigate-config.ts","../../../projects/storefrontlib/router/on-navigate.service.ts","../../../projects/storefrontlib/router/app-routing.module.ts","../../../projects/storefrontlib/utils/form-utils.ts","../../../projects/storefrontlib/base-storefront.module.ts","../../../projects/storefrontlib/public_api.ts","../../../projects/storefrontlib/spartacus-storefront.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/** The element attribute used to store the focus state */\nexport const FOCUS_ATTR = 'data-cx-focus';\n/** The element attribute used to store the focus group state */\nexport const FOCUS_GROUP_ATTR = 'data-cx-focus-group';\n\nexport const enum MOVE_FOCUS {\n  NEXT = 1,\n  PREV = -1,\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface BaseFocusConfig {}\n\nexport interface VisibleFocusConfig {\n  /**\n   * When set to true, the `mouse-focus` class is added to the host element,\n   * indicating that the element focus should not be made visible.\n   */\n  disableMouseFocus?: boolean;\n}\n\nexport interface BlockFocusConfig extends VisibleFocusConfig {\n  block?: boolean;\n}\n\nexport interface PersistFocusConfig extends BlockFocusConfig {\n  /**\n   * A key to maintain the focus of an element in case the component is\n   * recreated (which often is the case when an `*ngIf` or `*ngFor` is used).\n   */\n  key?: string;\n\n  /**\n   * Optional group identifier that can be used to persist the focus. This allows\n   * to have separate persisted focus available when the DOM is partially rebuild.\n   */\n  group?: string;\n}\n\nexport interface EscapeFocusConfig extends PersistFocusConfig {\n  focusOnEscape?: boolean;\n  /**\n   * Force an autofocus in case of double-escape\n   */\n  focusOnDoubleEscape?: boolean;\n}\n\nexport interface AutoFocusConfig extends EscapeFocusConfig {\n  /**\n   * Autofocus is enabled by default, and will try to focus an _autofocus_ element.\n   * In case the focus is explicitly set to `true`, the first accessible element\n   * is focussed in case there is no _autofocus_ element found.\n   * If the focus is set to false, autofocus will be disabled completely.\n   *\n   * If a string value is given, the autofocus will be restored based on the persisted\n   * focus group, which is driven by `PersistFocusConfig.key` and `PersistFocusConfig.group`.\n   *\n   * Defaults to `true`.\n   */\n  autofocus?: boolean | string;\n\n  /**\n   * whenever the focus should be applied based on a specific trigger, you can user\n   * the refreshFocus property. This property can be dynamically applied so that the refresh\n   * only happens on specific occasions.\n   *\n   * The refreshFocus token doesn't have a specific format, it acts as a meaning less token that\n   * will effect the ngOnChange lifecycle hook of the auto focus logic. Any truthy value will\n   * autofocus the element dynamically.\n   */\n  refreshFocus?: unknown;\n}\n\nexport interface TabFocusConfig extends AutoFocusConfig {\n  tab?: boolean | 'scroll' | string;\n}\n\nexport enum TrapFocus {\n  /**\n   * Will trap the focus at the start of the focus group.\n   */\n  start = 'start',\n  /**\n   * Will trap the focus only at the end of the focus group.\n   */\n  end = 'end',\n  /**\n   * Will not trap the focus in both directions. This is actually not are\n   * a great example of focus trap, but it will give the benefit of keyboard\n   * tabbing by arrows.\n   */\n  both = 'both',\n}\n\nexport type TrapFocusType =\n  | boolean\n  | TrapFocus.start\n  | TrapFocus.end\n  | TrapFocus.both;\n\n/**\n * The keyboard navigation (tab, shift-tab and up down keys) is _trapped_\n * for the nested focusable elements. This means that the focus can not\n * \"leave\" the elements. If the last element is focused, the keyboard will\n * navigate to the first element and visa versa.\n */\nexport interface TrapFocusConfig extends TabFocusConfig {\n  /** traps the focus */\n  trap?: TrapFocusType;\n}\n\nexport interface LockFocusConfig extends TrapFocusConfig {\n  /**\n   * Indicates that the nested DOM is locked for keyboarding (`TAB`).\n   */\n  lock?: boolean;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface FocusConfig extends LockFocusConfig {}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport abstract class BaseFocusService {}\n","import {\n  Directive,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n} from '@angular/core';\nimport { BaseFocusConfig } from '../keyboard-focus.model';\nimport { BaseFocusService } from './base-focus.service';\n\n/**\n * Abstract directive that provides a common interface for all focus directives:\n * - Block Focus\n * - Persist Focus\n * - Escape Focus\n * - Auto Focus\n * - Tab Focus\n * - Trap Focus\n * - Lock Focus\n */\n@Directive()\nexport abstract class BaseFocusDirective implements OnInit, OnChanges {\n  /**\n   * Optional configuration for the focus directive drives the behaviour of the keyboard\n   * focus directive.\n   */\n  protected config: BaseFocusConfig;\n\n  /**\n   * A default config can be provided for each directive if a specific focus directive\n   * is used directly. i.e. `<div cxAutoFocus></div>`\n   */\n  protected defaultConfig: BaseFocusConfig = {};\n\n  @Input() @HostBinding('attr.tabindex') tabindex: number;\n\n  constructor(\n    protected elementRef: ElementRef<HTMLElement>,\n    protected service: BaseFocusService\n  ) {}\n\n  ngOnInit(): void {\n    this.setDefaultConfiguration();\n    this.requiredTabindex = -1;\n  }\n\n  // empty, but sub classes might have an implementation\n  ngOnChanges(_changes: SimpleChanges): void {}\n\n  /**\n   * Override the (input) config if it undefined or an empty string, with the\n   * `defaultConfig`. The `defaultConfig` might be specified for each directive\n   * differently. If a specific directive is used (i.e. `cxAutoFocus`), the\n   * specific (inherited) defaultConfig will be used.\n   */\n  protected setDefaultConfiguration(): void {\n    if ((!this.config || this.config === '') && this.defaultConfig) {\n      this.config = this.defaultConfig;\n    }\n  }\n\n  /**\n   * Helper method to return the host element for the directive\n   * given by the `elementRef`.\n   */\n  protected get host(): HTMLElement {\n    return this.elementRef.nativeElement;\n  }\n\n  /**\n   * Force a tabindex on the host element if it is _required_ to make the element\n   * focusable. If the element is focusable by nature or by a given tabindex, the\n   * `tabindex` is not applied.\n   *\n   * Buttons, active links, etc. do no need an explicit tabindex to receive focus.\n   */\n  protected set requiredTabindex(tabindex: number) {\n    if (this.requiresExplicitTabIndex) {\n      this.tabindex = tabindex;\n    }\n  }\n\n  /**\n   * Returns true if the host element does not have a tabindex defined\n   * and it also doesn't get focus by browsers nature (i.e. button or\n   * active link).\n   */\n  protected get requiresExplicitTabIndex(): boolean {\n    return (\n      this.tabindex === undefined &&\n      ['button', 'input', 'select', 'textarea'].indexOf(\n        this.host.tagName.toLowerCase()\n      ) === -1 &&\n      !(\n        this.host.tagName === 'A' &&\n        (this.host.hasAttribute('href') ||\n          this.host.hasAttribute('routerlink') ||\n          this.host.getAttribute('ng-reflect-router-link'))\n      )\n    );\n  }\n}\n","import { Directive, HostBinding, HostListener } from '@angular/core';\nimport { BaseFocusDirective } from '../base/base-focus.directive';\nimport { VisibleFocusConfig } from '../keyboard-focus.model';\n\n/**\n * Directive implementation that adds a CSS class to the host element\n * when the moused is used to focus an element. As soon as the keyboard\n * is used, the class is removed.\n *\n * This feature must be explicitly enabled with the `disableMouseFocus` config.\n *\n * The appearance of the visual focus depends on the CSS implementation to\n * begin with. Spartacus styles add a blue border around each focusable element.\n * This can be considered annoying by keyboard users, as they won't need such a\n * strong indication of the selected element.\n */\n@Directive() // selector: '[cxVisibleFocus]'\nexport class VisibleFocusDirective extends BaseFocusDirective {\n  protected defaultConfig: VisibleFocusConfig = {\n    disableMouseFocus: true,\n  };\n\n  // @Input('cxVisibleFocus')\n  protected config: VisibleFocusConfig;\n\n  /** Controls a css class to hide focus visible CSS rules */\n  @HostBinding('class.mouse-focus') mouseFocus = false;\n\n  @HostListener('mousedown') handleMousedown() {\n    if (this.shouldFocusVisible) {\n      this.mouseFocus = true;\n    }\n  }\n\n  @HostListener('keydown', ['$event']) handleKeydown(event: KeyboardEvent) {\n    if (this.shouldFocusVisible) {\n      this.mouseFocus = !this.isNavigating(event);\n    }\n  }\n\n  /**\n   * Indicates whether the configurations setup to disable visual focus.\n   */\n  protected get shouldFocusVisible(): boolean {\n    return this.config?.disableMouseFocus;\n  }\n\n  /**\n   * Indicates whether the event is used to navigate the storefront. Some keyboard events\n   * are used by mouse users to fill a form or interact with the OS or browser.\n   */\n  protected isNavigating(event: KeyboardEvent): boolean {\n    // when the cmd or ctrl keys are used, the user doesn't navigate the storefront\n    if (event.metaKey) {\n      return false;\n    }\n    // when the tab key is used, users are for navigating away from the current (form) element\n    if (event.code === 'Tab') {\n      return true;\n    }\n    // If the user fill in a form, we don't considering it part of storefront navigation.\n    if (['INPUT', 'TEXTAREA'].includes((event.target as HTMLElement).tagName)) {\n      return false;\n    }\n    return true;\n  }\n}\n","import { Directive, ElementRef, OnInit } from '@angular/core';\nimport { BaseFocusService } from '../base/base-focus.service';\nimport { BlockFocusConfig } from '../keyboard-focus.model';\nimport { VisibleFocusDirective } from '../visible/visible-focus.directive';\n\n@Directive()\n// { selector: '[cxBlockFocus]' }\nexport class BlockFocusDirective\n  extends VisibleFocusDirective\n  implements OnInit\n{\n  protected defaultConfig: BlockFocusConfig = { block: true };\n\n  // @Input('cxBlockFocus')\n  protected config: BlockFocusConfig = {};\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: BaseFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    if (this.config.block) {\n      this.tabindex = -1;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BaseFocusService } from '../base/base-focus.service';\nimport { FOCUS_GROUP_ATTR, PersistFocusConfig } from '../keyboard-focus.model';\n\nconst GLOBAL_GROUP = '_g_';\n\n/**\n * Shared service to persist the focus for an element or a group\n * of elements. The persisted element focus can be used to persist\n * the focus for a DOM tree, so that the focus remains after a repaint\n * or reoccurs when a DOM tree is \"unlocked\".\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class PersistFocusService extends BaseFocusService {\n  // this is going to fail as we have sub services. They will al have their own map.\n  // We must bring this to a singleton map.\n  protected focus = new Map<string, string>();\n\n  get(group?: string): string {\n    return this.focus.get(group || GLOBAL_GROUP);\n  }\n\n  /**\n   * Persist the keyboard focus state for the given key. The focus is stored globally\n   * or for the given group.\n   */\n  set(key: string, group?: string) {\n    if (key) {\n      this.focus.set(group || GLOBAL_GROUP, key);\n    }\n  }\n\n  /**\n   * Clears the persisted keyboard focus state globally or for the given group.\n   */\n  clear(group?: string) {\n    this.focus.delete(group || GLOBAL_GROUP);\n  }\n\n  /**\n   * Returns the group for the host element based on the configured group or\n   * by the `data-cx-focus-group` attribute stored on the host.\n   */\n  getPersistenceGroup(host: HTMLElement, config?: PersistFocusConfig): string {\n    return config?.group ? config.group : host.getAttribute(FOCUS_GROUP_ATTR);\n  }\n}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnInit,\n} from '@angular/core';\nimport { BlockFocusDirective } from '../block/block-focus.directive';\nimport { FOCUS_ATTR, PersistFocusConfig } from '../keyboard-focus.model';\nimport { PersistFocusService } from './persist-focus.service';\n\n/**\n * Directive that provides persistence of the focused state. This is useful\n * when a group of focusable elements got refocused or even recreated. That\n * happens often when the DOM is constructed with an `*ngIf` or `*ngFor`.\n *\n * The focus state is based on a configured _key_, which can be passed in the\n * config input, either by using a string primitive or `PersistFocusConfig.key`:\n *\n * ```html\n * <button cxPersistFocus=\"myKey\"></button>\n * <button cxFocus=\"myKey\"></button>\n * <button [cxFocus]=\"{{key:'myKey'}\"></button>\n * ```\n *\n * The focus state can be part of a focus _group_, so that the state is shared\n * and remember for the given group. In order to detect the persistence for a\n * given element, we store the persistence key as a data attribute (`data-cx-focus`):\n *\n * ```html\n * <button data-cx-focus=\"myKey\"></button>\n * ```\n *\n * Other keyboard focus directives can read the key to understand whether the element\n * should retrieve focus.\n *\n */\n@Directive() // selector: '[cxPersistFocus]',\nexport class PersistFocusDirective\n  extends BlockFocusDirective\n  implements OnInit, AfterViewInit\n{\n  protected defaultConfig: PersistFocusConfig = {};\n\n  /**\n   * The persistence key can be passed directly or through the `FocusConfig.key`.\n   * While this could be considered a global key, the likeliness of conflicts\n   * is very small since the key is cleared when the focus is changed.\n   */\n  // @Input('cxPersistFocus')\n  protected config: PersistFocusConfig = {};\n\n  /**\n   * The persistence key is maintained in an element attribute for other\n   * implementations. This is needed to ensure that we can resolve the focus\n   * state in case of a repaint.\n   */\n  @HostBinding(`attr.${FOCUS_ATTR}`) attr: string;\n\n  @HostListener('focus', ['$event'])\n  handleFocus(event?: KeyboardEvent) {\n    this.service.set(this.key, this.group);\n\n    event?.preventDefault();\n    event?.stopPropagation();\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: PersistFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.attr = this.key ? this.key : undefined;\n  }\n\n  protected setDefaultConfiguration() {\n    if (typeof this.config === 'string' && this.config !== '') {\n      this.config = { key: this.config };\n    }\n    super.setDefaultConfiguration();\n  }\n\n  /**\n   * Focus the element explicitly if it was focused before.\n   */\n  ngAfterViewInit() {\n    if (this.isPersisted) {\n      this.host.focus({ preventScroll: true });\n    }\n  }\n\n  protected get isPersisted(): boolean {\n    return !!this.key && this.service.get(this.group) === this.key;\n  }\n\n  /**\n   * Returns the key for the host element, which is used to persist the\n   * focus state. This is useful in cases where the DOM is rebuild.\n   */\n  protected get key(): string {\n    return (this.config as PersistFocusConfig)?.key;\n  }\n\n  /**\n   * returns the persistence group (if any) for the focusable elements.\n   */\n  protected get group(): string {\n    return this.service.getPersistenceGroup(\n      this.host,\n      this.config as PersistFocusConfig\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AutoFocusConfig } from '../keyboard-focus.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SelectFocusUtility {\n  /**\n   * Query selectors used to query focusable child elements of the host element.\n   * The selectors are supplemented with `:not([disabled])` and `:not([hidden])`.\n   */\n  protected focusableSelectors: string[] = [\n    'a[href]',\n    'button',\n    '[tabindex]',\n    'input',\n    'select',\n    'textarea',\n  ];\n\n  // like to leave out the following as we don't use it, and make this list exensible.\n  //   `[contentEditable=true]`, // very unlikely to suport as we're not a business tool\n  //   `iframe`, // we really don't like iframes...\n  //   `area[href]`, // very debatable!\n\n  protected focusableSelectorSuffix = ':not([disabled]):not([hidden])';\n\n  query(host: HTMLElement, selector: string): HTMLElement[] {\n    if (!selector || selector === '') {\n      return [];\n    }\n    return Array.from(\n      host.querySelectorAll(selector) as NodeListOf<HTMLElement>\n    );\n  }\n\n  findFirstFocusable(\n    host: HTMLElement,\n    config: AutoFocusConfig = { autofocus: true }\n  ): HTMLElement {\n    const selector =\n      typeof config?.autofocus === 'string' ? config.autofocus : '[autofocus]';\n    // fallback to first focusable\n    return (\n      this.query(host, selector).find((el) => !this.isHidden(el)) ||\n      this.findFocusable(host).find((el) => Boolean(el))\n    );\n  }\n\n  /**\n   * returns all focusable child elements of the host element. The element selectors\n   * are build from the `focusableSelectors`.\n   *\n   * @param host the `HTMLElement` used to query focusable elements\n   * @param locked indicates whether inactive (`tabindex=\"-1\"`) focusable elements should be returned\n   * @param invisible indicates whether hidden focusable elements should be returned\n   */\n  findFocusable(\n    host: HTMLElement,\n    locked = false,\n    invisible = false\n  ): HTMLElement[] {\n    let suffix = this.focusableSelectorSuffix;\n    if (!locked) {\n      suffix += `:not([tabindex='-1'])`;\n    }\n    const selector = this.focusableSelectors\n      .map((s) => (s += suffix))\n      .join(',');\n    return this.query(host, selector).filter((el) =>\n      !invisible ? !this.isHidden(el) : Boolean(el)\n    );\n  }\n\n  /**\n   * Indicates whether the element is hidden by CSS. There are various CSS rules and\n   * HTML structures which can lead to an hidden or invisible element. An `offsetParent`\n   * of null indicates that the element or any of it's decendants is hidden (`display:none`).\n   *\n   * Oother techniques use the visibility (`visibility: hidden`), opacity (`opacity`) or\n   * phyisical location on the element itself or any of it's anchestor elements. Those\n   * technique require to work with the _computed styles_, which will cause a performance\n   * downgrade. We don't do this in the standard implementaton.\n   */\n  protected isHidden(el: HTMLElement): boolean {\n    return el.offsetParent === null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { EscapeFocusConfig } from '../keyboard-focus.model';\nimport { PersistFocusService } from '../persist/persist-focus.service';\nimport { SelectFocusUtility } from '../services/select-focus.util';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class EscapeFocusService extends PersistFocusService {\n  constructor(protected selectFocusUtil: SelectFocusUtility) {\n    super();\n  }\n\n  shouldFocus(config: EscapeFocusConfig): boolean {\n    return !!config?.focusOnEscape;\n  }\n\n  handleEscape(\n    host: HTMLElement,\n    config: EscapeFocusConfig,\n    event: KeyboardEvent\n  ): void {\n    if (this.shouldFocus(config)) {\n      if (host !== event.target) {\n        host.focus({ preventScroll: true });\n        event.preventDefault();\n        event.stopPropagation();\n      } else {\n        if (config?.focusOnDoubleEscape) {\n          this.selectFocusUtil\n            .findFirstFocusable(host, { autofocus: true })\n            ?.focus();\n        }\n      }\n    }\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { EscapeFocusConfig } from '../keyboard-focus.model';\nimport { PersistFocusDirective } from '../persist/persist-focus.directive';\nimport { EscapeFocusService } from './escape-focus.service';\n\n/**\n * Directive to focus the host element whenever the `escape` key is captured.\n * UiEvents bubble up by nature, which is why the `cxEscGroup` can be used\n * on a tree of elements. Each time the escape key is used, the focus will\n * move up in the DOM tree.\n *\n */\n@Directive() // selector: '[cxEscFocus]',\nexport class EscapeFocusDirective\n  extends PersistFocusDirective\n  implements OnInit\n{\n  protected defaultConfig: EscapeFocusConfig = { focusOnEscape: true };\n\n  // @Input('cxEscFocus')\n  protected config: EscapeFocusConfig;\n\n  @Output() esc = new EventEmitter<boolean>();\n\n  /**\n   * Handles the escape key event.\n   * @param event the native keyboard event which contains the escape keydown event\n   */\n  @HostListener('keydown.escape', ['$event'])\n  handleEscape(event: KeyboardEvent): void {\n    if (this.service.shouldFocus(this.config)) {\n      this.service.handleEscape(this.host, this.config, event);\n    }\n    this.esc.emit(this.service.shouldFocus(this.config));\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: EscapeFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  ngOnInit() {\n    if (this.service.shouldFocus(this.config)) {\n      this.requiredTabindex = -1;\n    }\n    super.ngOnInit();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { EscapeFocusService } from '../escape/escape-focus.service';\nimport {\n  AutoFocusConfig,\n  FOCUS_ATTR,\n  PersistFocusConfig,\n} from '../keyboard-focus.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AutoFocusService extends EscapeFocusService {\n  /**\n   * Returns the first focusable child element of the host element.\n   */\n  findFirstFocusable(\n    host: HTMLElement,\n    config: AutoFocusConfig = { autofocus: true }\n  ): HTMLElement {\n    if (config?.autofocus === ':host') {\n      return host;\n    } else if (this.hasPersistedFocus(host, config)) {\n      return this.getPersisted(host, this.getPersistenceGroup(host, config));\n    } else {\n      return this.selectFocusUtil.findFirstFocusable(host, config) || host;\n    }\n  }\n\n  /**\n   * Indicates whether any of the focusable child elements is focused.\n   */\n  hasPersistedFocus(host: HTMLElement, config: PersistFocusConfig): boolean {\n    return !!this.getPersisted(host, this.getPersistenceGroup(host, config));\n  }\n\n  /**\n   * Returns the element that has a persisted focus state.\n   *\n   * @param host the `HTMLElement` used to query for focusable children\n   * @param group the optional group for the persistent state, to separate different focus\n   *   groups and remain the persistence\n   */\n  protected getPersisted(host: HTMLElement, group?: string): HTMLElement {\n    if (!this.get(group)) {\n      return;\n    }\n    const focussed = Array.from(\n      host.querySelectorAll(\n        `[${FOCUS_ATTR}='${this.get(group)}']`\n      ) as NodeListOf<HTMLElement>\n    );\n    return focussed.length > 0 ? focussed[0] : null;\n  }\n}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { EscapeFocusDirective } from '../escape/escape-focus.directive';\nimport { AutoFocusConfig } from '../keyboard-focus.model';\nimport { AutoFocusService } from './auto-focus.service';\n\n/**\n * Directive that focus the first nested _focusable_ element based on state and configuration:\n *\n * 1. focusable element that was left in a focused state (aka _persisted_ focus)\n * 2. focusable element selected by configured CSS selector (i.e. 'button[type=submit]')\n * 3. focusable element marked with the native HTML5 `autofocus` attribute\n * 4. first focusable element\n * 5. the host element, in case the configured CSS selector is `:host`.\n *\n * Example configurations:\n *\n * `<div cxAutoFocus>[...]</div>`\n *\n * `<div [cxAutoFocus]=\"{autofocus: false}\">[...]</div>`\n *\n * `<div [cxAutoFocus]=\"{autofocus: 'button.active'}\">[...]</div>`\n *\n * `<div [cxAutoFocus]=\"{autofocus: ':host'}\">[...]</div>`\n *\n * When your element is added dynamically (ie. by using an *ngIf or after a DOM change), the\n * focus can be refreshed by using the refreshFocus configuration.\n */\n@Directive() // selector: '[cxAutoFocus]'\nexport class AutoFocusDirective\n  extends EscapeFocusDirective\n  implements AfterViewInit, OnChanges\n{\n  /** The AutoFocusDirective will be using autofocus by default  */\n  protected defaultConfig: AutoFocusConfig = { autofocus: true };\n\n  // @Input('cxAutoFocus')\n  protected config: AutoFocusConfig;\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: AutoFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  /**\n   * Focus the element explicitly if it was focussed before.\n   */\n  ngAfterViewInit(): void {\n    if (this.shouldAutofocus) {\n      this.handleFocus();\n    }\n    if (!this.shouldAutofocus || this.hasPersistedFocus) {\n      super.ngAfterViewInit();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    // responsible for refresh focus based on the configured refresh property name\n    if (!!(changes.config.currentValue as AutoFocusConfig)?.refreshFocus) {\n      // ensure the autofocus when it's to provided initially\n      if (!this.config.autofocus) {\n        this.config.autofocus = true;\n      }\n      this.handleFocus();\n    }\n    super.ngOnChanges(changes);\n  }\n\n  /**\n   * Mimic the focus without setting the actual focus on the host. The first\n   * focusable child element will be focussed.\n   */\n  handleFocus(event?: KeyboardEvent) {\n    if (this.shouldAutofocus) {\n      if (!event?.target || event.target === this.host) {\n        this.firstFocusable?.focus();\n      } else {\n        (event.target as HTMLElement).focus();\n      }\n    }\n    super.handleFocus(event);\n  }\n\n  /**\n   * Helper function to get the first focusable child element\n   */\n  protected get hasPersistedFocus() {\n    return this.service.hasPersistedFocus(this.host, this.config);\n  }\n\n  /**\n   * Helper function to indicate whether we should use autofocus for the\n   * child elements.\n   */\n  protected get shouldAutofocus(): boolean {\n    return !!this.config?.autofocus;\n  }\n\n  /**\n   * Helper function to get the first focusable child element.\n   *\n   * We keep this private to not pollute the API.\n   */\n  private get firstFocusable(): HTMLElement {\n    return this.service.findFirstFocusable(this.host, this.config);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AutoFocusService } from '../autofocus/auto-focus.service';\nimport { MOVE_FOCUS, TabFocusConfig } from '../keyboard-focus.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TabFocusService extends AutoFocusService {\n  /**\n   * Moves to the next (or previous) tab.\n   */\n  moveTab(\n    host: HTMLElement,\n    config: TabFocusConfig,\n    increment: MOVE_FOCUS,\n    event: KeyboardEvent\n  ): void {\n    if (config?.tab) {\n      const next =\n        config.tab === 'scroll'\n          ? this.findNextScrollable(host, config, increment)\n          : this.findNext(host, config, increment);\n\n      next?.focus();\n\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  /**\n   * builds out virtual slides out of the full scrollable area, to allow\n   * for maximum flexibility for the underlying layout without using hardcoded\n   * slide sizes.\n   */\n  protected findNextScrollable(\n    host: HTMLElement,\n    config: TabFocusConfig,\n    increment: MOVE_FOCUS\n  ): HTMLElement {\n    const active = this.getActiveChild(host, config);\n\n    if (!active) {\n      return;\n    }\n    // slide count\n    const virtualSlideCount = Math.round(host.scrollWidth / host.clientWidth);\n\n    // find current virtual slide\n    const currentVirtualSlide = Math.round(\n      active.offsetLeft / (host.scrollWidth / virtualSlideCount)\n    );\n\n    let nextVirtualSlide = currentVirtualSlide + increment;\n    if (\n      increment === MOVE_FOCUS.NEXT &&\n      nextVirtualSlide >= virtualSlideCount\n    ) {\n      nextVirtualSlide = 0;\n    }\n    if (increment === MOVE_FOCUS.PREV && nextVirtualSlide < 0) {\n      nextVirtualSlide = virtualSlideCount - 1;\n    }\n\n    const firstItemOnNextSlide = this.getChildren(host, config)?.find(\n      (tab) =>\n        tab.offsetLeft >=\n        (host.scrollWidth / virtualSlideCount) * nextVirtualSlide\n    );\n\n    return firstItemOnNextSlide;\n  }\n\n  protected findNext(\n    host: HTMLElement,\n    config: TabFocusConfig,\n    increment: MOVE_FOCUS\n  ): HTMLElement {\n    const childs = this.getChildren(host, config);\n    let activeIndex = childs?.findIndex(\n      (c) => c === this.getActiveChild(host, config)\n    );\n\n    if (!activeIndex || activeIndex === -1) {\n      activeIndex = 0;\n    }\n    activeIndex += increment;\n\n    if (increment === MOVE_FOCUS.NEXT && activeIndex >= childs?.length) {\n      activeIndex = childs.length - 1;\n    }\n    if (increment === MOVE_FOCUS.PREV && activeIndex < 0) {\n      activeIndex = 0;\n    }\n    return childs ? childs[activeIndex] : undefined;\n  }\n\n  /**\n   * Returns the active focusable child element. If there's no active\n   * focusable child element, the first focusable child is returned.\n   */\n  protected getActiveChild(\n    host: HTMLElement,\n    config: TabFocusConfig\n  ): HTMLElement {\n    const persisted = this.getPersisted(host, config?.group);\n    if (persisted) {\n      return persisted;\n    }\n    const children = this.getChildren(host, config);\n    let index = children.findIndex((tab) => this.isActive(tab));\n    if (!index || index === -1) {\n      index = 0;\n    }\n    return children[index];\n  }\n\n  protected getChildren(\n    host: HTMLElement,\n    config: TabFocusConfig\n  ): HTMLElement[] {\n    if (typeof config.tab === 'string' && config.tab !== 'scroll') {\n      return this.selectFocusUtil.query(host, config.tab);\n    } else {\n      return this.findFocusable(host, true);\n    }\n  }\n\n  /**\n   * Returns all focusable child elements of the host element.\n   *\n   * @param host The host element is used to query child focusable elements.\n   * @param locked Indicates if locked elements (tabindex=-1) should be returned, defaults to false.\n   * @param invisible Indicates if invisible child elements should be returned, defaults to false.\n   */\n  findFocusable(\n    host: HTMLElement,\n    locked = false,\n    invisible = false\n  ): HTMLElement[] {\n    return this.selectFocusUtil.findFocusable(host, locked, invisible);\n  }\n\n  protected isActive(el: HTMLElement): boolean {\n    const child = document.activeElement;\n    const selector = child.tagName;\n\n    return (\n      el === child ||\n      !!Array.from(el.querySelectorAll(selector)).find((e) => e === child)\n    );\n  }\n}\n","import { Directive, ElementRef, HostListener } from '@angular/core';\nimport { AutoFocusDirective } from '../autofocus/auto-focus.directive';\nimport { MOVE_FOCUS, TabFocusConfig } from '../keyboard-focus.model';\nimport { TabFocusService } from './tab-focus.service';\n\n/**\n * Directive to move the focus of (\"locked\") child elements. This is useful\n * for a nested list of tabs, carousel slides or any group of elements that\n * requires horizontal navigation.\n */\n@Directive() // selector: '[cxTabFocus]'\nexport class TabFocusDirective extends AutoFocusDirective {\n  /** `tab` defaults to true if the directive `cxTabFocus` is used. */\n  protected defaultConfig: TabFocusConfig = { tab: true };\n\n  // @Input('cxTabFocus')\n  protected config: TabFocusConfig = {};\n\n  @HostListener('keydown.arrowRight', ['$event'])\n  handleNextTab(event: KeyboardEvent) {\n    if (this.config?.tab) {\n      this.service.moveTab(this.host, this.config, MOVE_FOCUS.NEXT, event);\n    }\n  }\n\n  @HostListener('keydown.arrowLeft', ['$event'])\n  handlePreviousTab(event: KeyboardEvent) {\n    if (this.config?.tab) {\n      this.service.moveTab(this.host, this.config, MOVE_FOCUS.PREV, event);\n    }\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: TabFocusService\n  ) {\n    super(elementRef, service);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  MOVE_FOCUS,\n  TrapFocus,\n  TrapFocusConfig,\n  TrapFocusType,\n} from '../keyboard-focus.model';\nimport { TabFocusService } from '../tab/tab-focus.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TrapFocusService extends TabFocusService {\n  /**\n   * Indicates whether any of the child elements of the host are focusable.\n   *\n   * @param host `HTMLElement` that is used to query the focusable elements.\n   */\n  hasFocusableChildren(host: HTMLElement): boolean {\n    return this.findFocusable(host).length > 0;\n  }\n\n  /**\n   * Focus the next or previous element of all available focusable elements.\n   * The focus is _trapped_ in case there's no next or previous available element.\n   * The focus will automatically move the start or end of the list.\n   */\n  moveFocus(\n    host: HTMLElement,\n    config: TrapFocusConfig,\n    increment: MOVE_FOCUS,\n    event: UIEvent\n  ): void {\n    const focusable: HTMLElement[] = this.findFocusable(host);\n\n    let index = focusable.findIndex((v) => v === event.target) + increment;\n\n    const shouldMoveFocus =\n      (index >= 0 && index < focusable.length) ||\n      (index < 0 && this.getTrapStart(config.trap)) ||\n      (index >= focusable.length && this.getTrapEnd(config.trap));\n\n    if (shouldMoveFocus) {\n      if (index >= focusable.length) {\n        index = 0;\n      }\n      if (index < 0) {\n        index = focusable.length - 1;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const el = focusable[index];\n\n      el.focus();\n    }\n  }\n\n  protected getTrapStart(trap: TrapFocusType): boolean {\n    return trap === true || trap === TrapFocus.start;\n  }\n\n  protected getTrapEnd(trap: TrapFocusType): boolean {\n    return trap === true || trap === TrapFocus.end;\n  }\n}\n","import { Directive, ElementRef, HostListener, OnInit } from '@angular/core';\nimport { MOVE_FOCUS, TrapFocusConfig } from '../keyboard-focus.model';\nimport { TabFocusDirective } from '../tab/tab-focus.directive';\nimport { TrapFocusService } from './trap-focus.service';\n\n/**\n * Directive that keeps the focus inside the focusable child elements,\n * also known as a _focus trap_.\n */\n@Directive() // selector: '[cxTrapFocus]'\nexport class TrapFocusDirective extends TabFocusDirective implements OnInit {\n  protected defaultConfig: TrapFocusConfig = { trap: true };\n\n  // @Input('cxTrapFocus')\n  protected config: TrapFocusConfig = {};\n\n  @HostListener('keydown.arrowdown', ['$event'])\n  @HostListener('keydown.tab', ['$event'])\n  handleTrapDown = (event: KeyboardEvent) => {\n    if (!!this.config.trap) {\n      this.moveFocus(event, MOVE_FOCUS.NEXT);\n    }\n  };\n\n  @HostListener('keydown.arrowup', ['$event'])\n  @HostListener('keydown.shift.tab', ['$event'])\n  handleTrapUp = (event: KeyboardEvent) => {\n    if (!!this.config.trap) {\n      this.moveFocus(event, MOVE_FOCUS.PREV);\n    }\n  };\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: TrapFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  /**\n   * Moves the focus of the element reference up or down, depending on the increment.\n   * The focus of the element is trapped to avoid it from going out of the group.\n   *\n   * @param event UIEvent that is used to get the target element. The event is blocked\n   *   from standard execution and further bubbling.\n   * @param increment indicates whether the next or previous is focussed.\n   */\n  protected moveFocus(event: UIEvent, increment: number) {\n    if (this.service.hasFocusableChildren(this.host)) {\n      this.service.moveFocus(\n        this.host,\n        this.config,\n        increment,\n        event as UIEvent\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TrapFocusService } from '../trap/trap-focus.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LockFocusService extends TrapFocusService {}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  OnInit,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { FOCUS_GROUP_ATTR, LockFocusConfig } from '../keyboard-focus.model';\nimport { TrapFocusDirective } from '../trap/trap-focus.directive';\nimport { LockFocusService } from './lock-focus.service';\n\n/**\n * Focusable elements exclude hidden elements by default, but this contradicts with\n * unlocking (hidden) elements.\n */\nconst UNLOCK_HIDDEN_ELEMENTS = true;\n/**\n * Directive that adds persistence for focussed element in case\n * the elements are being rebuild. This happens often when change\n * detection kicks in because of new data set from the backend.\n */\n@Directive() // selector: '[cxLockFocus]'\nexport class LockFocusDirective\n  extends TrapFocusDirective\n  implements OnInit, AfterViewInit\n{\n  protected defaultConfig: LockFocusConfig = { lock: true };\n\n  // @Input('cxLockFocus')\n  protected config: LockFocusConfig = {};\n\n  /**\n   * Indicates that the host is configured to use locking. This is available as a\n   * CSS class `focus-lock`.\n   */\n  @HostBinding('class.focus-lock') shouldLock: boolean;\n\n  /**\n   * Indicates that the host is locked. This is available as a CSS class `is-locked`.\n   */\n  @HostBinding('class.is-locked') isLocked: boolean;\n\n  /**\n   * Emits an event when the host is unlocked.\n   */\n  @Output() unlock = new EventEmitter<boolean>();\n\n  /**\n   * When the user selects enter or space, the focusable childs are\n   * unlocked, which means that the tabindex is set to 0.\n   */\n  @HostListener('keydown.enter', ['$event'])\n  @HostListener('keydown.space', ['$event'])\n  handleEnter(event: KeyboardEvent) {\n    if (this.shouldLock && this.host === (event.target as HTMLElement)) {\n      this.unlockFocus(event);\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  /**\n   * In case any of the children elements is touched by the mouse,\n   * we unlock the group to not break the mouse-experience.\n   */\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    if (this.shouldLock && this.isLocked) {\n      this.unlockFocus(event);\n      event.stopPropagation();\n    }\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: LockFocusService,\n    protected renderer: Renderer2\n  ) {\n    super(elementRef, service);\n  }\n\n  protected lockFocus() {\n    this.addTabindexToChildren(-1);\n  }\n\n  protected unlockFocus(event?: UIEvent) {\n    this.unlock.emit(true);\n    this.addTabindexToChildren(0);\n    // we focus the host if the event was triggered from a child\n    if (event?.target === this.host) {\n      // we wait a few milliseconds, mainly because firefox will otherwise apply\n      // the mouse event on the new focused child element\n      setTimeout(() => {\n        super.handleFocus(event as KeyboardEvent);\n      }, 100);\n    }\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.shouldLock = this.config?.lock;\n\n    if (this.shouldLock) {\n      this.tabindex = 0;\n\n      // Locked elements will be set to `autofocus` by default if it's not\n      // been configured. This will ensure that autofocus kicks in upon unlock.\n      if (!this.config.hasOwnProperty('autofocus')) {\n        this.config.autofocus = true;\n      }\n      // Locked elements will be set to `focusOnEscape` by default if it's not\n      // been configured. This will ensure that  the host gets locked again when\n      // `escape` is pressed.\n      if (!this.config.hasOwnProperty('focusOnEscape')) {\n        this.config.focusOnEscape = !(this.config?.focusOnEscape === false);\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.shouldLock) {\n      /**\n       * If the component hosts a group of focusable children elements,\n       * we persist the group key to the children, so that they can taken this\n       * into account when they persist their focus state.\n       */\n      if (!!this.group) {\n        this.service.findFocusable(this.host).forEach((el) =>\n          // we must do this in after view init as\n          this.renderer.setAttribute(el, FOCUS_GROUP_ATTR, this.group)\n        );\n      }\n\n      if (this.shouldAutofocus) {\n        this.handleFocus();\n      }\n    }\n    super.ngAfterViewInit();\n  }\n\n  handleFocus(event?: KeyboardEvent): void {\n    if (this.shouldLock) {\n      if (this.shouldUnlockAfterAutofocus(event)) {\n        // Delay unlocking in case the host is using `ChangeDetectionStrategy.Default`\n        setTimeout(() => this.unlockFocus(event));\n      } else {\n        setTimeout(() => this.lockFocus());\n        event?.stopPropagation();\n        return;\n      }\n    }\n    super.handleFocus(event);\n  }\n\n  handleEscape(event: KeyboardEvent): void {\n    if (this.shouldLock) {\n      this.service.clear(this.config.group);\n    }\n    super.handleEscape(event);\n  }\n\n  /**\n   * When the handleFocus is called without an actual event, it's coming from Autofocus.\n   * In this case we unlock the focusable children in case there's a focusable child that\n   * was unlocked before.\n   *\n   * We keep this private to not polute the API.\n   */\n  private shouldUnlockAfterAutofocus(event?: KeyboardEvent) {\n    return !event && this.service.hasPersistedFocus(this.host, this.config);\n  }\n\n  /**\n   * Add the tabindex attribute to the focusable children elements\n   */\n  protected addTabindexToChildren(i = 0): void {\n    if (this.shouldLock) {\n      this.isLocked = i === -1;\n      if (!(this.hasFocusableChildren && i === 0) || i === 0) {\n        this.focusable.forEach((el) =>\n          this.renderer.setAttribute(el, 'tabindex', i.toString())\n        );\n      }\n    }\n  }\n\n  /**\n   * Utility method, returns all focusable children for the host element.\n   *\n   * We keep this private to not polute the API.\n   */\n  private get hasFocusableChildren(): boolean {\n    return this.service.hasFocusableChildren(this.host);\n  }\n\n  /**\n   * Returns the focusable children of the host element. If the host element\n   * is configured to be locked, the query is restricted to child elements\n   * with a tabindex !== `-1`.\n   *\n   * We keep this private to not polute the API.\n   */\n  private get focusable(): HTMLElement[] {\n    return this.service.findFocusable(\n      this.host,\n      this.shouldLock,\n      UNLOCK_HIDDEN_ELEMENTS\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LockFocusService } from '../lock/lock-focus.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class KeyboardFocusService extends LockFocusService {}\n","import { Directive, ElementRef, Input, Renderer2 } from '@angular/core';\nimport { FocusConfig } from './keyboard-focus.model';\nimport { LockFocusDirective } from './lock/lock-focus.directive';\nimport { KeyboardFocusService } from './services/keyboard-focus.service';\n\n@Directive({\n  selector: '[cxFocus]',\n})\nexport class FocusDirective extends LockFocusDirective {\n  protected defaultConfig: FocusConfig = {};\n\n  @Input('cxFocus') config: FocusConfig = {};\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: KeyboardFocusService,\n    protected renderer: Renderer2\n  ) {\n    super(elementRef, service, renderer);\n  }\n}\n","import { KeyboardFocusConfig } from './keyboard-focus.config';\n\n/**\n * @deprecated since 4.2, refer to spartacus issues (#13762)\n */\nexport const defaultKeyboardFocusConfig: KeyboardFocusConfig = {\n  keyboardFocus: {\n    enableResetFocusOnNavigate: false,\n    enableResetViewOnNavigate: false,\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { BREAKPOINT } from '../../../config';\n\n/**\n * @deprecated since 4.2, refer to spartacus issues (#13762)\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class KeyboardFocusConfig {\n  keyboardFocus?: {\n    /**\n     * Resets the focus back to the root `<cx-storefront>` element when a navigation is started.\n     */\n    enableResetFocusOnNavigate?: boolean | BREAKPOINT[];\n\n    /**\n     * Resets the view back to the root `<cx-storefront>` element when a navigation is started. This can also be set to a BREAKPOINT value to only reset the view up to the provided value.\n     */\n    enableResetViewOnNavigate?: boolean | BREAKPOINT[];\n  };\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends KeyboardFocusConfig {}\n}\n","import { Injectable } from '@angular/core';\nimport { Config, DeferLoadingStrategy } from '@spartacus/core';\nimport { LaunchConfig } from '../launch-dialog/index';\n\n/**\n * The `BREAKPOINT` typing defaults to five default screen names:\n * xs, sm, md, lg, xl.\n *\n * The type can be extended to allow for custom screens, such as XLL or `tablet`.\n *\n * While the screen names are fully configurable, other features might have\n * pre-configured layout settings per screen. Page layouts or table configurations,\n * for example, are driven by screen size. In case you change the screen size or\n * introduce new screen names, you might loose out on these configurations.\n */\nexport enum BREAKPOINT {\n  xs = 'xs',\n  sm = 'sm',\n  md = 'md',\n  lg = 'lg',\n  xl = 'xl',\n}\n\nexport type LayoutSections =\n  | 'header'\n  | 'footer'\n  | 'LandingPage2Template'\n  | string;\n\nexport type SlotConfig = {\n  /** The cms page slots are mapped by the `slot.position`. */\n  slots?: string[];\n\n  /**\n   * The page fold identifies the last expected page slot above-the-fold.\n   * It's perfectly fine to specify this by indication, but keep in mind that\n   * a more precise indication will gain a more positive impact on performance.\n   */\n  pageFold?: string;\n};\n\nexport type SlotGroup = {\n  /** The page slot configuration for large screens */\n  [BREAKPOINT.lg]?: SlotConfig;\n  /** The page slot configuration for medium screens */\n  [BREAKPOINT.md]?: SlotConfig;\n  /** The page slot configuration for small screens */\n  [BREAKPOINT.sm]?: SlotConfig;\n  /** The page slot configuration for extra small screens */\n  [BREAKPOINT.xs]?: SlotConfig;\n};\n\nexport type LayoutSlotConfig = {\n  [section in LayoutSections]: SlotConfig | SlotGroup | LayoutSlotConfig;\n};\n\nexport interface BreakPoint {\n  /**\n   * The minimum screen width.\n   */\n  min?: number;\n\n  /**\n   * The minimum screen width.\n   */\n  max?: number;\n}\n\n/**\n * The `LayoutBreakPoints` can be used to configure the size of a specific screen. The screen\n * are defined by breakpoints, with a min and/or max value. The breakpoint size is in pixels,\n * hence a numeric value is expected.\n */\nexport type LayoutBreakPoints = {\n  [t in BREAKPOINT]?: number | BreakPoint;\n};\n\n/**\n * The LayoutConfig supports the configuration of page slots by page templates\n * or page sections, such as headers and footers. The configuration also supports\n * adaptive design per breakpoint (not per device type), so that the DOM is (re)rendered\n * por a given breakpoint.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class LayoutConfig {\n  /**\n   * The breakpoint configuration is used to defined various screens. A specific screen name can\n   * be used to further configure certain features, such as the overall layout or specific\n   * component configurations.\n   */\n  breakpoints?: LayoutBreakPoints;\n\n  layoutSlots?: LayoutSlotConfig;\n\n  /**\n   * Deferred loading is a technique to hold of with the loading / creation\n   * of DOM elements which are not not in the initial view port.\n   * This technique wil increase performance.\n   */\n  deferredLoading?: {\n    /**\n     * The global strategy will be used as a fallback strategy for all DOM creation,\n     * but can be overridden by local configuration, i.e. for cms components.\n     */\n    strategy?: DeferLoadingStrategy;\n    /**\n     * The intersection margin contains the offset used by the Intersection Observer\n     * to observe elements outside the view port.\n     *\n     * See https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin\n     */\n    intersectionMargin?: string;\n  };\n\n  launch?: LaunchConfig;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends LayoutConfig {}\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport {\n  BreakPoint,\n  BREAKPOINT,\n  LayoutBreakPoints,\n  LayoutConfig,\n} from '../config/layout-config';\n\n/**\n * The `BreakpointService` resolves the various screen sizes that are used in\n * the storefront. The screen sizes are globally configurable based on your\n * layout requirements. You can adjust the screen sizes by setting the minimum\n * and/or maximum size for a breakpoint, as well as extending the configuration\n * with new screens.\n *\n * By default, the `BreakpointService` is based on the breakpoints from the\n * Bootstrap ui library:\n * - `xs`: < 576px\n * - `sm`: 576px - 767px\n * - `md`: 768px - 991px\n * - `lg`: 992px - 1199px\n * - `xl`: >= 1200px\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class BreakpointService {\n  private _breakpoints: BREAKPOINT[];\n\n  breakpoint$: Observable<BREAKPOINT> = isPlatformBrowser(this.platform)\n    ? this.winRef.resize$.pipe(\n        map((event) => this.getBreakpoint((<Window>event.target).innerWidth)),\n        distinctUntilChanged()\n      )\n    : of(this.fallbackBreakpoint);\n\n  constructor(\n    protected winRef: WindowRef,\n    protected layoutConfig: LayoutConfig,\n    @Inject(PLATFORM_ID) protected platform: any\n  ) {}\n\n  /**\n   * Returns the breakpoints for the storefront layout.\n   *\n   * The breakpoints are driven by the `LayoutConfig.breakpoints` and sorted based on\n   * the given screen size.\n   */\n  get breakpoints(): BREAKPOINT[] {\n    if (!this._breakpoints) {\n      this._breakpoints = this.resolveBreakpointsFromConfig();\n    }\n    return this._breakpoints;\n  }\n\n  /**\n   * Returns the _maximum_ size for the breakpoint, given by the `LayoutConfig.breakpoints`\n   * configuration.\n   */\n  getSize(breakpoint: BREAKPOINT): number {\n    return (\n      this.getMaxSize(breakpoint) ??\n      // if there's no direct max value or explicit max value\n      // we must derive the max value from the previous min\n      this.getMinSize(\n        this.breakpoints?.[this.breakpoints.indexOf(breakpoint) + 1]\n      )\n    );\n  }\n\n  /**\n   * Indicates whether the current screen size is smaller than the maximum size of the\n   * given breakpoint.\n   *\n   * If the given breakpoint is `BREAKPOINT.md`, the method returns `true` when the\n   * window innerWidth is smaller than the configured size of `BREAKPOINT.md`.\n   */\n  isDown(breakpoint: BREAKPOINT): Observable<boolean> {\n    return this.breakpoint$.pipe(\n      map((br) =>\n        this.breakpoints\n          .slice(0, this.breakpoints.indexOf(breakpoint) + 1)\n          .includes(br)\n      )\n    );\n  }\n\n  /**\n   * Indicates whether the current screen size is larger than the minimum size of the\n   * given breakpoint.\n   *\n   * If the given breakpoint is `BREAKPOINT.md`, the method returns `true` when the\n   * window innerWidth is larger than the configured size of `BREAKPOINT.sm`.\n   */\n  isUp(breakpoint: BREAKPOINT): Observable<boolean> {\n    return this.breakpoint$.pipe(\n      map((br) =>\n        this.breakpoints\n          .slice(this.breakpoints.indexOf(breakpoint))\n          .includes(br)\n      )\n    );\n  }\n\n  /**\n   * Indicates whether the given breakpoint fits in the current screen size.\n   */\n  isEqual(breakpoint: BREAKPOINT): Observable<boolean> {\n    return this.breakpoint$.pipe(map((br) => br === breakpoint));\n  }\n\n  /**\n   * Returns the fallback breakpoint in case no breakpoint can be resolved. This is\n   * typically the case when we're on SSR without an actual window.\n   *\n   * Returns the smallest screen size (mobile first).\n   */\n  protected get fallbackBreakpoint(): BREAKPOINT {\n    return this.breakpoints?.[0];\n  }\n\n  /**\n   * Resolves the breakpoints and sorts them according to the configured size.\n   *\n   * The sort order is by small to large screens.\n   */\n  protected resolveBreakpointsFromConfig(): BREAKPOINT[] {\n    const sortByScreenSize = (next: BREAKPOINT, prev: BREAKPOINT): number => {\n      const maxNext = Math.max(\n        this.getMinSize(next) + 1 || 0,\n        this.getMaxSize(next) || 0\n      );\n      const maxPrev = Math.max(\n        this.getMinSize(prev) + 1 || 0,\n        this.getMaxSize(prev) || 0\n      );\n      return maxNext < maxPrev ? -1 : 0;\n    };\n    return (Object.keys(this.config) as BREAKPOINT[]).sort(sortByScreenSize);\n  }\n\n  /**\n   * Returns the _maximum_ size for the breakpoint, given by the\n   * `LayoutConfig.breakpoints` configuration. We will try to resolve the\n   * max size form the current breakpoint, but if this is not available, we\n   * resolve it form the next breakpoint\n   */\n  protected getMaxSize(breakpoint: BREAKPOINT): number {\n    const breakpointConfig = this.config[breakpoint];\n\n    if (!breakpointConfig) {\n      return null;\n    }\n\n    // we treat numbers as the max number by default\n    if (typeof breakpointConfig === 'number') {\n      return breakpointConfig as number;\n    } else if (breakpointConfig.max) {\n      return breakpointConfig.max;\n    } else {\n      return null;\n    }\n  }\n\n  protected getMinSize(breakpoint: BREAKPOINT): number {\n    return (this.config[breakpoint] as BreakPoint)?.min;\n  }\n\n  /**\n   * Returns a `BREAKPOINT` for the given window size.\n   *\n   * This method tries to match the closest breakpoint for the given\n   * window size. We'll fallback to the `largest` size in case the window\n   * is greater than the largest configurable breakpoint.\n   *\n   * The windowWidth should be smaller than the maximum size of any of the\n   * screen sizes defined in the `LayoutConfig.breakpoints`.\n   */\n  protected getBreakpoint(windowWidth: number): BREAKPOINT {\n    return (\n      this.breakpoints.find((br) => windowWidth < this.getSize(br)) ??\n      this.breakpoints?.[this.breakpoints.length - 1]\n    );\n  }\n\n  /**\n   * Helper method to return the breakpoint configuration.\n   */\n  protected get config(): LayoutBreakPoints {\n    return this.layoutConfig?.breakpoints || {};\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { NavigationStart, Router } from '@angular/router';\nimport { WindowRef } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\nimport { BreakpointService } from '../../../../layout/breakpoint/breakpoint.service';\nimport { BREAKPOINT } from '../../../config';\nimport { KeyboardFocusConfig } from '../config';\n\n/**\n * @deprecated since 4.2, refer to spartacus issues (#13762)\n * Shared service for keyboard focus features called when the browser navigates.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class OnNavigateFocusService implements OnDestroy {\n  protected resetFocusOnNavigate: Subscription;\n  protected resetViewOnNavigate: Subscription;\n\n  constructor(\n    protected config: KeyboardFocusConfig,\n    protected router: Router,\n    protected breakpointService: BreakpointService,\n    protected winRef: WindowRef\n  ) {}\n\n  ngOnDestroy(): void {\n    this.resetFocusOnNavigate?.unsubscribe();\n    this.resetViewOnNavigate?.unsubscribe();\n  }\n\n  /**\n   * Reads configuration and enables features based on flags set.\n   */\n  initializeWithConfig(): void {\n    if (!this.winRef.isBrowser()) {\n      return;\n    }\n\n    if (this.config?.keyboardFocus?.enableResetFocusOnNavigate) {\n      this.setResetFocusOnNavigate(\n        this.config.keyboardFocus.enableResetFocusOnNavigate\n      );\n    }\n\n    if (this.config?.keyboardFocus?.enableResetViewOnNavigate) {\n      this.setResetViewOnNavigate(\n        this.config.keyboardFocus.enableResetViewOnNavigate\n      );\n    }\n  }\n\n  /**\n   * Resets focus back to body element in the DOM tree when a navigation is started.\n   * @param enable Enable or disable this feature. Set this to an array of BREAKPOINTS to enable for specified screen widths.\n   */\n  setResetFocusOnNavigate(enable: boolean | BREAKPOINT[]): void {\n    this.resetFocusOnNavigate?.unsubscribe();\n\n    if (enable) {\n      this.resetFocusOnNavigate = this.router.events\n        .pipe(filter((event) => event instanceof NavigationStart))\n        .subscribe(() => {\n          if (Array.isArray(enable)) {\n            this.breakpointService.breakpoint$\n              .pipe(take(1))\n              .subscribe((breakpoint: BREAKPOINT) => {\n                if (enable.includes(breakpoint)) {\n                  this.winRef.document.body.focus();\n                }\n              });\n          } else if (typeof enable === 'boolean') {\n            this.winRef.document.body.focus();\n          }\n        });\n    }\n  }\n\n  /**\n   * Resets view back to body element in the DOM tree when a navigation is started.\n   * @param enable Enable or disable this feature. Set this to an array of BREAKPOINTS to enable for specified screen widths.\n   */\n  setResetViewOnNavigate(enable: boolean | BREAKPOINT[]): void {\n    this.resetViewOnNavigate?.unsubscribe();\n\n    if (enable) {\n      this.resetViewOnNavigate = this.router.events\n        .pipe(filter((event) => event instanceof NavigationStart))\n        .subscribe(() => {\n          if (Array.isArray(enable)) {\n            this.breakpointService.breakpoint$\n              .pipe(take(1))\n              .subscribe((breakpoint: BREAKPOINT) => {\n                if (enable.includes(breakpoint)) {\n                  this.winRef.document.body.scrollIntoView();\n                }\n              });\n          } else if (typeof enable === 'boolean') {\n            this.winRef.document.body.scrollIntoView();\n          }\n        });\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { ConfigModule, provideDefaultConfig } from '@spartacus/core';\nimport { defaultKeyboardFocusConfig } from './config/default-keyboard-focus.config';\nimport { FocusDirective } from './focus.directive';\nimport { OnNavigateFocusService } from './on-navigate/on-navigate-focus.service';\n\nconst directives = [\n  // PersistFocusDirective,\n  // VisibleFocusDirective,\n  // BlockFocusDirective,\n  // AutoFocusDirective,\n  // EscapeFocusDirective,\n  // LockFocusDirective,\n  // TrapFocusDirective,\n  // TabFocusDirective,\n  FocusDirective,\n];\n\n/**\n * @deprecated since 4.2, refer to spartacus issues (#13762)\n * Remove the router module as well as it was part of the old initiative for scroll positiioning\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    ConfigModule.withConfig(defaultKeyboardFocusConfig),\n    RouterModule,\n  ],\n  declarations: [...directives],\n  providers: [\n    provideDefaultConfig(defaultKeyboardFocusConfig),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: keyboardFocusFactory,\n      deps: [OnNavigateFocusService],\n      multi: true,\n    },\n  ],\n  exports: [...directives],\n})\nexport class KeyboardFocusModule {}\n\n/**\n *  @deprecated since 4.2, refer to spartacus issues (#13762)\n *  Start keyboard focus services on app initialization.\n */\nexport function keyboardFocusFactory(\n  onNavigateFocusService: OnNavigateFocusService\n) {\n  const isReady = () => onNavigateFocusService.initializeWithConfig();\n  return isReady;\n}\n","import { Directive, Input, NgModule } from '@angular/core';\nimport { FocusConfig } from './keyboard-focus.model';\n\n@Directive({\n  selector: '[cxFocus]',\n})\nexport class MockKeyboardFocusDirective {\n  @Input('cxFocus') config: FocusConfig = {};\n}\n\n@NgModule({\n  declarations: [MockKeyboardFocusDirective],\n  exports: [MockKeyboardFocusDirective],\n})\nexport class KeyboardFocusTestingModule {}\n","// given that we're likely going to refactor the directives, we're\n// NOT exposing all it to the public API.\nexport * from './focus.directive';\nexport { FocusConfig, TrapFocus, TrapFocusType } from './keyboard-focus.model';\nexport * from './keyboard-focus.module';\nexport * from './focus-testing.module';\nexport * from './services/index';\nexport * from './config/index';\n\n// export * from './autofocus/index';\n// export * from './base/index';\n// export * from './block/index';\n// export * from './escape/index';\n// export * from './lock/index';\n// export * from './on-navigate/index';\n// export * from './persist/index';\n// export * from './tab/index';\n// export * from './trap/index';\n// export * from './visible/index';\n// export * from './keyboard-focus.model';\n","import { OutletPosition } from '../../../cms-structure/outlet/outlet.model';\n\nexport interface LaunchConfig {\n  [key: string]: LaunchOptions;\n}\n\nexport type LaunchOptions =\n  | LaunchOutletDialog\n  | LaunchInlineDialog\n  | LaunchRoute\n  | LaunchInlineRootDialog;\n\n/**\n * Parent type for configurations that render components\n */\nexport interface LaunchDialog {\n  component: any;\n  /**\n   * Can the element be rendered multiple times\n   */\n  multi?: boolean;\n  /**\n   * Dialog type is used to apply CSS classes\n   */\n  dialogType?: DIALOG_TYPE;\n}\n\n/**\n * Configuration type to render a component in an outlet.\n * Outlet rendering should only be used for elements that open once and do not close.\n */\nexport interface LaunchOutletDialog extends LaunchDialog {\n  /**\n   * The outlet to render the element in\n   */\n  outlet: string;\n  /**\n   * Default: OutletPosition.BEFORE\n   */\n  position?: OutletPosition;\n}\n\n/**\n * Configuration type to render a component inline (next to the trigger)\n */\nexport interface LaunchInlineDialog extends LaunchDialog {\n  inline: boolean;\n}\n\n/**\n * Configuration type to render a component directly inside the cx-storefront (storefront selector).\n * Best used for global elements like dialogs.\n */\nexport interface LaunchInlineRootDialog extends LaunchDialog {\n  inlineRoot: boolean;\n}\n\n/**\n * Configuration type to render as link\n */\nexport interface LaunchRoute {\n  /**\n   * The route for the url\n   */\n  cxRoute: string;\n  /**\n   * The parameters for the route\n   */\n  params?: { [param: string]: any };\n}\n\n/**\n * Types of dialog openings supported\n */\nexport enum DIALOG_TYPE {\n  POPOVER = 'POPOVER',\n  POPOVER_CENTER = 'POPOVER_CENTER',\n  POPOVER_CENTER_BACKDROP = 'POPOVER_CENTER_BACKDROP',\n  DIALOG = 'DIALOG',\n  SIDEBAR_START = 'SIDEBAR_START',\n  SIDEBAR_END = 'SIDEBAR_END',\n}\n\n/**\n * List of available callers\n */\nexport const enum LAUNCH_CALLER {\n  ASM = 'ASM',\n  SKIP_LINKS = 'SKIP_LINKS',\n  ANONYMOUS_CONSENT = 'ANONYMOUS_CONSENT',\n  REPLENISHMENT_ORDER = 'REPLENISHMENT_ORDER',\n  PLACE_ORDER_SPINNER = 'PLACE_ORDER_SPINNER',\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentRef,\n  Inject,\n  Renderer2,\n  RendererFactory2,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Applicable, Priority } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  DIALOG_TYPE,\n  LaunchDialog,\n  LaunchOptions,\n  LAUNCH_CALLER,\n} from '../config';\n\nexport abstract class LaunchRenderStrategy implements Applicable {\n  // List of called references; only used for rendered elements\n  protected renderedCallers: Array<{\n    caller: LAUNCH_CALLER | string;\n    element?: any;\n    component?: ComponentRef<any>;\n  }> = [];\n\n  /**\n   * Classes to apply to the component when the dialog is a DIALOG\n   */\n  protected dialogClasses = ['d-block', 'fade', 'modal', 'show'];\n  /**\n   * Classes to apply to the component when the dialog is a POPOVER\n   */\n  protected popoverClasses = ['cx-dialog-popover'];\n  /**\n   * Classes to apply to the component when the dialog is a POPOVER_CENTER\n   */\n  protected popoverCenterClasses = ['cx-dialog-popover-center'];\n  /**\n   * Classes to apply to the component when the dialog is a POPOVER_CENTER with a backdrop\n   */\n  protected popoverCenterBackdropClasses = [\n    'cx-dialog-popover-center-backdrop',\n  ];\n  /**\n   * Classes to apply to the component when the dialog is a SIDEBAR_END\n   */\n  protected sidebarEndClasses = ['cx-sidebar-end'];\n  /**\n   * Classes to apply to the component when the dialog is a SIDEBAR_START\n   */\n  protected sidebarStartClasses = ['cx-sidebar-start'];\n\n  protected renderer: Renderer2;\n\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  /**\n   * Render method to implement based on the strategy\n   *\n   * @param config Launch configuration\n   */\n  abstract render(\n    config: LaunchOptions,\n    caller: LAUNCH_CALLER | string,\n    vcr?: ViewContainerRef\n  ): Observable<ComponentRef<any> | undefined> | void;\n\n  /**\n   * Determines if the strategy is the right one for the provided configuration\n   *\n   * @param config\n   */\n  abstract hasMatch(config: LaunchOptions): boolean;\n\n  /**\n   * Determines if element should render\n   *\n   * @param caller\n   * @param config\n   */\n  protected shouldRender(\n    caller: LAUNCH_CALLER | string,\n    config: LaunchDialog\n  ): boolean {\n    return (\n      Boolean(config.component) &&\n      (this.renderedCallers.some((el) => el.caller === caller)\n        ? !!config.multi\n        : true)\n    );\n  }\n\n  protected applyClasses(\n    component: ComponentRef<any>,\n    dialogType: DIALOG_TYPE\n  ): void {\n    let classes = [];\n\n    // TODO: make classes configurable\n    switch (dialogType) {\n      case DIALOG_TYPE.DIALOG:\n        classes = this.dialogClasses;\n        this.renderer.addClass(this.document.body, 'modal-open');\n        break;\n      case DIALOG_TYPE.POPOVER:\n        classes = this.popoverClasses;\n        break;\n      case DIALOG_TYPE.POPOVER_CENTER:\n        classes = this.popoverCenterClasses;\n        break;\n      case DIALOG_TYPE.POPOVER_CENTER_BACKDROP:\n        classes = this.popoverCenterBackdropClasses;\n        break;\n      case DIALOG_TYPE.SIDEBAR_END:\n        classes = this.sidebarEndClasses;\n        break;\n      case DIALOG_TYPE.SIDEBAR_START:\n        classes = this.sidebarStartClasses;\n        break;\n    }\n\n    for (const newClass of classes) {\n      this.renderer.addClass(component.location.nativeElement, newClass);\n    }\n  }\n\n  /**\n   * Method to call when rendered element is destroyed\n   * The element will be removed from the list of rendered elements\n   *\n   * @param caller\n   * @param _config optional parameters used in children strategies\n   */\n  public remove(caller: LAUNCH_CALLER | string, config: LaunchOptions): void {\n    this.renderedCallers = this.renderedCallers.filter(\n      (el) => el.caller !== caller\n    );\n\n    if ((config as LaunchDialog)?.dialogType === DIALOG_TYPE.DIALOG) {\n      this.renderer.removeClass(this.document.body, 'modal-open');\n    }\n  }\n\n  getPriority(): Priority {\n    return Priority.LOW; // low, as it's a default matcher\n  }\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Inject,\n  Injectable,\n  isDevMode,\n  ViewContainerRef,\n} from '@angular/core';\nimport { resolveApplicable } from '@spartacus/core';\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\nimport { filter, map, take, tap } from 'rxjs/operators';\nimport { LayoutConfig } from '../../config/layout-config';\nimport { LaunchOptions, LAUNCH_CALLER } from '../config/launch-config';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class LaunchDialogService {\n  private _dialogClose = new BehaviorSubject<string>(undefined);\n  private _dataSubject = new BehaviorSubject<any>(undefined);\n\n  get data$(): Observable<any> {\n    return this._dataSubject.asObservable();\n  }\n\n  constructor(\n    @Inject(LaunchRenderStrategy)\n    protected renderStrategies: LaunchRenderStrategy[],\n    protected layoutConfig: LayoutConfig\n  ) {\n    this.renderStrategies = this.renderStrategies || [];\n  }\n\n  /**\n   * Open the dialog\n   *\n   * @param caller LAUNCH_CALLER\n   * @param openElement button's Element ref\n   * @param vcr View Container Ref of the container for inline rendering\n   * @param data optional data which could be passed to dialog\n   */\n  openDialog(\n    caller: LAUNCH_CALLER | string,\n    openElement?: ElementRef,\n    vcr?: ViewContainerRef,\n    data?: any\n  ): Observable<any> | undefined {\n    const component = this.launch(caller, vcr, data);\n\n    if (component) {\n      return combineLatest([component, this.dialogClose]).pipe(\n        filter(([, close]) => close !== undefined),\n        tap(([comp]) => {\n          openElement?.nativeElement.focus();\n          this.clear(caller);\n          comp.destroy();\n        }),\n        map(([comp]) => comp)\n      );\n    }\n  }\n  /**\n   * Render the element based on the strategy from the launch configuration\n   *\n   * @param caller LAUNCH_CALLER\n   * @param vcr View Container Ref of the container for inline rendering\n   */\n  launch(\n    caller: LAUNCH_CALLER | string,\n    vcr?: ViewContainerRef,\n    data?: any\n  ): void | Observable<ComponentRef<any> | undefined> {\n    const config = this.findConfiguration(caller);\n    if (config) {\n      const renderer = this.getStrategy(config);\n\n      // Render if the strategy exists\n      if (renderer) {\n        this._dialogClose.next(undefined);\n        this._dataSubject.next(data);\n\n        return renderer.render(config, caller, vcr);\n      }\n    } else if (isDevMode()) {\n      console.warn('No configuration provided for caller ' + caller);\n    }\n  }\n\n  /**\n   * Opens dialog and subscribe in the service. Should be used if the trigger component might get destroyed while the component is open.\n   *\n   * @param caller Launch Caller\n   * @param openElement Element to open\n   * @param data Data to provide to the rendered element\n   */\n  openDialogAndSubscribe(\n    caller: LAUNCH_CALLER | string,\n    openElement?: ElementRef,\n    data?: any\n  ): void {\n    this.openDialog(caller, openElement, undefined, data)\n      ?.pipe(take(1))\n      .subscribe();\n  }\n\n  /**\n   * Util method to remove element from rendered elements list\n   *\n   * @param caller LAUNCH_CALLER\n   */\n  clear(caller: LAUNCH_CALLER | string): void {\n    const config = this.findConfiguration(caller);\n\n    if (config) {\n      const renderer = this.getStrategy(config);\n\n      // Render if the strategy exists\n      if (renderer) {\n        renderer.remove(caller, config);\n      }\n    }\n  }\n\n  get dialogClose(): Observable<string> {\n    return this._dialogClose.asObservable();\n  }\n\n  closeDialog(reason: string) {\n    this._dialogClose.next(reason);\n  }\n\n  /**\n   * Returns the configuration for the caller\n   *\n   * @param caller LAUNCH_CALLER\n   */\n  protected findConfiguration(\n    caller: LAUNCH_CALLER | string\n  ): LaunchOptions | undefined {\n    if (this.layoutConfig?.launch) {\n      return this.layoutConfig.launch[caller];\n    }\n    return undefined;\n  }\n\n  /**\n   * Returns the render strategy based on the configuration\n   *\n   * @param config Configuration for launch\n   */\n  protected getStrategy(config: LaunchOptions): LaunchRenderStrategy {\n    return resolveApplicable(this.renderStrategies, [config]);\n  }\n}\n","import { Component, OnDestroy, ViewContainerRef } from '@angular/core';\nimport { AnonymousConsentsService } from '@spartacus/core';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\nimport { LAUNCH_CALLER } from '../../../layout/launch-dialog/config/launch-config';\nimport { Observable, Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-anonymous-consent-management-banner',\n  templateUrl: './anonymous-consent-management-banner.component.html',\n})\nexport class AnonymousConsentManagementBannerComponent implements OnDestroy {\n  private subscriptions = new Subscription();\n\n  bannerVisible$: Observable<boolean> =\n    this.anonymousConsentsService.isBannerVisible();\n\n  constructor(\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected vcr: ViewContainerRef,\n    protected launchDialogService: LaunchDialogService\n  ) {}\n\n  viewDetails(): void {\n    this.hideBanner();\n    const dialog = this.launchDialogService.openDialog(\n      LAUNCH_CALLER.ANONYMOUS_CONSENT,\n      null,\n      this.vcr\n    );\n    if (dialog) {\n      this.subscriptions.add(dialog.subscribe());\n    }\n  }\n\n  allowAll(): void {\n    this.subscriptions.add(\n      this.anonymousConsentsService\n        .giveAllConsents()\n        .pipe(tap(() => this.hideBanner()))\n        .subscribe()\n    );\n  }\n\n  hideBanner(): void {\n    this.anonymousConsentsService.toggleBannerDismissed(true);\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<ng-container *ngIf=\"bannerVisible$ | async as bannerVisible\">\n  <div\n    [ngClass]=\"{ 'anonymous-consent-banner-hidden': !bannerVisible }\"\n    class=\"anonymous-consent-banner\"\n  >\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-lg-8 col-xs-12\">\n          <div class=\"cx-banner-title\">\n            {{ 'anonymousConsents.banner.title' | cxTranslate }}\n          </div>\n          <div class=\"cx-banner-description\">\n            {{ 'anonymousConsents.banner.description' | cxTranslate }}\n          </div>\n        </div>\n\n        <div class=\"col-lg-4 col-xs-12 cx-banner-buttons\">\n          <button class=\"btn btn-action\" (click)=\"viewDetails()\">\n            {{ 'anonymousConsents.banner.viewDetails' | cxTranslate }}\n          </button>\n          <button class=\"btn btn-primary\" (click)=\"allowAll()\">\n            {{ 'anonymousConsents.banner.allowAll' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentFactoryResolver,\n  ComponentRef,\n  Inject,\n  Injectable,\n  isDevMode,\n  RendererFactory2,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { LaunchInlineDialog, LAUNCH_CALLER } from '../config/index';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class InlineRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected componentFactoryResolver: ComponentFactoryResolver\n  ) {\n    super(document, rendererFactory);\n  }\n\n  /**\n   * Renders the component from the configuration in the view container ref\n   *\n   * @param config\n   * @param caller\n   * @param vcr\n   */\n  render(\n    config: LaunchInlineDialog,\n    caller: LAUNCH_CALLER | string,\n    vcr: ViewContainerRef\n  ): Observable<ComponentRef<any>> | void {\n    // Only render if a ViewContainerRef is provided\n    if (vcr && this.shouldRender(caller, config)) {\n      const template = this.componentFactoryResolver.resolveComponentFactory(\n        config.component\n      );\n\n      const component = vcr.createComponent(template);\n\n      if (config?.dialogType) {\n        this.applyClasses(component, config?.dialogType);\n      }\n\n      this.renderedCallers.push({ caller, element: vcr.element, component });\n\n      return of(component);\n    } else if (isDevMode()) {\n      if (!vcr) {\n        console.warn(`No view container ref provided for ${caller}`);\n      } else {\n        console.warn(\n          `Element for ${caller} already rendered. To allow multi rendering add property multi: true.`\n        );\n      }\n    }\n  }\n\n  hasMatch(config: LaunchInlineDialog) {\n    return Boolean(config.inline);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Inject,\n  Injectable,\n  Injector,\n  RendererFactory2,\n} from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { LaunchInlineRootDialog, LAUNCH_CALLER } from '../config/launch-config';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class InlineRootRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected componentFactoryResolver: ComponentFactoryResolver,\n    protected injector: Injector\n  ) {\n    super(document, rendererFactory);\n  }\n\n  get hostComponent() {\n    return this.injector.get(ApplicationRef)?.components?.[0];\n  }\n\n  render(\n    config: LaunchInlineRootDialog,\n    caller: LAUNCH_CALLER | string\n  ): Observable<ComponentRef<any>> | void {\n    if (this.shouldRender(caller, config)) {\n      const componentFactory =\n        this.componentFactoryResolver.resolveComponentFactory(config.component);\n\n      const contentInjector = Injector.create({\n        providers: [],\n      });\n\n      const componentRef = componentFactory.create(contentInjector);\n\n      this.injector.get(ApplicationRef)?.attachView(componentRef.hostView);\n\n      this.renderer.appendChild(\n        this.hostComponent?.location.nativeElement,\n        componentRef.location.nativeElement\n      );\n\n      if (config?.dialogType) {\n        this.applyClasses(componentRef, config?.dialogType);\n      }\n\n      this.renderedCallers.push({ caller, component: componentRef });\n\n      return of(componentRef);\n    }\n  }\n\n  hasMatch(config: LaunchInlineRootDialog) {\n    return Boolean(config.inlineRoot);\n  }\n}\n","import { Observable } from 'rxjs';\n\nexport enum OutletPosition {\n  REPLACE = 'replace',\n  BEFORE = 'before',\n  AFTER = 'after',\n}\n\nexport const AVOID_STACKED_OUTLETS = false;\nexport const USE_STACKED_OUTLETS = true;\n\n/**\n * Token for injecting outlet related context to the component rendered in the outlet\n */\nexport abstract class OutletContextData<T = any> {\n  /**\n   * Provides reference of the outlet where component is rendered in\n   */\n  reference: string;\n  /**\n   * Provides position of the outlet\n   */\n  position: OutletPosition;\n  /**\n   * Provides outlet context\n   *\n   * WARNING: Avoid using it if you need to read the latest value of the context. This property\n   *          is only the initial context value and won't be updated when the new context appears.\n   *          Use `context$` observable instead.\n   *\n   * @deprecated since 3.0 - use `context$` observable instead\n   */\n  context: T;\n  /**\n   * Provides outlet context as an observable\n   */\n  context$: Observable<T>;\n}\n","import { ComponentFactory, Injectable, TemplateRef } from '@angular/core';\nimport { AVOID_STACKED_OUTLETS, OutletPosition } from './outlet.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OutletService<T = TemplateRef<any> | ComponentFactory<any>> {\n  private templatesRefs = {\n    [OutletPosition.BEFORE]: new Map<string, T[]>(),\n    [OutletPosition.REPLACE]: new Map<string, T[]>(),\n    [OutletPosition.AFTER]: new Map<string, T[]>(),\n  };\n\n  /**\n   * Adds a template or ComponentFactory, so that UI outlets can be replaced dynamically.\n   * The UI position where this template or ComponentFactory is inserted is given by a\n   * string reference (called `outlet`) and optional `OutletPosition`. The `OutletPosition`\n   * is either before or after, or replaces the entire UI.\n   *\n   * @param outlet the UI location represented by a string\n   * @param template the `TemplateRef` that will be used to insert UI\n   * @param position the `OutletPosition` in the UI\n   */\n  add(outlet: string, template: T, position?: OutletPosition): void;\n  /**\n   * @param factory The `ComponentFactory` that will be dynamically added to the outlet UI\n   */\n  add(\n    outlet: string,\n    // eslint-disable-next-line @typescript-eslint/unified-signatures\n    factory: T,\n    position?: OutletPosition\n  ): void;\n  /**\n   * @param templateOrFactory A `ComponentFactory` that inserts a component dynamically.\n   */\n  add(\n    outlet: string,\n    templateOrFactory: T,\n    position: OutletPosition = OutletPosition.REPLACE\n  ): void {\n    const store = this.templatesRefs[position];\n    if (store) {\n      const existing = store.get(outlet) || [];\n      const newValue: T[] = existing.concat([templateOrFactory]);\n      store.set(outlet, newValue);\n    }\n  }\n\n  /**\n   *\n   * Returns a single object or multiple objects for the given outlet reference,\n   * depending on the `stacked` argument.\n   *\n   * @param outlet The outlet reference\n   * @param position the outlet position, `OutletPosition.before`, `OutletPosition.AFTER` or `OutletPosition.REPLACE`\n   * @param stacked Indicates whether an array of outlet components is returned\n   */\n  get(\n    outlet: string,\n    position: OutletPosition = OutletPosition.REPLACE,\n    stacked = AVOID_STACKED_OUTLETS\n  ): T[] | T {\n    const store =\n      this.templatesRefs[position] ||\n      this.templatesRefs[OutletPosition.REPLACE];\n\n    const templateRef: T[] = store.get(outlet);\n    if (templateRef && !stacked) {\n      return templateRef[0];\n    }\n    return templateRef;\n  }\n\n  remove(\n    outlet: string,\n    position: OutletPosition = OutletPosition.REPLACE,\n    value?: T\n  ): void {\n    const store =\n      this.templatesRefs[position] ||\n      this.templatesRefs[OutletPosition.REPLACE];\n\n    this.removeValueOrAll(store, outlet, value);\n  }\n\n  protected removeValueOrAll(\n    store: Map<string, T[]>,\n    outlet: string,\n    value?: T\n  ): void {\n    if (!value && store.has(outlet)) {\n      store.delete(outlet);\n    } else if (value && store.has(outlet)) {\n      let existing = store.get(outlet);\n\n      existing = existing.filter((val) => val !== value);\n\n      store.set(outlet, existing);\n    }\n  }\n}\n","import {\n  Directive,\n  Input,\n  OnDestroy,\n  OnInit,\n  TemplateRef,\n} from '@angular/core';\nimport { OutletPosition } from '../outlet.model';\nimport { OutletService } from '../outlet.service';\n\n@Directive({\n  selector: '[cxOutletRef]',\n})\nexport class OutletRefDirective implements OnInit, OnDestroy {\n  @Input()\n  cxOutletRef: string;\n  @Input()\n  cxOutletPos: OutletPosition;\n\n  constructor(\n    private tpl: TemplateRef<any>,\n    private outletService: OutletService\n  ) {}\n\n  ngOnInit() {\n    this.outletService.add(this.cxOutletRef, this.tpl, this.cxOutletPos);\n  }\n\n  ngOnDestroy() {\n    this.outletService.remove(this.cxOutletRef, this.cxOutletPos, this.tpl);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { OutletRefDirective } from './outlet-ref.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [OutletRefDirective],\n  exports: [OutletRefDirective],\n})\nexport class OutletRefModule {}\n","import { Injectable } from '@angular/core';\nimport { isNotNullable } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { OutletDirective } from './outlet.directive';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OutletRendererService {\n  private outletRefs = new BehaviorSubject(new Map<string, OutletDirective>());\n\n  /**\n   * Dynamically render the templates in the specified array\n   *\n   * @param outlet\n   */\n  render(outlet: string): void {\n    if (this.outletRefs.value.size !== 0) {\n      this.outletRefs.value.get(outlet).render();\n    }\n  }\n\n  /**\n   * Register outlet to be available to render dynamically\n   *\n   * @param cxOutlet\n   * @param context\n   */\n  register(cxOutlet: string, context: OutletDirective): void {\n    this.outletRefs.next(this.outletRefs.value.set(cxOutlet, context));\n  }\n  /**\n   * Returns map of outlets\n   *\n   */\n  getOutletRef(outlet: string): Observable<OutletDirective> {\n    return this.outletRefs.asObservable().pipe(\n      map((val) => val.get(outlet)),\n      filter(isNotNullable)\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { distinctUntilChanged, first, flatMap, map } from 'rxjs/operators';\nimport { LayoutConfig } from '../config/layout-config';\nimport { IntersectionOptions } from './intersection.model';\n\n/**\n * The IntersectionService uses the native IntersectionObserver (v2), which\n * can be used to implement pre-loading and deferred loading of DOM content.\n *\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class IntersectionService {\n  constructor(protected config: LayoutConfig) {}\n\n  /**\n   * Returns an Observable that emits only once a boolean value whenever\n   * the given element has shown in the view port.\n   *\n   * The returned observable will only emit the first value. The\n   * observable must be cleaned up either way, since the value might never emit; it\n   *  depends on whether the element appears in the view port.\n   */\n  isIntersected(\n    element: HTMLElement,\n    options?: IntersectionOptions\n  ): Observable<boolean> {\n    return this.intersects(element, options).pipe(first((v) => v === true));\n  }\n\n  /**\n   * Indicates whenever the element intersects the view port. An optional margin\n   * is used to intersects before the element shows up in the viewport.\n   * A value is emitted each time the element intersects.\n   *\n   * This is private for now, but could be exposed as a public API\n   * to introduce additional (css) render effects to the UI.\n   */\n  private intersects(\n    element: HTMLElement,\n    options: IntersectionOptions = {}\n  ): Observable<boolean> {\n    const elementVisible$ = new Observable((observer) => {\n      const rootMargin = this.getRootMargin(options);\n      const intersectOptions = { rootMargin, threshold: options.threshold };\n      const intersectionObserver = new IntersectionObserver((entries) => {\n        observer.next(entries);\n      }, intersectOptions);\n      intersectionObserver.observe(element);\n      return () => {\n        intersectionObserver.disconnect();\n      };\n    }).pipe(\n      flatMap((entries: IntersectionObserverEntry[]) => entries),\n      map((entry: IntersectionObserverEntry) => entry.isIntersecting),\n      distinctUntilChanged()\n    );\n\n    return elementVisible$;\n  }\n\n  private getRootMargin(options: IntersectionOptions = {}): string {\n    if (options.rootMargin) {\n      return options.rootMargin;\n    }\n    const layoutConfig = this.config as LayoutConfig;\n    if (\n      layoutConfig.deferredLoading &&\n      layoutConfig.deferredLoading.intersectionMargin\n    ) {\n      return layoutConfig.deferredLoading.intersectionMargin;\n    }\n  }\n}\n","import { isPlatformServer } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { DeferLoadingStrategy } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { LayoutConfig } from '../config/layout-config';\nimport { IntersectionOptions } from './intersection.model';\nimport { IntersectionService } from './intersection.service';\n\n/**\n * The defer loading serivce is used to defer loading of DOM elements\n * until the elements are required for the user experience.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DeferLoaderService {\n  globalLoadStrategy: DeferLoadingStrategy;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: Object,\n    protected config: LayoutConfig,\n    protected intersectionService: IntersectionService\n  ) {\n    this.globalLoadStrategy = config.deferredLoading\n      ? config.deferredLoading.strategy\n      : DeferLoadingStrategy.INSTANT;\n  }\n\n  /**\n   * Defer loading till the element intersects the viewport.\n   *\n   * We evaluate whether we instantly load the element for different reasons:\n   * - we run in SSR mode\n   * - there's no global strategy given\n   * - the global loading strategy is set to INSTANT loading,\n   *   and the loading strategy in the given is not set to DEFER\n   * - the loading strategy in the given options is set to INSTANT\n   */\n  load(\n    element: HTMLElement,\n    options?: IntersectionOptions\n  ): Observable<boolean> {\n    if (this.shouldLoadInstantly((options || {}).deferLoading)) {\n      return of(true);\n    } else {\n      return this.intersectionService.isIntersected(element, options);\n    }\n  }\n\n  private shouldLoadInstantly(\n    elementLoadingStrategy: DeferLoadingStrategy\n  ): boolean {\n    return (\n      isPlatformServer(this.platformId) ||\n      elementLoadingStrategy === DeferLoadingStrategy.INSTANT ||\n      (elementLoadingStrategy !== DeferLoadingStrategy.DEFER &&\n        this.globalLoadStrategy === DeferLoadingStrategy.INSTANT)\n    );\n  }\n}\n","import {\n  ComponentFactory,\n  ComponentRef,\n  Directive,\n  EmbeddedViewRef,\n  EventEmitter,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { ReplaySubject, Subscription } from 'rxjs';\nimport { DeferLoaderService } from '../../layout/loading/defer-loader.service';\nimport { IntersectionOptions } from '../../layout/loading/intersection.model';\nimport { OutletRendererService } from './outlet-renderer.service';\nimport {\n  OutletContextData,\n  OutletPosition,\n  USE_STACKED_OUTLETS,\n} from './outlet.model';\nimport { OutletService } from './outlet.service';\n\n@Directive({\n  selector: '[cxOutlet]',\n})\nexport class OutletDirective<T = any> implements OnDestroy, OnChanges {\n  private renderedTemplate = [];\n  public renderedComponents = new Map<\n    OutletPosition,\n    Array<ComponentRef<any> | EmbeddedViewRef<any>>\n  >();\n\n  @Input() cxOutlet: string;\n\n  /**\n   * Context data to be provided to child view of the outlet\n   */\n  @Input() cxOutletContext: T;\n\n  /**\n   * Observable with current outlet context\n   */\n  private readonly outletContext$ = new ReplaySubject<T>(1);\n\n  /**\n   * Defers loading options for the the templates of this outlet.\n   */\n  @Input() cxOutletDefer: IntersectionOptions;\n\n  @Output() loaded: EventEmitter<Boolean> = new EventEmitter<Boolean>(true);\n\n  subscription = new Subscription();\n\n  constructor(\n    private vcr: ViewContainerRef,\n    private templateRef: TemplateRef<any>,\n    private outletService: OutletService,\n    private deferLoaderService: DeferLoaderService,\n    private outletRendererService: OutletRendererService\n  ) {}\n\n  /**\n   * Renders view for outlet or defers it, depending on the input `cxOutletDefer`\n   */\n  public render(): void {\n    this.vcr.clear();\n    this.renderedTemplate = [];\n    this.renderedComponents.clear();\n    this.subscription.unsubscribe();\n    this.subscription = new Subscription();\n\n    if (this.cxOutletDefer) {\n      this.deferLoading();\n    } else {\n      this.build();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.cxOutlet) {\n      this.render();\n      this.outletRendererService.register(this.cxOutlet, this);\n    }\n    if (changes.cxOutletContext) {\n      this.outletContext$.next(this.cxOutletContext);\n    }\n  }\n\n  private deferLoading(): void {\n    this.loaded.emit(false);\n    const hostElement = this.getHostElement(this.vcr.element.nativeElement);\n    // Although the deferLoaderService might emit only once, as long as the hostElement\n    // isn't being loaded, there's no value being emitted. Therefore we need to clean up\n    // the subscription on destroy.\n    this.subscription.add(\n      this.deferLoaderService\n        .load(hostElement, this.cxOutletDefer)\n        .subscribe(() => {\n          this.build();\n          this.loaded.emit(true);\n        })\n    );\n  }\n\n  /**\n   * Renders view for outlet\n   */\n  private build() {\n    this.buildOutlet(OutletPosition.BEFORE);\n    this.buildOutlet(OutletPosition.REPLACE);\n    this.buildOutlet(OutletPosition.AFTER);\n  }\n\n  /**\n   * Renders view in a given position for outlet\n   */\n  private buildOutlet(position: OutletPosition): void {\n    let templates: any[] = <any[]>(\n      this.outletService.get(this.cxOutlet, position, USE_STACKED_OUTLETS)\n    );\n\n    templates = templates?.filter((el) => !this.renderedTemplate.includes(el));\n\n    if (!templates && position === OutletPosition.REPLACE) {\n      templates = [this.templateRef];\n    }\n\n    // Just in case someone extended the `OutletService` and\n    // returns a singular object.\n    if (!Array.isArray(templates)) {\n      templates = [templates];\n    }\n\n    const components = [];\n    templates.forEach((obj) => {\n      const component = this.create(obj, position);\n      components.push(component);\n    });\n\n    this.renderedComponents.set(position, components);\n  }\n\n  /**\n   * Renders view based on the given template or component factory\n   */\n  private create(\n    tmplOrFactory: any,\n    position: OutletPosition\n  ): ComponentRef<any> | EmbeddedViewRef<any> {\n    this.renderedTemplate.push(tmplOrFactory);\n\n    if (tmplOrFactory instanceof ComponentFactory) {\n      const component = this.vcr.createComponent(\n        tmplOrFactory,\n        undefined,\n        this.getComponentInjector(position)\n      );\n      return component;\n    } else if (tmplOrFactory instanceof TemplateRef) {\n      const view = this.vcr.createEmbeddedView(\n        <TemplateRef<any>>tmplOrFactory,\n        {\n          $implicit: this.cxOutletContext,\n        }\n      );\n\n      // we do not know if content is created dynamically or not\n      // so we apply change detection anyway\n      view.markForCheck();\n      return view;\n    }\n  }\n\n  /**\n   * Returns injector with OutletContextData that can be injected to the component\n   * rendered in the outlet\n   */\n  private getComponentInjector(position: OutletPosition): Injector {\n    const contextData: OutletContextData<T> = {\n      reference: this.cxOutlet,\n      position,\n      context: this.cxOutletContext,\n      context$: this.outletContext$.asObservable(),\n    };\n\n    return Injector.create({\n      providers: [\n        {\n          provide: OutletContextData,\n          useValue: contextData,\n        },\n      ],\n      parent: this.vcr.injector,\n    });\n  }\n\n  /**\n   * Returns the closest `HtmlElement`, by iterating over the\n   * parent nodes of the given element.\n   *\n   * We avoid traversing the parent _elements_, as this is blocking\n   * ie11 implementations. One of the spare exclusions we make to not\n   * supporting ie11.\n   *\n   * @param element\n   */\n  private getHostElement(element: Node): HTMLElement {\n    if (element instanceof HTMLElement) {\n      return element;\n    }\n    return this.getHostElement(element.parentNode);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.outletContext$.complete();\n  }\n}\n","import { InjectionToken, StaticProvider, Type } from '@angular/core';\nimport { OutletPosition } from './outlet.model';\n\n/**\n * @private We plan to drive the outlets by standard configuration\n */\nexport const PROVIDE_OUTLET_OPTIONS = new InjectionToken<ProvideOutletOptions>(\n  'PROVIDE_OUTLET_OPTIONS'\n);\n\nexport interface ProvideOutletOptions {\n  /**\n   *  Unique id of the outlet\n   */\n  id: string;\n\n  /**\n   * Component to be registered for the outlet\n   */\n  component: Type<any>;\n\n  /**\n   * Component's position in the outlet\n   */\n  position?: OutletPosition;\n}\n\n/**\n * Helper function to register a component for an outlet.\n *\n * @param options.id unique id of the outlet\n * @param options.component Component to be registered for the outlet\n * @param options.position Component's position in the outlet (default: `OutletPosition.AFTER`)\n */\nexport function provideOutlet(options: ProvideOutletOptions): StaticProvider {\n  return {\n    provide: PROVIDE_OUTLET_OPTIONS,\n    useValue: options,\n    multi: true,\n  };\n}\n","import { CommonModule } from '@angular/common';\nimport {\n  APP_INITIALIZER,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ModuleWithProviders,\n  NgModule,\n  Optional,\n  Type,\n} from '@angular/core';\nimport { OutletDirective } from './outlet.directive';\nimport { OutletPosition } from './outlet.model';\nimport {\n  PROVIDE_OUTLET_OPTIONS,\n  ProvideOutletOptions,\n} from './outlet.providers';\nimport { OutletService } from './outlet.service';\n\n/**\n * @private\n */\nexport function registerOutletsFactory(\n  providedOutletOptions: ProvideOutletOptions[],\n  componentFactoryResolver: ComponentFactoryResolver,\n  outletService: OutletService<ComponentFactory<Type<any>>>\n): () => void {\n  const result = () => {\n    (providedOutletOptions ?? []).forEach((options) => {\n      const factory = componentFactoryResolver.resolveComponentFactory(\n        options.component\n      );\n      outletService.add(\n        options.id,\n        factory,\n        options.position ?? OutletPosition.AFTER\n      );\n    });\n  };\n  return result;\n}\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [OutletDirective],\n  exports: [OutletDirective],\n})\nexport class OutletModule {\n  static forRoot(): ModuleWithProviders<OutletModule> {\n    return {\n      ngModule: OutletModule,\n      providers: [\n        {\n          provide: APP_INITIALIZER,\n          useFactory: registerOutletsFactory,\n          deps: [\n            [new Optional(), PROVIDE_OUTLET_OPTIONS],\n            ComponentFactoryResolver,\n            OutletService,\n          ],\n          multi: true,\n        },\n      ],\n    };\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Inject,\n  Injectable,\n  RendererFactory2,\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport {\n  OutletPosition,\n  OutletService,\n} from '../../../cms-structure/outlet/index';\nimport { OutletRendererService } from '../../../cms-structure/outlet/outlet-renderer.service';\nimport { LaunchOutletDialog, LAUNCH_CALLER } from '../config/index';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class OutletRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected outletService: OutletService<ComponentFactory<any>>,\n    protected componentFactoryResolver: ComponentFactoryResolver,\n    protected outletRendererService: OutletRendererService\n  ) {\n    super(document, rendererFactory);\n  }\n\n  /**\n   * Renders the element in the configured outlet\n   *\n   * @param config\n   * @param caller\n   * @param vcr\n   */\n  render(\n    config: LaunchOutletDialog,\n    caller: LAUNCH_CALLER | string\n  ): Observable<ComponentRef<any> | undefined> | void {\n    if (this.shouldRender(caller, config)) {\n      const template = this.componentFactoryResolver.resolveComponentFactory(\n        config.component\n      );\n      this.outletService.add(\n        config.outlet,\n        template,\n        config.position ? config.position : OutletPosition.BEFORE\n      );\n      this.outletRendererService.render(config.outlet);\n      this.renderedCallers.push({ caller });\n\n      return this.outletRendererService.getOutletRef(config.outlet).pipe(\n        map((outletDirective) => {\n          const components = outletDirective.renderedComponents.get(\n            config.position ? config.position : OutletPosition.BEFORE\n          ) as ComponentRef<any>[];\n\n          return components\n            .reverse()\n            .find(\n              (component) => component.componentType === template.componentType\n            );\n        }),\n        tap((component) => {\n          if (config?.dialogType && component) {\n            this.applyClasses(component, config?.dialogType);\n          }\n        })\n      );\n    }\n  }\n\n  hasMatch(config: LaunchOutletDialog) {\n    return Boolean(config.outlet);\n  }\n\n  remove(caller: LAUNCH_CALLER | string, config: LaunchOutletDialog): void {\n    const template = this.componentFactoryResolver.resolveComponentFactory(\n      config.component\n    );\n\n    this.outletService.remove(\n      config.outlet,\n      config.position ? config.position : OutletPosition.BEFORE,\n      template\n    );\n\n    super.remove(caller, config);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable, RendererFactory2 } from '@angular/core';\nimport { RoutingService } from '@spartacus/core';\nimport { LaunchRoute, LAUNCH_CALLER } from '../config/index';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class RoutingRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected routingService: RoutingService\n  ) {\n    super(document, rendererFactory);\n  }\n  /**\n   * Navigates to the route configured for the caller\n   */\n  render(config: LaunchRoute, _caller: LAUNCH_CALLER | string) {\n    this.routingService.go(config);\n  }\n\n  hasMatch(config: LaunchRoute) {\n    return Boolean(config.cxRoute);\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { LayoutConfig } from '../config/layout-config';\nimport {\n  InlineRenderStrategy,\n  LaunchRenderStrategy,\n  OutletRenderStrategy,\n  RoutingRenderStrategy,\n} from './services/index';\nimport { InlineRootRenderStrategy } from './services/inline-root-render.strategy';\n\n@NgModule({\n  providers: [\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: OutletRenderStrategy,\n      multi: true,\n    },\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: InlineRenderStrategy,\n      multi: true,\n    },\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: RoutingRenderStrategy,\n      multi: true,\n    },\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: InlineRootRenderStrategy,\n      multi: true,\n    },\n  ],\n})\nexport class LaunchDialogModule {\n  static forRoot(): ModuleWithProviders<LaunchDialogModule> {\n    return {\n      ngModule: LaunchDialogModule,\n      providers: [{ provide: LayoutConfig, useExisting: Config }],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { DirectionMode } from '../../../layout/direction/config/direction.model';\n\nexport enum ICON_TYPE {\n  STAR = 'STAR',\n  SEARCH = 'SEARCH',\n  CART = 'CART',\n  INFO = 'INFO',\n  GRID = 'GRID',\n  LIST = 'LIST',\n  CARET_DOWN = 'CARET_DOWN',\n  CARET_UP = 'CARET_UP',\n  CARET_LEFT = 'CARET_LEFT',\n  CARET_RIGHT = 'CARET_RIGHT',\n  CLOSE = 'CLOSE',\n  ERROR = 'ERROR',\n  WARNING = 'WARNING',\n  SUCCESS = 'SUCCESS',\n  VISA = 'VISA',\n  MASTER_CARD = 'MASTER_CARD',\n  AMEX = 'AMEX',\n  DINERS_CLUB = 'DINERS_CLUB',\n  CREDIT_CARD = 'CREDIT_CARD',\n  EXPAND = 'EXPAND',\n  COLLAPSE = 'COLLAPSE',\n  RESET = 'RESET',\n  CIRCLE = 'CIRCLE',\n  HEART = 'HEART',\n  EMPTY_HEART = 'EMPTY_HEART',\n  FILTER = 'FILTER',\n  PENCIL = 'PENCIL',\n  CLOCK = 'CLOCK',\n  TRASH = 'TRASH',\n  ACTIVE = 'ACTIVE',\n  SORT_DOWN = 'SORT_DOWN',\n  SORT = 'SORT',\n  ON = 'ON',\n  OFF = 'OFF',\n  LINK_OUT = 'LINK_OUT',\n  EXPAND_ARROWS = 'EXPAND_ARROWS',\n}\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class IconConfig {\n  icon?: IconOptions;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends IconConfig {}\n}\n\nexport interface IconOptions {\n  /**\n   * Each icon type can be configured with a so-called symbol. The symbol will\n   * be used to map the icon to an SVG `symbol` (id) or to the style classes of\n   * a font based icon. The following configuration would map to a fontawesome\n   * icon:\n   *\n   * icon: {\n   *   symbols: {\n   *     CART: 'fas fa-shopping-cart'\n   *   }\n   * }\n   */\n  symbols?: {\n    [ICON_TYPE: string]: string;\n  };\n\n  /**\n   * Resources are used to map icon types to certain asset, such as an SVG (sprite) image.\n   * The resource type (`IconResourceType`) dictates whether an SVG image is used. The URL\n   * is used for the SVG xlink reference.\n   */\n  resources?: IconConfigResource[];\n\n  /**\n   * Lists icons that should be flipped for a specific direction.\n   */\n  flipDirection?: {\n    [ICON_TYPE: string]: DirectionMode;\n  };\n}\n\nexport interface IconConfigResource {\n  type: IconResourceType | string;\n  url?: string;\n  types?: (ICON_TYPE | string)[];\n}\n\n/**\n * Each ICON type can have an companied resource type, such as SVG, LINK (font) or just TEXT.\n * The resources will be automatically loaded in case they're required for the `ICON_TYPE`.\n */\nexport enum IconResourceType {\n  /**\n   * An svg based icon requires an SVG resource that must be loaded,\n   * this is typically a sprite svg file.\n   */\n  SVG = 'svg',\n\n  /**\n   * A font based ICON might require an additional CSS file to be loaded.\n   */\n  LINK = 'link',\n  /**\n   * Text based icons will simply add the ICON string to the DOM. Text icons do not need an image\n   * or CSS pseudo class (i.e. :before), as the text itself is the icon (i.e. +)\n   */\n  TEXT = 'text',\n}\n","import { IconConfig, IconResourceType } from './icon.model';\n\nexport const fontawesomeIconConfig: IconConfig = {\n  icon: {\n    symbols: {\n      SEARCH: 'fas fa-search',\n      CART: 'fas fa-shopping-cart',\n      INFO: 'fas fa-info-circle',\n      STAR: 'fas fa-star',\n      GRID: 'fas fa-th-large',\n      LIST: 'fas fa-bars',\n      CARET_UP: 'fas fa-angle-up',\n      CARET_DOWN: 'fas fa-angle-down',\n      CARET_RIGHT: 'fas fa-angle-right',\n      CARET_LEFT: 'fas fa-angle-left',\n      ERROR: 'fas fa-exclamation-circle',\n      WARNING: 'fas fa-exclamation-triangle',\n      SUCCESS: 'fas fa-check-circle',\n      CLOSE: 'fas fa-times',\n      VISA: 'fab fa-cc-visa',\n      MASTER_CARD: 'fab fa-cc-mastercard',\n      AMEX: 'fab fa-cc-amex',\n      DINERS_CLUB: 'fab fa-cc-diners-club',\n      CREDIT_CARD: 'fas fa-credit-card',\n      COLLAPSE: 'fas fa-minus',\n      EXPAND: 'fas fa-plus',\n      RESET: 'fas fa-times-circle',\n      CIRCLE: 'fas fa-circle',\n      HEART: 'fas fa-heart',\n      EMPTY_HEART: 'far fa-heart',\n      FILTER: 'fas fa-filter',\n      PENCIL: 'fas fa-pencil-alt',\n      CLOCK: 'far fa-clock',\n      TRASH: 'fas fa-trash',\n      ACTIVE: 'fas fa-check',\n      ON: 'fas fa-toggle-on',\n      OFF: 'fas fa-toggle-off',\n      LINK_OUT: 'fas fa-external-link-alt',\n      SORT_DOWN: 'fas fa-sort-down',\n      SORT: 'fas fa-sort',\n      EXPAND_ARROWS: 'fas fa-expand',\n    },\n    resources: [\n      {\n        type: IconResourceType.LINK,\n        url: 'https://use.fontawesome.com/releases/v5.8.1/css/all.css',\n      },\n    ],\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { WindowRef } from '@spartacus/core';\nimport { DirectionMode } from '../../../layout/direction/config/direction.model';\nimport {\n  IconConfig,\n  IconConfigResource,\n  IconOptions,\n  IconResourceType,\n  ICON_TYPE,\n} from './icon.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IconLoaderService {\n  private loadedResources = [];\n  constructor(\n    protected winRef: WindowRef,\n    protected iconConfig: IconConfig,\n    protected sanitizer: DomSanitizer\n  ) {}\n\n  /**\n   * Returns an html fragment which can be added to the DOM in a safe way.\n   */\n  getHtml(type: ICON_TYPE | string): SafeHtml {\n    if (this.isResourceType(type, IconResourceType.SVG)) {\n      return this.sanitizer.bypassSecurityTrustHtml(\n        `<svg><use xlink:href=\"${this.getSvgPath(type)}\"></use></svg>`\n      );\n    }\n    if (this.isResourceType(type, IconResourceType.TEXT)) {\n      return this.sanitizer.bypassSecurityTrustHtml(this.getSymbol(type));\n    }\n  }\n\n  /**\n   * Return the direction for which the icon should mirror (ltr vs rtl). The icon direction\n   * is configurable, but optional, as only a few icons should be flipped for rtl direction.\n   */\n  getFlipDirection(type: ICON_TYPE | string): DirectionMode {\n    return this.config?.flipDirection?.[type];\n  }\n\n  /**\n   *\n   * Returns the symbol class(es) for the icon type.\n   */\n  getStyleClasses(iconType: ICON_TYPE | string): string {\n    return this.getSymbol(iconType) || '';\n  }\n\n  /**\n   * Indicates whether the given `ICON_TYPE` is configured for\n   * the given `IconResourceType`.\n   */\n  private isResourceType(\n    iconType: ICON_TYPE | string,\n    resourceType: IconResourceType\n  ): boolean {\n    return (\n      this.config.resources &&\n      !!this.config.resources.find(\n        (res) =>\n          res.types && res.type === resourceType && res.types.includes(iconType)\n      )\n    );\n  }\n\n  /**\n   * Returns the path to the svg link. The link supports path names\n   * as well, if the config a[[s been setup to support a svg file path.\n   * Additionally, the icon prefix will be taken into account to prefix the\n   * icon IDs in the SVG.\n   */\n  private getSvgPath(iconType: ICON_TYPE | string): string {\n    const svgResource = this.config.resources.find(\n      (res) =>\n        res.type === IconResourceType.SVG &&\n        res.types &&\n        res.types.includes(iconType)\n    );\n    if (svgResource) {\n      return svgResource.url\n        ? `${svgResource.url}#${this.getSymbol(iconType)}`\n        : `#${this.getSymbol(iconType)}`;\n    }\n  }\n\n  /**\n   * Loads the resource url (if any) for the given icon.\n   * The icon will only be loaded once.\n   *\n   * NOTE: this is not working when the shadow is used as there's\n   * no head element available and the link must be loaded for every\n   * web component.\n   */\n  addLinkResource(iconType: ICON_TYPE | string): void {\n    const resource: IconConfigResource = this.findResource(\n      iconType,\n      IconResourceType.LINK\n    );\n    if (\n      resource &&\n      resource.url &&\n      !this.loadedResources.includes(resource.url)\n    ) {\n      this.loadedResources.push(resource.url);\n      const head = this.winRef.document.getElementsByTagName('head')[0];\n      const link = this.winRef.document.createElement('link');\n      link.rel = 'stylesheet';\n      link.type = 'text/css';\n      link.href = resource.url;\n      head.appendChild(link);\n    }\n  }\n\n  private findResource(\n    iconType: ICON_TYPE | string,\n    resourceType: IconResourceType\n  ): IconConfigResource {\n    if (!this.config.resources) {\n      return;\n    }\n\n    let resource = this.config.resources.find(\n      (res) =>\n        res.type === resourceType && res.types && res.types.includes(iconType)\n    );\n    // no specific resource found, let's try to find a one-size-fits-all resource\n    if (!resource) {\n      resource = this.config.resources.find(\n        (res) => (res.type === resourceType && !res.types) || res.types === []\n      );\n    }\n    return resource;\n  }\n\n  getSymbol(iconType: ICON_TYPE | string) {\n    if (this.config && this.config.symbols && this.config.symbols[iconType]) {\n      return this.config.symbols[iconType];\n    }\n  }\n\n  private get config(): IconOptions {\n    return this.iconConfig.icon;\n  }\n}\n","/**\n * The ltr and rtl directions can be used to configure the storefront for a certain direction, both statically\n * or dynamically.\n *\n * The HTML5 \"auto\" value is not supported in Spartacus, as it's considered to be too fragile for the global\n * direction.\n */\nexport enum DirectionMode {\n  /**\n   * Indicates Left to Right direction.\n   */\n  LTR = 'ltr',\n  /**\n   * Indicates Right to Left direction.\n   */\n  RTL = 'rtl',\n}\n\n/**\n * Contains the configuration mode for language driven directionality. The detect mode is recommended\n * for a multi-site or multi-lingual setup where the active language should dictate the direction mode.\n */\nexport interface Direction {\n  /**\n   * The default direction mode is used for the direction mode of the overall storefront. The default mode\n   * can be used for all languages, but can be further enhanced dynamically by using the language detect mode.\n   * The default mode will also be used in detect mode for those languages that are not listed in either\n   * `rtlLanguages` or `ltrLanguages`.\n   */\n  default?: DirectionMode;\n\n  /**\n   * If detect is enabled, the direction is driven by the active language. The language is compared to the\n   * list of configured `rtlLanguages` vs `ltrLanguages`. If no language is resolved, the default direction\n   * mode is used.\n   *\n   * If no direction can be resolved, the direction is removed.\n   */\n  detect?: boolean;\n\n  /**\n   * The language isoCodes that are used to detect Right to Left languages.\n   */\n  rtlLanguages?: string[];\n\n  /**\n   * The language isoCodes that are used to detect Left to Right languages.\n   */\n  ltrLanguages?: string[];\n}\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  Renderer2,\n} from '@angular/core';\nimport { SafeHtml } from '@angular/platform-browser';\nimport { DirectionMode } from '../../../layout/direction/config/direction.model';\nimport { IconLoaderService } from './icon-loader.service';\nimport { ICON_TYPE as DEFAULT_ICON_TYPE } from './icon.model';\n\ntype ICON_TYPE = DEFAULT_ICON_TYPE | string;\n\n/**\n *\n * The icon component can be added in different ways:\n *\n * With the component selector:\n * `<cx-icon type=\"SEARCH\"></cx-icon>`\n *\n * With the attribute selector:\n * `<span cxIcon=\"STAR\"></span>`\n *\n * Additionally, content can be projected to the icon:\n *\n * `<button cxIcon=\"HAPPY\">happy label</button>`\n *\n * The above button would become (based on a TEXT resource type):\n * `<button>happy label</button>`\n *\n * While the content is projected, the icon itself doesn't require an\n * additional DOM node which is an advantage over the component selector.\n */\n@Component({\n  selector: 'cx-icon,[cxIcon]',\n  templateUrl: './icon.component.html',\n})\nexport class IconComponent {\n  /**\n   * The cxIcon directive is bound to the icon type. You can feed the `ICON_TYPE` to\n   * accomplish a configurable button in the UI.\n   */\n  @Input() set cxIcon(type: ICON_TYPE) {\n    this.setIcon(type);\n  }\n\n  /**\n   * The type input parameter is bound to the icon type. You can feed the `ICON_TYPE` to\n   * accomplish a configurable button in the UI.\n   */\n  @Input() set type(type: ICON_TYPE) {\n    this.setIcon(type);\n  }\n\n  /**\n   * the icon provides an html fragment that is used to add SVG or text based icons.\n   */\n  icon: SafeHtml;\n\n  /**\n   * The `flip-at-rtl` class is added to the DOM for the style layer to flip the icon in RTL direction.\n   */\n  @HostBinding('class.flip-at-rtl') flipAtRtl: boolean;\n\n  /**\n   * The `flip-at-ltr` class is added to the DOM for the style layer to flip the icon in LTR direction.\n   */\n  @HostBinding('class.flip-at-ltr') flipAtLtr: boolean;\n\n  /**\n   * Maintains the applied style classes so we can remove them when the\n   * icon type changes at run time.\n   */\n  protected styleClasses: string[];\n\n  constructor(\n    protected iconLoader: IconLoaderService,\n    protected elementRef: ElementRef<HTMLElement>,\n    protected renderer: Renderer2\n  ) {}\n\n  protected setIcon(type: ICON_TYPE): void {\n    if (!type || <string>type === '') {\n      return;\n    }\n    this.icon = this.iconLoader.getHtml(type);\n    this.addStyleClasses(type);\n    this.iconLoader.addLinkResource(type);\n    this.flipIcon(type);\n  }\n\n  /**\n   * The icons supports flipping for some icons to support rtl and ltr directions.\n   */\n  protected flipIcon(type: ICON_TYPE) {\n    // TODO: this can be dropped with the next major release.\n    if (!this.iconLoader.getFlipDirection) {\n      return;\n    }\n    const iconDirection = this.iconLoader.getFlipDirection(type);\n    this.flipAtLtr = iconDirection === DirectionMode.LTR;\n    this.flipAtRtl = iconDirection === DirectionMode.RTL;\n  }\n\n  /**\n   * Adds the style classes and the link resource (if available).\n   */\n  protected addStyleClasses(type: ICON_TYPE): void {\n    this.renderer.addClass(this.host, 'cx-icon');\n\n    this.styleClasses?.forEach((cls) =>\n      this.renderer.removeClass(this.host, cls)\n    );\n\n    this.styleClasses = this.iconLoader.getStyleClasses(type)?.split(' ');\n    this.styleClasses?.forEach((cls) => {\n      if (cls !== '') {\n        this.renderer.addClass(this.host, cls);\n      }\n    });\n  }\n\n  protected get host() {\n    return this.elementRef.nativeElement;\n  }\n}\n","<i [outerHTML]=\"icon\"></i><ng-content></ng-content>\n","import { DirectionMode } from '../../../layout/direction/config/direction.model';\nimport { IconConfig } from './icon.model';\n\nexport const defaultIconConfig: IconConfig = {\n  icon: {\n    flipDirection: {\n      CARET_RIGHT: DirectionMode.RTL,\n      CARET_LEFT: DirectionMode.RTL,\n    },\n  },\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultIconConfig } from './default-icon.config';\nimport { fontawesomeIconConfig } from './fontawesome-icon.config';\nimport { IconComponent } from './icon.component';\n\n@NgModule({\n  declarations: [IconComponent],\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(defaultIconConfig),\n    // TODO: move the opinionated fontawesome config to a recipe\n    provideDefaultConfig(fontawesomeIconConfig),\n  ],\n  exports: [IconComponent],\n})\nexport class IconModule {}\n","import { Component, Input, NgModule } from '@angular/core';\nimport { IconLoaderService } from '../icon-loader.service';\n\n// PRIVATE TESTING UTIL\n@Component({\n  selector: 'cx-icon,[cxIcon]',\n  template: `{{ type || cxIcon }}`,\n})\nexport class MockIconComponent {\n  @Input() cxIcon;\n  @Input() type;\n}\n\nconst mockComponents = [MockIconComponent];\n\nexport class MockIconLoaderService {\n  getHtml() {}\n  getStyleClasses() {}\n  addStyleClasses() {}\n  addLinkResource() {}\n}\n\n@NgModule({\n  declarations: mockComponents,\n  exports: mockComponents,\n  providers: [\n    {\n      provide: IconLoaderService,\n      useClass: MockIconLoaderService,\n    },\n  ],\n})\nexport class IconTestingModule {}\n","import { Component } from '@angular/core';\n\n// TODO: Improve a11y with better text appropriate to usage (example: loading cart spinner)\n\n@Component({\n  selector: 'cx-spinner',\n  templateUrl: './spinner.component.html',\n})\nexport class SpinnerComponent {\n  constructor() {}\n}\n","<div class=\"loader-container\">\n  <div class=\"loader\">{{ 'spinner.loading' | cxTranslate }}</div>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport {\n  AnonymousConsent,\n  ANONYMOUS_CONSENT_STATUS,\n  ConsentTemplate,\n} from '@spartacus/core';\n\n@Component({\n  selector: 'cx-consent-management-form',\n  templateUrl: './consent-management-form.component.html',\n})\nexport class ConsentManagementFormComponent implements OnInit {\n  consentGiven = false;\n\n  @Input()\n  consentTemplate: ConsentTemplate;\n\n  @Input()\n  requiredConsents: string[] = [];\n\n  @Input()\n  consent: AnonymousConsent;\n\n  @Output()\n  consentChanged = new EventEmitter<{\n    given: boolean;\n    template: ConsentTemplate;\n  }>();\n\n  constructor() {}\n\n  ngOnInit(): void {\n    if (this.consent) {\n      this.consentGiven = Boolean(\n        this.consent.consentState === ANONYMOUS_CONSENT_STATUS.GIVEN\n      );\n    } else {\n      if (this.consentTemplate && this.consentTemplate.currentConsent) {\n        if (this.consentTemplate.currentConsent.consentWithdrawnDate) {\n          this.consentGiven = false;\n        } else if (this.consentTemplate.currentConsent.consentGivenDate) {\n          this.consentGiven = true;\n        }\n      }\n    }\n  }\n\n  onConsentChange(): void {\n    this.consentGiven = !this.consentGiven;\n\n    this.consentChanged.emit({\n      given: this.consentGiven,\n      template: this.consentTemplate,\n    });\n  }\n\n  isRequired(templateId: string): boolean {\n    return this.requiredConsents.includes(templateId);\n  }\n}\n","<div class=\"form-check\">\n  <label>\n    <input\n      type=\"checkbox\"\n      class=\"form-check-input\"\n      (change)=\"onConsentChange()\"\n      [checked]=\"consentGiven\"\n      [disabled]=\"isRequired(consentTemplate?.id)\"\n    />\n    <span class=\"form-check-label cx-be-bold\">\n      {{ consentTemplate?.name }}\n    </span>\n    <br />\n    <span class=\"form-check-label\">\n      {{ consentTemplate?.description }}\n    </span>\n  </label>\n</div>\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  AnonymousConsent,\n  AnonymousConsentsConfig,\n  AnonymousConsentsService,\n  ConsentTemplate,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, take, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/index';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/index';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\n\n@Component({\n  selector: 'cx-anonymous-consent-dialog',\n  templateUrl: './anonymous-consent-dialog.component.html',\n})\nexport class AnonymousConsentDialogComponent implements OnInit, OnDestroy {\n  @HostBinding('attr.role') role = 'dialog';\n  @HostBinding('attr.aria-modal') modal = true;\n\n  private subscriptions = new Subscription();\n\n  showLegalDescription = true;\n  iconTypes = ICON_TYPE;\n  requiredConsents: string[] = [];\n\n  loading$: Observable<boolean>;\n  templates$: Observable<ConsentTemplate[]>;\n  consents$: Observable<AnonymousConsent[]>;\n\n  focusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    autofocus: 'input[type=\"checkbox\"]',\n    focusOnEscape: true,\n  };\n\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    // Close on click outside the dialog window\n    if ((event.target as any).tagName === this.el.nativeElement.tagName) {\n      this.close('Cross click');\n    }\n  }\n\n  constructor(\n    protected config: AnonymousConsentsConfig,\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected el: ElementRef,\n    protected launchDialogService: LaunchDialogService\n  ) {\n    if (Boolean(this.config.anonymousConsents)) {\n      this.showLegalDescription =\n        this.config.anonymousConsents.showLegalDescriptionInDialog;\n      if (Boolean(this.config.anonymousConsents.requiredConsents)) {\n        this.requiredConsents = this.config.anonymousConsents.requiredConsents;\n      }\n    }\n  }\n\n  ngOnInit(): void {\n    this.templates$ = this.anonymousConsentsService.getTemplates();\n    this.consents$ = this.anonymousConsentsService.getConsents();\n    this.loading$ = this.anonymousConsentsService.getLoadTemplatesLoading();\n  }\n\n  close(reason?: any): void {\n    this.launchDialogService.closeDialog(reason);\n  }\n\n  rejectAll(): void {\n    this.subscriptions.add(\n      combineLatest([this.templates$, this.consents$])\n        .pipe(\n          take(1),\n          distinctUntilChanged(),\n          tap(([templates, consents]) =>\n            templates.forEach((template) => {\n              const consent = this.getCorrespondingConsent(template, consents);\n              if (this.anonymousConsentsService.isConsentGiven(consent)) {\n                if (this.isRequiredConsent(template)) {\n                  return;\n                }\n\n                this.anonymousConsentsService.withdrawConsent(template.id);\n              }\n            })\n          )\n        )\n        .subscribe()\n    );\n    this.close('rejectAll');\n  }\n\n  allowAll(): void {\n    this.subscriptions.add(\n      combineLatest([this.templates$, this.consents$])\n        .pipe(\n          take(1),\n          distinctUntilChanged(),\n          tap(([templates, consents]) =>\n            templates.forEach((template) => {\n              const consent = this.getCorrespondingConsent(template, consents);\n              if (\n                (consent && consent.consentState == null) ||\n                this.anonymousConsentsService.isConsentWithdrawn(consent)\n              ) {\n                if (this.isRequiredConsent(template)) {\n                  return;\n                }\n\n                this.anonymousConsentsService.giveConsent(template.id);\n              }\n            })\n          )\n        )\n        .subscribe()\n    );\n    this.close('allowAll');\n  }\n\n  private isRequiredConsent(template: ConsentTemplate): boolean {\n    return (\n      Boolean(this.config.anonymousConsents) &&\n      Boolean(this.config.anonymousConsents.requiredConsents) &&\n      this.config.anonymousConsents.requiredConsents.includes(template.id)\n    );\n  }\n\n  onConsentChange({\n    given,\n    template,\n  }: {\n    given: boolean;\n    template: ConsentTemplate;\n  }): void {\n    if (given) {\n      this.anonymousConsentsService.giveConsent(template.id);\n    } else {\n      this.anonymousConsentsService.withdrawConsent(template.id);\n    }\n  }\n\n  getCorrespondingConsent(\n    template: ConsentTemplate,\n    consents: AnonymousConsent[] = []\n  ): AnonymousConsent {\n    for (const consent of consents) {\n      if (template.id === consent.templateCode) {\n        return consent;\n      }\n    }\n    return null;\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<div\n  class=\"cx-anonymous-consent-dialog\"\n  [cxFocus]=\"focusConfig\"\n  (esc)=\"close('Escape clicked')\"\n>\n  <div class=\"cx-dialog-content\">\n    <div *ngIf=\"loading$ | async; else dialogBody\">\n      <cx-spinner></cx-spinner>\n    </div>\n    <ng-template #dialogBody>\n      <div class=\"cx-dialog-header\">\n        <h3>\n          {{ 'anonymousConsents.dialog.title' | cxTranslate }}\n        </h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          [attr.aria-label]=\"'common.close' | cxTranslate\"\n          (click)=\"close('Cross click')\"\n        >\n          <span aria-hidden=\"true\">\n            <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n          </span>\n        </button>\n      </div>\n      <!-- Separator -->\n      <div class=\"cx-dialog-description\" *ngIf=\"showLegalDescription\">\n        {{ 'anonymousConsents.dialog.legalDescription' | cxTranslate }}\n        <div\n          class=\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\"\n        ></div>\n      </div>\n      <!-- Actions -->\n      <div class=\"cx-dialog-buttons\">\n        <a tabindex=\"0\" class=\"btn-link cx-action-link\" (click)=\"rejectAll()\">{{\n          'anonymousConsents.dialog.clearAll' | cxTranslate\n        }}</a>\n        <a tabindex=\"0\" class=\"btn-link cx-action-link\" (click)=\"allowAll()\">{{\n          'anonymousConsents.dialog.selectAll' | cxTranslate\n        }}</a>\n      </div>\n      <!-- Modal Body -->\n      <div class=\"cx-dialog-body\" *ngIf=\"templates$ | async as templates\">\n        <ng-container *ngIf=\"consents$ | async as consents\">\n          <div\n            class=\"cx-dialog-row col-sm-12 col-md-6\"\n            *ngFor=\"let template of templates\"\n          >\n            <cx-consent-management-form\n              [consentTemplate]=\"template\"\n              [requiredConsents]=\"requiredConsents\"\n              [consent]=\"getCorrespondingConsent(template, consents)\"\n              (consentChanged)=\"onConsentChange($event)\"\n            ></cx-consent-management-form>\n          </div>\n        </ng-container>\n      </div>\n    </ng-template>\n  </div>\n</div>\n","import { LayoutConfig } from '../../layout/config/layout-config';\nimport { DIALOG_TYPE } from '../../layout/launch-dialog/index';\nimport { AnonymousConsentDialogComponent } from '../../shared/components/anonymous-consents-dialog/anonymous-consent-dialog.component';\n\nexport const defaultAnonymousConsentLayoutConfig: LayoutConfig = {\n  launch: {\n    ANONYMOUS_CONSENT: {\n      inline: true,\n      component: AnonymousConsentDialogComponent,\n      dialogType: DIALOG_TYPE.DIALOG,\n    },\n  },\n};\n","import {\n  Component,\n  ElementRef,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\nimport { LAUNCH_CALLER } from '../../../layout/launch-dialog/config/launch-config';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-anonymous-consent-open-dialog',\n  templateUrl: './anonymous-consent-open-dialog.component.html',\n})\nexport class AnonymousConsentOpenDialogComponent {\n  @ViewChild('open') openElement: ElementRef;\n\n  constructor(\n    protected vcr: ViewContainerRef,\n    protected launchDialogService: LaunchDialogService\n  ) {}\n\n  openDialog(): void {\n    const dialog = this.launchDialogService.openDialog(\n      LAUNCH_CALLER.ANONYMOUS_CONSENT,\n      this.openElement,\n      this.vcr\n    );\n    if (dialog) {\n      dialog.pipe(take(1)).subscribe();\n    }\n  }\n}\n","<button #open class=\"btn btn-link\" (click)=\"openDialog()\">\n  {{ 'anonymousConsents.preferences' | cxTranslate }}\n</button>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  CmsConfig,\n  DeferLoadingStrategy,\n  FeaturesConfigModule,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { KeyboardFocusModule } from '../../layout/a11y/keyboard-focus/index';\nimport { AnonymousConsentManagementBannerComponent } from './banner/anonymous-consent-management-banner.component';\nimport { defaultAnonymousConsentLayoutConfig } from './default-anonymous-consent-layout.config';\nimport { AnonymousConsentOpenDialogComponent } from './open-dialog/anonymous-consent-open-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    FeaturesConfigModule,\n    KeyboardFocusModule,\n  ],\n  providers: [\n    provideConfig(defaultAnonymousConsentLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AnonymousConsentManagementBannerComponent: {\n          component: AnonymousConsentManagementBannerComponent,\n          deferLoading: DeferLoadingStrategy.INSTANT,\n        },\n        AnonymousConsentOpenDialogComponent: {\n          component: AnonymousConsentOpenDialogComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [\n    AnonymousConsentManagementBannerComponent,\n    AnonymousConsentOpenDialogComponent,\n  ],\n  exports: [\n    AnonymousConsentManagementBannerComponent,\n    AnonymousConsentOpenDialogComponent,\n  ],\n})\nexport class AnonymousConsentManagementBannerModule {}\n","import { ApplicationRef, Injectable } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ModalOptions } from './modal-options';\nimport { ModalRef } from './modal-ref';\n\n/**\n * A service to handle modal\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ModalService {\n  private modals: ModalRef[] = [];\n\n  constructor(\n    private ngbModalService: NgbModal,\n    protected applicationRef: ApplicationRef\n  ) {}\n\n  protected get rootComponent() {\n    return this.applicationRef?.components?.[0]?.location?.nativeElement;\n  }\n\n  open(content: any, options?: ModalOptions): ModalRef {\n    let activeModal: ModalRef;\n\n    options = { container: this.rootComponent, ...options };\n\n    activeModal = this.ngbModalService.open(content, options);\n    this.modals.push(activeModal);\n    this.handleModalRemoveEvents(activeModal);\n\n    return activeModal;\n  }\n\n  protected handleModalRemoveEvents(modal: ModalRef): void {\n    modal.result.finally(() => {\n      this.modals = this.modals.filter((m) => m !== modal);\n    });\n  }\n\n  getActiveModal(): ModalRef {\n    const modal = this.modals[this.modals.length - 1];\n    return modal ? modal : null;\n  }\n\n  dismissActiveModal(reason?: any): void {\n    const modal: ModalRef = this.getActiveModal();\n\n    if (modal) {\n      modal.dismiss(reason);\n    }\n  }\n\n  closeActiveModal(reason?: any): void {\n    const modal: ModalRef = this.getActiveModal();\n\n    if (modal) {\n      modal.close(reason);\n    }\n  }\n}\n","/**\n * Identifiers of outlets inside the cart details view.\n */\nexport enum CartOutlets {\n  ITEM = 'cx-cart-item',\n  ITEM_DETAILS = 'cx-cart-item.details',\n  ITEM_BUNDLE_DETAILS = 'cx-cart-item.bundle-details',\n}\n","import { Injectable } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { OrderEntry, PromotionLocation } from '@spartacus/core';\nimport { ReplaySubject } from 'rxjs';\nimport { CartItemComponentOptions } from '../cart-item.component';\nimport { CartItemContext } from './cart-item-context.model';\n\n/**\n * Context source for `CartItemComponent`.\n *\n * `CartItemContext` should be injected instead in child components.\n */\n@Injectable()\nexport class CartItemContextSource implements CartItemContext {\n  readonly compact$ = new ReplaySubject<boolean>(1);\n\n  readonly readonly$ = new ReplaySubject<boolean>(1);\n\n  readonly item$ = new ReplaySubject<OrderEntry>(1);\n\n  readonly quantityControl$ = new ReplaySubject<FormControl>(1);\n\n  readonly location$ = new ReplaySubject<PromotionLocation>(1);\n\n  readonly options$ = new ReplaySubject<CartItemComponentOptions>(1);\n}\n","import { Injectable } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { OrderEntry, PromotionLocation } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CartItemComponentOptions } from '../cart-item.component';\n\n/**\n * Context for `CartItemComponent`.\n */\n@Injectable()\nexport abstract class CartItemContext {\n  readonly compact$: Observable<boolean>;\n\n  readonly readonly$: Observable<boolean>;\n\n  readonly item$: Observable<OrderEntry>;\n\n  readonly quantityControl$: Observable<FormControl>;\n\n  readonly location$: Observable<PromotionLocation>;\n\n  readonly options$: Observable<CartItemComponentOptions>;\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Observable, ReplaySubject, Subscription } from 'rxjs';\nimport { take, tap, withLatestFrom } from 'rxjs/operators';\nimport { RoutingService, CartModification } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartValidationStateService implements OnDestroy {\n  protected NAVIGATION_SKIPS = 2;\n  protected navigationIdCount = 0;\n\n  protected subscription = new Subscription();\n  cartValidationResult$: Observable<CartModification[]> = new ReplaySubject<\n    CartModification[]\n  >(1) as Observable<CartModification[]>;\n\n  constructor(protected routingService: RoutingService) {\n    this.setInitialState();\n  }\n\n  protected checkForValidationResultClear$ = this.routingService\n    .getRouterState()\n    .pipe(\n      withLatestFrom(this.cartValidationResult$),\n      tap(([routerState, cartModifications]) => {\n        if (\n          this.navigationIdCount + this.NAVIGATION_SKIPS <=\n            routerState.navigationId &&\n          cartModifications.length\n        ) {\n          (\n            this.cartValidationResult$ as ReplaySubject<CartModification[]>\n          ).next([]);\n          this.navigationIdCount = routerState.navigationId;\n        }\n      })\n    );\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  protected setInitialState() {\n    this.setNavigationIdStep();\n    this.subscription.add(this.checkForValidationResultClear$.subscribe());\n  }\n\n  updateValidationResultAndRoutingId(cartModification: CartModification[]) {\n    (this.cartValidationResult$ as ReplaySubject<CartModification[]>).next(\n      cartModification\n    );\n    this.setNavigationIdStep();\n  }\n\n  protected setNavigationIdStep() {\n    this.routingService\n      .getRouterState()\n      .pipe(take(1))\n      .subscribe(\n        (routerState) => (this.navigationIdCount = routerState.navigationId)\n      );\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { CartValidationStateService } from '../cart-validation-state.service';\nimport { ICON_TYPE } from '../../../misc/icon/index';\n\n@Component({\n  selector: 'cx-cart-item-validation-warning',\n  templateUrl: './cart-item-validation-warning.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartItemValidationWarningComponent {\n  @Input()\n  code: string;\n\n  iconTypes = ICON_TYPE;\n  isVisible = true;\n\n  cartModification$ =\n    this.cartValidationStateService.cartValidationResult$.pipe(\n      map((modificationList) =>\n        modificationList.find(\n          (modification) => modification.entry.product.code === this.code\n        )\n      )\n    );\n\n  constructor(\n    protected cartValidationStateService: CartValidationStateService\n  ) {}\n}\n","<ng-container *ngIf=\"cartModification$ | async as cartModification\">\n  <div class=\"alert alert-info\" *ngIf=\"isVisible\">\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.INFO\"></cx-icon>\n    </span>\n    <span>\n      {{\n        'validation.' + cartModification.statusCode\n          | cxTranslate\n            : {\n                quantity: cartModification.quantityAdded\n              }\n      }}\n    </span>\n\n    <button class=\"close\" type=\"button\" (click)=\"isVisible = !isVisible\">\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n</ng-container>\n","import { Image } from '@spartacus/core';\n\nexport interface Media {\n  /**\n   * Identify the default image URL which is used in case the srcset is not specified.\n   * Browsers without srcset support will also fallback to this URl.\n   */\n  src: string;\n\n  /**\n   * The srcset attribute holds a list of image file URLs, along with size descriptions.\n   */\n  srcset?: string;\n\n  /**\n   * Provides alternative information for a media if a user cannot view the visual. It is\n   * also used by web crawlers and screen readers.\n   */\n  alt?: string;\n\n  /**\n   * Describes the role of an element in programs that can make use of it, such as screen\n   * readers or magnifiers\n   */\n  role?: string;\n}\n\n/**\n * Contains multiple media for different formats\n */\nexport interface MediaContainer {\n  [format: string]: Image;\n}\n\n/**\n * Specifies media size information that can be used to generate information for the\n * browser to resolve the right media for the right layout or device.\n */\nexport interface MediaFormatSize {\n  /**\n   * Specifies the width for a given media format. The media format width is used\n   * to align the width of the media with the available size in the layout, so that\n   * different media's can be used in a responsive layout.\n   */\n  width?: number;\n}\n\n/**\n * Indicates how the browser should load the image.\n *\n * While this might not add too much value in some scenarios, as we have other\n * optimizations to defer loading of larger pieces of the DOM, there might be\n * components who haven't implemented other lazy loading techniques. Moreover,\n * a server sides rendered page that lands directly in the browser could benefit\n * enormously from the lazy loading of images.\n */\nexport enum ImageLoadingStrategy {\n  /**\n   * Loads the image immediately, regardless of whether or not the image\n   * is currently within the visible viewport (this is the default value).\n   */\n  EAGER = 'eager',\n  /**\n   * Defers loading the image until it reaches a calculated distance from the viewport,\n   * as defined by the browser. The intent is to avoid the network and storage bandwidth\n   * needed to handle the image until it's reasonably certain that it will be needed.\n   * This generally improves the performance of the content in most typical use cases.\n   */\n  LAZY = 'lazy',\n}\n","import { Injectable } from '@angular/core';\nimport { Config, Image } from '@spartacus/core';\nimport { MediaConfig } from './media.config';\nimport {\n  ImageLoadingStrategy,\n  Media,\n  MediaContainer,\n  MediaFormatSize,\n} from './media.model';\n\n/**\n * Service which generates media URLs. It leverage the MediaContainer and MediaFormats so\n * that URLs and sizes are generated for the same media. This helps to improve performance\n * across difference devices and layouts.\n *\n * Media formats are optional, but highly recommended. The format will help the browser to\n * identify the right media for the right experience.\n *\n * The MediaService will generate absolute URLs in case relative URLs are provided for the Media.\n * The baseUrl is read from the `occConfig.backend.media.baseUrl` or\n * `occConfig.backend.occ.baseUrl`.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class MediaService {\n  /**\n   * The media formats sorted by size. The media format representing the smallest\n   * size is sorted on top.\n   */\n  private _sortedFormats: { code: string; size: MediaFormatSize }[];\n  private _reversedFormats: { code: string; size: MediaFormatSize }[];\n\n  constructor(protected config: Config) {}\n\n  /**\n   * Returns a `Media` object with the main media (`src`) and various media (`src`)\n   * for specific formats.\n   */\n  getMedia(\n    mediaContainer?: MediaContainer | Image,\n    format?: string,\n    alt?: string,\n    role?: string\n  ): Media | undefined {\n    if (!mediaContainer) {\n      return;\n    }\n\n    const mainMedia: Image = mediaContainer.url\n      ? mediaContainer\n      : this.resolveMedia(mediaContainer as MediaContainer, format);\n\n    return {\n      src: this.resolveAbsoluteUrl(mainMedia?.url),\n      alt: alt ?? mainMedia?.altText,\n      role: role ?? mainMedia?.role,\n      srcset: this.resolveSrcSet(mediaContainer, format),\n    };\n  }\n\n  /**\n   * Reads the loading strategy from the `MediaConfig`.\n   *\n   * Defaults to `ImageLoadingStrategy.EAGER`.\n   */\n  get loadingStrategy(): ImageLoadingStrategy {\n    return (\n      (this.config as MediaConfig)?.imageLoadingStrategy ??\n      ImageLoadingStrategy.EAGER\n    );\n  }\n\n  /**\n   * Creates the media formats in a logical sorted order. The map contains the\n   * format key and the format size information. We do this only once for performance\n   * benefits.\n   */\n  protected get sortedFormats(): { code: string; size: MediaFormatSize }[] {\n    if (!this._sortedFormats && this.config?.mediaFormats) {\n      this._sortedFormats = Object.keys(this.config.mediaFormats)\n        .map((key) => ({\n          code: key,\n          size: this.config.mediaFormats[key],\n        }))\n        .sort((a, b) => (a.size.width > b.size.width ? 1 : -1));\n    }\n    return this._sortedFormats ?? [];\n  }\n\n  /**\n   * Creates the media formats in a reversed sorted order.\n   */\n  protected get reversedFormats(): { code: string; size: MediaFormatSize }[] {\n    if (!this._reversedFormats) {\n      this._reversedFormats = this.sortedFormats.slice().reverse();\n    }\n    return this._reversedFormats;\n  }\n\n  /**\n   * Resolves the right media for the given format. The fo\n   */\n  protected resolveMedia(media: MediaContainer, format?: string): Image {\n    return media[this.resolveFormat(media, format)];\n  }\n\n  /**\n   * Validates the format against the given mediaContainer. If there is no format available,\n   * or if the mediaContainer doesn't contain a media for the given media, the most optimal\n   * format is resolved. If even that is not possible, the first format is returned.\n   */\n  protected resolveFormat(\n    mediaContainer: MediaContainer,\n    format?: string\n  ): string {\n    if (format && mediaContainer[format]) {\n      return format;\n    }\n    return (\n      this.resolveBestFormat(mediaContainer) || Object.keys(mediaContainer)[0]\n    );\n  }\n\n  /**\n   * Returns the media format code with the best size.\n   */\n  protected resolveBestFormat(media: MediaContainer | Image): string {\n    return this.reversedFormats.find((format) =>\n      media.hasOwnProperty(format.code)\n    )?.code;\n  }\n\n  /**\n   * Returns a set of media for the available media formats. Additionally, the configured media\n   * format width is added to the srcset, so that browsers can select the appropriate media.\n   *\n   * The optional maxFormat indicates that only sources till a certain format should be added\n   * to the srcset.\n   */\n  protected resolveSrcSet(\n    media: MediaContainer | Image,\n    maxFormat?: string\n  ): string | undefined {\n    if (!media) {\n      return undefined;\n    }\n\n    // Only create srcset images that are smaller than the given `maxFormat` (if any)\n    let formats = this.sortedFormats;\n    const max: number = formats.findIndex((f) => f.code === maxFormat);\n    if (max > -1) {\n      formats = formats.slice(0, max + 1);\n    }\n\n    const srcset = formats.reduce((set, format) => {\n      if (!!media[format.code]) {\n        if (set) {\n          set += ', ';\n        }\n        set += `${this.resolveAbsoluteUrl(media[format.code].url)} ${\n          format.size.width\n        }w`;\n      }\n      return set;\n    }, '');\n\n    return srcset === '' ? undefined : srcset;\n  }\n\n  /**\n   * Resolves the absolute URL for the given url. In most cases, this URL represents\n   * the relative URL on the backend. In that case, we prefix the url with the baseUrl.\n   *\n   * When we have receive an absolute URL, we return the URL as-is. An absolute URL might also\n   * start with double slash, which is used to resolve media cross from http and https.\n   */\n  protected resolveAbsoluteUrl(url: string): string {\n    return !url || url.startsWith('http') || url.startsWith('//')\n      ? url\n      : this.getBaseUrl() + url;\n  }\n\n  /**\n   * The base URL is either driven by a specific `backend.media.baseUrl`, or by the\n   * `backend.occ.baseUrl`.\n   *\n   * The `backend.media.baseUrl` can be used to load media from a different location.\n   *\n   * In Commerce Cloud, a different location could mean a different \"aspect\".\n   *\n   * Defaults to empty string in case no config is provided.\n   */\n  protected getBaseUrl(): string {\n    return (\n      this.config.backend?.media?.baseUrl ??\n      this.config.backend?.occ?.baseUrl ??\n      ''\n    );\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnChanges,\n  Output,\n} from '@angular/core';\nimport { Image, ImageGroup } from '@spartacus/core';\nimport { ImageLoadingStrategy, Media, MediaContainer } from './media.model';\nimport { MediaService } from './media.service';\n\n@Component({\n  selector: 'cx-media',\n  templateUrl: './media.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MediaComponent implements OnChanges {\n  /**\n   * The media container can hold multiple media items, so that\n   * a specific media (by format) can be used or multiple media\n   * can be provided in a `srcset` so the browser will figure out\n   * the best media for the device.\n   */\n  @Input() container:\n    | MediaContainer\n    | Image\n    | ImageGroup\n    | ImageGroup[]\n    | undefined;\n\n  /**\n   * if a media format is given, a media for the given format will be rendered\n   */\n  @Input() format: string;\n\n  /**\n   * A specific alt text for an image, which overrules the alt text\n   * from the container data.\n   */\n  @Input() alt: string;\n\n  /**\n   * set role of the image if different than what is intended (eg, role=\"presentation\")\n   */\n  @Input() role: string;\n\n  // TODO: Remove type forcing of `this.loadingStrategy` (ie. <ImageLoadingStrategy | null>) in 5.0 (#14236)\n  /**\n   * Set the loading strategy of the media. Defaults to global loading strategy.\n   * Use 'lazy' or 'eager' strategies.\n   */\n  @Input() loading: ImageLoadingStrategy | null = <ImageLoadingStrategy | null>(\n    this.loadingStrategy\n  );\n\n  /**\n   * Once the media is loaded, we emit an event.\n   */\n  @Output() loaded: EventEmitter<Boolean> = new EventEmitter<Boolean>();\n\n  /**\n   * The media contains the info for the UI to create the image. This media\n   * object might contain more info once other media types (i.e. video) is supported.\n   */\n  media: Media;\n\n  /**\n   * The `cx-media` component has an `is-initialized` class as long as the\n   * media is being initialized.\n   */\n  @HostBinding('class.is-initialized') isInitialized = false;\n\n  /**\n   * The `cx-media` component has a `is-loading` class as long as the\n   * media is loaded. Wehn the media is loaded, the `is-initialized` class\n   * is added.\n   */\n  @HostBinding('class.is-loading') isLoading = true;\n\n  /**\n   * When there's no media provided for the content, or in case an error\n   * happened during loading, we add the `is-missing` class. Visual effects\n   * can be controlled by CSS.\n   */\n  @HostBinding('class.is-missing') isMissing = false;\n\n  constructor(protected mediaService: MediaService) {}\n\n  ngOnChanges(): void {\n    this.create();\n  }\n\n  /**\n   * Creates the `Media` object\n   */\n  protected create(): void {\n    this.media = this.mediaService.getMedia(\n      this.container instanceof Array ? this.container[0] : this.container,\n      this.format,\n      this.alt,\n      this.role\n    );\n    if (!this.media?.src) {\n      this.handleMissing();\n    }\n  }\n\n  /**\n   * This handler is called from the UI when the image is loaded.\n   */\n  loadHandler(): void {\n    this.isLoading = false;\n    this.isInitialized = true;\n    this.isMissing = false;\n    this.loaded.emit(true);\n  }\n\n  // TODO: Remove string return type (#14236)\n  /**\n   * Indicates whether the browser should lazy load the image.\n   * @deprecated since 4.2. use ImageLoadingStrategy or null return types only\n   */\n  get loadingStrategy(): string | ImageLoadingStrategy | null {\n    return this.mediaService.loadingStrategy === ImageLoadingStrategy.LAZY\n      ? ImageLoadingStrategy.LAZY\n      : null;\n  }\n\n  /**\n   * Whenever an error happens during load, we mark the component\n   * with css classes to have a missing media.\n   */\n  errorHandler(): void {\n    this.handleMissing();\n  }\n\n  protected handleMissing() {\n    this.isLoading = false;\n    this.isInitialized = true;\n    this.isMissing = true;\n    this.loaded.emit(false);\n  }\n}\n","<img\n  *ngIf=\"media?.src\"\n  [attr.src]=\"media.src\"\n  [attr.srcset]=\"media.srcset\"\n  [attr.alt]=\"media.alt\"\n  [attr.role]=\"media.role\"\n  [attr.loading]=\"loading\"\n  (load)=\"loadHandler()\"\n  (error)=\"errorHandler()\"\n/>\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { startWith } from 'rxjs/operators';\n\n/**\n * Provides a UI to manage the count of the quantity, typically by using\n * increase and decrease functionality. The item counter expects an input `FormControl`\n * so that the state of the control can be managed outside of this component.\n */\n@Component({\n  selector: 'cx-item-counter',\n  templateUrl: './item-counter.component.html',\n  // do not use OnPush change detection strategy as we would not\n  // get updates of other form control state (disabled). We want to have a\n  // disabled state in order to ensure that the control cannot be used while\n  // the cart is updated.\n})\nexport class ItemCounterComponent implements OnInit, OnDestroy {\n  /**\n   * Holds the value of the counter, the state of the `FormControl`\n   * can be managed outside of the item counter.\n   */\n  @Input() control: FormControl;\n\n  /**\n   * This can be used in case an item has a minmum order quantity.\n   * @default 1\n   */\n  @Input() min = 1;\n\n  /**\n   * This can be used in case an item has a maximum order quantity.\n   */\n  @Input() max: number;\n\n  /**\n   * The step is used to increment the count. It is supposed to be a\n   * positive integer or float.\n   * @default 1\n   */\n  @Input() step = 1;\n\n  /**\n   * Indicates that the input can be manually set to zero,\n   * despite the fact that the input controls will be limited to\n   * the minimum. The zero value can be used to remove an item.\n   */\n  @Input() allowZero = false;\n\n  /**\n   * In readonly mode the item counter will only be shown as a label,\n   * the form controls are not rendered.\n   * Please not that readonly is different from the `disabled` form state.\n   * @default false\n   */\n  @HostBinding('class.readonly') @Input() readonly = false;\n\n  @ViewChild('qty') private input: ElementRef<HTMLInputElement>;\n\n  /**\n   * Subscription responsible for auto-correcting control's value when it's invalid.\n   */\n  private sub: Subscription;\n\n  @HostListener('click') handleClick() {\n    this.input.nativeElement.focus();\n  }\n\n  ngOnInit() {\n    this.sub = this.control.valueChanges\n      .pipe(startWith(this.control.value))\n      .subscribe((value) =>\n        this.control.setValue(this.getValidCount(value), { emitEvent: false })\n      );\n  }\n\n  ngOnDestroy() {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n  }\n\n  increment() {\n    // it's too early to use the `stepUp` and `stepDown` API...\n    // let's wait for FF: https://caniuse.com/#search=stepUp\n    this.control.setValue(this.control.value + this.step);\n    this.control.markAsDirty();\n  }\n\n  decrement() {\n    this.control.setValue(this.control.value - this.step);\n    this.control.markAsDirty();\n  }\n\n  /**\n   * Validate that the given value is in between\n   * the `min` and `max` value. If the value is out\n   * of  the min/max range, it will be altered.\n   * If `allowZero` is set to true, the 0 value is ignored.\n   *\n   */\n  private getValidCount(value: number) {\n    if (value < this.min && !(value === 0 && this.allowZero)) {\n      value = this.min;\n    }\n    if (this.max && value > this.max) {\n      value = this.max;\n    }\n    return value;\n  }\n}\n","<button\n  type=\"button\"\n  (click)=\"decrement()\"\n  [disabled]=\"control.disabled || control.value <= min\"\n  [tabindex]=\"control.disabled || control.value <= min ? -1 : 0\"\n  attr.aria-label=\"{{ 'itemCounter.removeOne' | cxTranslate }}\"\n>\n  -\n</button>\n<input\n  #qty\n  type=\"number\"\n  [min]=\"min\"\n  [max]=\"max\"\n  [step]=\"step\"\n  [readonly]=\"readonly\"\n  [tabindex]=\"readonly ? -1 : 0\"\n  [formControl]=\"control\"\n  attr.aria-label=\"{{ 'itemCounter.quantity' | cxTranslate }}\"\n/>\n<button\n  type=\"button\"\n  (click)=\"increment()\"\n  [disabled]=\"control.disabled || control.value >= max\"\n  tabindex=\"0\"\n  attr.aria-label=\"{{ 'itemCounter.addOneMore' | cxTranslate }}\"\n>\n  +\n</button>\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { Promotion } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-promotions',\n  templateUrl: './promotions.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PromotionsComponent {\n  @Input()\n  promotions: Promotion[];\n\n  constructor() {}\n}\n","<div class=\"cx-promotions\" *ngIf=\"promotions\">\n  <ul *ngFor=\"let promotion of promotions\">\n    <li>{{ promotion.description }}</li>\n  </ul>\n</div>\n","import {\n  Directive,\n  HostListener,\n  Injectable,\n  Input,\n  Optional,\n} from '@angular/core';\nimport { Router, RouterLink, RouterLinkWithHref } from '@angular/router';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\nexport interface ModalDirectiveOptions {\n  /**\n   * Action to perform after click\n   */\n  type: 'dismiss' | 'close';\n\n  /**\n   * Reason for dismissing or closing the modal\n   */\n  reason?: string;\n}\n\n/**\n * Service to control the behavior of the DismissModalDirective\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ModalDirectiveService {\n  /**\n   * Handler for the click event on the directive\n   *\n   * @param options.type    Action to perform after click - close or dismiss\n   * @param options.reason  Reason for dismissing or closing the modal\n   * @param url             url (optional) - exists only when the directive is also a `routerLink`.\n   */\n  onClick(\n    options: ModalDirectiveOptions,\n    activeModal: NgbActiveModal,\n    url?: string\n  ): void {\n    let reason = options.reason;\n\n    if (!reason && url) {\n      reason = `Link click: ${url}`;\n    }\n\n    if (options.type === 'dismiss') {\n      activeModal.dismiss(reason);\n    } else if (options.type === 'close') {\n      activeModal.close(reason);\n    }\n  }\n}\n\n/**\n * Directive to dismiss the modal on click\n */\n@Directive({\n  selector: '[cxModal]',\n})\nexport class ModalDirective {\n  /**\n   * Action to perform, when the directive is clicked - dismiss or close.\n   *\n   * Reason can be given via input `cxModalReason`, which fallbacks to URL of the `routerLink` (if exists on the same element).\n   */\n  @Input() cxModal: ModalDirectiveOptions['type'];\n\n  /**\n   * Reason for closing/dismissing the modal. Fallbacks to URL of the `routerLink` (if exists on the same element).\n   */\n  @Input() cxModalReason: ModalDirectiveOptions['reason'];\n\n  constructor(\n    protected service: ModalDirectiveService,\n    protected router: Router,\n\n    // active modal can be injected only when the directive is projected inside modal\n    @Optional() protected activeModal: NgbActiveModal,\n\n    @Optional() protected routerLink: RouterLink,\n    @Optional() protected routerLinkWithHref: RouterLinkWithHref\n  ) {}\n\n  /**\n   * Returns URL in case when the directive is in the scope of a `routerLink` directive at the same time.\n   */\n  protected getUrl(): string | undefined {\n    const routerLink = this.routerLink ?? this.routerLinkWithHref;\n    return routerLink\n      ? this.router.serializeUrl(routerLink.urlTree)\n      : undefined;\n  }\n\n  @HostListener('click')\n  onClick() {\n    if (this.activeModal) {\n      this.service.onClick(this.options, this.activeModal, this.getUrl());\n    }\n  }\n\n  /**\n   * Converts the directive's inputs to the shape of modal directive options\n   */\n  protected get options(): ModalDirectiveOptions {\n    return { type: this.cxModal, reason: this.cxModalReason };\n  }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { OrderEntry, PromotionLocation } from '@spartacus/core';\nimport { ICON_TYPE } from '../../../misc/icon/icon.model';\nimport { CartOutlets } from '../../cart-outlets.model';\nimport { CartItemContextSource } from './model/cart-item-context-source.model';\nimport { CartItemContext } from './model/cart-item-context.model';\n\nexport interface CartItemComponentOptions {\n  isSaveForLater?: boolean;\n  optionalBtn?: any;\n}\n\n@Component({\n  selector: 'cx-cart-item',\n  templateUrl: './cart-item.component.html',\n  providers: [\n    CartItemContextSource,\n    { provide: CartItemContext, useExisting: CartItemContextSource },\n  ],\n})\nexport class CartItemComponent implements OnChanges {\n  @Input() compact = false;\n  @Input() item: OrderEntry;\n  @Input() readonly = false;\n  @Input() quantityControl: FormControl;\n\n  @Input() promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  // TODO: evaluate whether this is generic enough\n  @Input() options: CartItemComponentOptions = {\n    isSaveForLater: false,\n    optionalBtn: null,\n  };\n\n  iconTypes = ICON_TYPE;\n  readonly CartOutlets = CartOutlets;\n\n  constructor(protected cartItemContextSource: CartItemContextSource) {}\n\n  ngOnChanges(changes?: SimpleChanges) {\n    if (changes?.compact) {\n      this.cartItemContextSource.compact$.next(this.compact);\n    }\n    if (changes?.readonly) {\n      this.cartItemContextSource.readonly$.next(this.readonly);\n    }\n    if (changes?.item) {\n      this.cartItemContextSource.item$.next(this.item);\n    }\n    if (changes?.quantityControl) {\n      this.cartItemContextSource.quantityControl$.next(this.quantityControl);\n    }\n    if (changes?.promotionLocation) {\n      this.cartItemContextSource.location$.next(this.promotionLocation);\n    }\n    if (changes?.options) {\n      this.cartItemContextSource.options$.next(this.options);\n    }\n  }\n\n  isProductOutOfStock(product: any) {\n    // TODO Move stocklevelstatuses across the app to an enum\n    return (\n      product &&\n      product.stock &&\n      product.stock.stockLevelStatus === 'outOfStock'\n    );\n  }\n\n  removeItem() {\n    this.quantityControl.setValue(0);\n    this.quantityControl.markAsDirty();\n  }\n}\n","<!-- Item Start Outlet -->\n<ng-template [cxOutlet]=\"CartOutlets.ITEM\">\n  <ng-container *cxFeatureLevel=\"'4.2'\">\n    <cx-cart-item-validation-warning\n      [code]=\"item.product.code\"\n    ></cx-cart-item-validation-warning>\n  </ng-container>\n  <div [ngClass]=\"compact ? 'cx-compact row' : 'row'\">\n    <!-- Item Image -->\n    <div class=\"col-2 cx-image-container\">\n      <a\n        [routerLink]=\"{ cxRoute: 'product', params: item.product } | cxUrl\"\n        cxModal=\"dismiss\"\n        tabindex=\"-1\"\n      >\n        <cx-media\n          [container]=\"item.product.images?.PRIMARY\"\n          format=\"cartIcon\"\n        ></cx-media>\n      </a>\n    </div>\n    <!-- Item Information -->\n    <div class=\"cx-info col-10\">\n      <div class=\"cx-info-container row\">\n        <!-- Item Description -->\n        <div [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-5'\">\n          <div *ngIf=\"item.product.name\" class=\"cx-name\">\n            <a\n              class=\"cx-link\"\n              [routerLink]=\"\n                { cxRoute: 'product', params: item.product } | cxUrl\n              \"\n              cxModal=\"dismiss\"\n              ><h2>{{ item.product.name }}</h2></a\n            >\n          </div>\n          <div *ngIf=\"item.product.code\" class=\"cx-code\">\n            {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\n          </div>\n\n          <!-- Item Details Outlet -->\n          <ng-template [cxOutlet]=\"CartOutlets.ITEM_DETAILS\"> </ng-template>\n\n          <!-- Variants -->\n          <ng-container *ngIf=\"item.product.baseOptions?.length\">\n            <div\n              *ngFor=\"\n                let variant of item.product.baseOptions[0]?.selected\n                  ?.variantOptionQualifiers\n              \"\n              class=\"cx-property\"\n            >\n              <div class=\"cx-label\" *ngIf=\"variant.name && variant.value\">\n                {{ variant.name }}: {{ variant.value }}\n              </div>\n            </div>\n          </ng-container>\n        </div>\n        <!-- Item Price -->\n        <div\n          *ngIf=\"item.basePrice\"\n          class=\"cx-price\"\n          [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\"\n        >\n          <div\n            class=\"cx-label\"\n            [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n          >\n            {{ 'cartItems.itemPrice' | cxTranslate }}\n          </div>\n          <div *ngIf=\"item.basePrice\" class=\"cx-value\">\n            {{ item.basePrice?.formattedValue }}\n          </div>\n        </div>\n        <!-- Item Quantity -->\n        <div class=\"cx-quantity\" [ngClass]=\"compact ? '' : ' col-3'\">\n          <div\n            class=\"cx-label\"\n            [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n            placement=\"left\"\n            title=\"{{ 'cartItems.quantityTitle' | cxTranslate }}\"\n          >\n            {{ 'cartItems.quantity' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\" [class.readonly-value]=\"readonly\">\n            <cx-item-counter\n              [control]=\"quantityControl\"\n              [readonly]=\"\n                !item.updateable || readonly || options.isSaveForLater\n              \"\n              [max]=\"item.product.stock?.stockLevel\"\n              [allowZero]=\"true\"\n            >\n            </cx-item-counter>\n          </div>\n        </div>\n        <!-- Total -->\n        <ng-container *ngIf=\"options.isSaveForLater; else total\">\n          <div\n            class=\"cx-total\"\n            [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\"\n          >\n            <div\n              class=\"cx-label\"\n              [ngClass]=\"\n                compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\n              \"\n            >\n              {{ 'saveForLaterItems.stock' | cxTranslate }}\n            </div>\n            <div\n              *ngIf=\"item.product?.stock?.stockLevel >= 0; else forceInstock\"\n              class=\"cx-value\"\n            >\n              {{ item.product.stock.stockLevel }}\n            </div>\n            <ng-template #forceInstock>\n              <div class=\"cx-value\">\n                {{ 'saveForLaterItems.forceInStock' | cxTranslate }}\n              </div>\n            </ng-template>\n          </div>\n        </ng-container>\n      </div>\n      <!-- Availability -->\n      <div\n        *ngIf=\"isProductOutOfStock(item.product)\"\n        class=\"cx-availability col-12\"\n      >\n        {{ 'addToCart.outOfStock' | cxTranslate }}\n      </div>\n\n      <!-- Item Bundle Details Outlet -->\n      <ng-template [cxOutlet]=\"CartOutlets.ITEM_BUNDLE_DETAILS\"> </ng-template>\n\n      <!-- Promotion -->\n\n      <cx-promotions [promotions]=\"item.promotions\"></cx-promotions>\n\n      <!-- Actions -->\n      <div\n        *ngIf=\"(!readonly || options.isSaveForLater) && item.updateable\"\n        class=\"cx-actions col-12\"\n      >\n        <ng-container *ngIf=\"!isProductOutOfStock(item.product)\">\n          <ng-container\n            *ngTemplateOutlet=\"\n              options.optionalBtn;\n              context: {\n                $implicit: { loading: quantityControl.disabled, item: item }\n              }\n            \"\n          ></ng-container>\n        </ng-container>\n\n        <div class=\"col-md-3 cx-remove-btn\">\n          <button\n            class=\"link cx-action-link\"\n            [disabled]=\"quantityControl.disabled\"\n            (click)=\"removeItem()\"\n            attr.aria-label=\"{{ 'addToCart.removeFromCart' | cxTranslate }}\"\n          >\n            {{ 'common.remove' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <ng-template #total>\n    <div\n      *ngIf=\"item.totalPrice\"\n      class=\"cx-total\"\n      [ngClass]=\"compact ? '' : ' col-md-3 col-xl-2'\"\n    >\n      <div\n        class=\"cx-label\"\n        [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n      >\n        {{ 'cartItems.total' | cxTranslate }}\n      </div>\n      <div class=\"cx-value\">{{ item.totalPrice.formattedValue }}</div>\n    </div>\n  </ng-template>\n</ng-template>\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport {\n  ActiveCartService,\n  Cart,\n  OrderEntry,\n  PromotionLocation,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  filter,\n  map,\n  shareReplay,\n  startWith,\n  switchMap,\n  switchMapTo,\n  tap,\n} from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../../cms-components/misc/icon/icon.model';\nimport { ModalService } from '../../../../shared/components/modal/modal.service';\n\n@Component({\n  selector: 'cx-added-to-cart-dialog',\n  templateUrl: './added-to-cart-dialog.component.html',\n})\nexport class AddedToCartDialogComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  entry$: Observable<OrderEntry>;\n  cart$: Observable<Cart>;\n  loaded$: Observable<boolean>;\n  addedEntryWasMerged$: Observable<boolean>;\n  numberOfEntriesBeforeAdd: number;\n  promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  quantity = 0;\n  modalIsOpen = false;\n\n  @ViewChild('dialog', { read: ElementRef })\n  dialog: ElementRef;\n\n  form: FormGroup = new FormGroup({});\n\n  protected quantityControl$: Observable<FormControl>;\n\n  constructor(\n    protected modalService: ModalService,\n    protected cartService: ActiveCartService\n  ) {}\n  /**\n   * Returns an observable formControl with the quantity of the cartEntry,\n   * but also updates the entry in case of a changed value.\n   * The quantity can be set to zero in order to remove the entry.\n   */\n  getQuantityControl(): Observable<FormControl> {\n    if (!this.quantityControl$) {\n      this.quantityControl$ = this.entry$.pipe(\n        filter((e) => !!e),\n        map((entry) => this.getQuantityFormControl(entry)),\n        switchMap(() =>\n          this.form.valueChanges.pipe(\n            // eslint-disable-next-line import/no-deprecated\n            startWith(null),\n            tap((valueChange) => {\n              if (valueChange) {\n                this.cartService.updateEntry(\n                  valueChange.entryNumber,\n                  valueChange.quantity\n                );\n                if (valueChange.quantity === 0) {\n                  this.dismissModal('Removed');\n                }\n              } else {\n                this.form.markAsPristine();\n              }\n            })\n          )\n        ),\n        map(() => <FormControl>this.form.get('quantity')),\n        shareReplay({ bufferSize: 1, refCount: true })\n      );\n    }\n    return this.quantityControl$;\n  }\n\n  ngOnInit() {\n    this.addedEntryWasMerged$ = this.loaded$.pipe(\n      filter((loaded) => loaded),\n      switchMapTo(this.cartService.getEntries()),\n      map((entries) => entries.length === this.numberOfEntriesBeforeAdd)\n    );\n  }\n\n  /**\n   * Adds quantity and entryNumber form controls to the FormGroup.\n   * Returns quantity form control.\n   */\n  protected getQuantityFormControl(entry: OrderEntry): FormControl {\n    if (!this.form.get('quantity')) {\n      const quantity = new FormControl(entry.quantity, { updateOn: 'blur' });\n      this.form.addControl('quantity', quantity);\n\n      const entryNumber = new FormControl(entry.entryNumber);\n      this.form.addControl('entryNumber', entryNumber);\n    }\n    return <FormControl>this.form.get('quantity');\n  }\n\n  dismissModal(reason?: any): void {\n    this.modalService.dismissActiveModal(reason);\n  }\n}\n","<div #dialog>\n  <!-- Modal Header -->\n  <ng-container *ngIf=\"(loaded$ | async) || modalIsOpen; else loading\">\n    <div class=\"cx-dialog-header modal-header\">\n      <div\n        class=\"cx-dialog-title modal-title\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n      >\n        {{\n          (addedEntryWasMerged$ | async)\n            ? ('addToCart.itemsIncrementedInYourCart' | cxTranslate)\n            : ('addToCart.itemsAddedToYourCart' | cxTranslate)\n        }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        attr.aria-label=\"{{ 'addToCart.closeModal' | cxTranslate }}\"\n        cxModal=\"dismiss\"\n        cxModalReason=\"Cross click\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <!-- Modal Body -->\n    <div class=\"cx-dialog-body modal-body\" *ngIf=\"entry$ | async as entry\">\n      <div class=\"cx-dialog-row\">\n        <div class=\"cx-dialog-item col-sm-12 col-md-6\">\n          <cx-cart-item\n            [item]=\"entry\"\n            [compact]=\"true\"\n            [quantityControl]=\"getQuantityControl() | async\"\n            [promotionLocation]=\"promotionLocation\"\n          ></cx-cart-item>\n        </div>\n        <!-- Separator -->\n        <div\n          class=\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\"\n        ></div>\n        <!-- Total container -->\n        <div\n          class=\"cx-dialog-actions col-sm-12 col-md-6\"\n          *ngIf=\"cart$ | async as cart\"\n        >\n          <div class=\"cx-dialog-total\">\n            <div>\n              {{\n                'cartItems.cartTotal'\n                  | cxTranslate: { count: cart.deliveryItemsQuantity }\n              }}\n            </div>\n\n            <div>{{ cart.subTotal?.formattedValue }}</div>\n          </div>\n\n          <!-- Promotions -->\n          <div class=\"cx-dialog-promotions\">\n            <cx-promotions\n              [promotions]=\"\n                (cart.appliedOrderPromotions || []).concat(\n                  cart.potentialOrderPromotions || []\n                )\n              \"\n            ></cx-promotions>\n          </div>\n\n          <!-- Actions -->\n          <div class=\"cx-dialog-buttons\">\n            <a\n              [class.disabled]=\"form.dirty\"\n              [routerLink]=\"{ cxRoute: 'cart' } | cxUrl\"\n              cxModal=\"dismiss\"\n              cxModalReason=\"View Cart click\"\n              class=\"btn btn-primary\"\n              autofocus\n              >{{ 'addToCart.viewCart' | cxTranslate }}</a\n            >\n            <a\n              [class.disabled]=\"form.dirty\"\n              [routerLink]=\"{ cxRoute: 'checkout' } | cxUrl\"\n              cxModal=\"dismiss\"\n              cxModalReason=\"Proceed To Checkout click\"\n              class=\"btn btn-secondary\"\n              >{{ 'addToCart.proceedToCheckout' | cxTranslate }}</a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-template #loading>\n    <div class=\"cx-dialog-header modal-header\">\n      <div class=\"cx-dialog-title modal-title\">\n        {{ 'addToCart.updatingCart' | cxTranslate }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        [attr.aria-label]=\"'common.close' | cxTranslate\"\n        cxModal=\"dismiss\"\n        cxModalReason=\"Cross click\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <!-- Modal Body -->\n    <div class=\"cx-dialog-body modal-body\">\n      <div class=\"cx-dialog-row\">\n        <div class=\"col-sm-12\"><cx-spinner></cx-spinner></div>\n      </div>\n    </div>\n  </ng-template>\n</div>\n","import { Injectable } from '@angular/core';\nimport {\n  isNotUndefined,\n  Product,\n  ProductScope,\n  ProductService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CurrentProductService {\n  constructor(\n    private routingService: RoutingService,\n    private productService: ProductService\n  ) {}\n\n  protected readonly DEFAULT_PRODUCT_SCOPE = ProductScope.DETAILS;\n\n  /**\n   * Returns an observable for the current product\n   * @returns Product\n   * @returns null if product can't be found\n   *\n   * @param scopes\n   */\n  getProduct(\n    scopes?: (ProductScope | string)[] | ProductScope | string\n  ): Observable<Product | null> {\n    return this.getCode().pipe(\n      distinctUntilChanged(),\n      switchMap((productCode: string) => {\n        return productCode\n          ? this.productService.get(\n              productCode,\n              scopes || this.DEFAULT_PRODUCT_SCOPE\n            )\n          : of(null);\n      }),\n      filter(isNotUndefined)\n    );\n  }\n\n  protected getCode(): Observable<string> {\n    return this.routingService\n      .getRouterState()\n      .pipe(map((state) => state.state.params['productCode']));\n  }\n}\n","import { Observable } from 'rxjs';\nimport { CmsComponent } from '@spartacus/core';\n\nexport abstract class CmsComponentData<T extends CmsComponent> {\n  uid: string;\n  data$: Observable<T>;\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n} from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport {\n  ActiveCartService,\n  CmsAddToCartComponent,\n  isNotNullable,\n  Product,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { filter, map, take } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { ModalRef } from '../../../shared/components/modal/modal-ref';\nimport { ModalService } from '../../../shared/components/modal/modal.service';\nimport { CurrentProductService } from '../../product/current-product.service';\nimport { AddedToCartDialogComponent } from './added-to-cart-dialog/added-to-cart-dialog.component';\n\n@Component({\n  selector: 'cx-add-to-cart',\n  templateUrl: './add-to-cart.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddToCartComponent implements OnInit, OnDestroy {\n  @Input() productCode: string;\n  @Input() showQuantity = true;\n\n  /**\n   * As long as we do not support #5026, we require product input, as we need\n   *  a reference to the product model to fetch the stock data.\n   */\n  @Input() product: Product;\n\n  maxQuantity: number;\n  modalRef: ModalRef;\n\n  hasStock: boolean = false;\n  inventoryThreshold: boolean = false;\n\n  showInventory$: Observable<boolean | undefined> | undefined =\n    this.component?.data$.pipe(map((data) => data.inventoryDisplay));\n\n  quantity = 1;\n  protected numberOfEntriesBeforeAdd = 0;\n\n  subscription: Subscription;\n\n  addToCartForm = new FormGroup({\n    quantity: new FormControl(1, { updateOn: 'blur' }),\n  });\n\n  // TODO(#13041): Remove deprecated constructors\n  constructor(\n    modalService: ModalService,\n    currentProductService: CurrentProductService,\n    cd: ChangeDetectorRef,\n    activeCartService: ActiveCartService,\n    // eslint-disable-next-line @typescript-eslint/unified-signatures\n    component?: CmsComponentData<CmsAddToCartComponent>\n  );\n\n  /**\n   * @deprecated since 4.1\n   */\n  constructor(\n    modalService: ModalService,\n    currentProductService: CurrentProductService,\n    cd: ChangeDetectorRef,\n    activeCartService: ActiveCartService\n  );\n\n  constructor(\n    protected modalService: ModalService,\n    protected currentProductService: CurrentProductService,\n    protected cd: ChangeDetectorRef,\n    protected activeCartService: ActiveCartService,\n    @Optional() protected component?: CmsComponentData<CmsAddToCartComponent>\n  ) {}\n\n  ngOnInit() {\n    if (this.product) {\n      this.productCode = this.product.code ?? '';\n      this.setStockInfo(this.product);\n      this.cd.markForCheck();\n    } else if (this.productCode) {\n      // force hasStock and quantity for the time being, as we do not have more info:\n      this.quantity = 1;\n      this.hasStock = true;\n      this.cd.markForCheck();\n    } else {\n      this.subscription = this.currentProductService\n        .getProduct()\n        .pipe(filter(isNotNullable))\n        .subscribe((product) => {\n          this.productCode = product.code ?? '';\n          this.setStockInfo(product);\n          this.cd.markForCheck();\n        });\n    }\n  }\n\n  protected setStockInfo(product: Product): void {\n    this.quantity = 1;\n    this.hasStock = Boolean(product.stock?.stockLevelStatus !== 'outOfStock');\n\n    this.inventoryThreshold = product.stock?.isValueRounded ?? false;\n\n    if (this.hasStock && product.stock?.stockLevel) {\n      this.maxQuantity = product.stock.stockLevel;\n    }\n  }\n\n  /**\n   * In specific scenarios, we need to omit displaying the stock level or append a plus to the value.\n   * When backoffice forces a product to be in stock, omit showing the stock level.\n   * When product stock level is limited by a threshold value, append '+' at the end.\n   * When out of stock, display no numerical value.\n   */\n  getInventory(): string {\n    if (this.hasStock) {\n      const quantityDisplay = this.maxQuantity\n        ? this.maxQuantity.toString()\n        : '';\n      return this.inventoryThreshold ? quantityDisplay + '+' : quantityDisplay;\n    } else {\n      return '';\n    }\n  }\n\n  updateCount(value: number): void {\n    this.quantity = value;\n  }\n\n  addToCart() {\n    const quantity = this.addToCartForm.get('quantity').value;\n    if (!this.productCode || quantity <= 0) {\n      return;\n    }\n    this.activeCartService\n      .getEntries()\n      .pipe(take(1))\n      .subscribe((entries) => {\n        this.numberOfEntriesBeforeAdd = entries.length;\n        this.openModal();\n        this.activeCartService.addEntry(this.productCode, quantity);\n      });\n  }\n\n  /**\n   * Provides required data and opens AddedToCartDialogComponent modal\n   */\n  protected openModal() {\n    let modalInstance: any;\n    this.modalRef = this.modalService.open(AddedToCartDialogComponent, {\n      centered: true,\n      size: 'lg',\n    });\n\n    modalInstance = this.modalRef.componentInstance;\n    // Display last entry for new product code. This always corresponds to\n    // our new item, independently of whether merging occured or not\n    modalInstance.entry$ = this.activeCartService.getLastEntry(\n      this.productCode\n    );\n    modalInstance.cart$ = this.activeCartService.getActive();\n    modalInstance.loaded$ = this.activeCartService.isStable();\n    modalInstance.quantity = this.quantity;\n    modalInstance.numberOfEntriesBeforeAdd = this.numberOfEntriesBeforeAdd;\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","<form *ngIf=\"productCode\" [formGroup]=\"addToCartForm\" (submit)=\"addToCart()\">\n  <div class=\"quantity\" *ngIf=\"showQuantity\">\n    <label>{{ 'addToCart.quantity' | cxTranslate }}</label>\n    <cx-item-counter\n      *ngIf=\"hasStock\"\n      [max]=\"maxQuantity\"\n      [control]=\"addToCartForm.get('quantity')\"\n    ></cx-item-counter>\n\n    <span class=\"info\">\n      <span *ngIf=\"showInventory$ | async\">{{ getInventory() }}</span>\n      {{\n        hasStock\n          ? ('addToCart.inStock' | cxTranslate)\n          : ('addToCart.outOfStock' | cxTranslate)\n      }}</span\n    >\n  </div>\n\n  <button\n    *ngIf=\"hasStock\"\n    class=\"btn btn-primary btn-block\"\n    type=\"submit\"\n    [disabled]=\"quantity <= 0 || quantity > maxQuantity\"\n  >\n    {{ 'addToCart.addToCart' | cxTranslate }}\n  </button>\n</form>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { I18nModule } from '@spartacus/core';\nimport { SpinnerComponent } from './spinner.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [SpinnerComponent],\n  exports: [SpinnerComponent],\n})\nexport class SpinnerModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  AnonymousConsentsConfig,\n  AnonymousConsentsService,\n  AuthService,\n  ConsentTemplate,\n  GlobalMessageService,\n  GlobalMessageType,\n  UserConsentService,\n} from '@spartacus/core';\nimport {\n  BehaviorSubject,\n  combineLatest,\n  concat,\n  Observable,\n  Subscription,\n} from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  scan,\n  skipWhile,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-consent-management',\n  templateUrl: './consent-management.component.html',\n})\nexport class ConsentManagementComponent implements OnInit, OnDestroy {\n  private subscriptions = new Subscription();\n  private allConsentsLoading = new BehaviorSubject<boolean>(false);\n\n  templateList$: Observable<ConsentTemplate[]>;\n  loading$: Observable<boolean>;\n\n  requiredConsents: string[] = [];\n\n  constructor(\n    protected userConsentService: UserConsentService,\n    protected globalMessageService: GlobalMessageService,\n    protected anonymousConsentsConfig: AnonymousConsentsConfig,\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected authService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    this.loading$ = combineLatest([\n      this.userConsentService.getConsentsResultLoading(),\n      this.userConsentService.getGiveConsentResultLoading(),\n      this.userConsentService.getWithdrawConsentResultLoading(),\n      this.authService.isUserLoggedIn(),\n      this.allConsentsLoading,\n    ]).pipe(\n      map(\n        ([\n          consentLoading,\n          giveConsentLoading,\n          withdrawConsentLoading,\n          isUserLoggedIn,\n          allConsentsLoading,\n        ]) =>\n          consentLoading ||\n          giveConsentLoading ||\n          withdrawConsentLoading ||\n          !isUserLoggedIn ||\n          allConsentsLoading\n      )\n    );\n    this.consentListInit();\n    this.giveConsentInit();\n    this.withdrawConsentInit();\n  }\n\n  private consentListInit(): void {\n    this.templateList$ = this.userConsentService.getConsents().pipe(\n      withLatestFrom(\n        this.anonymousConsentsService.getTemplates(),\n        this.authService.isUserLoggedIn()\n      ),\n      filter(\n        ([_templateList, _anonymousTemplates, isUserLoggedIn]) => isUserLoggedIn\n      ),\n      tap(([templateList, _anonymousTemplates]) => {\n        if (!this.consentsExists(templateList)) {\n          this.userConsentService.loadConsents();\n        }\n      }),\n      map(([templateList, anonymousTemplates]) => {\n        if (Boolean(this.anonymousConsentsConfig.anonymousConsents)) {\n          if (\n            Boolean(\n              this.anonymousConsentsConfig.anonymousConsents.requiredConsents\n            )\n          ) {\n            this.requiredConsents =\n              this.anonymousConsentsConfig.anonymousConsents.requiredConsents;\n          }\n          if (\n            Boolean(\n              this.anonymousConsentsConfig.anonymousConsents\n                .consentManagementPage\n            )\n          ) {\n            return this.hideAnonymousConsents(templateList, anonymousTemplates);\n          }\n        }\n\n        return templateList;\n      })\n    );\n  }\n\n  private hideAnonymousConsents(\n    templateList: ConsentTemplate[],\n    anonymousTemplates: ConsentTemplate[] = []\n  ): ConsentTemplate[] {\n    let hideTemplateIds: string[] = [];\n\n    if (\n      !this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n        .showAnonymousConsents\n    ) {\n      hideTemplateIds = anonymousTemplates.map((template) => template.id);\n      return this.userConsentService.filterConsentTemplates(\n        templateList,\n        hideTemplateIds\n      );\n    }\n\n    if (\n      Boolean(\n        this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n          .hideConsents\n      ) &&\n      this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n        .hideConsents.length > 0\n    ) {\n      hideTemplateIds =\n        this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n          .hideConsents;\n    }\n\n    return this.userConsentService.filterConsentTemplates(\n      templateList,\n      hideTemplateIds\n    );\n  }\n\n  private giveConsentInit(): void {\n    this.userConsentService.resetGiveConsentProcessState();\n    this.subscriptions.add(\n      this.userConsentService\n        .getGiveConsentResultSuccess()\n        .subscribe((success) => this.onConsentGivenSuccess(success))\n    );\n  }\n\n  private withdrawConsentInit(): void {\n    this.userConsentService.resetWithdrawConsentProcessState();\n    this.subscriptions.add(\n      this.userConsentService\n        .getWithdrawConsentResultLoading()\n        .pipe(\n          skipWhile(Boolean),\n          withLatestFrom(\n            this.userConsentService.getWithdrawConsentResultSuccess()\n          ),\n          map(([, withdrawalSuccess]) => withdrawalSuccess),\n          tap((withdrawalSuccess) => {\n            if (withdrawalSuccess) {\n              this.userConsentService.loadConsents();\n            }\n          })\n        )\n        .subscribe((withdrawalSuccess) =>\n          this.onConsentWithdrawnSuccess(withdrawalSuccess)\n        )\n    );\n  }\n\n  private consentsExists(templateList: ConsentTemplate[]): boolean {\n    return Boolean(templateList) && templateList.length > 0;\n  }\n\n  onConsentChange({\n    given,\n    template,\n  }: {\n    given: boolean;\n    template: ConsentTemplate;\n  }): void {\n    if (given) {\n      this.userConsentService.giveConsent(template.id, template.version);\n    } else {\n      this.userConsentService.withdrawConsent(template.currentConsent.code);\n    }\n  }\n\n  private onConsentGivenSuccess(success: boolean): void {\n    if (success) {\n      this.userConsentService.resetGiveConsentProcessState();\n      this.globalMessageService.add(\n        { key: 'consentManagementForm.message.success.given' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n  }\n\n  private onConsentWithdrawnSuccess(success: boolean): void {\n    if (success) {\n      this.userConsentService.resetWithdrawConsentProcessState();\n      this.globalMessageService.add(\n        { key: 'consentManagementForm.message.success.withdrawn' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n  }\n\n  rejectAll(templates: ConsentTemplate[] = []): void {\n    const consentsToWithdraw: ConsentTemplate[] = [];\n    templates.forEach((template) => {\n      if (this.userConsentService.isConsentGiven(template.currentConsent)) {\n        if (this.isRequiredConsent(template)) {\n          return;\n        }\n        consentsToWithdraw.push(template);\n      }\n    });\n\n    this.allConsentsLoading.next(true);\n\n    this.subscriptions.add(\n      this.setupWithdrawalStream(consentsToWithdraw)\n        .pipe(tap((_timesLoaded) => this.allConsentsLoading.next(false)))\n        .subscribe()\n    );\n  }\n\n  private setupWithdrawalStream(\n    consentsToWithdraw: ConsentTemplate[] = []\n  ): Observable<number> {\n    const loading$ = concat(\n      this.userConsentService.getWithdrawConsentResultLoading()\n    ).pipe(\n      distinctUntilChanged(),\n      filter((loading) => !loading)\n    );\n    const count$ = loading$.pipe(scan((acc, _value) => acc + 1, -1));\n    const withdraw$ = count$.pipe(\n      tap((i) => {\n        if (i < consentsToWithdraw.length) {\n          this.userConsentService.withdrawConsent(\n            consentsToWithdraw[i].currentConsent.code\n          );\n        }\n      })\n    );\n    const checkTimesLoaded$ = withdraw$.pipe(\n      filter((timesLoaded) => timesLoaded === consentsToWithdraw.length)\n    );\n\n    return checkTimesLoaded$;\n  }\n\n  allowAll(templates: ConsentTemplate[] = []): void {\n    const consentsToGive: ConsentTemplate[] = [];\n    templates.forEach((template) => {\n      if (this.userConsentService.isConsentWithdrawn(template.currentConsent)) {\n        if (this.isRequiredConsent(template)) {\n          return;\n        }\n      }\n      consentsToGive.push(template);\n    });\n\n    this.allConsentsLoading.next(true);\n\n    this.subscriptions.add(\n      this.setupGiveStream(consentsToGive)\n        .pipe(tap((_timesLoaded) => this.allConsentsLoading.next(false)))\n        .subscribe()\n    );\n  }\n\n  private setupGiveStream(\n    consentsToGive: ConsentTemplate[] = []\n  ): Observable<number> {\n    const loading$ = concat(\n      this.userConsentService.getGiveConsentResultLoading()\n    ).pipe(\n      distinctUntilChanged(),\n      filter((loading) => !loading)\n    );\n    const count$ = loading$.pipe(scan((acc, _value) => acc + 1, -1));\n    const giveConsent$ = count$.pipe(\n      tap((i) => {\n        if (i < consentsToGive.length) {\n          this.userConsentService.giveConsent(\n            consentsToGive[i].id,\n            consentsToGive[i].version\n          );\n        }\n      })\n    );\n    const checkTimesLoaded$ = giveConsent$.pipe(\n      filter((timesLoaded) => timesLoaded === consentsToGive.length)\n    );\n\n    return checkTimesLoaded$;\n  }\n\n  private isRequiredConsent(template: ConsentTemplate): boolean {\n    return (\n      Boolean(this.anonymousConsentsConfig.anonymousConsents) &&\n      Boolean(\n        this.anonymousConsentsConfig.anonymousConsents.requiredConsents\n      ) &&\n      this.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(\n        template.id\n      )\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    this.allConsentsLoading.unsubscribe();\n\n    this.userConsentService.resetGiveConsentProcessState();\n    this.userConsentService.resetWithdrawConsentProcessState();\n  }\n}\n","<div *ngIf=\"loading$ | async; else consentManagementForm\">\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</div>\n\n<ng-template #consentManagementForm>\n  <ng-container *ngIf=\"templateList$ | async as templateList\">\n    <div class=\"cx-consent-action-links\">\n      <div class=\"col-sm-12 col-md-8 col-lg-6\">\n        <button\n          tabindex=\"0\"\n          class=\"btn btn-link cx-action-link\"\n          (click)=\"rejectAll(templateList)\"\n        >\n          {{ 'consentManagementForm.clearAll' | cxTranslate }}\n        </button>\n        <button\n          tabindex=\"0\"\n          class=\"btn btn-link cx-action-link\"\n          (click)=\"allowAll(templateList)\"\n        >\n          {{ 'consentManagementForm.selectAll' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"cx-consent-toggles\">\n      <div class=\"col-sm-12 col-md-8 col-lg-6\">\n        <cx-consent-management-form\n          *ngFor=\"let consentTemplate of templateList\"\n          [consentTemplate]=\"consentTemplate\"\n          [requiredConsents]=\"requiredConsents\"\n          (consentChanged)=\"onConsentChange($event)\"\n        ></cx-consent-management-form>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { ConsentManagementFormComponent } from './components/consent-form/consent-management-form.component';\nimport { ConsentManagementComponent } from './components/consent-management.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SpinnerModule,\n    I18nModule,\n    IconModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ConsentManagementComponent: {\n          component: ConsentManagementComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ConsentManagementComponent, ConsentManagementFormComponent],\n  exports: [ConsentManagementComponent, ConsentManagementFormComponent],\n})\nexport class ConsentManagementModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { ConsentManagementModule } from '../../../cms-components/myaccount/consent-management/consent-management.module';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/index';\nimport { SpinnerModule } from '../spinner/spinner.module';\nimport { AnonymousConsentDialogComponent } from './anonymous-consent-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    IconModule,\n    SpinnerModule,\n    ConsentManagementModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [AnonymousConsentDialogComponent],\n  exports: [AnonymousConsentDialogComponent],\n})\nexport class AnonymousConsentsDialogModule {}\n","export type PopoverPosition =\n  | 'auto'\n  | 'top'\n  | 'bottom'\n  | 'left'\n  | 'right'\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-right'\n  | 'left-top'\n  | 'left-bottom'\n  | 'right-top'\n  | 'right-bottom';\n\nexport type PopoverPositionArray =\n  | PopoverPosition\n  | Array<PopoverPosition>\n  | string;\n\nexport enum PopoverEvent {\n  INSIDE_CLICK = 'insideClick',\n  OUTSIDE_CLICK = 'outsideClick',\n  ESCAPE_KEYDOWN = 'escapeKeydown',\n  CLOSE_BUTTON_CLICK = 'closeButtonClick',\n  CLOSE_BUTTON_KEYDOWN = 'closeButtonKeydown',\n  ROUTE_CHANGE = 'routeChange',\n  OPEN = 'open',\n  OPEN_BY_KEYBOARD = 'openByKeyboard',\n}\n\nexport interface PopoverOptions {\n  /**\n   * The preferred placement of the popover. Default popover position is 'top'.\n   *\n   *  Allowed popover positions: 'auto', 'top', 'bottom', 'left', 'right',\n   * 'top-left', 'top-right', 'bottom-left', 'bottom-right',\n   * 'left-top', 'left-bottom', 'right-top', 'right-bottom'.\n   */\n  placement?: PopoverPosition;\n\n  /**\n   * Flag used to define if popover should look for the best placement\n   * in case if there is not enough space in viewport for preferred position.\n   *\n   * By default this property is set to `true`.\n   *\n   * Value of this flag is omitted if preferred position is set to `auto`.\n   */\n  autoPositioning?: boolean;\n\n  /**\n   * Flag used to prevent firing popover open function.\n   */\n  disable?: boolean;\n\n  /**\n   * Custom class name passed to popover component.\n   *\n   * If this property is not set the default popover class is `cx-popover`.\n   */\n  class?: string;\n\n  /**\n   * Flag used to hide close button in popover component.\n   */\n  displayCloseButton?: boolean;\n\n  /**\n   * Append popover component into 'body' selector.\n   */\n  appendToBody?: boolean;\n\n  /**\n   * Flag indicates if popover should be re-positioned on scroll event.\n   */\n  positionOnScroll?: boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport {\n  PopoverPosition,\n  PopoverPositionArray,\n} from '../../components/popover/popover.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PositioningService {\n  constructor(protected winRef: WindowRef) {}\n\n  protected get allowedPlacements(): Array<PopoverPositionArray> {\n    return [\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'top-left',\n      'top-right',\n      'bottom-left',\n      'bottom-right',\n      'left-top',\n      'left-bottom',\n      'right-top',\n      'right-bottom',\n    ];\n  }\n\n  protected get placementSeparator(): RegExp {\n    return /\\s+/;\n  }\n\n  protected get window(): Window | undefined {\n    return this.winRef.nativeWindow;\n  }\n\n  protected get document(): Document {\n    return this.winRef.document;\n  }\n\n  protected getAllStyles(\n    element: HTMLElement\n  ): CSSStyleDeclaration | undefined {\n    return this.window?.getComputedStyle(element);\n  }\n\n  protected getPositionStyleProperty(element: HTMLElement): string | undefined {\n    const styles = this.getAllStyles(element);\n\n    if (styles) return styles['position'] || undefined;\n  }\n\n  protected isStaticPositioned(element: HTMLElement): boolean {\n    return (this.getPositionStyleProperty(element) || 'static') === 'static';\n  }\n\n  protected offsetParent(element: HTMLElement): HTMLElement {\n    let offsetParentEl =\n      <HTMLElement>element.offsetParent || this.document.documentElement;\n\n    while (\n      offsetParentEl &&\n      offsetParentEl !== this.document.documentElement &&\n      this.isStaticPositioned(offsetParentEl)\n    ) {\n      offsetParentEl = <HTMLElement>offsetParentEl.offsetParent;\n    }\n\n    return offsetParentEl || this.document.documentElement;\n  }\n\n  protected position(element: HTMLElement, round = true): ClientRect {\n    let elPosition: ClientRect;\n    let parentOffset: ClientRect = {\n      width: 0,\n      height: 0,\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n    };\n\n    if (this.getPositionStyleProperty(element) === 'fixed') {\n      elPosition = element.getBoundingClientRect();\n      elPosition = {\n        top: elPosition.top,\n        bottom: elPosition.bottom,\n        left: elPosition.left,\n        right: elPosition.right,\n        height: elPosition.height,\n        width: elPosition.width,\n      };\n    } else {\n      const offsetParentEl = this.offsetParent(element);\n\n      elPosition = this.offset(element, false);\n\n      if (offsetParentEl !== this.document.documentElement) {\n        parentOffset = this.offset(offsetParentEl, false);\n      }\n\n      parentOffset.top += offsetParentEl.clientTop;\n      parentOffset.left += offsetParentEl.clientLeft;\n    }\n\n    elPosition.top -= parentOffset.top;\n    elPosition.bottom -= parentOffset.top;\n    elPosition.left -= parentOffset.left;\n    elPosition.right -= parentOffset.left;\n\n    if (round) {\n      elPosition.top = Math.round(elPosition.top);\n      elPosition.bottom = Math.round(elPosition.bottom);\n      elPosition.left = Math.round(elPosition.left);\n      elPosition.right = Math.round(elPosition.right);\n    }\n\n    return elPosition;\n  }\n\n  protected offset(element: HTMLElement, round = true): ClientRect {\n    const elBcr = element.getBoundingClientRect();\n    const viewportOffset = {\n      top:\n        (this.window &&\n          this.window.pageYOffset - this.document.documentElement.clientTop) ||\n        0,\n      left:\n        (this.window &&\n          this.window.pageXOffset - this.document.documentElement.clientLeft) ||\n        0,\n    };\n\n    const elOffset = {\n      height: elBcr.height || element.offsetHeight,\n      width: elBcr.width || element.offsetWidth,\n      top: elBcr.top + viewportOffset.top,\n      bottom: elBcr.bottom + viewportOffset.top,\n      left: elBcr.left + viewportOffset.left,\n      right: elBcr.right + viewportOffset.left,\n    };\n\n    if (round) {\n      elOffset.height = Math.round(elOffset.height);\n      elOffset.width = Math.round(elOffset.width);\n      elOffset.top = Math.round(elOffset.top);\n      elOffset.bottom = Math.round(elOffset.bottom);\n      elOffset.left = Math.round(elOffset.left);\n      elOffset.right = Math.round(elOffset.right);\n    }\n\n    return elOffset;\n  }\n\n  /*\n    Return false if the element to position is outside the viewport.\n  */\n  protected _positionElements(\n    hostElement: HTMLElement,\n    targetElement: HTMLElement,\n    placement: string,\n    appendToBody?: boolean\n  ): boolean {\n    const [placementPrimary = 'top', placementSecondary = 'center'] =\n      placement.split('-');\n\n    const hostElPosition = appendToBody\n      ? this.offset(hostElement, false)\n      : this.position(hostElement, false);\n    const targetElStyles = this.getAllStyles(targetElement);\n\n    if (targetElStyles) {\n      const marginTop = parseFloat(targetElStyles.marginTop);\n      const marginBottom = parseFloat(targetElStyles.marginBottom);\n      const marginLeft = parseFloat(targetElStyles.marginLeft);\n      const marginRight = parseFloat(targetElStyles.marginRight);\n\n      let topPosition = 0;\n      let leftPosition = 0;\n\n      switch (placementPrimary) {\n        case 'top':\n          topPosition =\n            hostElPosition.top -\n            (targetElement.offsetHeight + marginTop + marginBottom);\n          break;\n        case 'bottom':\n          topPosition = hostElPosition.top + hostElPosition.height;\n          break;\n        case 'left':\n          leftPosition =\n            hostElPosition.left -\n            (targetElement.offsetWidth + marginLeft + marginRight);\n          break;\n        case 'right':\n          leftPosition = hostElPosition.left + hostElPosition.width;\n          break;\n      }\n\n      switch (placementSecondary) {\n        case 'top':\n          topPosition = hostElPosition.top;\n          break;\n        case 'bottom':\n          topPosition =\n            hostElPosition.top +\n            hostElPosition.height -\n            targetElement.offsetHeight;\n          break;\n        case 'left':\n          leftPosition = hostElPosition.left;\n          break;\n        case 'right':\n          leftPosition =\n            hostElPosition.left +\n            hostElPosition.width -\n            targetElement.offsetWidth;\n          break;\n        case 'center':\n          if (placementPrimary === 'top' || placementPrimary === 'bottom') {\n            leftPosition =\n              hostElPosition.left +\n              hostElPosition.width / 2 -\n              targetElement.offsetWidth / 2;\n          } else {\n            topPosition =\n              hostElPosition.top +\n              hostElPosition.height / 2 -\n              targetElement.offsetHeight / 2;\n          }\n          break;\n      }\n\n      targetElement.style.transform = `translate(${Math.round(\n        leftPosition\n      )}px, ${Math.round(topPosition)}px)`;\n\n      // Check if the targetElement is inside the viewport\n      const targetElBCR = targetElement.getBoundingClientRect();\n      const html = this.document.documentElement;\n      const windowHeight = this.window?.innerHeight || html.clientHeight;\n      const windowWidth = this.window?.innerWidth || html.clientWidth;\n\n      return (\n        targetElBCR.left >= 0 &&\n        targetElBCR.top >= 0 &&\n        targetElBCR.right <= windowWidth &&\n        targetElBCR.bottom <= windowHeight\n      );\n    }\n\n    return false;\n  }\n\n  /*\n   * Accept the placement array and applies the appropriate placement dependent on the viewport.\n   * Returns the applied placement.\n   * In case of auto placement, placements are selected in order\n   *   'top', 'bottom', 'left', 'right',\n   *   'top-left', 'top-right',\n   *   'bottom-left', 'bottom-right',\n   *   'left-top', 'left-bottom',\n   *   'right-top', 'right-bottom'.\n   * */\n  positionElements(\n    hostElement: HTMLElement,\n    targetElement: HTMLElement,\n    placement: string | PopoverPosition | PopoverPositionArray,\n    appendToBody?: boolean\n  ): PopoverPosition {\n    const placementVals: Array<PopoverPosition> = Array.isArray(placement)\n      ? placement\n      : (placement.split(this.placementSeparator) as Array<PopoverPosition>);\n\n    let hasAuto = placementVals.findIndex((val) => val === 'auto');\n    if (hasAuto >= 0) {\n      this.allowedPlacements.forEach((obj) => {\n        if (placementVals.find((val) => val.search('^' + obj) !== -1) == null) {\n          placementVals.splice(hasAuto++, 1, obj as PopoverPosition);\n        }\n      });\n    }\n\n    const style = targetElement.style;\n    style.position = 'absolute';\n    style.top = '0';\n    style.left = '0';\n\n    let testPlacement: PopoverPosition = 'auto';\n    let isInViewport = false;\n    for (testPlacement of placementVals) {\n      if (\n        this._positionElements(\n          hostElement,\n          targetElement,\n          testPlacement,\n          appendToBody\n        )\n      ) {\n        isInViewport = true;\n        break;\n      }\n    }\n\n    if (!isInViewport) {\n      this._positionElements(\n        hostElement,\n        targetElement,\n        testPlacement,\n        appendToBody\n      );\n    }\n\n    return testPlacement;\n  }\n\n  getPositioningClass(\n    position?: PopoverPosition,\n    autoPositioning?: boolean\n  ): string {\n    let positionClass = `${position || 'top'}`;\n    if (autoPositioning && positionClass !== 'auto') {\n      positionClass = `${positionClass} auto`;\n    }\n\n    return positionClass;\n  }\n}\n","import {\n  AfterViewChecked,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ComponentRef,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  TemplateRef,\n} from '@angular/core';\nimport { NavigationStart, Router } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { Subject, Subscription } from 'rxjs';\nimport { WindowRef } from '@spartacus/core';\nimport { PopoverEvent, PopoverPosition } from './popover.model';\nimport { PositioningService } from '../../services/positioning/positioning.service';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/keyboard-focus.model';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-popover',\n  templateUrl: './popover.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PopoverComponent implements OnInit, OnDestroy, AfterViewChecked {\n  /**\n   * String or template to be rendered inside popover wrapper component.\n   */\n  content: string | TemplateRef<any>;\n\n  /**\n   * Element which triggers displaying popover component.\n   * This property is needed to calculate valid position for popover.\n   */\n  triggerElement: ElementRef;\n\n  /**\n   * Current initiated popover instance.\n   */\n  popoverInstance: ComponentRef<PopoverComponent>;\n\n  /**\n   * Flag which informs positioning service if popover component\n   * should be appended to body. Otherwise popover is displayed right after\n   * trigger element in DOM.\n   */\n  appendToBody?: boolean;\n\n  /**\n   * The preferred placement of the popover. Default popover position is 'top'.\n   *\n   * Allowed popover positions: 'auto', 'top', 'bottom', 'left', 'right',\n   * 'top-left', 'top-right', 'bottom-left', 'bottom-right',\n   * 'left-top', 'left-bottom', 'right-top', 'right-bottom'.\n   */\n  position?: PopoverPosition;\n\n  /**\n   * Flag used to define if popover should look for the best placement\n   * in case if there is not enough space in viewport for preferred position.\n   *\n   * By default this property is set to `true`.\n   *\n   * Value of this flag is omitted if preferred position is set to `auto`.\n   */\n  autoPositioning?: boolean;\n\n  /**\n   * Custom class name passed to popover component.\n   *\n   * If this property is not set the default popover class is `cx-popover`.\n   */\n  customClass?: string;\n\n  /**\n   * Flag used to show/hide close button in popover component.\n   */\n  displayCloseButton?: boolean;\n\n  /**\n   * Flag which indicates if passed content is a TemplateRef or string.\n   */\n  isTemplate: boolean;\n\n  /**\n   * After popover component is initialized position needs to be changing dynamically\n   * in case if any viewport changes happened.\n   */\n  resizeSub: Subscription;\n\n  /**\n   * After popover component is initialized popover should be closed in case\n   * if current route has been changed.\n   */\n  routeChangeSub: Subscription;\n\n  /**\n   * Class name generated by positioning service indicating position of popover.\n   */\n  popoverClass: PopoverPosition;\n\n  /**\n   * Configuration for a11y improvements.\n   */\n  focusConfig: FocusConfig;\n\n  /**\n   * Flag indicates if popover should be re-positioned on scroll event.\n   */\n  positionOnScroll?: boolean;\n\n  /**\n   * Icon types for close button icon.\n   */\n  iconTypes = ICON_TYPE;\n\n  /**\n   * Subject which emits specific type of `PopoverEvent`.\n   */\n  eventSubject: Subject<PopoverEvent>;\n\n  /**\n   * Scroll event unlistener.\n   */\n  scrollEventUnlistener: () => void;\n\n  /**\n   * Binding class name property.\n   */\n  @HostBinding('className') baseClass: string;\n\n  /**\n   * Listens for click inside popover component wrapper.\n   */\n  @HostListener('click')\n  insideClick() {\n    this.eventSubject.next(PopoverEvent.INSIDE_CLICK);\n  }\n\n  /**\n   * Listens for every document click and ignores clicks\n   * inside component.\n   */\n  @HostListener('document:click', ['$event'])\n  outsideClick(event: MouseEvent) {\n    if (!this.isClickedOnPopover(event) && !this.isClickedOnDirective(event)) {\n      this.eventSubject.next(PopoverEvent.OUTSIDE_CLICK);\n    }\n  }\n\n  /**\n   * Listens for `escape` keydown event.\n   */\n  @HostListener('keydown.escape')\n  escapeKeydown() {\n    this.eventSubject.next(PopoverEvent.ESCAPE_KEYDOWN);\n  }\n\n  protected isClickedOnPopover(event) {\n    return this.popoverInstance.location.nativeElement.contains(event.target);\n  }\n\n  protected isClickedOnDirective(event) {\n    return this.triggerElement.nativeElement.contains(event.target);\n  }\n\n  /**\n   * Emits close event trigger.\n   */\n  close(event: MouseEvent | KeyboardEvent) {\n    event.preventDefault();\n    if (event instanceof MouseEvent) {\n      this.eventSubject.next(PopoverEvent.CLOSE_BUTTON_CLICK);\n    } else {\n      this.eventSubject.next(PopoverEvent.CLOSE_BUTTON_KEYDOWN);\n    }\n  }\n\n  /**\n   * Method uses `Renderer2` service to listen window scroll event.\n   *\n   * Registered only if property `positionOnScroll` is set to `true`.\n   */\n  triggerScrollEvent() {\n    this.scrollEventUnlistener = this.renderer.listen(\n      this.winRef.nativeWindow,\n      'scroll',\n      () => this.positionPopover()\n    );\n  }\n\n  /**\n   * Method uses positioning service calculation and based on that\n   * updates class name for popover component instance.\n   */\n  positionPopover() {\n    this.popoverClass = this.positioningService.positionElements(\n      this.triggerElement.nativeElement,\n      this.popoverInstance.location.nativeElement,\n      this.positioningService.getPositioningClass(\n        this.position,\n        this.autoPositioning\n      ),\n      this.appendToBody\n    );\n\n    this.changeDetectionRef.markForCheck();\n    this.baseClass = `${this.customClass} ${this.popoverClass} opened`;\n  }\n\n  ngOnInit(): void {\n    this.isTemplate = this.content instanceof TemplateRef;\n\n    if (!this.customClass) this.customClass = 'cx-popover';\n    if (!this.position) this.position = 'top';\n    if (this.autoPositioning === undefined) this.autoPositioning = true;\n\n    this.baseClass = `${this.customClass}`;\n\n    this.resizeSub = this.winRef.resize$.subscribe(() => {\n      this.positionPopover();\n    });\n\n    this.routeChangeSub = this.router.events\n      .pipe(filter((event) => event instanceof NavigationStart))\n      .subscribe(() => {\n        this.eventSubject.next(PopoverEvent.ROUTE_CHANGE);\n      });\n\n    if (this.positionOnScroll) {\n      this.triggerScrollEvent();\n    }\n  }\n\n  ngAfterViewChecked(): void {\n    this.positionPopover();\n  }\n\n  ngOnDestroy(): void {\n    if (this.resizeSub) {\n      this.resizeSub.unsubscribe();\n    }\n\n    if (this.routeChangeSub) {\n      this.routeChangeSub.unsubscribe();\n    }\n\n    if (this.scrollEventUnlistener) {\n      this.scrollEventUnlistener();\n    }\n  }\n\n  constructor(\n    protected positioningService: PositioningService,\n    protected winRef: WindowRef,\n    protected changeDetectionRef: ChangeDetectorRef,\n    protected renderer: Renderer2,\n    protected router: Router\n  ) {}\n}\n","<div class=\"arrow\"></div>\n<div class=\"popover-body\" [cxFocus]=\"focusConfig\">\n  <div class=\"cx-close-row\">\n    <button\n      *ngIf=\"displayCloseButton\"\n      type=\"button\"\n      class=\"close\"\n      (keydown.enter)=\"close($event)\"\n      (keydown.space)=\"close($event)\"\n      (click)=\"close($event)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n  <ng-container *ngIf=\"isTemplate\">\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n  </ng-container>\n  <span *ngIf=\"!isTemplate\">{{ content }}</span>\n</div>\n","import { ElementRef, Injectable } from '@angular/core';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/keyboard-focus.model';\nimport { PopoverEvent } from './popover.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PopoverService {\n  /**\n   * For a11y improvements method returns different `FocusConfig`\n   * based on which event popover was triggered.\n   */\n  getFocusConfig(event: PopoverEvent, appendToBody: boolean): FocusConfig {\n    let config = {};\n\n    if (event === PopoverEvent.OPEN_BY_KEYBOARD && appendToBody) {\n      config = {\n        trap: true,\n        block: true,\n        focusOnEscape: false,\n        autofocus: true,\n      };\n    }\n\n    return config;\n  }\n\n  setFocusOnElement(\n    element: ElementRef,\n    focusConfig: FocusConfig,\n    appendToBody?: boolean\n  ) {\n    if (focusConfig && appendToBody) {\n      element.nativeElement.focus();\n    }\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  Input,\n  TemplateRef,\n  ViewContainerRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Renderer2,\n  ChangeDetectorRef,\n  Output,\n  EventEmitter,\n  HostListener,\n  OnInit,\n} from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { Subject } from 'rxjs';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/keyboard-focus.model';\nimport { PopoverComponent } from './popover.component';\nimport { PopoverEvent, PopoverOptions } from './popover.model';\nimport { PopoverService } from './popover.service';\n\n/**\n * Directive to bind popover with any DOM element.\n */\n@Directive({\n  selector: '[cxPopover]',\n})\nexport class PopoverDirective implements OnInit {\n  /**\n   * Template or string to be rendered inside popover wrapper component.\n   */\n  @Input() cxPopover: string | TemplateRef<any>;\n\n  /**\n   * Options set for popover component.\n   */\n  @Input() cxPopoverOptions?: PopoverOptions;\n\n  /**\n   * An event emitted when the popover is opened.\n   */\n  @Output() openPopover: EventEmitter<void> = new EventEmitter();\n\n  /**\n   * An event emitted when the popover is closed.\n   */\n  @Output() closePopover: EventEmitter<void> = new EventEmitter();\n\n  /**\n   * Flag used to inform about current state of popover component.\n   * Popover is closed by default, so value is set to false.\n   */\n  isOpen: boolean;\n\n  /**\n   * Popover component instance.\n   */\n  popoverContainer: ComponentRef<PopoverComponent>;\n\n  /**\n   * Configuration for a11y improvements.\n   */\n  focusConfig: FocusConfig;\n\n  /**\n   * Subject which emits specific type of `PopoverEvent`.\n   */\n  eventSubject: Subject<PopoverEvent> = new Subject<PopoverEvent>();\n\n  /**\n   * Listen events fired on element binded to popover directive.\n   *\n   * Based on event type some a11y improvements can be made.\n   * For example if popover was opened by `space` or `enter` key\n   * dedicated `FocusConfig` can be set to autofocus first\n   * focusable element in popover container.\n   */\n  @HostListener('keydown.enter', ['$event'])\n  @HostListener('keydown.space', ['$event'])\n  handlePress(event: KeyboardEvent): void {\n    event?.preventDefault();\n    if (event?.target === this.element.nativeElement && !this.isOpen) {\n      this.eventSubject.next(PopoverEvent.OPEN_BY_KEYBOARD);\n    } else if (this.isOpen) {\n      this.eventSubject.next(PopoverEvent.CLOSE_BUTTON_KEYDOWN);\n    }\n  }\n\n  @HostListener('keydown.tab')\n  @HostListener('keydown.shift.tab')\n  handleTab(): void {\n    if (!this.focusConfig?.trap && this.isOpen) {\n      this.eventSubject.next(PopoverEvent.CLOSE_BUTTON_KEYDOWN);\n    }\n  }\n\n  @HostListener('keydown.escape')\n  handleEscape(): void {\n    this.eventSubject.next(PopoverEvent.ESCAPE_KEYDOWN);\n  }\n\n  @HostListener('click', ['$event'])\n  handleClick(event: MouseEvent): void {\n    event?.preventDefault();\n    if (event?.target === this.element.nativeElement && !this.isOpen) {\n      this.eventSubject.next(PopoverEvent.OPEN);\n    } else if (this.isOpen) {\n      this.eventSubject.next(PopoverEvent.CLOSE_BUTTON_CLICK);\n    }\n  }\n\n  protected openTriggerEvents: PopoverEvent[] = [\n    PopoverEvent.OPEN,\n    PopoverEvent.OPEN_BY_KEYBOARD,\n  ];\n\n  protected focusPopoverTriggerEvents: PopoverEvent[] = [\n    PopoverEvent.OPEN_BY_KEYBOARD,\n  ];\n\n  protected closeTriggerEvents: PopoverEvent[] = [\n    PopoverEvent.ROUTE_CHANGE,\n    PopoverEvent.ESCAPE_KEYDOWN,\n    PopoverEvent.OUTSIDE_CLICK,\n    PopoverEvent.CLOSE_BUTTON_KEYDOWN,\n    PopoverEvent.CLOSE_BUTTON_CLICK,\n  ];\n\n  protected focusDirectiveTriggerEvents: PopoverEvent[] = [\n    PopoverEvent.ESCAPE_KEYDOWN,\n    PopoverEvent.CLOSE_BUTTON_KEYDOWN,\n  ];\n\n  /**\n   * Method performs open action for popover component.\n   */\n  open(event: PopoverEvent) {\n    if (!this.cxPopoverOptions?.disable) {\n      this.isOpen = true;\n      this.focusConfig = this.popoverService.getFocusConfig(\n        event,\n        this.cxPopoverOptions?.appendToBody || false\n      );\n      this.renderPopover();\n      this.openPopover.emit();\n    }\n  }\n\n  /**\n   * Method performs close action for popover component.\n   */\n  close() {\n    this.isOpen = false;\n    this.viewContainer.clear();\n    this.closePopover.emit();\n  }\n\n  /**\n   * Method subscribes for events emitted by popover component\n   * and based on event performs specific action.\n   */\n  handlePopoverEvents() {\n    this.eventSubject.subscribe((event: PopoverEvent) => {\n      if (this.openTriggerEvents.includes(event)) {\n        this.open(event);\n      }\n      if (this.focusPopoverTriggerEvents.includes(event)) {\n        this.popoverContainer.location.nativeElement.focus();\n      }\n      if (this.closeTriggerEvents.includes(event)) {\n        this.close();\n      }\n      if (this.focusDirectiveTriggerEvents.includes(event)) {\n        this.popoverService.setFocusOnElement(\n          this.element,\n          this.focusConfig,\n          this.cxPopoverOptions?.appendToBody\n        );\n      }\n    });\n  }\n\n  /**\n   * Method creates instance and pass parameters to popover component.\n   */\n  renderPopover() {\n    const containerFactory =\n      this.componentFactoryResolver.resolveComponentFactory(PopoverComponent);\n    this.popoverContainer =\n      this.viewContainer.createComponent(containerFactory);\n\n    const componentInstance = this.popoverContainer.instance;\n    if (componentInstance) {\n      componentInstance.content = this.cxPopover;\n      componentInstance.triggerElement = this.element;\n      componentInstance.popoverInstance = this.popoverContainer;\n      componentInstance.focusConfig = this.focusConfig;\n      componentInstance.eventSubject = this.eventSubject;\n      componentInstance.position = this.cxPopoverOptions?.placement;\n      componentInstance.customClass = this.cxPopoverOptions?.class;\n      componentInstance.appendToBody = this.cxPopoverOptions?.appendToBody;\n      componentInstance.positionOnScroll =\n        this.cxPopoverOptions?.positionOnScroll;\n      componentInstance.displayCloseButton =\n        this.cxPopoverOptions?.displayCloseButton;\n      componentInstance.autoPositioning =\n        this.cxPopoverOptions?.autoPositioning;\n\n      if (this.cxPopoverOptions?.appendToBody) {\n        this.renderer.appendChild(\n          this.winRef.document.body,\n          this.popoverContainer.location.nativeElement\n        );\n      }\n\n      this.popoverContainer.changeDetectorRef.detectChanges();\n    }\n  }\n\n  ngOnInit() {\n    this.handlePopoverEvents();\n  }\n\n  constructor(\n    protected element: ElementRef,\n    protected viewContainer: ViewContainerRef,\n    protected componentFactoryResolver: ComponentFactoryResolver,\n    protected renderer: Renderer2,\n    protected changeDetectorRef: ChangeDetectorRef,\n    protected popoverService: PopoverService,\n    protected winRef: WindowRef\n  ) {}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nconst defaultLimit = 20;\n\n@Pipe({\n  name: 'cxTruncate',\n})\nexport class TruncatePipe implements PipeTransform {\n  /**\n   * example usage {{ exampleString | cxTruncate: [1, ''] }}\n   */\n  transform(value: string, args?: [number, string?]): string {\n    if (!args) {\n      return value;\n    }\n\n    let trail = '...';\n\n    const limit =\n      args.length > 0 && args[0] && Number.isInteger(+args[0])\n        ? args[0]\n        : defaultLimit;\n\n    if (args.length > 1 && args[1] !== undefined) {\n      trail = args[1];\n    }\n\n    return value.length > limit ? value.substring(0, limit) + trail : value;\n  }\n}\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\n\n@Component({\n  selector: 'cx-truncate-text-popover',\n  templateUrl: './truncate-text-popover.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TruncateTextPopoverComponent {\n  /**\n   * String to be rendered inside popover wrapper component.\n   */\n  @Input() content: string;\n\n  /**\n   * The maximum length of the characters after which the text will be truncated\n   */\n  @Input() charactersLimit: number = 100;\n\n  get isTruncated(): boolean {\n    return this.content.length > +this.charactersLimit;\n  }\n}\n","<ng-container>\n  <ng-container>\n    <span class=\"truncated-text\">\n      {{ content | cxTruncate: [charactersLimit] }}\n    </span>\n  </ng-container>\n\n  <ng-template #fullText>\n    {{ content }}\n  </ng-template>\n\n  <button\n    *ngIf=\"isTruncated\"\n    [cxPopover]=\"fullText\"\n    [cxPopoverOptions]=\"{\n      placement: 'auto',\n      appendToBody: true,\n      displayCloseButton: true\n    }\"\n    class=\"ml-1 link cx-action-link\"\n  >\n    {{ 'common.more' | cxTranslate }}\n  </button>\n</ng-container>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\n\nexport interface CardAction {\n  event: string;\n  name: string;\n}\n\nexport interface CardLinkAction {\n  link: string;\n  name: string;\n}\n\nexport interface Card {\n  header?: string;\n  title?: string;\n  textBold?: string;\n  text?: Array<string>;\n  paragraphs?: Array<{ title?: string; text?: Array<string> }>;\n  img?: string;\n  actions?: Array<CardAction | CardLinkAction>;\n  deleteMsg?: string;\n}\n\n@Component({\n  selector: 'cx-card',\n  templateUrl: './card.component.html',\n})\nexport class CardComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  @Output()\n  deleteCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  setDefaultCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  sendCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  editCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  cancelCard: EventEmitter<number> = new EventEmitter();\n\n  @Input()\n  border = false;\n\n  @Input()\n  editMode = false;\n\n  @Input()\n  isDefault = false;\n\n  @Input()\n  content: Card;\n\n  @Input()\n  fitToContainer = false;\n\n  @Input()\n  truncateText = false;\n\n  @Input()\n  charactersLimit = 100;\n\n  // ACTIONS\n\n  setEditMode(): void {\n    this.editMode = true;\n  }\n\n  cancelEdit(): void {\n    this.editMode = false;\n    this.cancelCard.emit(5);\n  }\n\n  delete(): void {\n    this.deleteCard.emit(1);\n  }\n\n  setDefault(): void {\n    this.isDefault = true;\n    this.setDefaultCard.emit(2);\n  }\n\n  send(): void {\n    this.sendCard.emit(3);\n  }\n\n  edit(): void {\n    this.editCard.emit(4);\n  }\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div\n  *ngIf=\"content\"\n  class=\"cx-card\"\n  [class.cx-card-border]=\"border\"\n  [class.cx-card-fit-to-container]=\"fitToContainer\"\n>\n  <!-- Card Header -->\n  <div *ngIf=\"content.header && !editMode\" class=\"card-header\">\n    {{ content.header }}\n  </div>\n  <!-- Card Body -->\n  <div class=\"card-body cx-card-body\" [class.cx-card-delete]=\"editMode\">\n    <!-- Edit message -->\n    <div *ngIf=\"editMode\" class=\"cx-card-delete-msg\">\n      {{ content.deleteMsg }}\n    </div>\n    <!-- Card title -->\n    <h3 *ngIf=\"content.title\" class=\"cx-card-title\">\n      {{ content.title }}\n    </h3>\n    <!-- Card Content -->\n    <div class=\"cx-card-container\">\n      <!-- Card Label -->\n      <div class=\"cx-card-label-container\">\n        <div *ngIf=\"content.textBold\" class=\"cx-card-label-bold\">\n          {{ content.textBold }}\n        </div>\n        <div *ngFor=\"let line of content.text\">\n          <div *ngIf=\"!truncateText; else truncate\" class=\"cx-card-label\">\n            {{ line }}\n          </div>\n\n          <ng-template #truncate>\n            <cx-truncate-text-popover\n              [charactersLimit]=\"charactersLimit\"\n              [content]=\"line\"\n            ></cx-truncate-text-popover>\n          </ng-template>\n        </div>\n        <div class=\"cx-card-paragraph\" *ngFor=\"let item of content.paragraphs\">\n          <div class=\"cx-card-paragraph-title\">{{ item.title }}</div>\n          <div *ngFor=\"let text of item.text\">\n            <div class=\"cx-card-paragraph-text\">\n              {{ text }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Image -->\n      <div *ngIf=\"content.img\" class=\"cx-card-img-container\">\n        <cx-icon [type]=\"content.img\"></cx-icon>\n      </div>\n    </div>\n    <!-- Edit Mode Actions -->\n    <div *ngIf=\"editMode\" class=\"row cx-card-body-delete\">\n      <div class=\"col-md-6\">\n        <button class=\"btn btn-block btn-secondary\" (click)=\"cancelEdit()\">\n          {{ 'common.cancel' | cxTranslate }}\n        </button>\n      </div>\n      <div class=\"col-md-6\">\n        <button class=\"btn btn-block btn-primary\" (click)=\"delete()\">\n          {{ 'common.delete' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <!-- Actions -->\n    <div *ngIf=\"content.actions && !editMode\" class=\"cx-card-actions\">\n      <div *ngFor=\"let action of content.actions\">\n        <div [ngSwitch]=\"action.event\">\n          <a\n            *ngSwitchCase=\"'delete'\"\n            class=\"cx-card-link card-link btn-link cx-action-link\"\n            (click)=\"delete()\"\n            (keydown.enter)=\"delete()\"\n            tabindex=\"0\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchCase=\"'default'\"\n            class=\"cx-card-link card-link btn-link cx-action-link\"\n            (click)=\"setDefault()\"\n            (keydown.enter)=\"setDefault()\"\n            tabindex=\"0\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchCase=\"'send'\"\n            class=\"cx-card-link card-link btn-link cx-action-link\"\n            (click)=\"send()\"\n            (keydown.enter)=\"send()\"\n            tabindex=\"0\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchCase=\"'edit'\"\n            class=\"cx-card-link card-link btn-link cx-action-link\"\n            (click)=\"edit()\"\n            (keydown.enter)=\"edit()\"\n            tabindex=\"0\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchDefault\n            href=\"{{ action.link }}\"\n            class=\"card-link btn-link cx-action-link\"\n            tabindex=\"0\"\n            >{{ action.name }}</a\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { PopoverComponent } from './popover.component';\nimport { PopoverDirective } from './popover.directive';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, KeyboardFocusModule, IconModule],\n  declarations: [PopoverDirective, PopoverComponent],\n  exports: [PopoverDirective, PopoverComponent],\n})\nexport class PopoverModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { PopoverModule } from '../popover/popover.module';\nimport { TruncateTextPopoverComponent } from './truncate-text-popover.component';\nimport { TruncatePipe } from './truncate.pipe';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, PopoverModule],\n  declarations: [TruncateTextPopoverComponent, TruncatePipe],\n  exports: [TruncateTextPopoverComponent, TruncatePipe],\n})\nexport class TruncateTextPopoverModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { TruncateTextPopoverModule } from '../truncate-text-popover/truncate-text-popover.module';\nimport { CardComponent } from './card.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, IconModule, TruncateTextPopoverModule],\n  declarations: [CardComponent],\n  exports: [CardComponent],\n})\nexport class CardModule {}\n","import { Injectable } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CarouselService {\n  constructor(private winRef: WindowRef) {}\n\n  /**\n   * The number of items per slide is calculated by the help of\n   * the item width and the available width of the host element.\n   * This appoach makes it possible to place the carousel in different\n   * layouts. Instead of using the page breakpoints, the host size is\n   * taken into account.\n   *\n   * Since there's no element resize API available, we use the\n   * window `resize` event, so that we can adjust the number of items\n   * whenever the window got resized.\n   */\n  getItemsPerSlide(\n    nativeElement: HTMLElement,\n    itemWidth: string\n  ): Observable<number> {\n    return this.winRef.resize$.pipe(\n      map(() => (nativeElement as HTMLElement).clientWidth),\n      map((totalWidth) => this.calculateItems(totalWidth, itemWidth))\n    );\n  }\n\n  /**\n   * Calculates the number of items per given hostSize.  calculated based on the given\n   * intended size in pixels or percentages. The\n   *\n   * @param availableWidth The available width in pixels for the carousel items.\n   * @param itemWidth The width per carousel item, in px or percentage.\n   */\n  private calculateItems(availableWidth: number, itemWidth: string) {\n    let calculatedItems = 0;\n    if (itemWidth.endsWith('px')) {\n      const num = itemWidth.substring(0, itemWidth.length - 2);\n      calculatedItems = availableWidth / <number>(<any>num);\n    }\n\n    if (itemWidth.endsWith('%')) {\n      const perc = itemWidth.substring(0, itemWidth.length - 1);\n      calculatedItems =\n        availableWidth / (availableWidth * (<number>(<any>perc) / 100));\n    }\n\n    return Math.floor(calculatedItems) || 1;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Input,\n  isDevMode,\n  OnInit,\n  TemplateRef,\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\nimport { CarouselService } from './carousel.service';\n\n/**\n * Generic carousel component that can be used to render any carousel items,\n * such as products, images, banners, or any component. Carousel items are\n * rendered in so-called carousel slides, and the previous/next buttons as well as\n * the indicator-buttons can used to navigate the slides.\n *\n * The component uses an array of Observables (`items$`) as an input, to allow\n * for lazy loading of items.\n *\n * The number of items per slide is calculated with the `itemWidth`, which can given\n * in pixels or percentage.\n *\n * To allow for flexible rendering of items, the rendering is delegated to the\n * given `template`. This allows for maximum flexibility.\n */\n@Component({\n  selector: 'cx-carousel',\n  templateUrl: './carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CarouselComponent implements OnInit {\n  /**\n   * The title is rendered as the carousel heading.\n   */\n  @Input() title: string;\n\n  /**\n   * The items$ represent the carousel items. The items$ are\n   * observables so that the items can be loaded on demand.\n   */\n  items: Observable<any>[];\n  @Input('items')\n  set setItems(inputItems: Observable<any>[]) {\n    this.items = inputItems;\n    //Reset slider when changing products\n    this.activeSlide = 0;\n  }\n\n  /**\n   * The template is rendered for each item, so that the actual\n   * view can be given by the compoent that uses the `CarouselComponent`.\n   */\n  @Input() template: TemplateRef<any>;\n\n  /**\n   * Specifies the minimum size of the carousel item, either in px or %.\n   * This value is used for the calculation of numbers per carousel, so that\n   * the number of carousel items is dynamic. The calculation uses the `itemWidth`\n   * and the host element `clientWidth`, so that the carousel is reusable in\n   * different layouts (for example in a 50% grid).\n   */\n  @Input() itemWidth = '300px';\n\n  /**\n   * Indicates whether the visual indicators are used.\n   */\n  @Input() hideIndicators = false;\n\n  @Input() indicatorIcon = ICON_TYPE.CIRCLE;\n  @Input() previousIcon = ICON_TYPE.CARET_LEFT;\n  @Input() nextIcon = ICON_TYPE.CARET_RIGHT;\n\n  activeSlide: number;\n  size$: Observable<number>;\n\n  constructor(protected el: ElementRef, protected service: CarouselService) {}\n\n  ngOnInit() {\n    if (!this.template && isDevMode()) {\n      console.error(\n        'No template reference provided to render the carousel items for the `cx-carousel`'\n      );\n      return;\n    }\n    this.size$ = this.service\n      .getItemsPerSlide(this.el.nativeElement, this.itemWidth)\n      .pipe(tap(() => (this.activeSlide = 0)));\n  }\n\n  getSlideNumber(size: number, currentIndex: number): number {\n    let normalizedCurrentIndex = currentIndex + 1;\n    return Math.ceil(normalizedCurrentIndex / size);\n  }\n}\n","<ng-container *ngIf=\"items?.length > 0 && (size$ | async) as size\">\n  <h2 *ngIf=\"title\">{{ title }}</h2>\n\n  <div class=\"carousel-panel\" [ngClass]=\"'size-' + size\">\n    <button\n      *ngIf=\"size < items.length\"\n      class=\"previous\"\n      (click)=\"activeSlide = activeSlide - size\"\n      [disabled]=\"activeSlide === 0\"\n      [attr.aria-label]=\"'carousel.previousSlide' | cxTranslate\"\n    >\n      <cx-icon [type]=\"previousIcon\"></cx-icon>\n    </button>\n\n    <div class=\"slides\">\n      <ng-container *ngFor=\"let _ of items; let i = index\">\n        <div\n          class=\"slide\"\n          *ngIf=\"i % size === 0\"\n          [class.active]=\"i === activeSlide\"\n        >\n          <ng-container\n            *ngFor=\"let item of items | slice: i:i + size; let j = index\"\n          >\n            <div\n              *ngIf=\"item | async as data\"\n              class=\"item\"\n              [class.active]=\"i === activeSlide\"\n            >\n              <ng-container\n                *ngTemplateOutlet=\"template; context: { item: data }\"\n              ></ng-container>\n            </div>\n          </ng-container>\n        </div>\n      </ng-container>\n    </div>\n\n    <button\n      *ngIf=\"size < items.length\"\n      class=\"next\"\n      (click)=\"activeSlide = activeSlide + size\"\n      tabindex=\"-1\"\n      [disabled]=\"activeSlide > items.length - size - 1\"\n      [attr.aria-label]=\"'carousel.nextSlide' | cxTranslate\"\n    >\n      <cx-icon [type]=\"nextIcon\"></cx-icon>\n    </button>\n  </div>\n\n  <div *ngIf=\"!hideIndicators && size < items.length\" class=\"indicators\">\n    <ng-container *ngFor=\"let _ of items; let i = index\">\n      <button\n        *ngIf=\"i % size === 0\"\n        (focus)=\"activeSlide = i\"\n        [disabled]=\"i === activeSlide\"\n        [attr.aria-label]=\"\n          'carousel.slideNumber'\n            | cxTranslate: { currentSlideNumber: getSlideNumber(size, i) }\n        \"\n        tabindex=\"-1\"\n      >\n        <cx-icon [type]=\"indicatorIcon\" aria-hidden=\"true\"></cx-icon>\n      </button>\n    </ng-container>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { MediaComponent } from './media.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [MediaComponent],\n  exports: [MediaComponent],\n})\nexport class MediaModule {\n  static forRoot(): ModuleWithProviders<MediaModule> {\n    return {\n      ngModule: MediaModule,\n    };\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/index';\nimport { MediaModule } from '../media/media.module';\nimport { CarouselComponent } from './carousel.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    IconModule,\n    MediaModule,\n    UrlModule,\n    I18nModule,\n  ],\n  declarations: [CarouselComponent],\n  exports: [CarouselComponent],\n})\nexport class CarouselModule {}\n","import { Injectable } from '@angular/core';\n\n/**\n * Service that provides the placeholder and input pattern for date pickers. This is\n * used in Spartacus to support browser that won't support the native html5 date picker\n * using `<input type=\"date\">`.\n *\n * While the placeholder is configurable, you should be aware that the placeholder format\n * defaults to `yyyy-mm-dd` to align with Safaris limited support of ISO 8601.\n * Another consideration is the support of date formats in the backend. In case you change\n * this format, you might need to serialize the date to the supported date format in the\n * backend.\n *\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DatePickerService {\n  get placeholder(): string {\n    return 'yyyy-mm-dd';\n  }\n\n  /**\n   * The default date pattern is based on the placeholder string;\n   */\n  get pattern(): string {\n    return this.placeholder\n      .replace('yyyy', '\\\\d{4}')\n      .replace('mm', '\\\\d{1,2}')\n      .replace('dd', '\\\\d{1,2}');\n  }\n\n  /**\n   * Validates if the string based date value is a valid date.\n   */\n  isValidFormat(date: string, pattern?: string): boolean {\n    const patternRegex = new RegExp(`^${pattern ?? this.pattern}$`);\n    return patternRegex.test(date);\n  }\n\n  /**\n   * Since Safari doesn't support proper date formats (ISO 8601), we need to do this\n   * ourselves. We cannot rely on `new Date('2020-1-1')`. This will fail, only\n   * `new Date('2020-01-01')` works.\n   */\n  getDate(value: string): Date {\n    if (!value) {\n      return;\n    }\n\n    const delimiter = this.placeholder\n      .replace('yyyy', '')\n      .replace('mm', '')\n      .replace('dd', '')\n      .substr(0, 1);\n\n    const dateParts = value.split(delimiter);\n\n    const placeholderParts = this.placeholder.split(delimiter);\n\n    const y = placeholderParts.indexOf('yyyy');\n    const m = placeholderParts.indexOf('mm');\n    const d = placeholderParts.indexOf('dd');\n\n    return new Date(\n      Number(dateParts[y]),\n      Number(dateParts[m]) - 1,\n      Number(dateParts[d])\n    );\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  HostBinding,\n  Input,\n} from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { isObject } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\n\n/**\n * Renders translated form errors for a given form control, based on its `errors` property.\n *\n * The translation key consists of the optional input `prefix`\n * concatenated with the error key.\n *\n * And the translation params object consist of the error details\n * (if only it's an object) merged with the optional input object `translationParams`.\n */\n@Component({\n  selector: 'cx-form-errors',\n  templateUrl: './form-errors.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FormErrorsComponent {\n  _control: FormControl;\n\n  /**\n   * @deprecated since 4.1 - use `errorsDetails$` instead, which contains not only\n   *                         the error key, but also the error details\n   */\n  errors$: Observable<string[]>;\n\n  /**\n   * Emits an array of errors, each represented by a tuple:\n   * the error key and error details.\n   */\n  errorsDetails$: Observable<Array<[string, string]>>;\n\n  /**\n   * Prefix prepended to the translation key.\n   */\n  @Input() prefix = 'formErrors';\n\n  /**\n   * Translation params to enrich the error details object.\n   */\n  @Input()\n  translationParams: { [key: string]: string };\n\n  @Input()\n  set control(control: FormControl) {\n    this._control = control;\n\n    this.errorsDetails$ = control?.statusChanges.pipe(\n      startWith({}),\n      map(() => control.errors || {}),\n      map((errors) =>\n        Object.entries(errors).filter(([_key, details]) => details)\n      )\n    );\n\n    this.errors$ = this.errorsDetails$.pipe(\n      map((errors) => errors.map(([key, _details]) => key))\n    );\n  }\n\n  get control(): FormControl {\n    return this._control;\n  }\n\n  /**\n   * Returns translation params composed of\n   * the argument `errorDetails` (if only is an object) merged with\n   * the component input object `translationParams`.\n   *\n   * In case of a conflicting object key, the value from\n   * `translationParams` takes precedence.\n   */\n  getTranslationParams(errorDetails?: any): object {\n    errorDetails = isObject(errorDetails) ? errorDetails : {};\n    return { ...errorDetails, ...this.translationParams };\n  }\n\n  @HostBinding('class.control-invalid') get invalid() {\n    return this.control?.invalid;\n  }\n  @HostBinding('class.control-dirty') get dirty() {\n    return this.control?.dirty;\n  }\n  @HostBinding('class.control-touched') get touched() {\n    return this.control?.touched;\n  }\n}\n","<p *ngFor=\"let error of errorsDetails$ | async\">\n  {{ prefix + '.' + error[0] | cxTranslate: getTranslationParams(error[1]) }}\n</p>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { DatePickerService } from './date-picker.service';\n\n/**\n * Component that adds a date control. While the native date picker works in most\n * modern browsers, some browsers need more guidance (placeholder), validation and\n * date conversion.\n *\n * The data picker supports (optional) min and max form controls, so that you can\n * limit the start and/or end date.\n *\n * Most of the implementation is done in the `DatePickerFallbackDirective`.\n */\n@Component({\n  selector: 'cx-date-picker',\n  templateUrl: './date-picker.component.html',\n  // we cannot use onPush change detection as the form state isn't updated without explicit\n  // change detection, see https://github.com/angular/angular/issues/10816\n})\nexport class DatePickerComponent {\n  constructor(protected service: DatePickerService) {}\n  @Input() control: FormControl;\n  @Input() min?: string;\n  @Input() max?: string;\n\n  @Output() update: EventEmitter<void> = new EventEmitter();\n\n  change() {\n    this.update.emit();\n  }\n\n  get placeholder() {\n    return this.service.placeholder;\n  }\n\n  get pattern() {\n    return this.service.pattern;\n  }\n\n  /**\n   * Only returns the date if we have a valid format. We do this to avoid\n   * loads of console errors coming from the datePipe while the user is typing\n   * (in those browsers where the date picker isn't supported).\n   */\n\n  getDate(date: string): string {\n    return this.service.isValidFormat(date) ? date : null;\n  }\n}\n","<input\n  class=\"form-control\"\n  type=\"date\"\n  [formControl]=\"control\"\n  [attr.min]=\"min\"\n  [attr.max]=\"max\"\n  (change)=\"change()\"\n  [placeholder]=\"placeholder\"\n  [pattern]=\"pattern\"\n/>\n<cx-form-errors\n  aria-live=\"assertive\"\n  aria-atomic=\"true\"\n  [control]=\"control\"\n  prefix=\"formErrors.date\"\n  [translationParams]=\"{\n    max: getDate(max) | cxDate,\n    min: getDate(min) | cxDate\n  }\"\n></cx-form-errors>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormErrorsComponent } from './form-errors.component';\nimport { I18nModule } from '@spartacus/core';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [FormErrorsComponent],\n  exports: [FormErrorsComponent],\n})\nexport class FormErrorsModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { I18nModule } from '@spartacus/core';\nimport { FormErrorsModule } from '../form-errors/form-errors.module';\nimport { DatePickerComponent } from './date-picker.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, FormErrorsModule, I18nModule],\n  declarations: [DatePickerComponent],\n  exports: [DatePickerComponent],\n})\nexport class DatePickerModule {}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n/**\n * Component that adds a file upload control.\n */\n@Component({\n  selector: 'cx-file-upload',\n  templateUrl: './file-upload.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FileUploadComponent),\n      multi: true,\n    },\n  ],\n  // we cannot use onPush change detection as the form state isn't updated without explicit\n  // change detection, see https://github.com/angular/angular/issues/10816\n})\nexport class FileUploadComponent implements ControlValueAccessor {\n  /**\n   * Allowed file types. It's setting attribute used for OS window for choosing files.\n   */\n  @Input() accept?: string | string[] = '*';\n  /**\n   * Allows selecting multiple files.\n   */\n  @Input() multiple?: boolean = false;\n\n  // TODO: remove this event. Now it's used only to trigger some logic in the parent component.\n  // Prerequisites (changes in the parent component):\n  // - use an async validator that \"opens file\" using the value of the form control\n  // - \"open file\" on form submit, but not on the form control change\n  @Output()\n  update = new EventEmitter<FileList | null>();\n\n  @ViewChild('fileInput', { static: true })\n  protected fileInput: ElementRef<HTMLInputElement>;\n\n  selectFile($event: Event) {\n    const files = ($event.target as HTMLInputElement)?.files;\n    this.onChangeCallback(files);\n    this.update.emit(files);\n  }\n\n  get selectedFiles(): File[] | undefined {\n    return Array.from(this.fileInput.nativeElement.files);\n  }\n\n  // ControlValueAccessor START\n  protected onChangeCallback: Function = () => {};\n  protected onTouchedCallback: Function = () => {};\n  registerOnChange(callback: Function): void {\n    this.onChangeCallback = callback;\n  }\n  registerOnTouched(callback: Function): void {\n    this.onTouchedCallback = callback;\n  }\n  setDisabledState(disabled: boolean): void {\n    this.fileInput.nativeElement.disabled = disabled;\n  }\n  writeValue(value: any): void {\n    if (value instanceof FileList) {\n      this.fileInput.nativeElement.files = value;\n    }\n  }\n  // ControlValueAccessor END\n}\n","<input\n  type=\"file\"\n  aria-hidden=\"true\"\n  [accept]=\"accept\"\n  [multiple]=\"multiple\"\n  (change)=\"selectFile($event)\"\n  #fileInput\n/>\n<button\n  [attr.aria-label]=\"'common.selectFile' | cxTranslate\"\n  class=\"btn btn-action\"\n  type=\"button\"\n  (click)=\"fileInput.click()\"\n>\n  <ng-content></ng-content>\n</button>\n<p *ngFor=\"let file of selectedFiles\">\n  {{ file?.name }}\n</p>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { I18nModule } from '@spartacus/core';\nimport { FormErrorsModule } from '../form-errors/form-errors.module';\nimport { FileUploadComponent } from './file-upload.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, FormErrorsModule, I18nModule],\n  declarations: [FileUploadComponent],\n  exports: [FileUploadComponent],\n})\nexport class FileUploadModule {}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GenericLinkComponentService {\n  /**\n   * Pattern matching string starting with `http://` or `https://`.\n   */\n  protected HTTP_PROTOCOL_REGEX: RegExp = /^https?:\\/\\//i;\n\n  /**\n   * Pattern matching string starting with `mailto:`.\n   */\n  protected MAILTO_PROTOCOL_REGEX: RegExp = /^mailto:/i;\n\n  /**\n   * Pattern matching string starting with `tel:`.\n   */\n  protected TEL_PROTOCOL_REGEX: RegExp = /^tel:/i;\n\n  /**\n   * Returns true when the @Input `url` is a string starting with `http://`, `https://`, `mailto:`, `tel:`.\n   */\n  isExternalUrl(url: string | any[]): boolean {\n    return (\n      typeof url === 'string' &&\n      (this.HTTP_PROTOCOL_REGEX.test(url) ||\n        this.MAILTO_PROTOCOL_REGEX.test(url) ||\n        this.TEL_PROTOCOL_REGEX.test(url))\n    );\n  }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { Params, Router } from '@angular/router';\nimport { GenericLinkComponentService } from './generic-link-component.service';\n\n// private\ninterface RouteParts {\n  /** Path in the Angular-like array format */\n  path?: string[];\n\n  /** Query params */\n  queryParams?: Params;\n\n  /** Hash fragment */\n  fragment?: string;\n}\n\n/**\n * This component navigates using [routerLink] attribute when input 'url' is a relative url. Otherwise (when it's absolute), [href] is used.\n */\n@Component({\n  selector: 'cx-generic-link',\n  templateUrl: './generic-link.component.html',\n})\nexport class GenericLinkComponent implements OnChanges {\n  /**\n   * Pattern matching string starting with `http://` or `https://`.\n   */\n  private readonly PROTOCOL_REGEX: RegExp = /^https?:\\/\\//i;\n\n  /**\n   * Pattern matching string starting with `mailto:`.\n   */\n  protected MAILTO_PROTOCOL_REGEX: RegExp = /^mailto:/i;\n\n  /**\n   * Pattern matching string starting with `tel:`.\n   */\n  protected TEL_PROTOCOL_REGEX: RegExp = /^tel:/i;\n\n  /**\n   * @deprecated since version 5.0\n   * Use the following constructor instead:\n   * ```\n   * constructor(\n   *   protected router: Router,\n   *   protected service?: GenericLinkComponentService\n   * )\n   * ```\n   */\n  constructor(router: Router);\n  constructor(\n    protected router: Router,\n    protected service?: GenericLinkComponentService\n  ) {}\n\n  /**\n   * Used to split url into 2 parts:\n   * 1. the path\n   * 2. query params + hash fragment\n   */\n  private readonly URL_SPLIT = /(^[^#?]*)(.*)/;\n\n  /**\n   * Parsed parts of the @Input `url`, when it's a local URL.\n   * It should not be used when the `url` is external.\n   * @see `url`\n   */\n  private routeParts: RouteParts = {};\n\n  @Input() url: string | any[];\n  @Input() target: string | null;\n  @Input() id: string;\n  @Input() class: string;\n  @Input() style: string;\n  @Input() title: string;\n\n  isExternalUrl(): boolean {\n    return (\n      this.service?.isExternalUrl(this.url) ||\n      (typeof this.url === 'string' &&\n        (this.PROTOCOL_REGEX.test(this.url) ||\n          this.MAILTO_PROTOCOL_REGEX.test(this.url) ||\n          this.TEL_PROTOCOL_REGEX.test(this.url)))\n    );\n  }\n\n  get rel() {\n    return this.target === '_blank' ? 'noopener' : null;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['url']) {\n      this.setUrlParts(changes['url'].currentValue);\n    }\n  }\n\n  /**\n   * The part with the path of the local url.\n   */\n  get routerUrl(): any[] {\n    return this.routeParts.path;\n  }\n\n  /**\n   * The part with the query params of the local url.\n   */\n  get queryParams(): Params {\n    return this.routeParts.queryParams;\n  }\n\n  /**\n   * The part with the hash fragment of the local url.\n   */\n  get fragment(): string {\n    return this.routeParts.fragment;\n  }\n\n  /**\n   * Parses the given url and sets the property `urlParts` accordingly.\n   */\n  private setUrlParts(url: string | any[]) {\n    if (typeof url === 'string') {\n      url = this.getAbsoluteUrl(url); // string links in CMS sometimes don't have the leading slash, so fix it here\n      this.routeParts = this.splitUrl(url as string);\n    } else {\n      this.routeParts = { path: url };\n    }\n  }\n\n  /**\n   * Parses the given string into 3 parts:\n   * - string path (wrapped in an array to be compatible with Angular syntax for the `routerLink`)\n   * - query params (as an object)\n   * - hash fragment (string)\n   */\n  private splitUrl(url: string = ''): RouteParts {\n    const { queryParams, fragment } = this.router.parseUrl(url);\n    const [, path] = url.match(this.URL_SPLIT);\n\n    // wrap path in an array, to have the Angular-like path format\n    return { path: [path], queryParams, fragment };\n  }\n\n  /**\n   * Prepends a leading slash to the given URL string, in case it doesn't have it.\n   */\n  private getAbsoluteUrl(url: string): string {\n    return url.startsWith('/') ? url : '/' + url;\n  }\n}\n","<!-- https://github.com/angular/angular/issues/24567 -->\n\n<ng-container *ngIf=\"isExternalUrl(); else isLocalUrl\">\n  <a\n    [href]=\"url\"\n    [attr.target]=\"target\"\n    [attr.rel]=\"rel\"\n    [attr.id]=\"id\"\n    [attr.class]=\"class\"\n    [attr.style]=\"style\"\n    [attr.title]=\"title\"\n  >\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n  </a>\n</ng-container>\n\n<ng-template #isLocalUrl>\n  <a\n    [routerLink]=\"routerUrl\"\n    [queryParams]=\"queryParams\"\n    [fragment]=\"fragment\"\n    [target]=\"target\"\n    [attr.id]=\"id\"\n    [attr.class]=\"class\"\n    [attr.style]=\"style\"\n    [attr.title]=\"title\"\n  >\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n  </a>\n</ng-template>\n\n<ng-template #content>\n  <ng-content></ng-content>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { GenericLinkComponent } from './generic-link.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule],\n  declarations: [GenericLinkComponent],\n  exports: [GenericLinkComponent],\n})\nexport class GenericLinkModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { I18nModule } from '@spartacus/core';\nimport { ItemCounterComponent } from './item-counter.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, I18nModule],\n  declarations: [ItemCounterComponent],\n  exports: [ItemCounterComponent],\n})\nexport class ItemCounterModule {}\n","import { PaginationConfig } from './pagination.config';\n\nexport const defaultPaginationConfig: PaginationConfig = {\n  pagination: {\n    addStart: true,\n    addEnd: true,\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { PaginationOptions } from '../pagination.model';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class PaginationConfig {\n  pagination?: PaginationOptions;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends PaginationConfig {}\n}\n","/**\n * Represents a page item for a pagination system. This is used\n * to store the model of each page.\n */\nexport interface PaginationItem {\n  label?: string;\n  type?: PaginationItemType;\n  /** The number is used when the type is {@link PaginationItemType.PAGE} */\n  number?: number;\n}\n\n/**\n * The item type is used to add semantic structure to the\n * PaginationItem, so that the UI understands the usage.\n */\nexport enum PaginationItemType {\n  GAP = 'gap',\n  FIRST = 'first',\n  LAST = 'last',\n  PREVIOUS = 'previous',\n  NEXT = 'next',\n  START = 'start',\n  END = 'end',\n  PAGE = 'page',\n}\n\nexport interface PaginationOptions {\n  /**\n   * The range of direct accessible pages in the pagination.\n   *\n   * ` 4 (5) 6 `\n   *\n   * Defaults to 3.\n   */\n  rangeCount?: number;\n\n  /** Adds a link to skip to the start of the pages, defaults to false. */\n  addStart?: boolean;\n  /** A link to skip to the end of the pages, defaults to false. */\n  addEnd?: boolean;\n  /** A link to the previous page, defaults to false. */\n  addPrevious?: boolean;\n  /** A link to the previous page, defaults to false. */\n  addNext?: boolean;\n\n  navigationPosition?: PaginationNavigationPosition;\n\n  /** A link to the first page can be added in case it is not included already, defaults to false. */\n  addFirst?: boolean;\n  /** A link to the last page can be added in case it is not included already, defaults to false. */\n  addLast?: boolean;\n\n  /**\n   * Adds a gap before and after the pages. to visualize hidden pages. Defaults to false.\n   *\n   * `1 ...  4 (5) 6 ... 18`\n   *\n   * Defaults to false.\n   */\n  addDots?: boolean;\n\n  /**\n   * If the page dots only represents a single page, we rather add the page\n   * as this would take the same amount of space. Some UX might want to use\n   * the dots for consistency reasons, which why this option is configurable.\n   *\n   * This typically happens on the 4th page (in case the range is 3):\n   * Instead of having:\n   *\n   *  `1 ...  3 (4) 5`\n   *\n   * we'd have\n   *\n   * `1 2 3 (4) 5`.\n   *\n   * Defaults to false.\n   */\n  substituteDotsForSingularPage?: boolean;\n\n  /** Custom label for the start link, defaults to ``. */\n  startLabel?: string;\n  /** Custom label for the previous link, defaults to ``. */\n  previousLabel?: string;\n  /** Custom label for the next link, defaults to ``. */\n  nextLabel?: string;\n  /** Custom label for the end link, defaults to ``. */\n  endLabel?: string;\n  /** Custom label for the dots, defaults to `...`. */\n  dotsLabel?: string;\n}\n\nexport enum PaginationNavigationPosition {\n  ASIDE = 'aside',\n  BEFORE = 'before',\n  AFTER = 'after',\n}\n","import { Injectable } from '@angular/core';\nimport { PaginationConfig } from './config/pagination.config';\nimport {\n  PaginationItem,\n  PaginationItemType,\n  PaginationNavigationPosition,\n  PaginationOptions,\n} from './pagination.model';\n\nconst FALLBACK_PAGINATION_OPTIONS: PaginationOptions = {\n  rangeCount: 3,\n  dotsLabel: '...',\n  startLabel: '',\n  previousLabel: '',\n  nextLabel: '',\n  endLabel: '',\n};\n\n/**\n * Builds a pagination structures based on a pageCount and current page number.\n * There are various {@link PaginationConfig} options which can be used to configure\n * the behavior of the build. Alternatively, CSS can be used to further customize\n * the pagination.\n *\n * Examples:\n * The full blown pagination items contain the follow elements:\n *\n * `  1 ... 4 (5) 6 ... 9  `\n *\n * This includes pagination items to the following pages:\n * - start page\n * - previous page\n * - first page\n * - page range\n * - last page\n * - next page\n * - end page\n *\n * All of those links are configurable, including the size of the page range.\n * The current page will always be centered in the page range to provide direct access\n * to the previous and next page.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class PaginationBuilder {\n  constructor(protected paginationConfig: PaginationConfig) {}\n\n  /**\n   * Builds a list of `PaginationItem`. The give pageCount and current are used\n   * to build out the full pagination. There are various {@link PaginationConfig} options\n   * which can be used to configure the behavior of the build. Alternatively, CSS\n   * can be used to further specialize visibility of the pagination.\n   *\n   * @param pageCount The total number of pages\n   * @param current The current page number, 0-index based\n   * @returns An array of `PaginationItem`\n   */\n  paginate(pageCount: number, current: number): PaginationItem[] {\n    const pages: PaginationItem[] = [];\n    if (!pageCount || pageCount < 2) {\n      return pages;\n    }\n    this.addPages(pages, pageCount, current);\n    this.addDots(pages, pageCount);\n    this.addFirstLast(pages, pageCount);\n    this.addNavigation(pages, pageCount, current);\n\n    return pages;\n  }\n\n  /**\n   * Returns the current page with surrounding pages (based on the `config.rangeCount`).\n   * The current page is always centered to provide direct access to the previous and next page.\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   * @param current The current page number, 0-index based\n   */\n  protected addPages(\n    pages: PaginationItem[],\n    pageCount: number,\n    current: number\n  ): void {\n    const start = this.getStartOfRange(pageCount, current);\n    const max = Math.min(this.config.rangeCount, pageCount);\n    Array.from(Array(max)).forEach((_, i) => {\n      pages.push({\n        number: i + start,\n        label: String(i + start + 1),\n        type: PaginationItemType.PAGE,\n      });\n    });\n  }\n\n  /**\n   * Adds dots before and after the given pages, if configured (defaults to true).\n   * If the dots only represent a single page, the page number is added instead of\n   * the dots, unless the configuration requires dots always.\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   */\n  protected addDots(pages: PaginationItem[], pageCount: number): void {\n    if (!this.config.addDots) {\n      return;\n    }\n\n    const addFirstGap = () => {\n      const firstItemNumber = pages[0].number;\n      const gapNumber = this.config.addFirst ? 1 : 0;\n      if (firstItemNumber > gapNumber) {\n        const isGap =\n          !this.config.substituteDotsForSingularPage ||\n          firstItemNumber !== gapNumber + 1;\n        const isSubstituted =\n          this.config.addFirst &&\n          this.config.substituteDotsForSingularPage &&\n          gapNumber === 0;\n        const type = isGap\n          ? PaginationItemType.GAP\n          : isSubstituted\n          ? PaginationItemType.FIRST\n          : PaginationItemType.PAGE;\n        return [\n          Object.assign(\n            {\n              label: isGap ? this.config.dotsLabel : String(gapNumber + 1),\n              type,\n            },\n            isGap ? null : { number: gapNumber }\n          ),\n        ];\n      } else return [];\n    };\n\n    const addLastGap = () => {\n      const nextPageNumber = pages[pages.length - 1].number + 1;\n      const last = pageCount - (this.config.addLast ? 2 : 1);\n      if (nextPageNumber <= last) {\n        const isSubstituted =\n          this.config.addLast &&\n          this.config.substituteDotsForSingularPage &&\n          nextPageNumber === last;\n        const isGap =\n          nextPageNumber <\n          pageCount -\n            (this.config.substituteDotsForSingularPage ? 1 : 0) -\n            (this.config.addLast ? 1 : 0);\n\n        const type = isGap\n          ? PaginationItemType.GAP\n          : isSubstituted\n          ? PaginationItemType.LAST\n          : PaginationItemType.PAGE;\n        return [\n          Object.assign(\n            {\n              label: isGap ? this.config.dotsLabel : String(nextPageNumber + 1),\n              type,\n            },\n            isGap ? null : { number: nextPageNumber }\n          ),\n        ];\n      } else return [];\n    };\n\n    pages.unshift(...addFirstGap());\n    pages.push(...addLastGap());\n  }\n\n  /**\n   * Add links to the first and last page, if configured to do so.\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   *\n   */\n  protected addFirstLast(pages: PaginationItem[], pageCount: number) {\n    if (this.config.addFirst && pages[0].number !== 0) {\n      pages.unshift({\n        number: 0,\n        label: '1',\n        type: PaginationItemType.FIRST,\n      });\n    }\n    if (\n      this.config.addLast &&\n      pages[pages.length - 1].number !== pageCount - 1\n    ) {\n      pages.push({\n        number: pageCount - 1,\n        label: String(pageCount),\n        type: PaginationItemType.LAST,\n      });\n    }\n  }\n\n  /**\n   * Add links to the start, previous, next and last page, if configured to do so.\n   * The order of the links can be configured by using the {@link PaginationConfig},\n   * using the `PaginationNavigationPosition` (`BEFORE` or `AFTER`).\n   * The `PaginationNavigationPosition` allows for 3 flavours:\n   *\n   * - by default the pagination starts with start and previous and ends with the next and end links\n   * - BEFORE all navigation links are added in the front of the pagination list\n   * - AFTER all navigation links are pushed to the end of the pagination list\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   * @param current The current page number, 0-index based\n   *\n   */\n  protected addNavigation(\n    pages: PaginationItem[],\n    pageCount: number,\n    current: number\n  ): void {\n    const before = this.getBeforeLinks(current);\n    const after = this.getAfterLinks(pageCount, current);\n    const pos = this.config.navigationPosition;\n    if (!pos || pos === PaginationNavigationPosition.ASIDE) {\n      pages.unshift(...before);\n      pages.push(...after);\n    } else {\n      if (pos === PaginationNavigationPosition.BEFORE) {\n        pages.unshift(...before, ...after);\n      }\n      if (pos === PaginationNavigationPosition.AFTER) {\n        pages.push(...before, ...after);\n      }\n    }\n  }\n\n  /**\n   * Returns the start and previous links, if applicable.\n   */\n  protected getBeforeLinks(current: number): PaginationItem[] {\n    const list = [];\n\n    if (this.config.addStart) {\n      const start = () => {\n        return Object.assign(\n          {\n            label: this.config.startLabel,\n            type: PaginationItemType.START,\n          },\n          current > 0 ? { number: 0 } : null\n        );\n      };\n      list.push(start());\n    }\n    if (this.config.addPrevious) {\n      const previous = () => {\n        return Object.assign(\n          {\n            label: this.config.previousLabel,\n            type: PaginationItemType.PREVIOUS,\n          },\n          current > 0 ? { number: current - 1 } : null\n        );\n      };\n      list.push(previous());\n    }\n    return list;\n  }\n\n  /**\n   * Returns the next and end links, if applicable.\n   */\n  protected getAfterLinks(\n    pageCount: number,\n    current: number\n  ): PaginationItem[] {\n    const list = [];\n\n    if (this.config.addNext) {\n      const next = () => {\n        return Object.assign(\n          {\n            label: this.config.nextLabel,\n            type: PaginationItemType.NEXT,\n          },\n          current < pageCount - 1 ? { number: current + 1 } : null\n        );\n      };\n      list.push(next());\n    }\n    if (this.config.addEnd) {\n      const end = () => {\n        return Object.assign(\n          {\n            label: this.config.endLabel,\n            type: PaginationItemType.END,\n          },\n          current < pageCount - 1 ? { number: pageCount - 1 } : null\n        );\n      };\n      list.push(end());\n    }\n\n    return list;\n  }\n  /**\n   * Resolves the first page of the range we need to build.\n   * This is the page that is leading up to the range of the\n   * current page.\n   *\n   * @param pageCount The total number of pages.\n   * @param current The current page number, 0-index based.\n   */\n  protected getStartOfRange(pageCount: number, current: number): number {\n    const count = this.config.rangeCount - 1;\n    // the least number of pages before and after the current\n    const delta = Math.round(count / 2);\n\n    // ensure that we start with at least the first page\n    const minStart = Math.max(0, current - delta);\n    // ensures that we start with at least 1 and do not pass the last range\n    const maxStart = Math.max(0, pageCount - count - 1);\n\n    // ensure that we get at least a full range at the end\n    return Math.min(maxStart, minStart);\n  }\n\n  /**\n   * Returns the pagination configuration. The configuration is driven by the\n   * (default) application configuration.\n   *\n   * The default application is limited to adding the start and end link:\n   * ```ts\n   *   addStart: true,\n   *   addEnd: true\n   * ```\n   *\n   * The application configuration is however merged into the following static configuration:\n   * ```ts\n   * {\n   *   rangeCount: 3,\n   *   dotsLabel: '...',\n   *   startLabel: '',\n   *   previousLabel: '',\n   *   nextLabel: '',\n   *   endLabel: ''\n   * }\n   * ```\n   */\n  protected get config(): PaginationOptions {\n    return Object.assign(\n      FALLBACK_PAGINATION_OPTIONS,\n      this.paginationConfig.pagination\n    );\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { PaginationModel } from '@spartacus/core';\nimport { PaginationBuilder } from './pagination.builder';\nimport { PaginationItem, PaginationItemType } from './pagination.model';\n\n/**\n * The `PaginationComponent` is a generic component that is used for\n * all lists in Spartacus that require pagination. The component supports\n * all common features, which can be configured or hidden by CSS.\n */\n@Component({\n  selector: 'cx-pagination',\n  templateUrl: './pagination.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaginationComponent {\n  /** The (optional) pageRoute used for the anchor links created in the pagination   */\n  @Input() pageRoute: string;\n\n  /** The (optional) query parameter which is added to the page route.  */\n  @Input() queryParam: string;\n\n  /**\n   * Whenever there's a default page specified, the routing logic\n   * will omit the page number in routeLink or parameters.\n   */\n  @Input() defaultPage;\n\n  private _pagination: PaginationModel;\n  get pagination(): PaginationModel {\n    return this._pagination;\n  }\n  @Input() set pagination(value: PaginationModel) {\n    this._pagination = value;\n    this.render(value);\n  }\n\n  @Output() viewPageEvent: EventEmitter<number> = new EventEmitter<number>();\n\n  pages: PaginationItem[] = [];\n\n  constructor(\n    private paginationBuilder: PaginationBuilder,\n    private activatedRoute: ActivatedRoute\n  ) {}\n\n  protected render(pagination: PaginationModel): void {\n    if (!pagination) {\n      return;\n    }\n    this.pages = this.paginationBuilder.paginate(\n      pagination.totalPages,\n      pagination.currentPage\n    );\n  }\n\n  /**\n   * Format aria-label based on pagination item type.\n   *\n   * @param label string\n   * @param type PaginationItemType\n   * @returns string\n   */\n  getAriaLabel(label: string, type: PaginationItemType): string {\n    // Convert 'Start' to First, and 'End' to Last for a more natural screen read.\n    type = type === PaginationItemType.START ? PaginationItemType.FIRST : type;\n    type = type === PaginationItemType.END ? PaginationItemType.LAST : type;\n    return type === PaginationItemType.PAGE\n      ? `${type} ${label}`\n      : `${type} ${PaginationItemType.PAGE}`;\n  }\n\n  /**\n   * Indicates whether the given item is the current item.\n   *\n   * @param item PaginationItem\n   * @returns boolean\n   */\n  isCurrent(item: PaginationItem): boolean {\n    return (\n      item.type === PaginationItemType.PAGE &&\n      item.number === this.pagination.currentPage\n    );\n  }\n\n  /**\n   * Indicates whether the pagination item is inactive. This is used\n   * to disabled a link or set the tabindex to `-1`.\n   *\n   * Defaults to true\n   *\n   * @param item PaginationItem\n   * @returns returns -1 in case of a disabled\n   */\n  isInactive(item: PaginationItem): boolean {\n    return (\n      !item.hasOwnProperty('number') ||\n      item.number === this.pagination.currentPage\n    );\n  }\n\n  getQueryParams(item: PaginationItem): Params {\n    const queryParams = Object.assign(\n      {},\n      this.activatedRoute.snapshot.queryParams\n    );\n    if (\n      this.queryParam &&\n      item.number < this.pagination.totalPages &&\n      !this.isCurrent(item)\n    ) {\n      queryParams[this.queryParam] = item.number;\n    }\n    // omit the page number from the query parameters in case it's the default\n    // to clean up the experience and avoid unnecessary polluting of the URL\n    if (queryParams[this.queryParam] === this.defaultPage) {\n      delete queryParams[this.queryParam];\n    }\n    return queryParams;\n  }\n\n  pageChange(page: PaginationItem): void {\n    this.viewPageEvent.emit(page.number);\n  }\n}\n","<a\n  *ngFor=\"let item of pages\"\n  [class]=\"item.type\"\n  [class.disabled]=\"isInactive(item)\"\n  [class.current]=\"isCurrent(item)\"\n  [routerLink]=\"pageRoute\"\n  [queryParams]=\"getQueryParams(item)\"\n  [tabIndex]=\"isInactive(item) ? -1 : 0\"\n  (click)=\"pageChange(item)\"\n  [attr.aria-label]=\"getAriaLabel(item.label, item.type)\"\n>\n  {{ item.label }}\n</a>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultPaginationConfig } from './config/index';\nimport { PaginationComponent } from './pagination.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule],\n  providers: [provideDefaultConfig(defaultPaginationConfig)],\n  declarations: [PaginationComponent],\n  exports: [PaginationComponent],\n})\nexport class PaginationModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { SortModel } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-sorting',\n  templateUrl: './sorting.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SortingComponent {\n  @Input()\n  sortOptions: SortModel[];\n  @Input()\n  selectedOption: string;\n  @Input()\n  placeholder: string;\n  @Input()\n  sortLabels: { [code: string]: string };\n\n  @Output()\n  sortListEvent: EventEmitter<string>;\n\n  constructor() {\n    this.sortListEvent = new EventEmitter<string>();\n  }\n\n  sortList(sortCode: string): void {\n    this.sortListEvent.emit(sortCode);\n  }\n\n  get selectedLabel() {\n    return (\n      this.sortOptions?.find((sort) => sort.code === this.selectedOption)\n        ?.name ?? this.sortLabels?.[this.selectedOption]\n    );\n  }\n}\n","<ng-select\n  [searchable]=\"false\"\n  [clearable]=\"false\"\n  placeholder=\"{{ placeholder }}\"\n  (change)=\"sortList($event)\"\n  [ngModel]=\"selectedOption\"\n  [attr.aria-label]=\"selectedLabel || placeholder\"\n>\n  <ng-option *ngFor=\"let sort of sortOptions\" [value]=\"sort.code\">{{\n    sort.name ? sort.name : sortLabels ? sortLabels[sort.code] : ''\n  }}</ng-option>\n</ng-select>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { PaginationComponent, PaginationModule } from './pagination/index';\nimport { SortingComponent } from './sorting/sorting.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NgSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IconModule,\n    PaginationModule,\n  ],\n  declarations: [SortingComponent],\n  exports: [SortingComponent, PaginationComponent],\n})\nexport class ListNavigationModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { ImageLoadingStrategy, MediaFormatSize } from './media.model';\n\n/**\n * Provides configuration specific to Media, such as images. This is used to optimize\n * rendering of the media, SEO and performance.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class MediaConfig {\n  /**\n   * Media _format_ configuration holds the size of the media's assigned to\n   * a format.\n   */\n  mediaFormats?: {\n    /**\n     * Represents the media format code, that is the key to distinguish different\n     * media in a container.\n     */\n    [format: string]: MediaFormatSize;\n  };\n\n  /**\n   * Indicates how the browser should load the image. There's only one\n   * global strategy for all media cross media in Spartacus.\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img for more\n   * information.\n   *\n   * If the `lazy` strategy is in place, the `loading=\"lazy\"` attribute is added to the\n   * img element.\n   */\n  imageLoadingStrategy?: ImageLoadingStrategy;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends MediaConfig {}\n}\n","import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n\n/**\n * A reference to a newly opened modal\n *\n * @todo remove ngb dependency and create our own implementation of ModalRef\n */\nexport class ModalRef extends NgbModalRef {}\n","import { NgModule } from '@angular/core';\nimport { ModalDirective } from './modal.directive';\n\n@NgModule({\n  declarations: [ModalDirective],\n  exports: [ModalDirective],\n})\nexport class ModalModule {}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport {\n  Address,\n  CostCenter,\n  DeliveryMode,\n  PaymentDetails,\n  TranslationService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { Card } from '../card/card.component';\n\n@Component({\n  selector: 'cx-order-overview',\n  templateUrl: './order-overview.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderOverviewComponent {\n  order: any;\n\n  @Input('order')\n  set setOrder(order: any) {\n    this.order = order;\n  }\n\n  constructor(protected translation: TranslationService) {}\n\n  getReplenishmentCodeCardContent(orderCode: string): Observable<Card> {\n    return this.translation.translate('orderDetails.replenishmentId').pipe(\n      filter(() => Boolean(orderCode)),\n      map((textTitle) => ({\n        title: textTitle,\n        text: [orderCode],\n      }))\n    );\n  }\n\n  getReplenishmentActiveCardContent(active: boolean): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('orderDetails.status'),\n      this.translation.translate('orderDetails.active'),\n      this.translation.translate('orderDetails.cancelled'),\n    ]).pipe(\n      map(([textTitle, textActive, textCancelled]) => ({\n        title: textTitle,\n        text: [active ? textActive : textCancelled],\n      }))\n    );\n  }\n\n  getReplenishmentStartOnCardContent(isoDate: string): Observable<Card> {\n    return this.translation.translate('orderDetails.startOn').pipe(\n      filter(() => Boolean(isoDate)),\n      map((textTitle) => {\n        return {\n          title: textTitle,\n          text: [isoDate],\n        };\n      })\n    );\n  }\n\n  getReplenishmentFrequencyCardContent(frequency: string): Observable<Card> {\n    return this.translation.translate('orderDetails.frequency').pipe(\n      filter(() => Boolean(frequency)),\n      map((textTitle) => ({\n        title: textTitle,\n        text: [frequency],\n      }))\n    );\n  }\n\n  getReplenishmentNextDateCardContent(isoDate: string): Observable<Card> {\n    return this.translation.translate('orderDetails.nextOrderDate').pipe(\n      filter(() => Boolean(isoDate)),\n      map((textTitle) => {\n        return {\n          title: textTitle,\n          text: [isoDate],\n        };\n      })\n    );\n  }\n\n  getOrderCodeCardContent(orderCode: string): Observable<Card> {\n    return this.translation.translate('orderDetails.orderNumber').pipe(\n      filter(() => Boolean(orderCode)),\n      map((textTitle) => ({\n        title: textTitle,\n        text: [orderCode],\n      }))\n    );\n  }\n\n  getOrderCurrentDateCardContent(isoDate: string): Observable<Card> {\n    return this.translation.translate('orderDetails.placedOn').pipe(\n      filter(() => Boolean(isoDate)),\n      map((textTitle) => {\n        return {\n          title: textTitle,\n          text: [isoDate],\n        };\n      })\n    );\n  }\n\n  getOrderStatusCardContent(status: string): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('orderDetails.status'),\n      this.translation.translate('orderDetails.statusDisplay_' + status),\n    ]).pipe(\n      map(([textTitle, textStatus]) => ({\n        title: textTitle,\n        text: [textStatus],\n      }))\n    );\n  }\n\n  getPurchaseOrderNumber(poNumber: string): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('orderDetails.purchaseOrderNumber'),\n      this.translation.translate('orderDetails.emptyPurchaseOrderId'),\n    ]).pipe(\n      map(([textTitle, noneTextTitle]) => ({\n        title: textTitle,\n        text: [poNumber ? poNumber : noneTextTitle],\n      }))\n    );\n  }\n\n  getMethodOfPaymentCardContent(\n    hasPaymentInfo: PaymentDetails\n  ): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('orderDetails.methodOfPayment'),\n      this.translation.translate('paymentTypes.paymentType_ACCOUNT'),\n      this.translation.translate('paymentTypes.paymentType_CARD'),\n    ]).pipe(\n      map(([textTitle, textAccount, textCard]) => ({\n        title: textTitle,\n        text: [Boolean(hasPaymentInfo) ? textCard : textAccount],\n      }))\n    );\n  }\n\n  getCostCenterCardContent(costCenter: CostCenter): Observable<Card> {\n    return this.translation.translate('orderDetails.costCenter').pipe(\n      filter(() => Boolean(costCenter)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: costCenter?.name,\n        text: ['(' + costCenter?.unit?.name + ')'],\n      }))\n    );\n  }\n\n  getAddressCardContent(deliveryAddress: Address): Observable<Card> {\n    return this.translation.translate('addressCard.shipTo').pipe(\n      filter(() => Boolean(deliveryAddress)),\n      map((textTitle) => {\n        const formattedAddress = this.normalizeFormattedAddress(\n          deliveryAddress.formattedAddress\n        );\n\n        return {\n          title: textTitle,\n          textBold: `${deliveryAddress.firstName} ${deliveryAddress.lastName}`,\n          text: [formattedAddress, deliveryAddress.country.name],\n        };\n      })\n    );\n  }\n\n  getDeliveryModeCardContent(deliveryMode: DeliveryMode): Observable<Card> {\n    return this.translation.translate('orderDetails.shippingMethod').pipe(\n      filter(() => Boolean(deliveryMode)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: deliveryMode.name,\n        text: [\n          deliveryMode.description,\n          deliveryMode.deliveryCost?.formattedValue\n            ? deliveryMode.deliveryCost?.formattedValue\n            : '',\n        ],\n      }))\n    );\n  }\n\n  getPaymentInfoCardContent(payment: PaymentDetails): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('paymentForm.payment'),\n      this.translation.translate('paymentCard.expires', {\n        month: Boolean(payment) ? payment.expiryMonth : '',\n        year: Boolean(payment) ? payment.expiryYear : '',\n      }),\n    ]).pipe(\n      filter(() => Boolean(payment)),\n      map(([textTitle, textExpires]) => ({\n        title: textTitle,\n        textBold: payment.accountHolderName,\n        text: [payment.cardNumber, textExpires],\n      }))\n    );\n  }\n\n  getBillingAddressCardContent(billingAddress: Address): Observable<Card> {\n    return this.translation.translate('paymentForm.billingAddress').pipe(\n      filter(() => Boolean(billingAddress)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: `${billingAddress.firstName} ${billingAddress.lastName}`,\n        text: [billingAddress.formattedAddress, billingAddress.country.name],\n      }))\n    );\n  }\n\n  private normalizeFormattedAddress(formattedAddress: string): string {\n    const addresses = formattedAddress\n      .split(',')\n      .map((address) => address.trim());\n\n    const newFormattedAddress = addresses.filter(Boolean).join(', ');\n\n    return newFormattedAddress;\n  }\n}\n","<div class=\"cx-order-summary\">\n  <div class=\"container\">\n    <ng-container *ngIf=\"order.replenishmentOrderCode; else otherOrder\">\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"\n            getReplenishmentCodeCardContent(order?.replenishmentOrderCode)\n              | async\n          \"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"getReplenishmentActiveCardContent(order?.active) | async\"\n        ></cx-card>\n      </div>\n\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"\n            getReplenishmentStartOnCardContent(order?.firstDate | cxDate)\n              | async\n          \"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"\n            getReplenishmentFrequencyCardContent(\n              order?.trigger?.displayTimeTable\n            ) | async\n          \"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"\n            getReplenishmentNextDateCardContent(\n              order?.trigger?.activationTime | cxDate\n            ) | async\n          \"\n        ></cx-card>\n      </div>\n    </ng-container>\n\n    <ng-template #otherOrder>\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"getOrderCodeCardContent(order?.code) | async\"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"\n            getOrderCurrentDateCardContent(order?.created | cxDate) | async\n          \"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"getOrderStatusCardContent(order.statusDisplay) | async\"\n        ></cx-card>\n      </div>\n    </ng-template>\n\n    <ng-container\n      *ngIf=\"order.purchaseOrderNumber || order.purchaseOrderNumber === ''\"\n    >\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"getPurchaseOrderNumber(order?.purchaseOrderNumber) | async\"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"getMethodOfPaymentCardContent(order.paymentInfo) | async\"\n        ></cx-card>\n\n        <ng-container *ngIf=\"order.costCenter\">\n          <cx-card\n            [content]=\"getCostCenterCardContent(order?.costCenter) | async\"\n          ></cx-card>\n        </ng-container>\n      </div>\n    </ng-container>\n\n    <div class=\"cx-summary-card\">\n      <ng-container *ngIf=\"order.deliveryAddress\">\n        <cx-card\n          [content]=\"getAddressCardContent(order?.deliveryAddress) | async\"\n        ></cx-card>\n      </ng-container>\n\n      <ng-container *ngIf=\"order.deliveryMode\">\n        <cx-card\n          [content]=\"getDeliveryModeCardContent(order?.deliveryMode) | async\"\n        ></cx-card>\n      </ng-container>\n    </div>\n\n    <ng-container *ngIf=\"order.paymentInfo\">\n      <div class=\"cx-summary-card\">\n        <cx-card\n          [content]=\"getPaymentInfoCardContent(order?.paymentInfo) | async\"\n        ></cx-card>\n\n        <cx-card\n          [content]=\"\n            getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\n              | async\n          \"\n        ></cx-card>\n      </div>\n    </ng-container>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { CardModule } from '../card/card.module';\nimport { OrderOverviewComponent } from './order-overview.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, CardModule],\n  declarations: [OrderOverviewComponent],\n  exports: [OrderOverviewComponent],\n})\nexport class OrderOverviewModule {}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\n@Component({\n  selector: 'cx-progress-button',\n  templateUrl: './progress-button.component.html',\n})\nexport class ProgressButtonComponent {\n  @Input()\n  ariaLabel: string = '';\n\n  @Input()\n  class: string = '';\n\n  @Input()\n  disabled: boolean = false;\n\n  @Input()\n  loading: boolean = false;\n\n  @Output()\n  clikEvent = new EventEmitter<void>();\n\n  constructor() {}\n}\n","<button\n  (click)=\"clikEvent.emit()\"\n  [attr.aria-label]=\"ariaLabel\"\n  [disabled]=\"disabled || loading\"\n  [ngClass]=\"class\"\n  class=\"btn btn-primary\"\n>\n  <div class=\"cx-progress-button-container\">\n    <div *ngIf=\"loading\" class=\"loader-container\">\n      <div class=\"loader\">{{ 'spinner.loading' | cxTranslate }}</div>\n    </div>\n\n    <ng-content></ng-content>\n  </div>\n</button>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { I18nModule } from '@spartacus/core';\nimport { ProgressButtonComponent } from './progress-button.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [ProgressButtonComponent],\n  exports: [ProgressButtonComponent],\n})\nexport class ProgressButtonModule {}\n","import {\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { combineLatest, Subscription } from 'rxjs';\nimport { startWith } from 'rxjs/operators';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/keyboard-focus.model';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-replenishment-order-cancellation-dialog',\n  templateUrl: './replenishment-order-cancellation-dialog.component.html',\n})\nexport class ReplenishmentOrderCancellationDialogComponent\n  implements OnInit, OnDestroy\n{\n  private subscription = new Subscription();\n\n  replenishmentOrderCode: string;\n\n  focusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    autofocus: 'button',\n    focusOnEscape: true,\n  };\n\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    // Close on click outside the dialog window\n    if ((event.target as any).tagName === this.el.nativeElement.tagName) {\n      this.close('Cross click');\n    }\n  }\n\n  constructor(\n    protected userReplenishmentOrderService: UserReplenishmentOrderService,\n    protected globalMessageService: GlobalMessageService,\n    protected launchDialogService: LaunchDialogService,\n    protected el: ElementRef\n  ) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      combineLatest([\n        this.userReplenishmentOrderService\n          .getReplenishmentOrderDetails()\n          .pipe(startWith(null)),\n        this.launchDialogService.data$,\n      ]).subscribe(([replenishmentOrder, code]) => {\n        this.replenishmentOrderCode =\n          code || replenishmentOrder.replenishmentOrderCode;\n      })\n    );\n\n    this.subscription.add(\n      this.userReplenishmentOrderService\n        .getCancelReplenishmentOrderSuccess()\n        .subscribe((value) => this.onSuccess(value))\n    );\n  }\n\n  onSuccess(value: boolean): void {\n    if (value) {\n      this.launchDialogService.closeDialog(\n        'Successffully cancelled replenishment'\n      );\n\n      this.globalMessageService.add(\n        {\n          key: 'orderDetails.cancelReplenishment.cancelSuccess',\n          params: {\n            replenishmentOrderCode: this.replenishmentOrderCode,\n          },\n        },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n    this.userReplenishmentOrderService.clearCancelReplenishmentOrderProcessState();\n  }\n\n  close(reason: string): void {\n    this.launchDialogService.closeDialog(reason);\n  }\n\n  cancelReplenishment(): void {\n    this.userReplenishmentOrderService.cancelReplenishmentOrder(\n      this.replenishmentOrderCode\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","<div\n  [cxFocus]=\"focusConfig\"\n  (esc)=\"close('Escape clicked')\"\n  class=\"cx-cancel-replenishment-dialog-foreground\"\n>\n  <div class=\"cx-cancel-replenishment-dialog-content\">\n    <div class=\"cx-cancel-replenishment-dialog-header\">\n      <h3>\n        {{ 'orderDetails.cancelReplenishment.title' | cxTranslate }}\n      </h3>\n    </div>\n    <div class=\"cx-cancel-replenishment-dialog-description\">\n      {{ 'orderDetails.cancelReplenishment.description' | cxTranslate }}\n    </div>\n\n    <div class=\"cx-cancel-replenishment-dialog-body\">\n      <div class=\"cx-cancel-replenishment-btns row\">\n        <div class=\"col-md-6\">\n          <button\n            class=\"btn btn-block btn-action\"\n            (click)=\"close('Close Replenishment Dialog')\"\n          >\n            {{ 'orderDetails.cancelReplenishment.reject' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-md-6\">\n          <button\n            class=\"btn btn-block btn-primary\"\n            (click)=\"cancelReplenishment()\"\n          >\n            {{ 'orderDetails.cancelReplenishment.accept' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { ReplenishmentOrderCancellationDialogComponent } from './replenishment-order-cancellation-dialog.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [CommonModule, I18nModule, KeyboardFocusModule],\n  declarations: [ReplenishmentOrderCancellationDialogComponent],\n  exports: [ReplenishmentOrderCancellationDialogComponent],\n})\nexport class ReplenishmentOrderCancellationDialogModule {}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport { SplitViewState } from './split/split-view.model';\n\n/**\n * Supposed to be injected in the split view component, so that the split view state\n * is maintained for a single split view.\n */\n@Injectable()\nexport class SplitViewService {\n  /**\n   * Newly added views are hidden by default, unless it is the first view of the split view.\n   * The default hide mode can be overridden.\n   */\n  defaultHideMode = true;\n\n  protected splitViewCount = 1;\n\n  protected _views$: BehaviorSubject<any[]> = new BehaviorSubject([]);\n\n  /**\n   * Adds a view to the list of views. The view is initialized with the `SplitViewState`\n   * state. If no state is provided, the state is created with the hidden property. The hidden\n   * property is provided by the `defaultHideMode`, unless it's the first view (position: 0).\n   */\n  add(position: number, initialState?: SplitViewState) {\n    const state: SplitViewState = {\n      ...{ hidden: position === 0 ? false : this.defaultHideMode },\n      ...initialState,\n    };\n    if (!this.views[position]) {\n      this.views[position] = state;\n      this.updateState(position, state.hidden);\n      this._views$.next(this.views);\n    }\n  }\n\n  /**\n   * The split view is based on a number of views that can be used next to each other.\n   * When the number changes (i.e. if the screen goes from wide to small), the visibility state\n   * of the views should be updated.\n   */\n  updateSplitView(splitViewCount: number) {\n    if (splitViewCount !== this.splitViewCount) {\n      this.splitViewCount = splitViewCount;\n      this.updateState();\n    }\n  }\n\n  /**\n   * Returns an observable with the active view number. The active view number\n   * represents the last visible view.\n   */\n  getActiveView(): Observable<number> {\n    return this._views$.pipe(\n      map((views) => this.getActive(views)),\n      distinctUntilChanged()\n    );\n  }\n\n  /**\n   * Returns an observable with the SplitViewState for the given view position.\n   */\n  getViewState(position: number): Observable<SplitViewState> {\n    return this._views$.pipe(\n      map((views) => views[position]),\n      // we must filter here, since outlet driven views will destroyed the view\n      filter((view) => Boolean(view))\n    );\n  }\n\n  /**\n   * Removes a view from the list of views.\n   *\n   * Removing a view is different from hiding a view. Removing a view is typically done\n   * when a component is destroyed.\n   *\n   * When the view is removed, the SplitViewState is updated to reflect that new organization\n   * of views.\n   */\n  remove(position: number) {\n    const activePosition = this.getActive(this.views);\n    this._views$.next(this.views.splice(0, position));\n    if (activePosition >= position) {\n      this.updateState(position);\n    }\n  }\n\n  /**\n   * Returns the next view position. This is useful for views that do not want to be bothered\n   * with controlling view numbers.\n   */\n  get nextPosition(): number {\n    return this.views.length || 0;\n  }\n\n  /**\n   * Toggles the visibility of the views based on the given view position. If the view\n   * is already visible, we close the view and active the former view. Unless the hide flag\n   * is used, to force the view.\n   *\n   * The view state of other views in the split view are updated as well.\n   *\n   * @param position The zero-based position number of the view.\n   * @param forceHide The (optional) hide state for the view position.\n   */\n  toggle(position: number, forceHide?: boolean) {\n    // add the view if it hasn't been added before.\n    if (!this.views[position]) {\n      this.add(position, { hidden: forceHide ?? false });\n    }\n\n    // If the position is already visible, we move to a previous position. Only if the hide\n    // state is forced, we keep the current position.\n    if (\n      this.views[position] &&\n      forceHide === undefined &&\n      !this.views[position].hidden\n    ) {\n      position--;\n    }\n\n    this.updateState(position, forceHide === true);\n  }\n\n  /**\n   * Updates the hidden state of all the views.\n   */\n  protected updateState(position?: number, hide?: boolean) {\n    const views = [...this.views];\n    if (hide !== undefined && views[position]) {\n      views[position].hidden = hide;\n    }\n    let lastVisible =\n      views.length - [...views].reverse().findIndex((view) => !view.hidden) - 1;\n\n    if (lastVisible === views.length) {\n      if (position) {\n        // When there's only 1 view (mobile), we might not find any active\n        // if the user navigates back.\n        lastVisible = position - 1;\n      } else {\n        lastVisible = views.length - 1;\n      }\n    }\n\n    views.forEach((view, pos) => {\n      if (view && pos !== position) {\n        // hide other views that are outside the split view\n        view.hidden =\n          pos > lastVisible || pos < lastVisible - (this.splitViewCount - 1);\n      }\n    });\n\n    this._views$.next(views);\n  }\n\n  /**\n   * Returns the active view count for the list of views.\n   */\n  protected getActive(views: SplitViewState[]): number {\n    // we reverse the list to find the last visible view\n    const l = [...views]\n      .reverse()\n      .findIndex((view: SplitViewState) => !view.hidden);\n    const last = l === -1 ? 0 : views.length - l - 1;\n    return last;\n  }\n\n  /**\n   * Utility method that resolves all views from the subject.\n   */\n  protected get views(): SplitViewState[] {\n    return this._views$.value;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { BreakpointService } from '../../../../layout/breakpoint/breakpoint.service';\nimport { SplitViewService } from '../split-view.service';\n\n/**\n * The split-view component supports an unlimited number of nested views. The component\n * is a host to those view components and doesn't add any restrictions to it's content;\n * content is projected as-is.\n *\n * ```html\n * <cx-split-view>\n *   <cx-view></cx-view>\n *   <cx-view></cx-view>\n *   <any-wrapper>\n *     <cx-view></cx-view>\n *   </any-wrapper>\n * </cx-split-view>\n * ```\n *\n * The split view component is only concerned with tracking the underlying _visible_\n * view components, so that the `lastVisibleView` can be updated accordingly. The actual\n * visibility of views is controlled by CSS. To allow for maximum flexibility, the CSS\n * implementation is using CSS variables. The `lastVisibleView` is bind to the\n * `--cx-active-view` on the host, so that all descendants views will inherit the\n * property conveniently.\n */\n@Component({\n  selector: 'cx-split-view',\n  templateUrl: './split-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [SplitViewService],\n})\nexport class SplitViewComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n\n  /**\n   * Sets the default hide mode for views. This mode is useful in case views are dynamically being created,\n   * for example when they are created by router components.\n   *\n   * The mode defaults to true, unless this is the first view; the first view is never hidden.\n   */\n  @Input()\n  set hideMode(mode: boolean) {\n    this.splitService.defaultHideMode = mode;\n  }\n\n  /**\n   * Indicates the last visible view in the range of views that is visible. This\n   * is bind to a css variable `--cx-active-view` so that the experience\n   * can be fully controlled by css.\n   */\n  @HostBinding('style.--cx-active-view')\n  @HostBinding('attr.active-view')\n  lastVisibleView = 1;\n\n  constructor(\n    protected splitService: SplitViewService,\n    protected breakpointService: BreakpointService,\n    protected elementRef: ElementRef\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.splitService\n        .getActiveView()\n        .subscribe(\n          (lastVisible: number) => (this.lastVisibleView = lastVisible + 1)\n        )\n    );\n    this.subscription.add(\n      this.breakpointService.breakpoint$.subscribe(() => {\n        this.splitService.updateSplitView(this.splitViewCount);\n      })\n    );\n  }\n\n  /**\n   * Returns the maximum number of views per split-view. The number is based on the\n   * CSS custom property `--cx-max-views`.\n   */\n  protected get splitViewCount(): number {\n    return Number(\n      getComputedStyle(this.elementRef.nativeElement).getPropertyValue(\n        '--cx-max-views'\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","<ng-content></ng-content>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Subscription, timer } from 'rxjs';\nimport { delayWhen } from 'rxjs/operators';\nimport { SplitViewService } from '../split-view.service';\n\n/**\n * The view component is part of the `SplitViewComponent`. The view\n * contains the navigable content that should be split up. It maintains\n * a view position and allows to show or hide the view.\n *\n * The ViewComponent interacts with the `SplitViewService` for handing over the\n * view state, so that the overarching `SplitViewComponent` can manage the\n * overall experience.\n */\n@Component({\n  selector: 'cx-view',\n  templateUrl: './view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ViewComponent implements OnInit, OnDestroy {\n  protected _hidden;\n\n  @Input()\n  @HostBinding('attr.position')\n  @HostBinding('style.--cx-view-position')\n  position: string;\n\n  /**\n   * The disappeared flag is added to the\n   */\n  @HostBinding('attr.disappeared') disappeared = true;\n\n  /**\n   * The hidden input is used to set the initial visible state of the view.\n   * The hidden state defaults to false.\n   *\n   * The hidden input supports 2-way binding, see `hiddenChange` property.\n   */\n  @Input()\n  set hidden(hidden: boolean) {\n    this._hidden = hidden;\n    this.splitService.toggle(this.viewPosition, hidden);\n  }\n\n  /**\n   * An update of the view visibility is emitted to the hiddenChange output.\n   */\n  @Output()\n  hiddenChange = new EventEmitter();\n\n  protected subscription: Subscription;\n\n  constructor(\n    protected splitService: SplitViewService,\n    protected elementRef: ElementRef,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    const hidden = this._hidden ? { hidden: this._hidden } : {};\n    this.splitService.add(this.viewPosition, hidden);\n\n    this.subscription = this.splitService\n      .getViewState(this.viewPosition)\n      // delay the disappeared state, so that the (CSS driven) animation has time to finish\n      .pipe(delayWhen((view) => timer(view.hidden ? this.duration * 1.25 : 0)))\n      .subscribe((view) => {\n        this.hiddenChange.emit(view.hidden);\n        this._hidden = view.hidden;\n\n        this.disappeared = view.hidden;\n        this.cd.markForCheck();\n      });\n  }\n\n  /**\n   * Toggles the visibility of the view.\n   *\n   * An optional force flag can be used to explicitly show or hide view component.\n   */\n  toggle(force?: boolean) {\n    this.splitService.toggle(this.viewPosition, force);\n  }\n\n  /**\n   * Returns the position for the view.\n   *\n   * The position is either taken from the input `position` or generated by the `SplitService`.\n   */\n  protected get viewPosition(): number {\n    if (!(Number(this.position) >= 0)) {\n      this.position = this.splitService.nextPosition.toString();\n    }\n    return Number(this.position);\n  }\n\n  /**\n   * Returns the duration in milliseconds. The duration is based on the CSS custom property\n   * `--cx-transition-duration`. Defaults to 300 milliseconds.\n   */\n  protected get duration(): number {\n    const duration: string = getComputedStyle(this.elementRef.nativeElement)\n      .getPropertyValue('--cx-transition-duration')\n      .trim();\n\n    if (duration.indexOf('ms') > -1) {\n      return Number(duration.split('ms')[0]);\n    } else if (duration.indexOf('s') > -1) {\n      return Number(duration.split('s')[0]) * 1000;\n    } else {\n      return 300;\n    }\n  }\n\n  /**\n   * The view is removed from the `SplitService` so that the view no longer\n   * plays a role in the overall split view.\n   */\n  ngOnDestroy() {\n    this.splitService.remove(this.viewPosition);\n    this.subscription?.unsubscribe();\n  }\n}\n","<ng-content></ng-content>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SplitViewComponent } from './split/split-view.component';\nimport { ViewComponent } from './view/view.component';\n\n/**\n * The split-view component supports an unlimited number of nested views. Nested views are rendered\n * next to each other. The views can be rendered next to each other, but the max number of visible\n * views can be limisted as well. This is configurable in the CSS layer, so that the max number of views\n * per split-view can be different for each component.\n *\n * The basic structure of the split-view component is shown below:\n *\n *\n * ```\n * <cx-split-view>\n * </cx-split-view>\n * ```\n *\n * The UX pattern used for the split-view is driven by an initial view, which gets splitted into\n * more views as soon as the user starts interacting with the initial and subsequantial views.\n * The views can be driven by routes, which means that you can navigate through the splitted views\n * by using the browser history as well as share or bookmark splitted views.\n *\n * The UI is implemented in the style layer, with only a few generic style rules. Most of the split\n * view style is driven by CSS properties, so that alternative split-view styles can be introduced\n * per page or component.\n *\n * The max number of views per split-view on mobile is limited to 1 by default, where as on tablet\n * (and higher) it is set to 2. Spartacus has a pretty narrow layout, which is why 2 is maximum,\n * but customers could alter the layout to bring in more views in the same split-view at the time.\n *\n */\n\n@NgModule({\n  declarations: [SplitViewComponent, ViewComponent],\n  imports: [CommonModule, RouterModule],\n  exports: [SplitViewComponent, ViewComponent],\n})\nexport class SplitViewModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  GlobalMessageEntities,\n  GlobalMessageService,\n  GlobalMessageType,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-global-message',\n  templateUrl: './global-message.component.html',\n})\nexport class GlobalMessageComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  messages$: Observable<GlobalMessageEntities>;\n  messageType: typeof GlobalMessageType = GlobalMessageType;\n\n  constructor(protected globalMessageService: GlobalMessageService) {}\n\n  ngOnInit(): void {\n    this.messages$ = this.globalMessageService.get();\n  }\n\n  clear(type: GlobalMessageType, index: number): void {\n    this.globalMessageService.remove(type, index);\n  }\n}\n","<div *ngIf=\"messages$ | async as messages\">\n  <div\n    class=\"alert alert-success\"\n    *ngFor=\"\n      let confMsg of messages[messageType.MSG_TYPE_CONFIRMATION];\n      let i = index\n    \"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.SUCCESS\"></cx-icon>\n    </span>\n    <span>{{ confMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_CONFIRMATION, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n  <div\n    class=\"alert alert-info\"\n    *ngFor=\"let infoMsg of messages[messageType.MSG_TYPE_INFO]; let i = index\"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.INFO\"></cx-icon>\n    </span>\n    <span>{{ infoMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_INFO, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n  <div\n    class=\"alert alert-warning\"\n    *ngFor=\"\n      let infoMsg of messages[messageType.MSG_TYPE_WARNING];\n      let i = index\n    \"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.WARNING\"></cx-icon>\n    </span>\n    <span>{{ infoMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_WARNING, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n  <div\n    class=\"alert alert-danger\"\n    *ngFor=\"let errorMsg of messages[messageType.MSG_TYPE_ERROR]; let i = index\"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n    </span>\n    <span>{{ errorMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_ERROR, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { GlobalMessageComponent } from './global-message.component';\n\n@NgModule({\n  imports: [CommonModule, IconModule, I18nModule],\n  declarations: [GlobalMessageComponent],\n  exports: [GlobalMessageComponent],\n})\nexport class GlobalMessageComponentModule {}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { GlobalMessageType } from '@spartacus/core';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\n@Component({\n  selector: 'cx-message',\n  templateUrl: './message.component.html',\n})\nexport class MessageComponent {\n  @Input()\n  text: string;\n\n  @Input()\n  actionButtonText: string;\n\n  @Input()\n  accordionText: string;\n\n  @Input()\n  showBody = false;\n\n  @Input()\n  isVisibleCloseButton = true;\n\n  @Input()\n  type: GlobalMessageType;\n\n  @Output()\n  closeMessage: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  buttonAction: EventEmitter<void> = new EventEmitter();\n\n  iconTypes = ICON_TYPE;\n\n  constructor() {}\n\n  get getCssClassesForMessage(): Record<string, boolean> {\n    return {\n      'cx-message-success':\n        this.type === GlobalMessageType.MSG_TYPE_CONFIRMATION,\n      'cx-message-info': this.type === GlobalMessageType.MSG_TYPE_INFO,\n      'cx-message-warning': this.type === GlobalMessageType.MSG_TYPE_WARNING,\n      'cx-message-danger': this.type === GlobalMessageType.MSG_TYPE_ERROR,\n    };\n  }\n\n  get getIconType(): string {\n    switch (this.type) {\n      case GlobalMessageType.MSG_TYPE_CONFIRMATION:\n        return ICON_TYPE.SUCCESS;\n      case GlobalMessageType.MSG_TYPE_WARNING:\n        return ICON_TYPE.WARNING;\n      case GlobalMessageType.MSG_TYPE_ERROR:\n        return ICON_TYPE.ERROR;\n      case GlobalMessageType.MSG_TYPE_INFO:\n        return ICON_TYPE.INFO;\n    }\n  }\n}\n","<div [ngClass]=\"getCssClassesForMessage\" class=\"cx-message\">\n  <div class=\"cx-message-content\">\n    <div class=\"cx-message-header\">\n      <span class=\"cx-message-icon\">\n        <cx-icon [type]=\"getIconType\"></cx-icon>\n      </span>\n\n      <span class=\"cx-message-text\">\n        {{ text }}\n        <button\n          *ngIf=\"accordionText\"\n          (click)=\"showBody = !showBody\"\n          class=\"cx-message-accordion-button link cx-action-link\"\n          type=\"button\"\n        >\n          {{ accordionText }}\n          <cx-icon\n            [type]=\"showBody ? 'CARET_UP' : 'CARET_DOWN'\"\n            class=\"cx-message-accordion-icon\"\n          ></cx-icon>\n        </button>\n        <button\n          *ngIf=\"actionButtonText\"\n          (click)=\"buttonAction.emit()\"\n          class=\"btn btn-link cx-action-link\"\n          type=\"button\"\n        >\n          {{ actionButtonText }}\n        </button>\n      </span>\n\n      <button\n        *ngIf=\"isVisibleCloseButton\"\n        (click)=\"closeMessage.emit()\"\n        class=\"close\"\n        type=\"button\"\n      >\n        <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n      </button>\n    </div>\n\n    <div *ngIf=\"showBody || !accordionText\" class=\"cx-message-body\">\n      <ng-content></ng-content>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { MessageComponent } from './message.component';\n\n@NgModule({\n  imports: [CommonModule, IconModule, I18nModule],\n  declarations: [MessageComponent],\n  exports: [MessageComponent],\n})\nexport class MessageComponentModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { PromotionsComponent } from './promotions.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [PromotionsComponent],\n  exports: [PromotionsComponent],\n})\nexport class PromotionsModule {}\n","import { Injectable, Injector, Optional } from '@angular/core';\nimport {\n  CmsSiteContextSelectorComponent,\n  ContextServiceMap,\n  CURRENCY_CONTEXT_ID,\n  LANGUAGE_CONTEXT_ID,\n  SiteContext,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, switchMap, take } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { SiteContextType } from './site-context.model';\n\nconst LABELS = {\n  [LANGUAGE_CONTEXT_ID]: 'Language',\n  [CURRENCY_CONTEXT_ID]: 'Currency',\n};\n\n@Injectable()\nexport class SiteContextComponentService {\n  constructor(\n    @Optional()\n    protected componentData: CmsComponentData<CmsSiteContextSelectorComponent>,\n    private contextServiceMap: ContextServiceMap,\n    protected injector: Injector\n  ) {}\n\n  getItems(context?: SiteContextType): Observable<any> {\n    return this.getService(context).pipe(\n      switchMap((service: SiteContext<any>) => service.getAll()),\n      switchMap((items) =>\n        this.getContext(context).pipe(\n          switchMap((ctx) => {\n            const itemsCopy = [];\n            for (const item of items) {\n              itemsCopy.push({\n                ...item,\n                label: this.getOptionLabel(item, ctx),\n              });\n            }\n            return of(itemsCopy);\n          })\n        )\n      )\n    );\n  }\n\n  getActiveItem(context?: SiteContextType): Observable<string> {\n    return this.getService(context).pipe(\n      switchMap((service: SiteContext<any>) => service.getActive())\n    );\n  }\n\n  getLabel(context?: SiteContextType): Observable<any> {\n    return this.getContext(context).pipe(\n      map((ctx) => {\n        return LABELS[ctx];\n      })\n    );\n  }\n\n  setActive(value: string, context?: SiteContextType): void {\n    this.getService(context)\n      .pipe(take(1))\n      .subscribe((service) => {\n        service.setActive(value);\n      });\n  }\n\n  protected getService(\n    context?: SiteContextType\n  ): Observable<SiteContext<any>> {\n    return this.getContext(context).pipe(\n      map((ctx: string) => (ctx ? this.getInjectedService(ctx) : undefined)),\n      filter((s) => !!s)\n    );\n  }\n\n  protected getContext(context?: SiteContextType): Observable<string> {\n    if (context) {\n      return of(context);\n    } else if (this.componentData) {\n      return this.componentData.data$.pipe(\n        map((data) => data?.context),\n        map((ctx) => {\n          switch (ctx) {\n            case 'LANGUAGE':\n              return LANGUAGE_CONTEXT_ID;\n            case 'CURRENCY':\n              return CURRENCY_CONTEXT_ID;\n            default:\n              return ctx;\n          }\n        })\n      );\n    }\n  }\n\n  protected getInjectedService(context: string): SiteContext<any> {\n    return this.injector.get<SiteContext<any>>(\n      this.contextServiceMap[context],\n      null\n    );\n  }\n\n  protected getOptionLabel(item: any, context?: string): string {\n    switch (context) {\n      case LANGUAGE_CONTEXT_ID:\n        return item.nativeName;\n      case CURRENCY_CONTEXT_ID:\n        return item.symbol + ' ' + item.isocode;\n      default:\n        return item.isocode;\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { SiteContext } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../icon/icon.model';\nimport { SiteContextComponentService } from './site-context-component.service';\nimport { SiteContextType } from './site-context.model';\n\n@Component({\n  selector: 'cx-site-context-selector',\n  templateUrl: './site-context-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SiteContextSelectorComponent {\n  siteContextService: SiteContext<any>;\n  iconTypes = ICON_TYPE;\n  /**\n   * the context type can be set as an input. If the context is\n   * not given, the context will be loaded from the backend.\n   */\n  @Input() context: SiteContextType;\n\n  constructor(private componentService: SiteContextComponentService) {}\n\n  get items$(): Observable<any> {\n    return this.componentService.getItems(this.context);\n  }\n\n  get activeItem$(): Observable<string> {\n    return this.componentService.getActiveItem(this.context);\n  }\n\n  set active(value: string) {\n    this.componentService.setActive(value, this.context);\n  }\n\n  get label$(): Observable<any> {\n    return this.componentService.getLabel(this.context);\n  }\n}\n","<label *ngIf=\"(items$ | async)?.length > 1 && (items$ | async) as items\">\n  <span>{{ label$ | async }}</span>\n  <select (change)=\"active = $event.target.value\">\n    <option\n      *ngFor=\"let item of items\"\n      value=\"{{ item.isocode }}\"\n      [selected]=\"(activeItem$ | async) === item.isocode\"\n    >\n      {{ item.label }}\n    </option></select\n  ><cx-icon [type]=\"iconTypes.CARET_DOWN\" class=\"small\"></cx-icon>\n</label>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n  selector: 'cx-language-currency-selector',\n  template: `\n    <cx-site-context-selector context=\"language\"></cx-site-context-selector>\n    <cx-site-context-selector context=\"currency\"></cx-site-context-selector>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LanguageCurrencyComponent {}\n","import { CommonModule } from '@angular/common';\nimport { Injector, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  ContextServiceMap,\n  provideDefaultConfig,\n  SiteContextModule,\n} from '@spartacus/core';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { IconModule } from '../icon/index';\nimport { LanguageCurrencyComponent } from './language-currency.component';\nimport { SiteContextComponentService } from './site-context-component.service';\nimport { SiteContextSelectorComponent } from './site-context-selector.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, SiteContextModule, IconModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSSiteContextComponent: {\n          component: SiteContextSelectorComponent,\n          providers: [\n            {\n              provide: SiteContextComponentService,\n              useClass: SiteContextComponentService,\n              deps: [CmsComponentData, ContextServiceMap, Injector],\n            },\n          ],\n        },\n        LanguageCurrencyComponent: {\n          component: LanguageCurrencyComponent,\n        },\n      },\n    }),\n    SiteContextComponentService,\n  ],\n  declarations: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n  exports: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n})\nexport class SiteContextSelectorModule {}\n","export enum SiteContextType {\n  LANGUAGE = 'LANGUAGE',\n  CURRENCY = 'CURRENCY',\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  Output,\n} from '@angular/core';\nimport { ICON_TYPE } from '../../../cms-components/misc/index';\n\n/**\n * Star rating component can be used to view existing ratings as well\n * as create new ratings. The component can be used for any ratings.\n */\n@Component({\n  selector: 'cx-star-rating',\n  templateUrl: './star-rating.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class StarRatingComponent {\n  protected initialRate = 0;\n\n  icon = ICON_TYPE.STAR;\n\n  /**\n   * The rating component can be used in disabled mode,\n   * so that the interaction is not provided.\n   *\n   * Defaults to true.\n   */\n  @Input() @HostBinding('attr.disabled') disabled = true;\n\n  /**\n   * The rating is used to color the rating stars. It can have a\n   * precise number. The rating number is used for a CSS custom property\n   * (AKA css variable) value. The actually coloring is done in CSS.\n   */\n  @Input()\n  @HostBinding('style.--star-fill')\n  rating: number = this.initialRate;\n\n  /**\n   * Emits the given rating when the user clicks on a star.\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() change = new EventEmitter<number>();\n\n  setRate(value: number): void {\n    if (this.disabled) {\n      return;\n    }\n    this.rating = value;\n  }\n\n  @HostListener('mouseout')\n  reset() {\n    if (this.disabled) {\n      return;\n    }\n    this.rating = this.initialRate ?? 0;\n  }\n\n  saveRate(rating: number): void {\n    if (this.disabled) {\n      return;\n    }\n    this.initialRate = rating;\n    this.setRate(rating);\n    this.change.emit(rating);\n  }\n}\n","<cx-icon\n  *ngFor=\"let i of [1, 2, 3, 4, 5]\"\n  [type]=\"icon\"\n  class=\"star\"\n  (mouseover)=\"setRate(i)\"\n  (click)=\"saveRate(i)\"\n  (keydown.space)=\"saveRate(i)\"\n  [attr.tabindex]=\"disabled ? null : 0\"\n></cx-icon>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IconModule } from '../../../cms-components/misc/index';\nimport { StarRatingComponent } from './star-rating.component';\n\n@NgModule({\n  imports: [CommonModule, IconModule],\n  declarations: [StarRatingComponent],\n  exports: [StarRatingComponent],\n})\nexport class StarRatingModule {}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport { OutletContextData } from '../../../../cms-structure/outlet/outlet.model';\nimport { TableHeaderOutletContext } from '../table.model';\n\n@Component({\n  selector: 'cx-table-data-cell',\n  template: `{{ value }}`,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TableDataCellComponent {\n  constructor(protected outlet: OutletContextData<TableHeaderOutletContext>) {}\n\n  @HostBinding('attr.title')\n  get value(): string {\n    return this.model[this.field];\n  }\n\n  protected get model(): any {\n    return this.outlet?.context;\n  }\n\n  protected get field(): string {\n    return this.outlet?.context?._field;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { OutletContextData } from '../../../../cms-structure/outlet/outlet.model';\nimport {\n  TableFieldOptions,\n  TableHeader,\n  TableHeaderOutletContext,\n} from '../table.model';\n\n@Component({\n  selector: 'cx-table-header-cell',\n  template: `{{ header || (localizedHeader | cxTranslate) }}`,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TableHeaderCellComponent {\n  constructor(protected outlet: OutletContextData<TableHeaderOutletContext>) {}\n\n  /**\n   * Returns the static label for the given field, if available.\n   */\n  get header(): string {\n    if (typeof this.fieldOptions?.label === 'string') {\n      return <string>this.fieldOptions.label;\n    }\n  }\n\n  /**\n   * Returns the localized label for the given field.\n   *\n   * The localized label is either driven by the configured `label.i18nKey`\n   * or concatenated by the table `type` and field `key`:\n   *\n   * `[tableType].[fieldKey]`\n   *\n   * The localized header can be translated with the `cxTranslate` pipe or `TranslationService`.\n   */\n  get localizedHeader(): string {\n    return (\n      (this.fieldOptions?.label as TableHeader)?.i18nKey ||\n      `${this.i18nRoot}.${this.field}`\n    );\n  }\n\n  protected get fieldOptions(): TableFieldOptions {\n    return this.outlet?.context._options?.cells?.[this.field];\n  }\n\n  protected get field(): string {\n    return this.outlet?.context?._field;\n  }\n\n  protected get type(): string {\n    return this.outlet?.context?._type;\n  }\n\n  protected get i18nRoot(): string {\n    return this.outlet?.context?._i18nRoot;\n  }\n}\n","import { TableDataCellComponent } from '../table-data-cell/table-data-cell.component';\nimport { TableHeaderCellComponent } from '../table-header-cell/table-header-cell.component';\nimport { TableConfig } from './table.config';\n\nexport const defaultTableConfig: TableConfig = {\n  tableOptions: {\n    headerComponent: TableHeaderCellComponent,\n    dataComponent: TableDataCellComponent,\n  },\n};\n","import { Injectable, Type } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { BREAKPOINT } from '../../../../layout/config/layout-config';\nimport { TableStructureConfiguration } from '../table.model';\n\n/**\n * The `TableConfig` provides a table configurations for specific table types. You can define\n * an all-screen table structure as well as a breakpoint specific table structure. The various\n * table structures are merged from small to large screen configurations, depending on the users\n * screen size.\n *\n * The `table.type` is used as a key to distinguish the various table configurations in the application.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class TableConfig {\n  table?: {\n    [tableType: string]: ResponsiveTableConfiguration;\n  };\n  tableOptions?: {\n    /**\n     * Global component to render table header _content_ (`<th>...</th>`). A specific component\n     * can be configured alternatively per table or table field.\n     */\n    headerComponent?: Type<any>;\n\n    /**\n     * Global component to render table cell _content_ (`<td>...</td>`). A specific component per\n     * field can be configured alternatively.\n     *\n     * If no component is available, the table content will render as-is.\n     */\n    dataComponent?: Type<any>;\n  };\n}\n\n/**\n * Helper configuration to introduce breakpoint specific table configuration.\n */\nexport interface ResponsiveTableConfiguration\n  extends TableStructureConfiguration {\n  /** The table configurations for all screens */\n  [BREAKPOINT.xl]?: TableStructureConfiguration;\n  /** The table configurations for large screens and smaller */\n  [BREAKPOINT.lg]?: TableStructureConfiguration;\n  /** The table configurations for medium screens and smaller */\n  [BREAKPOINT.md]?: TableStructureConfiguration;\n  /** The table configurations for small screens and smaller */\n  [BREAKPOINT.sm]?: TableStructureConfiguration;\n  /** The table configurations for extra small screens */\n  [BREAKPOINT.xs]?: TableStructureConfiguration;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends TableConfig {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TableDataCellComponent } from './table-data-cell.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TableDataCellComponent],\n})\nexport class TableDataCellModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { TableHeaderCellComponent } from './table-header-cell.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [TableHeaderCellComponent],\n})\nexport class TableHeaderCellModule {}\n","import { ComponentFactoryResolver, Injectable, Type } from '@angular/core';\nimport { OutletService } from '../../../cms-structure/outlet/outlet.service';\nimport { TableConfig } from './config/table.config';\nimport {\n  TableDataOutletContext,\n  TableHeaderOutletContext,\n  TableOptions,\n  TableStructure,\n} from './table.model';\n\n/**\n * The table renderer service adds a component for each table cells (th and td)\n * based on a fine grained configuration. Each table type can configure both global\n * components for headers and cells as well as individual components for field\n * specific cells.\n *\n * The components are added to the outlet slots for the corresponding cells. The table\n * structure and data is added to the outlet context.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class TableRendererService {\n  // keep a list of outletRefs to avoid recreation\n  protected outletRefs = new Map();\n\n  constructor(\n    protected outletService: OutletService,\n    protected componentFactoryResolver: ComponentFactoryResolver,\n    protected config: TableConfig\n  ) {}\n\n  /**\n   * Adds the configured table component for the header and data.\n   */\n  add(structure: TableStructure): void {\n    structure?.cells?.forEach((field) => {\n      const thRenderer = this.getHeaderRenderer(structure, field);\n      if (thRenderer) {\n        const ref = this.getHeaderOutletRef(structure.type, field);\n        this.render(ref, thRenderer);\n      }\n      const tdRenderer = this.getDataRenderer(structure, field);\n      if (tdRenderer) {\n        const ref = this.getDataOutletRef(structure.type, field);\n        this.render(ref, tdRenderer);\n      }\n    });\n  }\n\n  protected render(outletRef: string, renderer: Type<any>) {\n    if (this.outletRefs.has(outletRef)) {\n      return;\n    }\n    this.outletRefs.set(outletRef, true);\n    const template =\n      this.componentFactoryResolver.resolveComponentFactory(renderer);\n    this.outletService.add(outletRef, <any>template);\n  }\n\n  /**\n   * Returns the header render component for the given field.\n   */\n  protected getHeaderRenderer(\n    structure: TableStructure,\n    field: string\n  ): Type<any> {\n    return (\n      structure.options?.cells?.[field]?.headerComponent ||\n      structure.options?.headerComponent ||\n      this.config.tableOptions?.headerComponent\n    );\n  }\n\n  /**\n   * Returns the data render component for the given field.\n   */\n  protected getDataRenderer(\n    structure: TableStructure,\n    field: string\n  ): Type<any> {\n    return (\n      structure.options?.cells?.[field]?.dataComponent ||\n      structure.options?.dataComponent ||\n      this.config.tableOptions?.dataComponent\n    );\n  }\n\n  /**\n   * Returns the header (th) outlet reference for the given field.\n   *\n   * The outlet reference is generated as:\n   * `table.[tableType].header.[field]`\n   */\n  getHeaderOutletRef(type: string, field: string): string {\n    return `table.${type}.header.${field}`;\n  }\n\n  /**\n   * Returns the header (th) outlet context for the given field.\n   */\n  getHeaderOutletContext(\n    type: string,\n    options: TableOptions,\n    i18nRoot: string,\n    field: string\n  ): TableHeaderOutletContext {\n    return {\n      _type: type,\n      _options: options,\n      _field: field,\n      _i18nRoot: i18nRoot,\n    };\n  }\n\n  /**\n   * Returns the data (td) outlet reference for the given field.\n   *\n   * The field is generated as:\n   * `table.[tableType].data.[tableField]`\n   */\n  getDataOutletRef(type: string, field: string): string {\n    return `table.${type}.data.${field}`;\n  }\n\n  /**\n   * Returns the data (td) outlet context for the given field.\n   */\n  getDataOutletContext(\n    type: string,\n    options: TableOptions,\n    i18nRoot: string,\n    field: string,\n    data: any\n  ): TableDataOutletContext {\n    return {\n      ...data,\n      _type: type,\n      _options: options,\n      _field: field,\n      _i18nRoot: i18nRoot,\n    };\n  }\n}\n","import { Type } from '@angular/core';\nimport { PaginationModel } from '@spartacus/core';\n\n/**\n * Contains the table data and structure for the `TableComponent`.\n */\nexport interface Table<T = any> {\n  /**\n   * The table structure provides details about the headers of the table.\n   */\n  structure: TableStructure;\n\n  /**\n   * The data that is listed in the table component.\n   */\n  data: T[];\n\n  /**\n   * The pagination component is used to paginate through the data.\n   */\n  pagination?: PaginationModel;\n\n  /**\n   * The sort options for the table.\n   */\n  sorts?: any[];\n}\n\nexport interface TableStructureConfiguration {\n  /**\n   * Provide the bare structure of the table.\n   */\n  cells?: string[];\n\n  /**\n   * Global table structure options.\n   */\n  options?: TableOptions;\n}\n\nexport interface TableOptions {\n  /**\n   * Default pagination for the table that is used for the initial load of the table data.\n   */\n  pagination?: PaginationModel;\n\n  /**\n   * The layout for the table component can be used for horizontal, vertical and vertical stacked\n   * table layouts.\n   */\n  layout?: TableLayout;\n\n  /**\n   * Global component to render table header _content_ (`<th>...</th>`). A specific component per\n   * field can be configured alternatively.\n   *\n   * If no component is available, the table component will render a static label or use the\n   * configured i18n label.\n   */\n  headerComponent?: Type<any>;\n\n  /**\n   * Global component to render table cell _content_ (`<td>...</td>`). A specific component per\n   * field can be configured alternatively.\n   *\n   * If no component is available, the table content will render as-is.\n   */\n  dataComponent?: Type<any>;\n\n  // field specific options\n  cells?: {\n    [fieldKey: string]: TableFieldOptions;\n  };\n}\n\n/**\n * Layout orientation for the table configuration.\n */\nexport enum TableLayout {\n  /**\n   * Renders the table vertically, with a heading on top of the table.\n   *\n   * Vertical layout is most common and the default layout.\n   */\n  VERTICAL = 1,\n\n  /**\n   * Stacks items in a tables by generating a `tbody` for each item.\n   */\n  VERTICAL_STACKED,\n\n  /**\n   * Horizontal oriented table layout renders the table headers in the first column of the table.\n   */\n  HORIZONTAL,\n}\n\nexport interface TableFieldOptions {\n  /**\n   * Optional label to add static or localized headers. If the label is not present, the\n   * field key is mapped to a i18n property.\n   */\n  label?: string | TableHeader;\n\n  /**\n   * Indicates wether the cell is linkable.\n   *\n   * If the cells is linkable, an anchor link can be generated in the table data element.\n   */\n  linkable?: boolean;\n\n  /**\n   * Component to render table header _content_ (`<th>...</th>`) for the table field.\n   *\n   * If no component is configured, the global table component for the header will be used\n   * instead.\n   */\n  headerComponent?: Type<any>;\n\n  /**\n   * Component to render table data _content_ (`<td>...</td>`) for the table field.\n   *\n   * If no component is configured, the global table component for the cell data will be used\n   * instead.\n   */\n  dataComponent?: Type<any>;\n}\n\n/**\n * The TableStructure holds the header structure of the table.\n */\nexport interface TableStructure extends TableStructureConfiguration {\n  /**\n   * The table type is a mandatory property. The type is used to identify the table\n   * configuration and is used to generate a unique outlet reference.\n   */\n  type: string;\n}\n\n/**\n * Provides the core table structure, typically being used to render table columns.\n */\nexport interface TableHeader {\n  /**\n   * The header key is used to:\n   * - generate a unique class on each table row\n   * - generate a template for each table header cell and data cell\n   * - translate the key using the translate module\n   *   (fallback in case there is no label available)\n   */\n  i18nKey?: string;\n}\n\nexport interface TableHeaderOutletContext {\n  _type: string;\n  _field: string;\n  _options?: TableOptions;\n  /**\n   * The i18nRoot is used to build localized table headers. The i18nRoot\n   * is used as a prefix for the `_field`. Table header labels wil use the\n   * following locales:\n   *\n   * `[i18nRoot].[_field]`\n   */\n  _i18nRoot?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface TableDataOutletContext extends TableHeaderOutletContext {\n  [property: string]: any;\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  isDevMode,\n  Output,\n} from '@angular/core';\nimport { TableRendererService } from './table-renderer.service';\nimport {\n  TableDataOutletContext,\n  TableHeaderOutletContext,\n  TableLayout,\n  TableStructure,\n} from './table.model';\n\n/**\n * The table component provides a generic table DOM structure, with 3 layout types:\n * horizontal, vertical and _stacked vertical_ layout. The layout is driven by the\n * table structure.\n *\n * The implementation is fairly \"dumb\" and only renders string based content for TH\n * and TD elements. The actual cell rendering is delegated to a (configurable) cell\n * component. Additionally, each cell is registered as an outlet, so that customizations\n * can be done by both outlet templates and components.\n *\n * The outlet references are concatenated from the table `type` and header `key`. The\n * following snippet shows an outlet generated for a table header, for the table type\n * \"cost-center\" with a header key \"name\":\n *\n * ```\n * <th>\n *   <template cxOutlet=\"table.cost-center.header.name\">\n *   </template>\n * </th>\n * ```\n *\n * Similarly, the data cells (`<td>`) are generated with the outlet template reference\n * `table.cost-center.data.name`.\n */\n@Component({\n  selector: 'cx-table',\n  templateUrl: './table.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TableComponent<T> {\n  @HostBinding('attr.__cx-table-type') tableType: string;\n  @HostBinding('class.horizontal') horizontalLayout: boolean;\n  @HostBinding('class.vertical') verticalLayout: boolean;\n  @HostBinding('class.vertical-stacked') verticalStackedLayout: boolean;\n\n  private _structure: TableStructure;\n  @Input() set structure(structure: TableStructure) {\n    this._structure = structure;\n    this.init();\n  }\n  get structure(): TableStructure {\n    return this._structure;\n  }\n\n  @Input() data: T[];\n\n  /**\n   * The i18nRoot is passed into the table cell context, so that\n   * cell components can concatenate the i18n root and label.\n   */\n  @Input() i18nRoot: string;\n\n  /**\n   * Provides a mechanism to compare a matching value for each item.\n   *\n   * The `property` refers to the dataset.value property, and the value tot the\n   * matching property value.\n   */\n  @Input() currentItem: { value: any; property: string };\n\n  @Output() launch = new EventEmitter();\n\n  constructor(protected rendererService: TableRendererService) {}\n\n  init() {\n    this.verticalLayout = !this.layout || this.layout === TableLayout.VERTICAL;\n    this.verticalStackedLayout = this.layout === TableLayout.VERTICAL_STACKED;\n    this.horizontalLayout = this.layout === TableLayout.HORIZONTAL;\n\n    this.rendererService.add(this.structure);\n\n    this.addTableDebugInfo();\n  }\n\n  launchItem(item: any): void {\n    this.launch.emit(item);\n  }\n\n  /**\n   * Indicates whether the given item is the current item.\n   *\n   * The current item is driven by the `currentItem`, that holds a\n   * property and value to compare.\n   */\n  isCurrentItem(item: any): boolean {\n    if (!this.currentItem || !this.currentItem.value) {\n      return false;\n    }\n    return this.currentItem?.value === item?.[this.currentItem?.property];\n  }\n\n  /**\n   * Returns the header (th) outlet reference for the given field.\n   */\n  getHeaderOutletRef(field: string): string {\n    return this.rendererService.getHeaderOutletRef(this.type, field);\n  }\n\n  /**\n   * Returns the header (th) outlet context for the given field.\n   */\n  getHeaderOutletContext(field: string): TableHeaderOutletContext {\n    return this.rendererService.getHeaderOutletContext(\n      this.type,\n      this.options,\n      this.i18nRoot,\n      field\n    );\n  }\n\n  /**\n   * Returns the data (td) outlet reference for the given field.\n   */\n  getDataOutletRef(field: string): string {\n    return this.rendererService.getDataOutletRef(this.type, field);\n  }\n\n  /**\n   * Returns the data (td) outlet context for the given field.\n   */\n  getDataOutletContext(field: string, data: any): TableDataOutletContext {\n    return this.rendererService.getDataOutletContext(\n      this.type,\n      this.options,\n      this.i18nRoot,\n      field,\n      data\n    );\n  }\n\n  trackData(_i: number, item: any): any {\n    return JSON.stringify(item);\n  }\n\n  /**\n   * Generates the table type into the UI in devMode, so that developers\n   * can easily get the notion of the table type.\n   */\n  protected addTableDebugInfo() {\n    if (isDevMode() && this.type) {\n      this.tableType = this.type;\n    }\n  }\n\n  /**\n   * Helper method to return the deeply nested orientation configuration.\n   */\n  private get layout() {\n    return this.structure?.options?.layout;\n  }\n\n  /**\n   * Helper method to return the deeply nested type.\n   */\n  private get type() {\n    return this.structure?.type;\n  }\n\n  private get options() {\n    return this.structure?.options;\n  }\n}\n","<table *ngIf=\"structure\">\n  <ng-container *ngIf=\"verticalStackedLayout\">\n    <tbody\n      *ngFor=\"let item of data; trackBy: trackData\"\n      (click)=\"launchItem(item)\"\n      [class.is-current]=\"isCurrentItem(item)\"\n    >\n      <tr *ngFor=\"let cell of structure.cells\" [class]=\"cell\">\n        <th>\n          <ng-template\n            [cxOutlet]=\"getHeaderOutletRef(cell)\"\n            [cxOutletContext]=\"getHeaderOutletContext(cell)\"\n          >\n            {{ cell }}\n          </ng-template>\n        </th>\n        <td>\n          <ng-template\n            [cxOutlet]=\"getDataOutletRef(cell)\"\n            [cxOutletContext]=\"getDataOutletContext(cell, item)\"\n          >\n            {{ item[cell] }}\n          </ng-template>\n        </td>\n      </tr>\n    </tbody>\n  </ng-container>\n\n  <!-- vertical tables render the item  -->\n  <ng-container *ngIf=\"verticalLayout\">\n    <thead>\n      <tr>\n        <th scope=\"col\" *ngFor=\"let cell of structure.cells\" [class]=\"cell\">\n          <ng-template\n            [cxOutlet]=\"getHeaderOutletRef(cell)\"\n            [cxOutletContext]=\"getHeaderOutletContext(cell)\"\n          >\n            {{ cell }}\n          </ng-template>\n        </th>\n      </tr>\n    </thead>\n\n    <tr\n      *ngFor=\"let item of data; trackBy: trackData\"\n      [class.is-current]=\"isCurrentItem(item)\"\n      (click)=\"launchItem(item)\"\n    >\n      <td *ngFor=\"let cell of structure.cells; let i = index\" [class]=\"cell\">\n        <ng-template\n          [cxOutlet]=\"getDataOutletRef(cell)\"\n          [cxOutletContext]=\"getDataOutletContext(cell, item)\"\n        >\n          {{ item[cell] }}\n        </ng-template>\n      </td>\n    </tr>\n  </ng-container>\n\n  <ng-container *ngIf=\"horizontalLayout\">\n    <tr *ngFor=\"let cell of structure.cells\" [class]=\"cell\">\n      <th scope=\"col\">\n        <ng-template\n          [cxOutlet]=\"getHeaderOutletRef(cell)\"\n          [cxOutletContext]=\"getHeaderOutletContext(cell)\"\n        >\n          {{ cell }}\n        </ng-template>\n      </th>\n      <td\n        *ngFor=\"let item of data; trackBy: trackData\"\n        [class.is-current]=\"isCurrentItem(item)\"\n        (click)=\"launchItem(item)\"\n      >\n        <ng-template\n          [cxOutlet]=\"getDataOutletRef(cell)\"\n          [cxOutletContext]=\"getDataOutletContext(cell, item)\"\n        >\n          {{ item[cell] }}\n        </ng-template>\n      </td>\n    </tr>\n  </ng-container>\n</table>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { defaultTableConfig } from './config/default-table.config';\nimport { TableDataCellModule } from './table-data-cell/table-data-cell.module';\nimport { TableHeaderCellModule } from './table-header-cell/table-header-cell.module';\nimport { TableComponent } from './table.component';\n\n/**\n * The TableModule provides a table component that is driven by (responsible) configuration.\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    OutletModule,\n    TableHeaderCellModule,\n    TableDataCellModule,\n  ],\n  declarations: [TableComponent],\n  exports: [TableComponent],\n  providers: [provideConfig(defaultTableConfig)],\n})\nexport class TableModule {}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport { BREAKPOINT } from '../../../layout/config/layout-config';\nimport {\n  ResponsiveTableConfiguration,\n  TableConfig,\n} from './config/table.config';\nimport { TableStructure, TableStructureConfiguration } from './table.model';\n\n/**\n * Responsive table service.\n *\n * The `TableService` is used to build a `TableStructure` by configuration. The configuration\n * allows for breakpoint specific configuration, so that the table can differentiate for\n * various screen sizes.\n *\n * While there are some global options, the configuration is mainly driven by the table _type_.\n *\n * If there is no table configuration for the given type found, a table header structure\n * is generated based on the actual data (if available) or randomly by generating 5 random headers.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class TableService {\n  constructor(\n    protected breakpointService: BreakpointService,\n    protected config: TableConfig\n  ) {}\n\n  /**\n   * Builds the table structure.\n   *\n   * @param tableType The table type is used  to find the specific table configuration.\n   * @param defaultStructure (optional) Default table structure that contains fallback options. More specific options are merged with the default structure.\n   * @param data$ (optional) The actual data can be passed in to generate the table structure based on actual data.\n   */\n  buildStructure(\n    tableType: string,\n    defaultStructure?: ResponsiveTableConfiguration\n  ): Observable<TableStructure> {\n    if (this.hasTableConfig(tableType)) {\n      return this.buildStructureFromConfig(tableType, defaultStructure);\n    } else {\n      return this.buildRandomStructure(tableType);\n    }\n  }\n\n  /**\n   * Returns the table structure by configuration. The configuration can be\n   * breakpoint-driven, which means that an alternative header structure can\n   * be created per screen size.\n   *\n   * The breakpoint is resolved by teh `BreakpointService`.\n   */\n  protected buildStructureFromConfig(\n    type: string,\n    defaultStructure?: ResponsiveTableConfiguration\n  ): Observable<TableStructure> {\n    return this.breakpointService.breakpoint$.pipe(\n      map((breakpoint) => ({\n        ...this.getTableConfig(type, breakpoint, defaultStructure),\n        type,\n      }))\n    );\n  }\n\n  /**\n   * Finds all applicable table configuration for the given type and breakpoint.\n   * The default table configuration is merged with all relevant breakpoint\n   * configurations.\n   *\n   * This allows to have some default configurations that apply to all screens, and\n   * add configuration options for some screens.\n   */\n  protected getTableConfig(\n    type: string,\n    breakpoint: BREAKPOINT,\n    defaultStructure?: ResponsiveTableConfiguration\n  ): TableStructureConfiguration {\n    if (!this.config.table?.[type]) {\n      return null;\n    }\n\n    const relevant = this.findRelevantBreakpoints(breakpoint);\n\n    const closestBreakpoint = [...relevant]\n      .reverse()\n      .find((br) => !!this.config.table[type][br]?.cells);\n    const cells =\n      this.config.table[type][closestBreakpoint]?.cells ||\n      this.config.table[type].cells ||\n      defaultStructure?.cells;\n\n    // add all default table configurations\n    let options = {\n      ...defaultStructure?.options,\n      ...this.config.table[type].options,\n    };\n\n    // We merge all table options for smaller breakpoints into the global\n    // options, so we inherit options.\n    relevant.forEach((br) => {\n      options = {\n        ...options,\n        ...defaultStructure?.[br]?.options,\n        ...this.config.table[type]?.[br]?.options,\n      };\n    });\n\n    return { cells, options };\n  }\n\n  /**\n   * Generates the table structure by the help of the first data row.\n   */\n  protected buildStructureFromData(\n    type: string,\n    data$: Observable<any>\n  ): Observable<TableStructure> {\n    this.logWarning(\n      `No table configuration found to render table with type \"${type}\". The table header for \"${type}\" is generated by the help of the first data item`\n    );\n    return data$.pipe(\n      map((data: any[]) => {\n        const cells = Object.keys(data?.[0]).map((key) => key);\n        return { type, cells } as TableStructure;\n      })\n    );\n  }\n\n  /**\n   * As a last resort, the table structure is randomly created. The random structure\n   * contains 5 headers, so that some of the unknown data is visualized.\n   */\n  protected buildRandomStructure(type: string): Observable<TableStructure> {\n    this.logWarning(\n      `No data available for \"${type}\", a random structure is generated (with hidden table headers).`\n    );\n    return of({\n      type,\n      cells: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown'],\n    });\n  }\n\n  /**\n   * Finds all the breakpoints can contribute to the table configuration, from small\n   * to current.\n   *\n   * For example, if the current breakpoint is `MD`, this returns `[XS, SM, MD]`.\n   */\n  protected findRelevantBreakpoints(breakpoint: BREAKPOINT): BREAKPOINT[] {\n    const current = this.breakpointService.breakpoints.indexOf(breakpoint);\n    return this.breakpointService.breakpoints.slice(0, current + 1);\n  }\n\n  /**\n   * Indicates if the there is a configuration for the table available.\n   */\n  protected hasTableConfig(tableType: string): boolean {\n    return !!this.config.table?.[tableType];\n  }\n\n  /**\n   * Logs a message in the console to increase developer experience.\n   *\n   * The message is only logged in dev mode.\n   */\n  private logWarning(message) {\n    if (isDevMode()) {\n      console.warn(message);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class ViewConfig {\n  view?: {\n    /**\n     * Configurations related to the view of the application\n     */\n    defaultPageSize?: number;\n    infiniteScroll?: {\n      active?: boolean;\n      productLimit?: number;\n      showMoreButton?: boolean;\n    };\n  };\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends ViewConfig {}\n}\n","import { Pipe, PipeTransform, Renderer2 } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\n\n/*\n * Supplements the anchor links that contain only the hash fragment in the `href` attribute,\n * (e.g. `<a href=\"#someId\">`), by prepending the current location (path and query params),\n * so it becomes a link to a full url\n * e.g. `<a href=\"https://domain.com/current/path?and=query-params#someId\">`.\n *\n * This helps to avoid the undesirable navigation to the homepage URL (`/#someId`)\n * when clicking the original link.\n *\n * It's useful for example for cms-provided content passed to the [innerHTML] directive.\n */\n@Pipe({ name: 'cxSupplementHashAnchors' })\nexport class SupplementHashAnchorsPipe implements PipeTransform {\n  constructor(protected renderer: Renderer2, protected winRef: WindowRef) {}\n\n  protected getPath(anchorId: string): string {\n    const currentUrlWithoutFragment = this.winRef.location.href.replace(\n      /#.*$/,\n      ''\n    );\n    return `${currentUrlWithoutFragment}${anchorId}`;\n  }\n\n  public transform(html: string): string {\n    const template = this.renderer.createElement('template');\n    template.innerHTML = html.trim();\n    const linkNodes: NodeList = template.content.querySelectorAll('a');\n\n    Array.from(linkNodes).forEach((link: HTMLAnchorElement) => {\n      const href = link.getAttribute('href');\n      if (href?.indexOf('#') === 0) {\n        this.renderer.setProperty(link, 'href', this.getPath(href));\n      }\n    });\n    return template.innerHTML;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { SupplementHashAnchorsPipe } from './supplement-hash-anchors.pipe';\n\n@NgModule({\n  declarations: [SupplementHashAnchorsPipe],\n  exports: [SupplementHashAnchorsPipe],\n})\nexport class SupplementHashAnchorsModule {}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FileDownloadService {\n  /**\n   * Triggers the browser downloading of the file from the given URL.\n   *\n   * @param {string} url URL to file.\n   * @param {string} [fileName] The optional parameter for defining filename\n   * (including the extension) when saving the file.\n   */\n  download(url: string, fileName?: string): void {\n    const link = document.createElement('a');\n\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${fileName}`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ExportFileOptions } from '../export-file-options';\nimport { FileDownloadService } from '../file-download.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ExportCsvFileService {\n  constructor(protected fileDownloadService: FileDownloadService) {}\n  /**\n   * Converts array of objects into CSV data structure.\n   *\n   * @param objectsArray Array of objects which should be converted to CSV.\n   * @param separator Separator for CSV data.\n   * @returns Processed string ready to be saved into file.\n   */\n  protected convert(objectsArray: string[][], separator: string): string {\n    return objectsArray.reduce((csvString: string, row: string[]) => {\n      const line = row.reduce((currentLine, column) => {\n        currentLine += currentLine !== '' ? separator : '';\n        const cell = column.includes(separator) ? `\"${column}\"` : column;\n        return `${currentLine}${cell}`;\n      }, '');\n      return `${csvString}${line}\\r\\n`;\n    }, '');\n  }\n\n  /**\n   * Creates and download CSV file.\n   *\n   * @param objectsArray Array of objects which should be converted to CSV.\n   * @param separator Separator for CSV data.\n   * @param fileOptions Exported file options.\n   */\n  download(\n    objectsArray: string[][],\n    separator: string,\n    fileOptions: ExportFileOptions\n  ): void {\n    const { fileName, type, extension } = fileOptions;\n    const fileContent = this.convert(objectsArray, separator);\n    const blob = new Blob([fileContent], { type });\n    const url = URL.createObjectURL(blob);\n\n    this.fileDownloadService.download(url, `${fileName}.${extension}`);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Observer } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FileReaderService {\n  /**\n   * Load text file\n   *\n   * @param file text file to extract the data\n   * @returns Observable from file reader\n   */\n  loadTextFile(file: File): Observable<string | ProgressEvent<FileReader>> {\n    return new Observable((observer: Observer<string>) => {\n      const fileReader: FileReader = new FileReader();\n      fileReader.readAsText(file);\n      fileReader.onload = () => {\n        observer.next(fileReader.result as string);\n        observer.complete();\n      };\n      fileReader.onerror = (error) => {\n        fileReader.abort();\n        observer.error(error);\n      };\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ValidationErrors } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { FileReaderService } from '../file-reader.service';\nimport { CsvFileValidationErrors } from './csv-file-validation-errors';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImportCsvFileService {\n  constructor(protected fileReaderService: FileReaderService) {}\n  /**\n   * Load CSV file.\n   *\n   * @param file File we want to load as CSV.\n   * @param separator Separator for CSV data.\n   * @return {Observable<string[][]>} Imported file\n   */\n  loadFile(file: File, separator: string): Observable<string[][]> {\n    return this.fileReaderService\n      .loadTextFile(file)\n      .pipe(map((res) => this.parse(res as string, separator)));\n  }\n\n  /**\n   * Combined csv validation\n   *\n   * @param file File we want to load as CSV.\n   * @param separator Separator for CSV data.\n   * @param isDataParsable (optional) Callback for verify that structure type is proper.\n   * @param maxEntries (optional) Limitation for maximum entries count.\n   * @return {Observable<CsvFileValidationErrors | null>} Result of validation\n   */\n  validateFile(\n    file: File,\n    {\n      separator,\n      isDataParsable,\n      maxEntries,\n    }: {\n      separator: string;\n      isDataParsable?: (data: string[][]) => boolean;\n      maxEntries?: number;\n    }\n  ): Observable<CsvFileValidationErrors | null> {\n    const errors: CsvFileValidationErrors = {};\n    return (\n      this.fileReaderService.loadTextFile(file) as Observable<string>\n    ).pipe(\n      tap((data: string) => {\n        this.validateEmpty(data, errors);\n      }),\n      map((res) => this.parse(res, separator)),\n      tap((data: string[][]) => {\n        this.validateNotParsable(data, errors, isDataParsable);\n        this.validateTooManyEntries(data, errors, maxEntries);\n      }),\n      catchError((errors) => of(errors)),\n      map(() => (Object.keys(errors).length === 0 ? null : errors))\n    );\n  }\n\n  /**\n   * Processes the CSV data\n   *\n   * @param csvString raw extracted data from CSV\n   * @param separator for csv data\n   * @param ignoreHeader (optional) flag allows for ignore headers row while reading\n   * @returns {string[][]} Parsed file\n   */\n  protected parse(\n    csvString: string,\n    separator: string,\n    ignoreHeader = true\n  ): string[][] {\n    return csvString\n      .split('\\n')\n      .map((row) => row.split(separator).map((cell) => cell.replace(/\"/g, '')))\n      .filter(\n        (value, index) => !(ignoreHeader && index === 0) && value[0] !== ''\n      );\n  }\n\n  protected validateEmpty(data: string, errors: ValidationErrors): void {\n    if (data.toString().length === 0) {\n      errors.empty = true;\n      throw errors;\n    }\n  }\n\n  protected validateTooManyEntries(\n    data: string[][],\n    errors: ValidationErrors,\n    maxEntries?: number\n  ): void {\n    if (maxEntries && data.length > maxEntries) {\n      errors.tooManyEntries = { maxEntries };\n      throw errors;\n    }\n  }\n\n  protected validateNotParsable(\n    data: string[][],\n    errors: ValidationErrors,\n    isDataParsable?: (data: string[][]) => boolean\n  ): void {\n    if (isDataParsable && !isDataParsable(data)) {\n      errors.notParsable = true;\n      throw errors;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AbstractControl, ValidationErrors, ValidatorFn } from '@angular/forms';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FilesFormValidators {\n  /**\n   * Checks max size of file\n   *\n   * @param {number} maxSize Max size [MB]\n   * @returns Uses 'tooLarge' validator error with maxSize property\n   * @memberOf FilesFormValidators\n   */\n  maxSize(maxSize?: number): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n      const errors: ValidationErrors = {};\n      if (maxSize) {\n        const files: File[] = Array.from(control.value);\n        files.forEach((file: File) => {\n          if (file.size > maxSize * 1000000) {\n            const invalidFiles = errors.tooLarge?.invalidFiles ?? [];\n            errors.tooLarge = {\n              maxSize,\n              invalidFiles: [...invalidFiles, file.name],\n            };\n          }\n        });\n      }\n      return Object.keys(errors).length === 0 ? null : errors;\n    };\n  }\n}\n","import {\n  AbstractControl,\n  FormGroup,\n  ValidationErrors,\n  ValidatorFn,\n} from '@angular/forms';\nimport { EMAIL_PATTERN, PASSWORD_PATTERN } from '@spartacus/core';\n\nexport class CustomFormValidators {\n  /**\n   * Checks control's value with predefined email regexp\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxInvalidEmail' validator error\n   * @memberof CustomFormValidators\n   */\n  static emailValidator(control: AbstractControl): ValidationErrors | null {\n    const email = control.value as string;\n\n    return email && (!email.length || email.match(EMAIL_PATTERN))\n      ? null\n      : { cxInvalidEmail: true };\n  }\n\n  /**\n   * Checks control's value with predefined password regexp\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxInvalidPassword' validator error\n   * @memberof CustomFormValidators\n   */\n  static passwordValidator(control: AbstractControl): ValidationErrors | null {\n    const password = control.value as string;\n\n    return password && (!password.length || password.match(PASSWORD_PATTERN))\n      ? null\n      : { cxInvalidPassword: true };\n  }\n\n  /**\n   * Checks if control's value is between 1 and 5\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxStarRatingEmpty' validator error\n   * @memberof CustomFormValidators\n   */\n  static starRatingEmpty(control: AbstractControl): ValidationErrors | null {\n    const rating = control.value as number;\n\n    return rating >= 1 && rating <= 5 ? null : { cxStarRatingEmpty: true };\n  }\n\n  /**\n   * Checks if two password controls match\n   *\n   * NOTE: Use it as a form validator and pass password control names as parameters\n   *\n   * @static\n   * @param {string} password First password control name\n   * @param {string} passwordConfirmation Second password control name\n   * @returns Uses 'cxPasswordsMustMatch' validator error\n   * @memberof CustomFormValidators\n   */\n  static passwordsMustMatch(\n    password: string,\n    passwordConfirmation: string\n  ): any {\n    const validator = (formGroup: FormGroup) =>\n      controlsMustMatch(\n        formGroup,\n        password,\n        passwordConfirmation,\n        'cxPasswordsMustMatch'\n      );\n\n    return validator;\n  }\n\n  /**\n   * Checks if two email controls match\n   *\n   * NOTE: Use it as a form validator and pass email control names as parameters\n   *\n   * @static\n   * @param {string} email First email control name\n   * @param {string} emailConfirmation Second email control name\n   * @returns Uses 'cxEmailsMustMatch' validator error\n   * @memberof CustomFormValidators\n   */\n  static emailsMustMatch(email: string, emailConfirmation: string): any {\n    const validator = (formGroup: FormGroup) =>\n      controlsMustMatch(\n        formGroup,\n        email,\n        emailConfirmation,\n        'cxEmailsMustMatch'\n      );\n\n    return validator;\n  }\n\n  /**\n   * Checks if control's value is euqal or greater than 0\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxNegativeAmount' validator error\n   * @memberof CustomFormValidators\n   */\n  static mustBePositive(control: AbstractControl): ValidationErrors | null {\n    const amount = control.value as number;\n\n    return amount >= 0 ? null : { cxNegativeAmount: true };\n  }\n\n  /**\n   * Checks if control's value does not contain any special characters\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxContainsSpecialCharacters' validator error\n   * @memberof CustomFormValidators\n   */\n  static noSpecialCharacters(\n    control: AbstractControl\n  ): ValidationErrors | null {\n    const forbiddenChars = ['/'];\n    const str = String(control.value);\n    const containsSpecialChars = forbiddenChars.some((char) =>\n      str.includes(char)\n    );\n\n    return !containsSpecialChars ? null : { cxContainsSpecialCharacters: true };\n  }\n\n  /**\n   * Checks if control's value passes pattern\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {(date: string) => boolean} isValidFormat Pattern verification function\n   * @returns {(control: AbstractControl): ValidationErrors | null} Uses 'pattern' validator error\n   * @memberof CustomFormValidators\n   */\n  static patternValidation(\n    isValidFormat: (date: string) => boolean\n  ): ValidatorFn {\n    const validator = (control: AbstractControl): ValidationErrors | null => {\n      const errors: ValidationErrors = {};\n      if (\n        control.value &&\n        control.value !== '' &&\n        !isValidFormat(control.value)\n      ) {\n        errors.pattern = true;\n      }\n      return Object.keys(errors).length === 0 ? null : errors;\n    };\n    return validator;\n  }\n\n  /**\n   * Checks if two email controls match\n   *\n   * NOTE: Use it as a form validator and pass dates for range\n   *\n   * @static\n   * @param {string} startDateKey First date control name\n   * @param {string} endDateKey Second date control name\n   * @param {(value: string) => Date} getDate Converting function\n   * @returns Uses 'min' and 'max validator error\n   * @memberof CustomFormValidators\n   */\n  static dateRange(\n    startDateKey: string,\n    endDateKey: string,\n    getDate: (value: string) => Date\n  ): (FormGroup) => any {\n    const validator = (formGroup: FormGroup): ValidationErrors | null => {\n      const startDateControl = formGroup.controls[startDateKey];\n      const endDateControl = formGroup.controls[endDateKey];\n      const startDate = getDate(startDateControl.value);\n      const endDate = getDate(endDateControl.value);\n      if (!startDateControl.errors?.pattern) {\n        if (startDate > endDate) {\n          startDateControl.setErrors({ max: true });\n        }\n      }\n      if (!endDateControl.errors?.pattern) {\n        if (endDate < startDate) {\n          endDateControl.setErrors({ min: true });\n        }\n      }\n      return null;\n    };\n    return validator;\n  }\n}\n\n/**\n * Generic function for validators, which checks if two passed controls match.\n *\n * @param formGroup\n * @param firstControlName First control to check\n * @param secondControlName Second control to check\n * @param errorName Error which will be returned by validator\n */\nexport function controlsMustMatch(\n  formGroup: FormGroup,\n  firstControlName: string,\n  secondControlName: string,\n  errorName: string\n): void {\n  const firstControl = formGroup.controls[firstControlName];\n  const secondControl = formGroup.controls[secondControlName];\n\n  if (secondControl.errors && !secondControl.errors[errorName]) {\n    return;\n  }\n\n  secondControl.setErrors(\n    firstControl.value !== secondControl.value ? { [errorName]: true } : null\n  );\n}\n","import { Title } from '@spartacus/core';\n\nexport const titleScores = {\n  mr: 1,\n  mrs: 2,\n  miss: 3,\n  ms: 4,\n  dr: 5,\n  rev: 6,\n};\n\nexport function sortTitles(title1: Title, title2: Title) {\n  if (!titleScores[title1.code] || !titleScores[title2.code]) {\n    return 1;\n  } else {\n    return titleScores[title1.code] - titleScores[title2.code];\n  }\n}\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { Voucher, CartVoucherService } from '@spartacus/core';\nimport { ICON_TYPE } from '../../../../cms-components/misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-applied-coupons',\n  templateUrl: './applied-coupons.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AppliedCouponsComponent {\n  @Input()\n  vouchers: Voucher[];\n  @Input()\n  cartIsLoading = false;\n  @Input()\n  isReadOnly = false;\n\n  iconTypes = ICON_TYPE;\n\n  constructor(protected cartVoucherService: CartVoucherService) {}\n\n  public get sortedVouchers(): Voucher[] {\n    this.vouchers = this.vouchers || [];\n    return this.vouchers.slice().sort((a, b) => {\n      return a.code.localeCompare(b.code);\n    });\n  }\n\n  removeVoucher(voucherId: string) {\n    this.cartVoucherService.removeVoucher(voucherId);\n  }\n}\n","<div *ngIf=\"isReadOnly; else editableCoupons\">\n  <div *ngIf=\"sortedVouchers.length > 0\">\n    <div class=\"cx-applied-coupon-title\">\n      {{ 'voucher.vouchersApplied' | cxTranslate }}\n    </div>\n  </div>\n  <div\n    *ngFor=\"let voucher of sortedVouchers\"\n    class=\"coupon-summary cx-coupon-card textonly\"\n    role=\"filter\"\n  >\n    <span class=\"cx-applied-coupon-code\">{{ voucher.voucherCode }}</span>\n  </div>\n</div>\n\n<ng-template #editableCoupons>\n  <div class=\"row\">\n    <div\n      *ngFor=\"let voucher of sortedVouchers\"\n      class=\"col-sm-12 col-md-6 col-lg-12 cx-coupon-card-grid\"\n      role=\"filter\"\n    >\n      <div class=\"cx-coupon-apply cx-coupon-card cx-coupon-list-wrap\">\n        <span class=\"cx-cart-coupon-code\">{{ voucher.voucherCode }}</span>\n        <button\n          type=\"button\"\n          class=\"close\"\n          [attr.aria-label]=\"'common.close' | cxTranslate\"\n          (click)=\"removeVoucher(voucher.voucherCode)\"\n          [disabled]=\"cartIsLoading\"\n          [class.disabled]=\"cartIsLoading\"\n        >\n          <span aria-hidden=\"true\">\n            <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n          </span>\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  ActiveCartService,\n  Cart,\n  CartVoucherService,\n  CustomerCoupon,\n  CustomerCouponSearchResult,\n  CustomerCouponService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-cart-coupon',\n  templateUrl: './cart-coupon.component.html',\n})\nexport class CartCouponComponent implements OnInit, OnDestroy {\n  MAX_CUSTOMER_COUPON_PAGE = 100;\n  couponForm: FormGroup;\n  cartIsLoading$: Observable<boolean>;\n  cart$: Observable<Cart>;\n  cartId: string;\n  applicableCoupons: CustomerCoupon[];\n\n  protected ignoreCloseEvent = false;\n\n  protected subscription = new Subscription();\n\n  couponBoxIsActive = false;\n\n  constructor(\n    protected cartVoucherService: CartVoucherService,\n    protected formBuilder: FormBuilder,\n    protected customerCouponService: CustomerCouponService,\n    protected activeCartService: ActiveCartService\n  ) {}\n\n  ngOnInit() {\n    if (this.customerCouponService) {\n      this.customerCouponService.loadCustomerCoupons(\n        this.MAX_CUSTOMER_COUPON_PAGE\n      );\n    }\n\n    this.cart$ = combineLatest([\n      this.activeCartService.getActive(),\n      this.activeCartService.getActiveCartId(),\n      this.customerCouponService.getCustomerCoupons(\n        this.MAX_CUSTOMER_COUPON_PAGE\n      ),\n    ]).pipe(\n      tap(\n        ([cart, activeCardId, customerCoupons]: [\n          Cart,\n          string,\n          CustomerCouponSearchResult\n        ]) => {\n          this.cartId = activeCardId;\n          this.getApplicableCustomerCoupons(cart, customerCoupons.coupons);\n        }\n      ),\n      map(([cart]: [Cart, string, CustomerCouponSearchResult]) => cart)\n    );\n\n    this.cartIsLoading$ = this.activeCartService\n      .isStable()\n      .pipe(map((loaded) => !loaded));\n\n    this.cartVoucherService.resetAddVoucherProcessingState();\n\n    this.couponForm = this.formBuilder.group({\n      couponCode: ['', [Validators.required]],\n    });\n\n    // TODO(#7241): Replace process subscriptions with event listeners and drop process for ADD_VOUCHER\n    this.subscription.add(\n      this.cartVoucherService\n        .getAddVoucherResultSuccess()\n        .subscribe((success) => {\n          this.onSuccess(success);\n        })\n    );\n\n    // TODO(#7241): Replace process subscriptions with event listeners and drop process for ADD_VOUCHER\n    this.subscription.add(\n      this.cartVoucherService.getAddVoucherResultError().subscribe((error) => {\n        this.onError(error);\n      })\n    );\n  }\n\n  protected onError(error: boolean) {\n    if (error) {\n      this.customerCouponService.loadCustomerCoupons(\n        this.MAX_CUSTOMER_COUPON_PAGE\n      );\n      this.cartVoucherService.resetAddVoucherProcessingState();\n    }\n  }\n\n  onSuccess(success: boolean) {\n    if (success) {\n      this.couponForm.reset();\n      this.cartVoucherService.resetAddVoucherProcessingState();\n    }\n  }\n\n  protected getApplicableCustomerCoupons(\n    cart: Cart,\n    coupons: CustomerCoupon[]\n  ): void {\n    this.applicableCoupons = coupons || [];\n    if (cart.appliedVouchers) {\n      cart.appliedVouchers.forEach((appliedVoucher) => {\n        this.applicableCoupons = this.applicableCoupons.filter(\n          (coupon) => coupon.couponId !== appliedVoucher.code\n        );\n      });\n    }\n  }\n\n  applyVoucher(): void {\n    if (this.couponForm.valid) {\n      this.cartVoucherService.addVoucher(\n        this.couponForm.value.couponCode,\n        this.cartId\n      );\n    } else {\n      this.couponForm.markAllAsTouched();\n    }\n  }\n\n  applyCustomerCoupon(couponId: string): void {\n    this.cartVoucherService.addVoucher(couponId, this.cartId);\n    this.couponBoxIsActive = false;\n  }\n\n  close(event: UIEvent): void {\n    if (!this.ignoreCloseEvent) {\n      this.couponBoxIsActive = false;\n      if (event && event.target) {\n        (<HTMLElement>event.target).blur();\n      }\n    }\n    this.ignoreCloseEvent = false;\n  }\n\n  disableClose(): void {\n    this.ignoreCloseEvent = true;\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n    this.cartVoucherService.resetAddVoucherProcessingState();\n  }\n}\n","<ng-container *ngIf=\"cart$ | async as cart\">\n  <div class=\"cx-cart-coupon-title\">\n    {{ 'voucher.coupon' | cxTranslate }}\n  </div>\n  <div class=\"form-group\">\n    <form (ngSubmit)=\"applyVoucher()\" [formGroup]=\"couponForm\">\n      <div class=\"cx-cart-coupon-container\">\n        <input\n          aria-required=\"true\"\n          type=\"text\"\n          class=\"form-control input-coupon-code\"\n          formControlName=\"couponCode\"\n          placeholder=\"{{ 'voucher.placeholder' | cxTranslate }} \"\n        />\n        <button\n          class=\"btn btn-block btn-action apply-coupon-button\"\n          type=\"submit\"\n          [disabled]=\"cartIsLoading$ | async\"\n          [class.disabled]=\"cartIsLoading$ | async\"\n        >\n          {{ 'voucher.apply' | cxTranslate }}\n        </button>\n        <cx-form-errors\n          aria-live=\"assertive\"\n          aria-atomic=\"true\"\n          [control]=\"couponForm.get('couponCode')\"\n        ></cx-form-errors>\n      </div>\n    </form>\n  </div>\n\n  <cx-applied-coupons\n    [vouchers]=\"cart.appliedVouchers\"\n    [cartIsLoading]=\"cartIsLoading$ | async\"\n    [isReadOnly]=\"false\"\n  >\n  </cx-applied-coupons>\n\n  <ng-container *ngIf=\"applicableCoupons && applicableCoupons.length > 0\">\n    <div class=\"cx-available-coupon\">\n      <div class=\"title cx-cart-coupon-title\">\n        {{ 'voucher.availableCoupons' | cxTranslate }}\n      </div>\n      <div class=\"message\">\n        {{ 'voucher.availableCouponsLabel' | cxTranslate }}\n      </div>\n      <div class=\"scroll\">\n        <div class=\"coupons card\" *ngFor=\"let coupon of applicableCoupons\">\n          <button\n            (click)=\"applyCustomerCoupon(coupon.couponId)\"\n            class=\"coupon-id link\"\n            [disabled]=\"cartIsLoading$ | async\"\n            [class.disabled]=\"cartIsLoading$ | async\"\n          >\n            {{ coupon.couponId }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { AppliedCouponsComponent } from './applied-coupons/applied-coupons.component';\nimport { CartCouponComponent } from './cart-coupon.component';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  declarations: [CartCouponComponent, AppliedCouponsComponent],\n  exports: [CartCouponComponent, AppliedCouponsComponent],\n  imports: [\n    CommonModule,\n    NgSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    I18nModule,\n    IconModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CartApplyCouponComponent: {\n          component: CartCouponComponent,\n        },\n      },\n    }),\n  ],\n})\nexport class CartCouponModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport {\n  ActiveCartService,\n  ConsignmentEntry,\n  MultiCartService,\n  OrderEntry,\n  PromotionLocation,\n  SelectiveCartService,\n  UserIdService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { map, startWith, tap } from 'rxjs/operators';\nimport { CartItemComponentOptions } from '../cart-item/cart-item.component';\n\n@Component({\n  selector: 'cx-cart-item-list',\n  templateUrl: './cart-item-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartItemListComponent implements OnInit, OnDestroy {\n  protected subscription = new Subscription();\n  protected userId: string;\n\n  @Input() readonly: boolean = false;\n\n  @Input() hasHeader: boolean = true;\n\n  @Input() options: CartItemComponentOptions = {\n    isSaveForLater: false,\n    optionalBtn: null,\n  };\n\n  @Input() cartId: string;\n\n  protected _items: OrderEntry[] = [];\n  form: FormGroup = new FormGroup({});\n\n  @Input('items')\n  set items(items: OrderEntry[]) {\n    this.resolveItems(items);\n    this.createForm();\n  }\n  get items(): OrderEntry[] {\n    return this._items;\n  }\n\n  @Input() promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  @Input('cartIsLoading') set setLoading(value: boolean) {\n    if (!this.readonly) {\n      // Whenever the cart is loading, we disable the complete form\n      // to avoid any user interaction with the cart.\n      value\n        ? this.form.disable({ emitEvent: false })\n        : this.form.enable({ emitEvent: false });\n    }\n  }\n\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService,\n    protected userIdService: UserIdService,\n    protected multiCartService: MultiCartService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      this.userIdService\n        ?.getUserId()\n        .subscribe((userId) => (this.userId = userId))\n    );\n  }\n\n  /**\n   * Resolves items passed to component input and updates 'items' field\n   */\n  protected resolveItems(items: OrderEntry[]): void {\n    if (!items) {\n      this._items = [];\n      return;\n    }\n\n    // The items we're getting from the input do not have a consistent model.\n    // In case of a `consignmentEntry`, we need to normalize the data from the orderEntry.\n    if (items.every((item) => item.hasOwnProperty('orderEntry'))) {\n      this._items = items.map((consignmentEntry) => {\n        const entry = Object.assign(\n          {},\n          (consignmentEntry as ConsignmentEntry).orderEntry\n        );\n        entry.quantity = consignmentEntry.quantity;\n        return entry;\n      });\n    } else {\n      // We'd like to avoid the unnecessary re-renders of unchanged cart items after the data reload.\n      // OCC cart entries don't have any unique identifier that we could use in Angular `trackBy`.\n      // So we update each array element to the new object only when it's any different to the previous one.\n      for (let i = 0; i < Math.max(items.length, this._items.length); i++) {\n        if (JSON.stringify(this._items?.[i]) !== JSON.stringify(items[i])) {\n          if (this._items[i] && this.form) {\n            this.form.removeControl(this.getControlName(this._items[i]));\n          }\n          if (!items[i]) {\n            this._items.splice(i, 1);\n          } else {\n            this._items[i] = items[i];\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Creates form models for list items\n   */\n  protected createForm(): void {\n    this._items.forEach((item) => {\n      const controlName = this.getControlName(item);\n      const group = new FormGroup({\n        entryNumber: new FormControl(item.entryNumber),\n        quantity: new FormControl(item.quantity, { updateOn: 'blur' }),\n      });\n\n      this.form.addControl(controlName, group);\n\n      // If we disable form group before adding, disabled status will reset\n      // Which forces us to disable control after including to form object\n      if (!item.updateable || this.readonly) {\n        this.form.controls[controlName].disable();\n      }\n    });\n  }\n\n  protected getControlName(item: OrderEntry): string {\n    return item.entryNumber.toString();\n  }\n\n  removeEntry(item: OrderEntry): void {\n    if (this.selectiveCartService && this.options.isSaveForLater) {\n      this.selectiveCartService.removeEntry(item);\n    } else if (this.cartId && this.userId) {\n      this.multiCartService?.removeEntry(\n        this.userId,\n        this.cartId,\n        item.entryNumber\n      );\n    } else {\n      this.activeCartService.removeEntry(item);\n    }\n    delete this.form.controls[this.getControlName(item)];\n  }\n\n  getControl(item: OrderEntry): Observable<FormGroup> {\n    return this.form.get(this.getControlName(item)).valueChanges.pipe(\n      // eslint-disable-next-line import/no-deprecated\n      startWith(null),\n      tap((value) => {\n        if (item.updateable && value && !this.readonly) {\n          if (this.selectiveCartService && this.options.isSaveForLater) {\n            this.selectiveCartService.updateEntry(\n              value.entryNumber,\n              value.quantity\n            );\n          } else if (this.cartId && this.userId) {\n            this.multiCartService?.updateEntry(\n              this.userId,\n              this.cartId,\n              value.entryNumber,\n              value.quantity\n            );\n          } else {\n            this.activeCartService.updateEntry(\n              value.entryNumber,\n              value.quantity\n            );\n          }\n        }\n      }),\n      map(() => <FormGroup>this.form.get(this.getControlName(item)))\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription?.unsubscribe();\n  }\n}\n","<div *ngIf=\"hasHeader\" class=\"d-none d-md-block d-lg-block d-xl-block\">\n  <div class=\"cx-item-list-header row\">\n    <div class=\"cx-item-list-desc col-md-5 col-lg-5 col-xl-6\">\n      {{ 'cartItems.description' | cxTranslate }}\n    </div>\n    <div class=\"cx-item-list-price col-md-3 col-lg-2 col-xl-2\">\n      {{ 'cartItems.itemPrice' | cxTranslate }}\n    </div>\n    <div class=\"cx-item-list-qty col-md-2 col-lg-3 col-xl-2\">\n      {{ 'cartItems.quantity' | cxTranslate }}\n    </div>\n\n    <ng-container *ngIf=\"options.isSaveForLater; else totalHeader\">\n      <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n        {{ 'saveForLaterItems.stock' | cxTranslate }}\n      </div>\n    </ng-container>\n  </div>\n</div>\n\n<div class=\"cx-item-list-row\" *ngFor=\"let item of items; let i = index\">\n  <div\n    *ngIf=\"getControl(item) | async as control\"\n    class=\"cx-item-list-items\"\n    [class.is-changed]=\"control.get('quantity').disabled\"\n  >\n    <cx-cart-item\n      [item]=\"item\"\n      [quantityControl]=\"control.get('quantity')\"\n      [readonly]=\"readonly\"\n      [promotionLocation]=\"promotionLocation\"\n      [options]=\"options\"\n    >\n    </cx-cart-item>\n  </div>\n</div>\n\n<ng-template #totalHeader>\n  <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n    {{ 'cartItems.total' | cxTranslate }}\n  </div>\n</ng-template>\n","import { Component, Input } from '@angular/core';\nimport { Cart } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-order-summary',\n  templateUrl: './order-summary.component.html',\n})\nexport class OrderSummaryComponent {\n  @Input()\n  cart: Cart;\n}\n","<h3>{{ 'orderCost.orderSummary' | cxTranslate }}</h3>\n\n<div class=\"cx-summary-partials\" *ngIf=\"cart\">\n  <div class=\"cx-summary-row\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.subtotal' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{ cart.subTotal?.formattedValue }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row\">\n    <div class=\"col-6 cx-summary-label\">\n      {{\n        (cart.deliveryCost?.formattedValue\n          ? 'orderCost.shipping'\n          : 'orderCost.estimatedShipping'\n        ) | cxTranslate\n      }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{\n        cart.deliveryCost?.formattedValue\n          ? cart.deliveryCost.formattedValue\n          : ('orderCost.toBeDetermined' | cxTranslate)\n      }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row\" *ngIf=\"cart.net; else cartWithoutNet\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.salesTax' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{ cart.totalTax?.formattedValue }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row cx-summary-total\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.total' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{ cart.totalPriceWithTax?.formattedValue }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row\" *ngIf=\"cart.totalDiscounts?.value > 0\">\n    {{ 'orderCost.discount' | cxTranslate }}\n    {{ cart.totalDiscounts?.formattedValue }}\n  </div>\n  <ng-template #cartWithoutNet>\n    <div class=\"cx-summary-row\">\n      {{\n        cart.totalPriceWithTax?.value !== cart.totalPrice?.value\n          ? ('orderCost.grossTax' | cxTranslate)\n          : ('orderCost.grossIncludeTax' | cxTranslate)\n      }}\n      {{ cart.totalTax?.formattedValue }}.\n    </div>\n  </ng-template>\n</div>\n\n<!--\n<cx-promotions\n  *ngIf=\"cart\"\n  [promotions]=\"cart.appliedOrderPromotions\"\n></cx-promotions>\n-->\n\n<ng-container *cxFeatureLevel=\"'1.3'\">\n  <cx-applied-coupons\n    [vouchers]=\"cart.appliedVouchers\"\n    [isReadOnly]=\"true\"\n  ></cx-applied-coupons>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { CartItemValidationWarningComponent } from './cart-item-validation-warning.component';\nimport { IconModule } from '../../../misc/icon/index';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, I18nModule, UrlModule, IconModule],\n  exports: [CartItemValidationWarningComponent],\n  declarations: [CartItemValidationWarningComponent],\n})\nexport class CartItemValidationWarningModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { FeaturesConfigModule, I18nModule, UrlModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { ItemCounterModule } from '../../../shared/components/item-counter/item-counter.module';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { ModalModule } from '../../../shared/components/modal/modal.module';\nimport { PromotionsModule } from '../../misc/promotions/promotions.module';\nimport { CartCouponModule } from '../cart-coupon/cart-coupon.module';\nimport { CartItemListComponent } from './cart-item-list/cart-item-list.component';\nimport { CartItemComponent } from './cart-item/cart-item.component';\nimport { OrderSummaryComponent } from './order-summary/order-summary.component';\nimport { CartItemValidationWarningModule } from '../validation/cart-item-warning/cart-item-validation-warning.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    CartCouponModule,\n    ReactiveFormsModule,\n    UrlModule,\n    NgbModule,\n    PromotionsModule,\n    I18nModule,\n    IconModule,\n    MediaModule,\n    ItemCounterModule,\n    FeaturesConfigModule,\n    ModalModule,\n    OutletModule,\n    CartItemValidationWarningModule,\n  ],\n  declarations: [\n    CartItemComponent,\n    OrderSummaryComponent,\n    CartItemListComponent,\n  ],\n  exports: [CartItemComponent, CartItemListComponent, OrderSummaryComponent],\n})\nexport class CartSharedModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport {\n  ItemCounterModule,\n  ModalModule,\n  SpinnerModule,\n} from '../../../shared/index';\nimport { PromotionsModule } from '../../misc/promotions/promotions.module';\nimport { CartSharedModule } from './../cart-shared/cart-shared.module';\nimport { AddToCartComponent } from './add-to-cart.component';\nimport { AddedToCartDialogComponent } from './added-to-cart-dialog/added-to-cart-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    CartSharedModule,\n    RouterModule,\n    SpinnerModule,\n    PromotionsModule,\n    FeaturesConfigModule,\n    UrlModule,\n    IconModule,\n    I18nModule,\n    ItemCounterModule,\n    KeyboardFocusModule,\n    ModalModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductAddToCartComponent: {\n          component: AddToCartComponent,\n          data: {\n            inventoryDisplay: false,\n          },\n        },\n      },\n    }),\n  ],\n  declarations: [AddToCartComponent, AddedToCartDialogComponent],\n  exports: [AddToCartComponent, AddedToCartDialogComponent],\n})\nexport class AddToCartModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  AuthService,\n  isNotNullable,\n  OrderEntry,\n  Product,\n  WishListService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\nimport { CurrentProductService } from '../../product/current-product.service';\n\n@Component({\n  selector: 'cx-add-to-wishlist',\n  templateUrl: './add-to-wish-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddToWishListComponent {\n  product$: Observable<Product> = this.currentProductService.getProduct().pipe(\n    filter(isNotNullable),\n    tap((product) => this.setStockInfo(product))\n  );\n\n  wishListEntries$: Observable<OrderEntry[]> = this.wishListService\n    .getWishList()\n    .pipe(\n      filter((wishlist) => Boolean(wishlist)),\n      map((wishList) => wishList.entries)\n    );\n\n  userLoggedIn$: Observable<boolean> = this.authService.isUserLoggedIn();\n  loading$: Observable<boolean> = this.wishListService.getWishListLoading();\n\n  hasStock = false;\n  iconTypes = ICON_TYPE;\n\n  constructor(\n    protected wishListService: WishListService,\n    protected currentProductService: CurrentProductService,\n    protected authService: AuthService\n  ) {}\n\n  add(product: Product): void {\n    this.wishListService.addEntry(product.code);\n  }\n\n  remove(entry: OrderEntry): void {\n    this.wishListService.removeEntry(entry);\n  }\n\n  getProductInWishList(product: Product, entries: OrderEntry[]): OrderEntry {\n    const item = entries.find((entry) => entry.product.code === product.code);\n    return item;\n  }\n\n  protected setStockInfo(product: Product): void {\n    this.hasStock = Boolean(\n      product.stock && product.stock.stockLevelStatus !== 'outOfStock'\n    );\n  }\n}\n","<ng-container *ngIf=\"product$ | async as product\">\n  <ng-container *ngIf=\"userLoggedIn$ | async; else loginPrompt\">\n    <ng-container *ngIf=\"wishListEntries$ | async as entries\">\n      <ng-container *ngIf=\"hasStock\">\n        <div\n          *ngIf=\"getProductInWishList(product, entries) as entry; else addItem\"\n        >\n          <button\n            class=\"btn btn-link button-remove cx-action-link\"\n            (click)=\"remove(entry)\"\n            [disabled]=\"loading$ | async\"\n          >\n            <cx-icon [type]=\"iconTypes.HEART\"></cx-icon>\n            <span class=\"button-text\">{{\n              'addToWishList.remove' | cxTranslate\n            }}</span>\n          </button>\n        </div>\n        <ng-template #addItem>\n          <button\n            class=\"btn btn-link button-add cx-action-link\"\n            (click)=\"add(product)\"\n            [disabled]=\"loading$ | async\"\n          >\n            <cx-icon [type]=\"iconTypes.EMPTY_HEART\"></cx-icon>\n            <span class=\"button-text\">{{\n              'addToWishList.add' | cxTranslate\n            }}</span>\n          </button>\n        </ng-template>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #loginPrompt>\n  <ng-container *ngIf=\"hasStock\">\n    <a\n      class=\"btn btn-link button-add-link cx-action-link\"\n      [routerLink]=\"{ cxRoute: 'login' } | cxUrl\"\n    >\n      <cx-icon [type]=\"iconTypes.EMPTY_HEART\"></cx-icon>\n      <span class=\"button-text\">{{\n        'addToWishList.anonymous' | cxTranslate\n      }}</span>\n    </a>\n  </ng-container>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { AddToWishListComponent } from './add-to-wish-list.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, IconModule, RouterModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AddToWishListComponent: {\n          component: AddToWishListComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [AddToWishListComponent],\n  exports: [AddToWishListComponent],\n})\nexport class AddToWishListModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { CartModification, CartValidationStatusCode } from '@spartacus/core';\nimport { CartValidationStateService } from '../cart-validation-state.service';\nimport { ICON_TYPE } from '../../../misc/icon/index';\n\n@Component({\n  selector: 'cx-cart-validation-warnings',\n  templateUrl: './cart-validation-warnings.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartValidationWarningsComponent {\n  iconTypes = ICON_TYPE;\n  visibleWarnings: Record<string, boolean> = {};\n\n  cartModifications$ =\n    this.cartValidationStateService.cartValidationResult$.pipe(\n      map((modificationList) => {\n        const result = modificationList.filter(\n          (modification) =>\n            modification.statusCode === CartValidationStatusCode.NO_STOCK\n        );\n\n        result.forEach((modification) => {\n          if (modification.entry?.product?.code) {\n            this.visibleWarnings[modification.entry.product.code] = true;\n          }\n        });\n        return result;\n      })\n    );\n\n  constructor(\n    protected cartValidationStateService: CartValidationStateService\n  ) {}\n\n  removeMessage(cartModification: CartModification) {\n    if (cartModification.entry?.product?.code) {\n      this.visibleWarnings[cartModification.entry.product.code] = false;\n    }\n  }\n}\n","<ng-container *ngFor=\"let cartModification of cartModifications$ | async\">\n  <div\n    class=\"alert alert-danger\"\n    *ngIf=\"visibleWarnings[cartModification.entry.product.code]\"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n    </span>\n    <span>\n      <a\n        [routerLink]=\"\n          { cxRoute: 'product', params: cartModification.entry.product } | cxUrl\n        \"\n      >\n        {{ cartModification.entry.product.name }}\n      </a>\n      {{ 'validation.productOutOfStock' | cxTranslate }}\n    </span>\n\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"removeMessage(cartModification)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n</ng-container>\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport {\n  ActiveCartService,\n  AuthService,\n  Cart,\n  OrderEntry,\n  PromotionLocation,\n  RoutingService,\n  SelectiveCartService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-cart-details',\n  templateUrl: './cart-details.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartDetailsComponent implements OnInit {\n  cart$: Observable<Cart>;\n  entries$: Observable<OrderEntry[]>;\n  cartLoaded$: Observable<boolean>;\n  loggedIn = false;\n  promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n  selectiveCartEnabled: boolean;\n\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService,\n    protected authService: AuthService,\n    protected routingService: RoutingService\n  ) {}\n\n  ngOnInit() {\n    this.cart$ = this.activeCartService.getActive();\n\n    this.entries$ = this.activeCartService\n      .getEntries()\n      .pipe(filter((entries) => entries.length > 0));\n\n    this.selectiveCartEnabled = this.selectiveCartService.isEnabled();\n\n    this.cartLoaded$ = combineLatest([\n      this.activeCartService.isStable(),\n      this.selectiveCartEnabled\n        ? this.selectiveCartService.isStable()\n        : of(false),\n      this.authService.isUserLoggedIn(),\n    ]).pipe(\n      tap(([, , loggedIn]) => (this.loggedIn = loggedIn)),\n      map(([cartLoaded, sflLoaded, loggedIn]) =>\n        loggedIn && this.selectiveCartEnabled\n          ? cartLoaded && sflLoaded\n          : cartLoaded\n      )\n    );\n  }\n\n  saveForLater(item: OrderEntry) {\n    if (this.loggedIn) {\n      this.activeCartService.removeEntry(item);\n      this.selectiveCartService.addEntry(item.product.code, item.quantity);\n    } else {\n      this.routingService.go({ cxRoute: 'login' });\n    }\n  }\n}\n","<ng-container *ngIf=\"cart$ | async as cart\">\n  <ng-container *ngIf=\"entries$ | async as entries\">\n    <div *ngIf=\"cart.totalItems > 0\" class=\"cart-details-wrapper\">\n      <ng-container *cxFeatureLevel=\"'4.2'\">\n        <cx-cart-validation-warnings></cx-cart-validation-warnings>\n      </ng-container>\n\n      <h4 class=\"cx-total\">\n        {{ 'cartDetails.cartName' | cxTranslate: { code: cart.code } }}\n      </h4>\n\n      <cx-promotions\n        [promotions]=\"\n          (cart.appliedOrderPromotions || []).concat(\n            cart.potentialOrderPromotions || []\n          )\n        \"\n      ></cx-promotions>\n\n      <cx-cart-item-list\n        [items]=\"entries\"\n        [cartIsLoading]=\"!(cartLoaded$ | async)\"\n        [promotionLocation]=\"promotionLocation\"\n        [options]=\"{\n          isSaveForLater: false,\n          optionalBtn: saveForLaterBtn\n        }\"\n      ></cx-cart-item-list>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template let-ctx #saveForLaterBtn>\n  <div\n    *ngIf=\"selectiveCartEnabled\"\n    class=\"col-md-3 col-lg-3 col-xl-3 cx-sfl-btn\"\n  >\n    <button\n      class=\"link cx-action-link\"\n      [disabled]=\"ctx.loading\"\n      (click)=\"saveForLater(ctx.item)\"\n      type=\"button\"\n    >\n      {{ 'saveForLaterItems.saveForLater' | cxTranslate }}\n    </button>\n  </div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { CartValidationWarningsComponent } from './cart-validation-warnings.component';\nimport { IconModule } from '../../../misc/icon/index';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, I18nModule, UrlModule, IconModule],\n  exports: [CartValidationWarningsComponent],\n  declarations: [CartValidationWarningsComponent],\n})\nexport class CartValidationWarningsModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { PromotionsModule } from '../../misc/promotions/promotions.module';\nimport { CartCouponModule } from '../cart-coupon/cart-coupon.module';\nimport { CartSharedModule } from '../cart-shared/cart-shared.module';\nimport { CartDetailsComponent } from './cart-details.component';\nimport { CartValidationWarningsModule } from '../validation/cart-warnings/cart-validation-warnings.module';\n\n@NgModule({\n  imports: [\n    CartSharedModule,\n    CommonModule,\n    CartCouponModule,\n    RouterModule,\n    UrlModule,\n    PromotionsModule,\n    FeaturesConfigModule,\n    I18nModule,\n    CartValidationWarningsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CartComponent: {\n          component: CartDetailsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [CartDetailsComponent],\n  exports: [CartDetailsComponent],\n})\nexport class CartDetailsModule {}\n","import { Injectable } from '@angular/core';\nimport { ActiveCartService, Cart, SelectiveCartService } from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { PageLayoutHandler } from '../../cms-structure/page/page-layout/page-layout-handler';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartPageLayoutHandler implements PageLayoutHandler {\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService\n  ) {}\n\n  handle(\n    slots$: Observable<string[]>,\n    pageTemplate?: string,\n    section?: string\n  ) {\n    if (pageTemplate === 'CartPageTemplate' && !section) {\n      return combineLatest([\n        slots$,\n        this.activeCartService.getActive(),\n        this.selectiveCartService.isEnabled()\n          ? this.selectiveCartService.getCart()\n          : of({} as Cart),\n        this.activeCartService.getLoading(),\n      ]).pipe(\n        map(([slots, cart, selectiveCart, loadingCart]) => {\n          const exclude = (arr, args) =>\n            arr.filter((item) => args.every((arg) => arg !== item));\n          return Object.keys(cart).length === 0 && loadingCart\n            ? exclude(slots, [\n                'TopContent',\n                'CenterRightContentSlot',\n                'EmptyCartMiddleContent',\n              ])\n            : cart.totalItems\n            ? exclude(slots, ['EmptyCartMiddleContent'])\n            : selectiveCart.totalItems\n            ? exclude(slots, [\n                'EmptyCartMiddleContent',\n                'CenterRightContentSlot',\n              ])\n            : exclude(slots, ['TopContent', 'CenterRightContentSlot']);\n        })\n      );\n    }\n    return slots$;\n  }\n}\n","export type ProductData = {\n  productCode: string;\n  quantity: number;\n};\n\nexport enum ProductImportStatus {\n  SUCCESS = 'success',\n  LOW_STOCK = 'lowStock',\n  NO_STOCK = 'noStock',\n  UNKNOWN_IDENTIFIER = 'unknownIdentifier',\n  UNKNOWN_ERROR = 'unknownError',\n  LIMIT_EXCEEDED = 'limitExceeded',\n}\n\nexport interface ProductImportInfo {\n  productCode: string;\n  statusCode: ProductImportStatus;\n  productName?: string;\n  quantity?: number;\n  quantityAdded?: number;\n}\n\nexport interface ProductImportSummary {\n  loading: boolean;\n  cartName: string | undefined;\n  count: number;\n  total: number;\n  successesCount: number;\n  warningMessages: ProductImportInfo[];\n  errorMessages: ProductImportInfo[];\n}\n","import { isDevMode } from '@angular/core';\nimport { ofType } from '@ngrx/effects';\nimport { ActionsSubject } from '@ngrx/store';\nimport { CartActions } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, switchMap, take } from 'rxjs/operators';\nimport {\n  ProductData,\n  ProductImportInfo,\n  ProductImportStatus,\n} from './import-to-cart.model';\n\n/**\n * An abstract class for contexts based on cart (active cart, saved cart) which share part of logic - mainly handle cart actions and map results.\n */\nexport abstract class CartOrderEntriesContext {\n  protected constructor(protected actionsSubject: ActionsSubject) {}\n\n  addEntries(products: ProductData[]): Observable<ProductImportInfo> {\n    return this.add(products).pipe(\n      switchMap((cartId: string) => this.getResults(cartId)),\n      take(products.length)\n    );\n  }\n\n  /**\n   * Add products and returns cartId of context cart\n   *\n   * @param { ProductData[] } products\n   * @returns {string} cartId - necessary to get results\n   */\n  protected abstract add(products: ProductData[]): Observable<string>;\n\n  /**\n   * Get emission of add entry results from actions subject\n   *\n   * @param {string} cartId\n   * @returns {Observable<ProductImportInfo>}\n   */\n  protected getResults(cartId: string): Observable<ProductImportInfo> {\n    return this.actionsSubject.pipe(\n      ofType(\n        CartActions.CART_ADD_ENTRY_SUCCESS,\n        CartActions.CART_ADD_ENTRY_FAIL\n      ),\n      filter(\n        (\n          action: CartActions.CartAddEntrySuccess | CartActions.CartAddEntryFail\n        ) => action.payload.cartId === cartId\n      ),\n      map((action) => this.mapMessages(action))\n    );\n  }\n\n  /**\n   * Map actions to summary messages\n   *\n   * @param {CartActions.CartAddEntrySuccess | CartActions.CartAddEntryFail} action\n   * @returns ProductImportInfo\n   */\n  protected mapMessages(\n    action: CartActions.CartAddEntrySuccess | CartActions.CartAddEntryFail\n  ): ProductImportInfo {\n    const { productCode } = action.payload;\n    if (action instanceof CartActions.CartAddEntrySuccess) {\n      const { quantity, quantityAdded, entry, statusCode } = action.payload;\n      if (statusCode === ProductImportStatus.LOW_STOCK) {\n        return {\n          productCode,\n          statusCode,\n          productName: entry?.product?.name,\n          quantity,\n          quantityAdded,\n        };\n      }\n      if (\n        statusCode === ProductImportStatus.SUCCESS ||\n        statusCode === ProductImportStatus.NO_STOCK\n      ) {\n        return { productCode, statusCode, productName: entry?.product?.name };\n      }\n    } else if (action instanceof CartActions.CartAddEntryFail) {\n      const { error } = action.payload;\n      if (error?.details[0]?.type === 'UnknownIdentifierError') {\n        return {\n          productCode,\n          statusCode: ProductImportStatus.UNKNOWN_IDENTIFIER,\n        };\n      }\n    }\n    if (isDevMode()) {\n      console.warn(\n        'Unrecognized cart add entry action type while mapping messages',\n        action\n      );\n    }\n    return { productCode, statusCode: ProductImportStatus.UNKNOWN_ERROR };\n  }\n}\n","export enum OrderEntriesSource {\n  ACTIVE_CART = 'ACTIVE_CART',\n  NEW_SAVED_CART = 'NEW_SAVED_CART',\n  QUICK_ORDER = 'QUICK_ORDER',\n  SAVED_CART = 'SAVED_CART',\n  ORDER_CONFIRMATION = 'ORDER_CONFIRMATION',\n  ORDER_DETAILS = 'ORDER_DETAILS',\n}\n","import { Injectable } from '@angular/core';\nimport { ActionsSubject } from '@ngrx/store';\nimport { ActiveCartService, OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CartOrderEntriesContext } from '../order-entries-context/cart-order-entries.context';\nimport { OrderEntriesSource } from '../order-entries-context/import-export.model';\nimport { ProductData } from '../order-entries-context/import-to-cart.model';\nimport { AddOrderEntriesContext } from '../order-entries-context/add-order-entries.context';\nimport { GetOrderEntriesContext } from '../order-entries-context/get-order-entries.context';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ActiveCartOrderEntriesContext\n  extends CartOrderEntriesContext\n  implements AddOrderEntriesContext, GetOrderEntriesContext\n{\n  readonly type = OrderEntriesSource.ACTIVE_CART;\n\n  constructor(\n    protected actionsSubject: ActionsSubject,\n    protected activeCartService: ActiveCartService\n  ) {\n    super(actionsSubject);\n  }\n\n  getEntries(): Observable<OrderEntry[]> {\n    return this.activeCartService.getEntries();\n  }\n\n  protected add(products: ProductData[]): Observable<string> {\n    this.activeCartService.addEntries(this.mapProductsToOrderEntries(products));\n    return this.activeCartService.getActiveCartId();\n  }\n\n  protected mapProductsToOrderEntries(products: ProductData[]): OrderEntry[] {\n    return products.map(\n      (product: { productCode: string; quantity: number }) => ({\n        product: { code: product.productCode },\n        quantity: product.quantity,\n      })\n    );\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnInit,\n  OnDestroy,\n} from '@angular/core';\nimport { ActiveCartService, Cart, OrderEntry } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport {\n  Event,\n  NavigationCancel,\n  NavigationEnd,\n  Router,\n} from '@angular/router';\n\n@Component({\n  selector: 'cx-cart-totals',\n  templateUrl: './cart-totals.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartTotalsComponent implements OnInit, OnDestroy {\n  cart$: Observable<Cart>;\n  entries$: Observable<OrderEntry[]>;\n  cartValidationInProgress = false;\n\n  protected subscription = new Subscription();\n\n  /**\n   * @deprecated since 4.2\n   */\n  constructor(activeCartService: ActiveCartService);\n\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected router?: Router\n  ) {}\n\n  ngOnInit() {\n    this.cart$ = this.activeCartService.getActive();\n    this.entries$ = this.activeCartService\n      .getEntries()\n      .pipe(filter((entries) => entries.length > 0));\n\n    this.subscription.add(\n      this.router?.events.subscribe((event: Event) => {\n        if (\n          event instanceof NavigationEnd ||\n          event instanceof NavigationCancel\n        ) {\n          this.cartValidationInProgress = false;\n        }\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  disableButtonWhileNavigation(): void {\n    this.cartValidationInProgress = true;\n  }\n}\n","<ng-container *ngIf=\"cart$ | async as cart\">\n  <ng-container *ngIf=\"entries$ | async as entries\">\n    <cx-order-summary [cart]=\"cart\"></cx-order-summary>\n    <ng-container *cxFeatureLevel=\"'!4.2'\">\n      <button\n        [routerLink]=\"{ cxRoute: 'checkout' } | cxUrl\"\n        *ngIf=\"entries.length\"\n        class=\"btn btn-primary btn-block\"\n        type=\"button\"\n      >\n        {{ 'cartDetails.proceedToCheckout' | cxTranslate }}\n      </button>\n    </ng-container>\n\n    <ng-container *cxFeatureLevel=\"'4.2'\">\n      <cx-progress-button\n        *ngIf=\"entries.length\"\n        [routerLink]=\"{ cxRoute: 'checkout' } | cxUrl\"\n        [loading]=\"cartValidationInProgress\"\n        [disabled]=\"cartValidationInProgress\"\n        [class]=\"'btn btn-primary btn-block'\"\n        (clikEvent)=\"disableButtonWhileNavigation()\"\n      >\n        {{\n          (!cartValidationInProgress ? 'cartDetails.proceedToCheckout' : '')\n            | cxTranslate\n        }}\n      </cx-progress-button>\n    </ng-container>\n  </ng-container>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n  FeaturesConfigModule,\n} from '@spartacus/core';\nimport { CartCouponModule } from '../cart-coupon/cart-coupon.module';\nimport { CartSharedModule } from '../cart-shared/cart-shared.module';\nimport { CartTotalsComponent } from './cart-totals.component';\nimport { ProgressButtonModule } from '../../../shared/components/progress-button/progress-button.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    CartSharedModule,\n    I18nModule,\n    CartCouponModule,\n    FeaturesConfigModule,\n    ProgressButtonModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CartTotalsComponent: {\n          component: CartTotalsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [CartTotalsComponent],\n  exports: [CartTotalsComponent],\n})\nexport class CartTotalsModule {}\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { BREAKPOINT } from '../../../layout/config/layout-config';\n\nexport const PAGE_LAYOUT_HANDLER = new InjectionToken<PageLayoutHandler[]>(\n  'PageLayoutHandler'\n);\n\nexport interface PageLayoutHandler {\n  handle(\n    slots: Observable<string[]>,\n    pageTemplate?: string,\n    section?: string,\n    breakpoint?: BREAKPOINT\n  ): Observable<string[]>;\n}\n","import { Inject, Injectable, isDevMode, Optional } from '@angular/core';\nimport { CmsService, Page } from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport {\n  BREAKPOINT,\n  LayoutConfig,\n  LayoutSlotConfig,\n  SlotConfig,\n} from '../../../layout/config/layout-config';\nimport { PageLayoutHandler, PAGE_LAYOUT_HANDLER } from './page-layout-handler';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageLayoutService {\n  constructor(\n    private cms: CmsService,\n    private config: LayoutConfig,\n    private breakpointService: BreakpointService,\n    @Optional()\n    @Inject(PAGE_LAYOUT_HANDLER)\n    private handlers: PageLayoutHandler[]\n  ) {}\n\n  // Prints warn messages for missing layout configs.\n  // The warnings are only printed once per config\n  // to not pollute the console log.\n  private warnLogMessages = {};\n  private logSlots = {};\n\n  getSlots(section?: string): Observable<string[]> {\n    return combineLatest([this.page$, this.breakpointService.breakpoint$]).pipe(\n      map(([page, breakpoint]) => {\n        const pageTemplate = page.template;\n        const slots = this.resolveSlots(page, section, breakpoint);\n        return { slots, pageTemplate, breakpoint };\n      }),\n      switchMap(({ slots, pageTemplate, breakpoint }) => {\n        let result = of(slots);\n        for (const handler of this.handlers || []) {\n          result = handler.handle(result, pageTemplate, section, breakpoint);\n        }\n        return result;\n      }),\n      distinctUntilChanged((a, b) => {\n        if (a.length !== b.length) {\n          return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n          if (a[i] !== b[i]) {\n            return false;\n          }\n        }\n        return true;\n      })\n    );\n  }\n\n  /**\n   * Returns an observable with the last page slot above-the-fold\n   * for the given pageTemplate / breakpoint.\n   *\n   * The page fold is configurable in the `LayoutConfig` for each page layout.\n   */\n  getPageFoldSlot(pageTemplate: string): Observable<string> {\n    return this.breakpointService.breakpoint$.pipe(\n      map((breakpoint) => {\n        if (!this.config.layoutSlots) {\n          // no layout config available\n          return null;\n        }\n        const pageTemplateConfig = this.config.layoutSlots[pageTemplate];\n        const config = this.getResponsiveSlotConfig(\n          <LayoutSlotConfig>pageTemplateConfig,\n          'pageFold',\n          breakpoint\n        );\n        return config ? config.pageFold : null;\n      })\n    );\n  }\n\n  private resolveSlots(page, section, breakpoint): string[] {\n    const config = this.getSlotConfig(\n      page.template,\n      'slots',\n      section,\n      breakpoint\n    );\n    if (config && config.slots) {\n      const pageSlots = Object.keys(page.slots);\n      return config.slots.filter((slot) => pageSlots.includes(slot));\n    } else if (!section) {\n      this.logMissingLayoutConfig(page);\n      return Object.keys(page.slots);\n    } else {\n      this.logMissingLayoutConfig(page, section);\n      return [];\n    }\n  }\n\n  get page$(): Observable<Page> {\n    return this.cms.getCurrentPage().pipe(filter((page) => !!page));\n  }\n\n  get templateName$(): Observable<string> {\n    return this.page$.pipe(\n      filter((page) => !!page.template),\n      map((page: Page) => page.template)\n    );\n  }\n\n  /**\n   * load slots from the layout configuration. The breakpoint is used\n   * to load a specific configuration for the given breakpoint. If there's\n   * no configuration available for the given breakpoint the default slot\n   * configuration is returned.\n   */\n  protected getSlotConfig(\n    templateUid: string,\n    configAttribute: string,\n    section?: string,\n    breakpoint?: BREAKPOINT\n  ): SlotConfig {\n    if (!this.config.layoutSlots) {\n      return null;\n    }\n    const pageTemplateConfig = this.config.layoutSlots[templateUid];\n\n    if (section) {\n      return this.getSlotConfigForSection(\n        templateUid,\n        configAttribute,\n        section,\n        breakpoint\n      );\n    }\n\n    if (pageTemplateConfig) {\n      return this.getResponsiveSlotConfig(\n        <LayoutSlotConfig>pageTemplateConfig,\n        configAttribute,\n        breakpoint\n      );\n    }\n  }\n\n  protected getSlotConfigForSection(\n    templateUid: string,\n    configAttribute: string,\n    section?: string,\n    breakpoint?: BREAKPOINT\n  ): SlotConfig {\n    const pageTemplateConfig = this.config.layoutSlots[templateUid];\n\n    if (!pageTemplateConfig) {\n      return null;\n    }\n\n    // if there's no section config on the page layout\n    // we fall back to the global section config\n    const sectionConfig = pageTemplateConfig[section]\n      ? pageTemplateConfig[section]\n      : this.config.layoutSlots[section];\n\n    if (!sectionConfig) {\n      return null;\n    }\n\n    const responsiveConfig = this.getResponsiveSlotConfig(\n      <LayoutSlotConfig>sectionConfig,\n      configAttribute,\n      breakpoint\n    );\n\n    if (responsiveConfig.hasOwnProperty(configAttribute)) {\n      return responsiveConfig;\n    } else if (pageTemplateConfig[section].hasOwnProperty(configAttribute)) {\n      return pageTemplateConfig[section];\n    } else if (this.config.layoutSlots[section]) {\n      return <SlotConfig>this.config.layoutSlots[section];\n    }\n  }\n\n  /**\n   * Returns a list of slots for a breakpoint specific configuration\n   * If there's no specific configuration for the breakpoint,\n   * the closest available configuration will be returned.\n   */\n  protected getResponsiveSlotConfig(\n    layoutSlotConfig: LayoutSlotConfig,\n    configAttribute: string,\n    breakpoint?: BREAKPOINT\n  ): SlotConfig {\n    let slotConfig = <SlotConfig>layoutSlotConfig;\n\n    // fallback to default slot config\n    if (!layoutSlotConfig || !breakpoint) {\n      return slotConfig;\n    }\n\n    // we have a config for the specific breakpoint\n    if (\n      layoutSlotConfig[breakpoint] &&\n      layoutSlotConfig[breakpoint].hasOwnProperty(configAttribute)\n    ) {\n      return <SlotConfig>layoutSlotConfig[breakpoint];\n    }\n\n    // find closest config\n    const all = this.breakpointService.breakpoints;\n\n    for (const br of all.slice(0, all.indexOf(breakpoint))) {\n      if (\n        layoutSlotConfig[br] &&\n        layoutSlotConfig[br].hasOwnProperty(configAttribute)\n      ) {\n        slotConfig = <SlotConfig>layoutSlotConfig[br];\n      }\n    }\n    return slotConfig;\n  }\n\n  /**\n   * In order to help developers, we print some detailed log information in\n   * case there's no layout configuration available for the given page template\n   * or section. Additionally, the slot positions are printed in the console\n   * in a format that can be copied / paste to the configuration.\n   */\n  private logMissingLayoutConfig(page: Page, section?: string): void {\n    if (!isDevMode()) {\n      return;\n    }\n    if (!this.logSlots[page.template]) {\n      // the info log is not printed in production\n      // eslint-disable-next-line no-console\n      console.info(\n        `Available CMS page slots: '${Object.keys(page.slots).join(`','`)}'`\n      );\n      this.logSlots[page.template] = true;\n    }\n\n    const cacheKey = section || page.template;\n    if (!this.warnLogMessages[cacheKey]) {\n      console.warn(\n        `No layout config found for ${cacheKey}, you can configure a 'LayoutConfig' to control the rendering of page slots.`\n      );\n      this.warnLogMessages[cacheKey] = true;\n    }\n  }\n}\n","import { Injectable, InjectFlags, Injector, NgModuleRef } from '@angular/core';\nimport {\n  CMSComponentConfig,\n  CmsComponentMapping,\n  CmsConfig,\n  ConfigChunk,\n  ConfigInitializerService,\n  deepMerge,\n  DefaultConfigChunk,\n  FeatureModuleConfig,\n  FeatureModulesService,\n} from '@spartacus/core';\nimport { defer, Observable, of } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\n\ninterface FeatureInstance extends FeatureModuleConfig {\n  moduleRef?: NgModuleRef<any>;\n  componentsMappings?: CMSComponentConfig;\n}\n\n/**\n * Service responsible for resolving cms config based feature modules.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsFeaturesService {\n  // feature modules configuration\n  private featureModulesConfig?: {\n    [featureName: string]: FeatureModuleConfig | string;\n  };\n\n  // maps componentType to feature\n  private componentFeatureMap: Map<string, string> = new Map();\n\n  /*\n   * Contains either FeatureInstance or FeatureInstance resolver for not yet\n   * resolved feature modules\n   */\n  private featureInstances: Map<string, Observable<FeatureInstance>> =\n    new Map();\n\n  constructor(\n    protected configInitializer: ConfigInitializerService,\n    protected featureModules: FeatureModulesService\n  ) {\n    this.initFeatureMap();\n  }\n\n  private initFeatureMap(): void {\n    this.configInitializer\n      .getStable('featureModules')\n      .subscribe((config: CmsConfig) => {\n        this.featureModulesConfig = config.featureModules ?? {};\n\n        for (const [featureName, featureConfig] of Object.entries(\n          this.featureModulesConfig\n        )) {\n          if (\n            typeof featureConfig !== 'string' &&\n            featureConfig?.module &&\n            featureConfig?.cmsComponents?.length\n          ) {\n            for (const component of featureConfig.cmsComponents) {\n              this.componentFeatureMap.set(component, featureName);\n            }\n          }\n        }\n      });\n  }\n\n  /**\n   * Check if there is feature module configuration that covers specified\n   * component type\n   */\n  hasFeatureFor(componentType: string): boolean {\n    return this.componentFeatureMap.has(componentType);\n  }\n\n  /**\n   * Return full CmsComponent mapping defined in feature module\n   */\n  getCmsMapping(\n    componentType: string\n  ): Observable<CmsComponentMapping | undefined> {\n    const feature = this.componentFeatureMap.get(componentType);\n\n    if (!feature) {\n      return of(undefined);\n    }\n\n    return this.resolveFeatureInstance(feature).pipe(\n      map(\n        (featureInstance) => featureInstance.componentsMappings?.[componentType]\n      )\n    );\n  }\n\n  /**\n   * Resolves feature module for provided component type\n   *\n   * @param componentType\n   */\n  getModule(componentType: string): NgModuleRef<any> | undefined {\n    const feature = this.componentFeatureMap.get(componentType);\n\n    if (!feature) {\n      return undefined;\n    }\n\n    let module;\n\n    // we are returning injectors only for already resolved features\n    this.featureInstances\n      .get(feature)\n      ?.subscribe((featureInstance) => {\n        module = featureInstance.moduleRef;\n      })\n      .unsubscribe();\n    return module;\n  }\n\n  /**\n   * Resolve feature based on feature name, if feature was not yet resolved\n   *\n   * It will first resolve all module dependencies if defined\n   */\n  private resolveFeatureInstance(\n    featureName: string\n  ): Observable<FeatureInstance> {\n    return defer(() => {\n      if (!this.featureInstances.has(featureName)) {\n        this.featureInstances.set(\n          featureName,\n          this.featureModules.resolveFeature(featureName).pipe(\n            map((moduleRef) =>\n              this.createFeatureInstance(moduleRef, featureName)\n            ),\n            shareReplay()\n          )\n        );\n      }\n\n      return this.featureInstances.get(featureName);\n    });\n  }\n\n  /**\n   * Create feature instance from feature's moduleRef\n   */\n  private createFeatureInstance(\n    moduleRef: NgModuleRef<any>,\n    feature: string\n  ): FeatureInstance {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const featureConfig = this.featureModulesConfig![\n      feature\n    ] as FeatureModuleConfig;\n\n    const featureInstance: FeatureInstance = {\n      moduleRef,\n      componentsMappings: {},\n    };\n\n    // resolve configuration for feature module\n    const resolvedConfiguration = this.resolveFeatureConfiguration(\n      moduleRef.injector\n    );\n\n    // extract cms components configuration from feature config\n    for (const componentType of featureConfig.cmsComponents ?? []) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      featureInstance.componentsMappings![componentType] =\n        resolvedConfiguration.cmsComponents?.[componentType] ?? {};\n    }\n    return featureInstance;\n  }\n\n  /**\n   * Returns configuration provided in feature module\n   */\n  private resolveFeatureConfiguration(featureInjector: Injector): CmsConfig {\n    // get config chunks from feature lib\n    const featureConfigChunks = featureInjector.get<any[]>(\n      ConfigChunk,\n      [],\n      InjectFlags.Self\n    );\n    // get default config chunks from feature lib\n    const featureDefaultConfigChunks = featureInjector.get<any[]>(\n      DefaultConfigChunk,\n      [],\n      InjectFlags.Self\n    );\n\n    return deepMerge(\n      {},\n      ...(featureDefaultConfigChunks ?? []),\n      ...(featureConfigChunks ?? [])\n    ) as CmsConfig;\n  }\n}\n","import { isPlatformServer } from '@angular/common';\nimport {\n  Inject,\n  Injectable,\n  isDevMode,\n  NgModuleRef,\n  PLATFORM_ID,\n} from '@angular/core';\nimport { Route } from '@angular/router';\nimport {\n  CmsComponent,\n  CmsComponentChildRoutesConfig,\n  CMSComponentConfig,\n  CmsComponentMapping,\n  CmsConfig,\n  ConfigInitializerService,\n  deepMerge,\n  DeferLoadingStrategy,\n} from '@spartacus/core';\nimport { defer, forkJoin, Observable, of } from 'rxjs';\nimport { mapTo, share, tap } from 'rxjs/operators';\nimport { CmsFeaturesService } from './cms-features.service';\n\n/**\n * Service with logic related to resolving component from cms mapping\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsComponentsService {\n  // Component mappings that were identified as missing\n  protected missingComponents: string[] = [];\n\n  // Already resolved mappings\n  protected mappings: { [componentType: string]: CmsComponentMapping } = {};\n\n  // Copy of initial/static cms mapping configuration unaffected by lazy-loaded modules\n  protected staticCmsConfig: CMSComponentConfig | undefined;\n\n  // Contains already initialized resolvers for specified component typez\n  protected mappingResolvers: Map<string, Observable<CmsComponentMapping>> =\n    new Map();\n\n  constructor(\n    protected config: CmsConfig,\n    @Inject(PLATFORM_ID) protected platformId: Object,\n    protected featureModules: CmsFeaturesService,\n    protected configInitializer: ConfigInitializerService\n  ) {\n    this.configInitializer\n      .getStable('cmsComponents')\n      .subscribe((cmsConfig: CmsConfig) => {\n        // we want to grab cms configuration available at config initialization phase\n        // as lazy-loaded modules can affect global configuration resulting in\n        // non-deterministic state\n        this.staticCmsConfig = { ...cmsConfig.cmsComponents };\n      });\n  }\n\n  /**\n   * Should be called to make sure all component mappings are determined,\n   * especially lazy loaded ones.\n   *\n   * It's recommended way to make sure all other methods of CmsComponentService\n   * will be able to work synchronously for asked component types and avoid risk\n   * of potential errors that could be thrown otherwise.\n   */\n  determineMappings(componentTypes: string[]): Observable<string[]> {\n    return defer(() => {\n      // we use defer, to be sure the logic below used to compose final observable\n      // will be executed at subscription time (with up to date state at the time,\n      // when it will be needed)\n      const featureResolvers = [];\n\n      for (const componentType of componentTypes) {\n        if (!this.mappings[componentType]) {\n          const staticConfig = (this.staticCmsConfig ??\n            this.config.cmsComponents)?.[componentType];\n\n          // check if this component type is managed by feature module\n          if (this.featureModules.hasFeatureFor(componentType)) {\n            featureResolvers.push(\n              // we delegate populating this.mappings to feature resolver\n              this.getFeatureMappingResolver(componentType, staticConfig)\n            );\n          } else {\n            // simply use only static config\n            this.mappings[componentType] = staticConfig;\n          }\n        }\n      }\n\n      if (featureResolvers.length) {\n        return forkJoin(featureResolvers).pipe(mapTo(componentTypes));\n      } else {\n        return of(componentTypes);\n      }\n    });\n  }\n\n  private getFeatureMappingResolver(\n    componentType: string,\n    staticConfig?: CmsComponentMapping\n  ): Observable<CmsComponentMapping> {\n    if (!this.mappingResolvers.has(componentType)) {\n      const mappingResolver$ = this.featureModules\n        .getCmsMapping(componentType)\n        .pipe(\n          tap((featureComponentMapping) => {\n            // We treat cms mapping configuration from a feature as a default,\n            // that can be overridden by app/static configuration\n            this.mappings[componentType] = deepMerge(\n              {},\n              featureComponentMapping,\n              staticConfig\n            );\n            this.mappingResolvers.delete(componentType);\n          }),\n          share()\n        );\n      this.mappingResolvers.set(componentType, mappingResolver$);\n    }\n    return this.mappingResolvers.get(componentType);\n  }\n\n  /**\n   * Returns the feature module for a cms component.\n   * It will only work for cms components provided by feature modules.\n   *\n   * @param componentType\n   */\n  getModule(componentType: string): NgModuleRef<any> | undefined {\n    return (\n      this.featureModules.hasFeatureFor(componentType) &&\n      this.featureModules.getModule(componentType)\n    );\n  }\n\n  /**\n   * Return collection of component mapping configuration for specified list of\n   * component types.\n   *\n   * If component mapping can't be determined synchronously, for example, lazy\n   * loaded one, it will throw an error.\n   *\n   * To make sure component mapping is available, determineMappings()\n   * should be called and completed first.\n   */\n  getMapping(componentType: string): CmsComponentMapping {\n    const componentConfig =\n      this.mappings[componentType] ??\n      (this.staticCmsConfig ?? this.config.cmsComponents)?.[componentType];\n\n    if (isDevMode() && !componentConfig) {\n      if (!this.missingComponents.includes(componentType)) {\n        this.missingComponents.push(componentType);\n        console.warn(\n          `No component implementation found for the CMS component type '${componentType}'.\\n`,\n          `Make sure you implement a component and register it in the mapper.`\n        );\n      }\n    }\n\n    return componentConfig;\n  }\n\n  /**\n   * Checks, if component should be rendered as some components\n   * could be disabled for server side renderings\n   */\n  shouldRender(componentType: string): boolean {\n    const isSSR = isPlatformServer(this.platformId);\n    return !(isSSR && this.getMapping(componentType)?.disableSSR);\n  }\n\n  /**\n   * Return DeferLoadingStrategy for component type.\n   */\n  getDeferLoadingStrategy(\n    componentType: string\n  ): DeferLoadingStrategy | undefined {\n    return (this.staticCmsConfig ?? this.config.cmsComponents)?.[componentType]\n      ?.deferLoading;\n  }\n\n  /**\n   * Get cms driven child routes for components\n   */\n  getChildRoutes(componentTypes: string[]): CmsComponentChildRoutesConfig {\n    const configs = [];\n    for (const componentType of componentTypes) {\n      if (this.shouldRender(componentType)) {\n        configs.push(this.getMapping(componentType)?.childRoutes ?? []);\n      }\n    }\n\n    return this.standardizeChildRoutes(configs);\n  }\n\n  /**\n   * Returns the static data for the component type.\n   */\n  getStaticData<T extends CmsComponent = CmsComponent>(\n    componentType: string\n  ): T | undefined {\n    return this.getMapping(componentType)?.data as T;\n  }\n\n  /**\n   * Standardizes the format of `childRoutes` config.\n   *\n   * Some `childRoutes` configs are simple arrays of Routes (without the notion of the parent route).\n   * But some configs can be an object with children routes and their parent defined in separate property.\n   */\n  protected standardizeChildRoutes(\n    childRoutesConfigs: (Route[] | CmsComponentChildRoutesConfig)[]\n  ): CmsComponentChildRoutesConfig {\n    const result: CmsComponentChildRoutesConfig = { children: [] };\n\n    (childRoutesConfigs || []).forEach((config) => {\n      if (Array.isArray(config)) {\n        result.children.push(...config);\n      } else {\n        result.children.push(...(config.children || []));\n        if (config.parent) {\n          result.parent = config.parent;\n        }\n      }\n    });\n\n    return result;\n  }\n\n  /**\n   * Get cms driven guards for components\n   */\n  getGuards(componentTypes: string[]): any[] {\n    const guards = new Set<any>();\n    for (const componentType of componentTypes) {\n      this.getMapping(componentType)?.guards?.forEach((guard) =>\n        guards.add(guard)\n      );\n    }\n    return Array.from(guards);\n  }\n\n  /**\n   * Get i18n keys associated with components\n   */\n  getI18nKeys(componentTypes: string[]): string[] {\n    const i18nKeys = new Set<string>();\n    for (const componentType of componentTypes) {\n      if (this.shouldRender(componentType)) {\n        this.getMapping(componentType)?.i18nKeys?.forEach((key) =>\n          i18nKeys.add(key)\n        );\n      }\n    }\n    return Array.from(i18nKeys);\n  }\n}\n","import { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { DOCUMENT, isPlatformBrowser } from '@angular/common';\nimport { IntersectionOptions } from '../../../layout/loading/intersection.model';\nimport { DeferLoadingStrategy } from '@spartacus/core';\nimport { CmsComponentsService } from '../../services/cms-components.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageSlotService {\n  protected prerenderedSlots: string[] | undefined;\n\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    @Inject(PLATFORM_ID) protected platformId: any,\n    @Inject(DOCUMENT) protected document\n  ) {\n    this.resolvePrerenderedSlots();\n  }\n\n  /**\n   * Finds all slots visible in the SSR pre-rendered DOM\n   */\n  protected resolvePrerenderedSlots(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      this.prerenderedSlots = Array.from(\n        this.document.querySelectorAll('cx-page-slot')\n      )\n        .filter(\n          (el: Element) =>\n            el.getBoundingClientRect().top <\n            this.document.documentElement.clientHeight\n        )\n        .map((el: Element) => el.getAttribute('position'));\n    }\n  }\n\n  /**\n   * Indicates if certain slot should be rendered instantly.\n   *\n   * It's especially useful when transitioning from SSR to CSR application,\n   * where we don't want to apply deferring logic to slots that are visible\n   * to avoid unnecessary flickering.\n   */\n  shouldNotDefer(slot: string): boolean {\n    if (this.prerenderedSlots?.includes(slot)) {\n      this.prerenderedSlots.splice(this.prerenderedSlots.indexOf(slot), 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns the defer options for the given component. If the wrapping\n   * page slot is prerendered, we would ignore the defer options altogether.\n   */\n  getComponentDeferOptions(\n    slot: string,\n    componentType: string\n  ): IntersectionOptions {\n    if (this.shouldNotDefer(slot)) {\n      return { deferLoading: DeferLoadingStrategy.INSTANT };\n    }\n    const deferLoading =\n      this.cmsComponentsService.getDeferLoadingStrategy(componentType);\n    return { deferLoading };\n  }\n}\n","import { CxEvent } from '@spartacus/core';\n\n/**\n * Lifecycle events for the creation and removal of CMS components.\n *\n * Triggers when the component is added or removed from the DOM, using\n * sub event `ComponentCreateEvent` and `ComponentDestroyEvent`.\n */\nexport abstract class ComponentEvent extends CxEvent {\n  /**\n   * The component type code.\n   */\n  typeCode: string;\n  /**\n   * The unique id for the component instance.\n   */\n  id: string;\n}\n\n/**\n * Indicates that the component is added to the DOM.\n */\nexport class ComponentCreateEvent extends ComponentEvent {\n  /**\n   * Event's type\n   */\n  static readonly type = 'ComponentCreate';\n  /**\n   * The component host element.\n   */\n  host: HTMLElement;\n}\n\n/**\n * Indicates that the component is removed from the DOM.\n */\nexport class ComponentDestroyEvent extends ComponentEvent {\n  /**\n   * Event's type\n   */\n  static readonly type = 'ComponentDestroy';\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Injector,\n  NgModuleRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Applicable, CmsComponentMapping, Priority } from '@spartacus/core';\n\n/**\n * ComponentHandler implementations can be used for instantiating and launching\n * different types of CMS mapped components\n */\nexport abstract class ComponentHandler implements Applicable {\n  /**\n   * Returns component resource - an observable stream used to launch and dispose\n   * component.\n   *\n   * Instantiate and launch component by subscribing to launcher.\n   * Successful component launch will be followed by emission of ElementRef\n   * (and in case of native Angular component, also ComponentRef).\n   * Unsubscribing from the launcher will remove and tear down the component.\n   *\n   * @param componentMapping\n   * @param viewContainerRef\n   * @param elementInjector\n   * @param module\n   */\n  abstract launcher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }>;\n\n  abstract hasMatch(componentMapping: CmsComponentMapping): boolean;\n  abstract getPriority?(): Priority;\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Inject,\n  Injectable,\n  Injector,\n  isDevMode,\n  NgModuleRef,\n  Optional,\n  ViewContainerRef,\n} from '@angular/core';\nimport { CmsComponentMapping, resolveApplicable } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ComponentHandler } from '../handlers/component-handler';\n\n/**\n * Responsible for obtaining component handler for specified component mapping\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComponentHandlerService {\n  constructor(\n    @Optional()\n    @Inject(ComponentHandler)\n    protected handlers: ComponentHandler[]\n  ) {}\n\n  protected invalidMappings = new Set<CmsComponentMapping<any>>();\n\n  /**\n   * Get best matching component handler\n   *\n   * @param componentMapping\n   */\n  protected resolve(componentMapping: CmsComponentMapping): ComponentHandler {\n    const handler = resolveApplicable(this.handlers, [componentMapping]);\n\n    if (isDevMode() && !handler) {\n      if (!this.invalidMappings.has(componentMapping)) {\n        this.invalidMappings.add(componentMapping);\n        console.warn(\n          \"Can't resolve handler for component mapping: \",\n          componentMapping\n        );\n      }\n    }\n\n    return handler;\n  }\n\n  /**\n   * Get launcher for specified component mapping\n   *\n   * @param componentMapping\n   * @param viewContainerRef\n   * @param elementInjector\n   */\n  getLauncher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }> {\n    return this.resolve(componentMapping)?.launcher(\n      componentMapping,\n      viewContainerRef,\n      elementInjector,\n      module\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CmsService } from '@spartacus/core';\nimport { defer, EMPTY, Observable, of } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { CmsComponentsService } from '../../../services/cms-components.service';\n\n/**\n * Provides data for `CmsComponentData`. This is used while component is injected\n * dynamically, so that the component implementation can access the data.\n *\n * The data is resolved from dynamic data (CMS api) as well as static configured data.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComponentDataProvider {\n  constructor(\n    protected componentsService: CmsComponentsService,\n    protected cmsService: CmsService\n  ) {}\n\n  /**\n   * Return the component data for a component given by the `uid`.\n   *\n   * If the `type` is provided, static component data (if available) is\n   * merged into the component data. The static data is complemented and\n   * overridden with data retrieved from the cms service.\n   */\n  get<T>(uid: string, type?: string): Observable<T> {\n    return defer(() => {\n      let staticComponentData: T;\n\n      if (type) {\n        staticComponentData = this.componentsService.getStaticData<T>(type);\n      }\n\n      if (uid) {\n        if (staticComponentData) {\n          return this.cmsService.getComponentData<T>(uid).pipe(\n            map((data) => ({\n              ...staticComponentData,\n              ...data,\n            })),\n            startWith(staticComponentData)\n          );\n        } else {\n          return this.cmsService.getComponentData<T>(uid);\n        }\n      } else {\n        return staticComponentData ? of(staticComponentData) : EMPTY;\n      }\n    });\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { CmsComponentsService } from '../../../services/cms-components.service';\nimport { CmsComponentData } from '../../model/cms-component-data';\nimport { ComponentDataProvider } from './component-data.provider';\n\n/**\n * Used to prepare injector for CMS components.\n *\n * Injector will take into account configured providers and provides CmsComponentData\n * for specified component's uid\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsInjectorService {\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector\n  ) {}\n\n  public getInjector(\n    type: string,\n    uid: string,\n    parentInjector?: Injector\n  ): Injector {\n    const configProviders =\n      this.cmsComponentsService.getMapping(type)?.providers ?? [];\n    return Injector.create({\n      providers: [\n        {\n          provide: CmsComponentData,\n          useFactory: (dataProvider: ComponentDataProvider) => ({\n            uid,\n            data$: dataProvider.get(uid, type),\n          }),\n          deps: [ComponentDataProvider],\n        },\n        ...configProviders,\n      ],\n      parent: parentInjector ?? this.injector,\n    });\n  }\n}\n","import {\n  ChangeDetectorRef,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Injector,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  Renderer2,\n  Type,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  ContentSlotComponentData,\n  DynamicAttributeService,\n  EventService,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { finalize, tap } from 'rxjs/operators';\nimport { CmsComponentsService } from '../../services/cms-components.service';\nimport {\n  ComponentCreateEvent,\n  ComponentDestroyEvent,\n  ComponentEvent,\n} from './events/component.event';\nimport { CmsInjectorService } from './services/cms-injector.service';\nimport { ComponentHandlerService } from './services/component-handler.service';\n\n/**\n * Directive used to facilitate instantiation of CMS driven dynamic components\n */\n@Directive({\n  selector: '[cxComponentWrapper]',\n})\nexport class ComponentWrapperDirective implements OnInit, OnDestroy {\n  @Input() cxComponentWrapper: ContentSlotComponentData;\n  @Output() cxComponentRef = new EventEmitter<ComponentRef<any>>();\n\n  /**\n   * @deprecated since 2.0\n   *\n   * This property in unsafe, i.e.\n   * - cmpRef can be set later because of lazy loading or deferred loading\n   * - cmpRef can be not set at all if for example, web components are used as cms components\n   */\n  cmpRef?: ComponentRef<any>;\n\n  private launcherResource?: Subscription;\n\n  /**\n   * @deprecated since version 3.3\n   * Use the following constructor instead:\n   * ```\n   * constructor( protected vcr: ViewContainerRef,\n   * protected cmsComponentsService: CmsComponentsService,\n   * protected injector: Injector,\n   * protected dynamicAttributeService: DynamicAttributeService,\n   * protected renderer: Renderer2,\n   * protected componentHandler: ComponentHandlerService,\n   * protected cmsInjector: CmsInjectorService,\n   * protected eventService: EventService) {}\n   * ```\n   */\n  constructor(\n    vcr: ViewContainerRef,\n    cmsComponentsService: CmsComponentsService,\n    injector: Injector,\n    dynamicAttributeService: DynamicAttributeService,\n    renderer: Renderer2,\n    componentHandler: ComponentHandlerService,\n    cmsInjector: CmsInjectorService\n  );\n  constructor(\n    protected vcr: ViewContainerRef,\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector,\n    protected dynamicAttributeService: DynamicAttributeService,\n    protected renderer: Renderer2,\n    protected componentHandler: ComponentHandlerService,\n    protected cmsInjector: CmsInjectorService,\n    @Optional() protected eventService?: EventService\n  ) {}\n\n  ngOnInit() {\n    this.cmsComponentsService\n      .determineMappings([this.cxComponentWrapper.flexType])\n      .subscribe(() => {\n        if (\n          this.cmsComponentsService.shouldRender(\n            this.cxComponentWrapper.flexType\n          )\n        ) {\n          this.launchComponent();\n        }\n      });\n  }\n\n  private launchComponent() {\n    const componentMapping = this.cmsComponentsService.getMapping(\n      this.cxComponentWrapper.flexType\n    );\n\n    if (!componentMapping) {\n      return;\n    }\n\n    this.launcherResource = this.componentHandler\n      .getLauncher(\n        componentMapping,\n        this.vcr,\n        this.cmsInjector.getInjector(\n          this.cxComponentWrapper.flexType,\n          this.cxComponentWrapper.uid,\n          this.injector\n        ),\n        this.cmsComponentsService.getModule(this.cxComponentWrapper.flexType)\n      )\n      .pipe(\n        tap(({ elementRef, componentRef }) => {\n          this.cmpRef = componentRef;\n\n          this.cxComponentRef.emit(componentRef);\n\n          this.dispatchEvent(ComponentCreateEvent, elementRef);\n          this.decorate(elementRef);\n          this.injector.get(ChangeDetectorRef).markForCheck();\n        }),\n        finalize(() => this.dispatchEvent(ComponentDestroyEvent))\n      )\n      .subscribe();\n  }\n\n  /**\n   * Dispatch the component event.\n   *\n   * The event is dispatched during creation and removal of the component.\n   */\n  protected dispatchEvent(\n    event: Type<ComponentEvent>,\n    elementRef?: ElementRef\n  ) {\n    const payload = {\n      typeCode: this.cxComponentWrapper.typeCode,\n      id: this.cxComponentWrapper.uid,\n    } as ComponentEvent;\n    if (event === ComponentCreateEvent) {\n      (payload as ComponentCreateEvent).host = elementRef?.nativeElement;\n    }\n    this.eventService?.dispatch(payload, event);\n  }\n\n  private decorate(elementRef: ElementRef): void {\n    this.dynamicAttributeService.addAttributesToComponent(\n      elementRef.nativeElement,\n      this.renderer,\n      this.cxComponentWrapper\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.launcherResource) {\n      this.launcherResource.unsubscribe();\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n} from '@angular/core';\nimport {\n  CmsService,\n  ContentSlotComponentData,\n  ContentSlotData,\n  DynamicAttributeService,\n} from '@spartacus/core';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, switchMap, tap } from 'rxjs/operators';\nimport { IntersectionOptions } from '../../../layout/loading/intersection.model';\nimport { PageSlotService } from './page-slot.service';\n\n/**\n * The `PageSlotComponent` is used to render the CMS page slot and it's components.\n *\n * The Page slot host element will be supplemented with css classes so that the layout\n * can be fully controlled by customers:\n * - The page slot _position_ is added as a css class by default.\n * - The `cx-pending` is added for as long as the slot hasn't start loading.\n * - The `page-fold` style class is added for the page slot which is configured as the page fold.\n */\n@Component({\n  selector: 'cx-page-slot,[cx-page-slot]',\n  templateUrl: './page-slot.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PageSlotComponent implements OnInit, OnDestroy {\n  /**\n   * The position represents the unique key for a page slot on a single page, but can\n   * be reused cross pages.\n   *\n   * The position is used to find the CMS components for the page slot. It is also\n   * added as an additional CSS class so that layout can be applied.\n   */\n  @HostBinding('attr.position')\n  @Input()\n  set position(value: string) {\n    this.position$.next(value);\n  }\n  get position(): string {\n    return this.position$.value;\n  }\n\n  /**\n   * Maintains css classes introduced by the host and adds additional classes.\n   */\n  @Input() @HostBinding() class: string;\n\n  /**\n   * Indicates that the page slot is the last page slot above the fold.\n   */\n  @HostBinding('class.page-fold') @Input() isPageFold = false;\n\n  /**\n   * Indicates that the components of the page slot haven't been loaded as long\n   * as the isPending state is true.\n   */\n  @HostBinding('class.cx-pending') isPending = true;\n\n  /**\n   * Indicates that the page slot doesn't contain any components. This is no\n   * longer used in spartacus, but kept for backwards compatibility.\n   */\n  @HostBinding('class.has-components') @Input() hasComponents = false;\n\n  protected position$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n\n  components: ContentSlotComponentData[];\n\n  protected slot$: Observable<ContentSlotData> = this.position$.pipe(\n    switchMap((position) => this.cmsService.getContentSlot(position)),\n    distinctUntilChanged(this.isDistinct)\n  );\n\n  /** Observes the components for the given page slot. */\n  components$: Observable<ContentSlotComponentData[]> = this.slot$.pipe(\n    map((slot) => slot?.components ?? [])\n  );\n\n  protected subscription: Subscription = new Subscription();\n\n  /** Keeps track of the pending components that must be loaded for the page slot */\n  private pendingComponentCount = 0;\n\n  /** Tracks the last used position, in case the page slot is used dynamically */\n  private lastPosition: string;\n  constructor(\n    protected cmsService: CmsService,\n    protected dynamicAttributeService: DynamicAttributeService,\n    protected renderer: Renderer2,\n    protected elementRef: ElementRef,\n    protected cd: ChangeDetectorRef,\n    protected pageSlotService: PageSlotService\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.slot$.pipe(tap((slot) => this.decorate(slot))).subscribe((value) => {\n        this.components = value?.components || [];\n        this.cd.markForCheck();\n      })\n    );\n  }\n\n  protected decorate(slot: ContentSlotData): void {\n    let cls = this.class || '';\n\n    if (this.lastPosition && cls.indexOf(this.lastPosition) > -1) {\n      cls = cls.replace(this.lastPosition, '');\n    }\n    if (this.position$.value) {\n      cls += ` ${this.position$.value}`;\n      this.lastPosition = this.position$.value;\n    }\n\n    // host bindings\n    this.pending = slot?.components?.length || 0;\n    this.hasComponents = slot?.components?.length > 0;\n    if (cls && cls !== this.class) {\n      this.class = cls;\n    }\n\n    if (slot) {\n      this.dynamicAttributeService.addAttributesToSlot(\n        this.elementRef.nativeElement,\n        this.renderer,\n        slot\n      );\n    }\n  }\n\n  /**\n   * Sets the pending count for the page slot components. Once all pending components are\n   * loaded, the `isPending` flag is updated, so that the associated class can be updated\n   */\n  protected set pending(count: number) {\n    this.pendingComponentCount = count;\n    this.isPending = this.pendingComponentCount > 0;\n  }\n\n  protected get pending(): number {\n    return this.pendingComponentCount;\n  }\n\n  /*\n   * Is triggered when a component is added to the view. This is used to\n   * update the pending count\n   */\n  isLoaded(loadState: boolean) {\n    if (loadState) {\n      this.pending--;\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * The `DeferLoadingStrategy` indicates whether the component should be\n   * rendered instantly or whether it should be deferred.\n   */\n  getComponentDeferOptions(componentType: string): IntersectionOptions {\n    return this.pageSlotService.getComponentDeferOptions(\n      this.position,\n      componentType\n    );\n  }\n\n  protected isDistinct(old: ContentSlotData, current: ContentSlotData) {\n    return (\n      current.components &&\n      old.components?.length === current.components.length &&\n      !old.components.find(\n        (el, index) => el.uid !== current.components[index].uid\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n  }\n}\n","<ng-template\n  [cxOutlet]=\"position\"\n  [cxOutletContext]=\"{ components$: components$ }\"\n>\n  <ng-template\n    *ngFor=\"let component of components\"\n    [cxOutlet]=\"component.flexType\"\n    [cxOutletContext]=\"{ component: component }\"\n    [cxOutletDefer]=\"getComponentDeferOptions(component.flexType)\"\n    (loaded)=\"isLoaded($event)\"\n  >\n    <ng-container [cxComponentWrapper]=\"component\"></ng-container>\n  </ng-template>\n</ng-template>\n","import {\n  ChangeDetectorRef,\n  Directive,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n  TemplateRef,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { PageLayoutService } from './page-layout.service';\n\n/**\n * Directive that Adds a style class to the host element based on the cms page\n * template. The CMS page template is driven by the CMS structure, which is configurable\n * in the backend.\n *\n * The style class is added to the host element of the directive. The host element is resolved\n * from the `elementRef`, or, in case the directive is used in an `ng-template`, by the\n * `TemplateRef`.\n *\n * An example of the usage is given below:\n *\n * ```html\n * <cx-storefront class=\"LandingPageTemplate\">\n *   <ng-template cxPageTemplateStyle>...</ng-template>\n * <cx-storefront>\n * ```\n *\n * The style class can also be provided by an input:\n *\n * ```html\n * <ng-template [cxPageTemplateStyle]=\"pageTemplateName\">\n * ```\n *\n */\n@Directive({\n  selector: '[cxPageTemplateStyle]',\n})\nexport class PageTemplateDirective implements OnInit, OnDestroy {\n  /**\n   * Indicates whether this component is driven by an input template or should\n   * observe the CMS driven page layout template.\n   */\n  protected useTemplateFromInput: boolean;\n\n  /**\n   * Adds a style class to the host element based on the cms page template, unless\n   * the class is given as an input.\n   *\n   * The host element is either the actual host, or the parent element in case this\n   * is used inside an `ng-template`.\n   */\n  @Input('cxPageTemplateStyle') set setTemplate(template: string) {\n    if (template && template !== '') {\n      this.useTemplateFromInput = true;\n      this.addStyleClass(template);\n    } else if (this.useTemplateFromInput) {\n      // we only clear the template if it has been provided by the input before\n      this.clear();\n    }\n  }\n\n  // Maintains the page template subscription\n  protected subscription: Subscription = new Subscription();\n\n  /**\n   * Holds the current page template, so we can remove previous page templates\n   * from the element classList.\n   */\n  protected currentTemplate: string;\n\n  constructor(\n    protected pageLayoutService: PageLayoutService,\n    protected elementRef: ElementRef,\n    @Optional() protected templateRef: TemplateRef<HTMLElement>,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    if (!this.useTemplateFromInput) {\n      this.subscription.add(\n        this.pageLayoutService.templateName$.subscribe((template) =>\n          this.addStyleClass(template)\n        )\n      );\n    }\n  }\n\n  /**\n   * Adds the page template as a style class to the given element. If any\n   * page template was added before, we clean it up.\n   *\n   * We'll not use hostBinding for the style class, as it will potential drop\n   * an existing class name on the host. This is why we need to work with\n   * the lower level change detection api.\n   */\n  protected addStyleClass(template: string, el?: HTMLElement): void {\n    this.clear(el);\n    if (template) {\n      this.currentTemplate = template;\n      (el ?? this.host).classList.add(this.currentTemplate);\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * Cleans up the class host binding, if a template class was assigned before.\n   */\n  protected clear(el?: HTMLElement) {\n    if (this.currentTemplate) {\n      (el ?? this.host).classList?.remove(this.currentTemplate);\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * Returns the host element (`HTMLElement`).\n   *\n   * If the directive is used on an `ng-template`, we take the parent element,\n   * to ensure that we're not ending up with a comment.\n   */\n  protected get host(): HTMLElement {\n    return !!this.templateRef\n      ? this.templateRef.elementRef.nativeElement.parentElement\n      : this.elementRef.nativeElement;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport { PageLayoutService } from './page-layout.service';\n\n@Component({\n  selector: 'cx-page-layout',\n  templateUrl: './page-layout.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PageLayoutComponent {\n  @Input() set section(value: string) {\n    this.section$.next(value);\n  }\n  readonly section$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n\n  readonly templateName$: Observable<string> =\n    this.pageLayoutService.templateName$;\n\n  readonly layoutName$: Observable<string> = this.section$.pipe(\n    switchMap((section) => (section ? of(section) : this.templateName$))\n  );\n\n  readonly slots$: Observable<string[]> = this.section$.pipe(\n    switchMap((section) => this.pageLayoutService.getSlots(section))\n  );\n\n  readonly pageFoldSlot$: Observable<string> = this.templateName$.pipe(\n    switchMap((templateName) =>\n      this.pageLayoutService.getPageFoldSlot(templateName)\n    ),\n    distinctUntilChanged()\n  );\n\n  constructor(protected pageLayoutService: PageLayoutService) {}\n}\n","<ng-template\n  [cxPageTemplateStyle]=\"layoutName$ | async\"\n  [cxOutlet]=\"layoutName$ | async\"\n  [cxOutletContext]=\"{\n    templateName$: templateName$,\n    slots$: slots$,\n    section$: section$\n  }\"\n>\n  <ng-content></ng-content>\n\n  <cx-page-slot\n    *ngFor=\"let slot of slots$ | async\"\n    [position]=\"slot\"\n    [isPageFold]=\"slot === (pageFoldSlot$ | async)\"\n  ></cx-page-slot>\n</ng-template>\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n  CmsComponentChildRoutesConfig,\n  CmsRoute,\n  deepMerge,\n  PageContext,\n  PageType,\n} from '@spartacus/core';\nimport { PageLayoutComponent } from '../page/page-layout/page-layout.component';\nimport { CmsComponentsService } from './cms-components.service';\n\n// This service should be exposed in public API only after the refactor planned in https://github.com/SAP/spartacus/issues/7070\n@Injectable({ providedIn: 'root' })\nexport class CmsRoutesImplService {\n  constructor(\n    private router: Router,\n    private cmsComponentsService: CmsComponentsService\n  ) {}\n\n  private cmsRouteExists(url: string): boolean {\n    const isCmsDrivenRoute = url.startsWith('/');\n\n    if (!isCmsDrivenRoute) {\n      return false;\n    }\n\n    const routePath = url.substr(1);\n\n    return (\n      isCmsDrivenRoute &&\n      !!this.router.config.find(\n        (route: CmsRoute) =>\n          route.data && route.data.cxCmsRouteContext && route.path === routePath\n      )\n    );\n  }\n\n  /**\n   * Contains Cms driven routing logic intended for use use in guards, especially in canActivate method.\n   *\n   * Will return true, when logic wont have to modify routing (so canActivate could be easily resolved to true)\n   * or will return false, when routing configuration was updated and redirection to newly generated route was initiated.\n   *\n   * @param pageContext\n   * @param currentUrl\n   */\n  handleCmsRoutesInGuard(\n    pageContext: PageContext,\n    componentTypes: string[],\n    currentUrl: string,\n    currentPageLabel: string\n  ): boolean {\n    if (this.cmsRouteExists(currentPageLabel)) {\n      return true;\n    }\n\n    const childRoutesConfig =\n      this.cmsComponentsService.getChildRoutes(componentTypes);\n\n    if (childRoutesConfig?.children?.length) {\n      if (\n        this.updateRouting(pageContext, currentPageLabel, childRoutesConfig)\n      ) {\n        this.router.navigateByUrl(currentUrl);\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private updateRouting(\n    pageContext: PageContext,\n    pageLabel: string,\n    childRoutesConfig: CmsComponentChildRoutesConfig\n  ): boolean {\n    if (\n      pageContext.type === PageType.CONTENT_PAGE &&\n      pageLabel.startsWith('/') &&\n      pageLabel.length > 1\n    ) {\n      const newRoute: CmsRoute = {\n        path: pageLabel.substr(1),\n        component: PageLayoutComponent,\n        children: childRoutesConfig.children,\n        data: deepMerge({}, childRoutesConfig?.parent?.data ?? {}, {\n          cxCmsRouteContext: {\n            type: pageContext.type,\n            id: pageLabel,\n          },\n        }),\n      };\n\n      this.router.resetConfig([newRoute, ...this.router.config]);\n      return true;\n    }\n\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { PageContext } from '@spartacus/core';\nimport { CmsRoutesImplService } from './cms-routes-impl.service';\n\n// Public injection token for the private implementation of the service `CmsRoutesImplService`.\n// After #7070, this class should be replaced with a real implementation.\n@Injectable({\n  providedIn: 'root',\n  useExisting: CmsRoutesImplService,\n})\nexport abstract class CmsRoutesService {\n  abstract handleCmsRoutesInGuard(\n    pageContext: PageContext,\n    componentTypes: string[],\n    currentUrl: string,\n    currentPageLabel: string\n  ): boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { TranslationChunkService, TranslationService } from '@spartacus/core';\nimport { CmsComponentsService } from './cms-components.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsI18nService {\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    protected translation: TranslationService,\n    protected translationChunk: TranslationChunkService\n  ) {}\n\n  loadForComponents(componentTypes: string[]) {\n    const i18nKeys = this.cmsComponentsService.getI18nKeys(componentTypes);\n    const i18nChunks = new Set<string>();\n    for (const key of i18nKeys) {\n      i18nChunks.add(this.translationChunk.getChunkNameForKey(key));\n    }\n    this.translation.loadChunks(Array.from(i18nChunks));\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { CanActivate, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { CmsActivatedRouteSnapshot } from '@spartacus/core';\nimport { concat, from, isObservable, Observable, of } from 'rxjs';\nimport { endWith, first, skipWhile } from 'rxjs/operators';\nimport { CmsComponentsService } from './cms-components.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsGuardsService {\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector\n  ) {}\n\n  cmsPageCanActivate(\n    componentTypes: string[],\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    const guards = this.cmsComponentsService.getGuards(componentTypes);\n\n    if (guards.length) {\n      const canActivateObservables = guards.map((guardClass) => {\n        const guard = this.injector.get<CanActivate>(guardClass, null);\n        if (isCanActivate(guard)) {\n          return wrapIntoObservable(guard.canActivate(route, state)).pipe(\n            first()\n          );\n        } else {\n          throw new Error('Invalid CanActivate guard in cmsMapping');\n        }\n      });\n\n      return concat(...canActivateObservables).pipe(\n        skipWhile((canActivate: boolean | UrlTree) => canActivate === true),\n        endWith(true),\n        first()\n      );\n    } else {\n      return of(true);\n    }\n  }\n}\n\nfunction wrapIntoObservable<T>(\n  value: T | Promise<T> | Observable<T>\n): Observable<T> {\n  if (isObservable(value)) {\n    return value;\n  }\n\n  if (isPromise(value)) {\n    return from(Promise.resolve(value));\n  }\n\n  return of(value);\n}\n\nfunction isPromise(obj: any): obj is Promise<any> {\n  return !!obj && typeof obj.then === 'function';\n}\n\nfunction isCanActivate(guard: any): guard is CanActivate {\n  return guard && isFunction<CanActivate>(guard.canActivate);\n}\n\nfunction isFunction<T>(v: any): v is T {\n  return typeof v === 'function';\n}\n","import { Injectable } from '@angular/core';\nimport { RouterStateSnapshot, UrlTree } from '@angular/router';\nimport {\n  CmsActivatedRouteSnapshot,\n  CmsService,\n  Page,\n  PageContext,\n  PageType,\n  SemanticPathService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport {\n  filter,\n  map,\n  switchMap,\n  take,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators';\nimport { CmsComponentsService } from '../services/cms-components.service';\nimport { CmsGuardsService } from '../services/cms-guards.service';\nimport { CmsI18nService } from '../services/cms-i18n.service';\nimport { CmsRoutesService } from '../services/cms-routes.service';\n\n/**\n * Helper service for `CmsPageGuard`\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsPageGuardService {\n  constructor(\n    protected semanticPathService: SemanticPathService,\n    protected cmsService: CmsService,\n    protected cmsRoutes: CmsRoutesService,\n    protected cmsI18n: CmsI18nService,\n    protected cmsGuards: CmsGuardsService,\n    protected cmsComponentsService: CmsComponentsService,\n    protected routing: RoutingService\n  ) {}\n\n  /**\n   * Takes CMS components types in the current CMS page, triggers (configurable) side effects and returns a boolean - whether the route can be activated.\n   *\n   * Based on `cmsComponents` config for the components in the page:\n   * - Evaluates components' guards; if one of them emits false or UrlTree - the route cannot be activated or redirects to the given UrlTree, respectively.\n   * - If all components' guards emitted true, then the route can be activated\n   * - Then we trigger loading of configured i18n chunks in parallel\n   * - And we register the configured children routes of cms components\n   *\n   * @param pageContext current cms page context\n   * @param pageData cms page data\n   * @param route activated route snapshot\n   * @param state router state snapshot\n   *\n   * @returns boolean observable - whether the route can be activated\n   */\n  canActivatePage(\n    pageContext: PageContext,\n    pageData: Page,\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    return this.cmsService.getPageComponentTypes(pageContext).pipe(\n      take(1),\n      switchMap((componentTypes) =>\n        this.cmsComponentsService.determineMappings(componentTypes)\n      ),\n      switchMap((componentTypes) =>\n        this.cmsGuards\n          .cmsPageCanActivate(componentTypes, route, state)\n          .pipe(withLatestFrom(of(componentTypes)))\n      ),\n      tap(([canActivate, componentTypes]) => {\n        if (canActivate === true) {\n          this.cmsI18n.loadForComponents(componentTypes);\n        }\n      }),\n      map(([canActivate, componentTypes]) => {\n        const pageLabel = pageData.label || pageContext.id; // for content pages the page label returned from backend can be different than ID initially assumed from route\n        if (canActivate === true && !route?.data?.cxCmsRouteContext) {\n          return this.cmsRoutes.handleCmsRoutesInGuard(\n            pageContext,\n            componentTypes,\n            state.url,\n            pageLabel\n          );\n        }\n        return canActivate;\n      })\n    );\n  }\n\n  /**\n   * Activates the \"NOT FOUND\" cms page.\n   *\n   * It loads cms page data for the \"NOT FOUND\" page and puts it in the state of the the requested page label.\n   * Then it processes its CMS components with the method `canActivatePage()` of this service. For more, see its docs.\n   */\n  canActivateNotFoundPage(\n    pageContext: PageContext,\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    const notFoundCmsPageContext: PageContext = {\n      type: PageType.CONTENT_PAGE,\n      id: this.semanticPathService.get('notFound'),\n    };\n\n    return this.cmsService.getPage(notFoundCmsPageContext).pipe(\n      switchMap((notFoundPage) => {\n        if (notFoundPage) {\n          return this.cmsService.getPageIndex(notFoundCmsPageContext).pipe(\n            tap((notFoundIndex) => {\n              this.cmsService.setPageFailIndex(pageContext, notFoundIndex);\n              this.routing.changeNextPageContext(notFoundCmsPageContext);\n            }),\n            switchMap((notFoundIndex) =>\n              this.cmsService.getPageIndex(pageContext).pipe(\n                // we have to wait for page index update\n                filter((index) => index === notFoundIndex)\n              )\n            ),\n            switchMap(() =>\n              this.canActivatePage(pageContext, notFoundPage, route, state)\n            )\n          );\n        }\n        return of(false);\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport {\n  CmsActivatedRouteSnapshot,\n  CmsService,\n  ProtectedRoutesGuard,\n  RouteLoadStrategy,\n  RoutingConfigService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { first, switchMap, take } from 'rxjs/operators';\nimport { CmsPageGuardService } from './cms-page-guard.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsPageGuard implements CanActivate {\n  static guardName = 'CmsPageGuard';\n\n  constructor(\n    protected routingService: RoutingService,\n    protected cmsService: CmsService,\n    protected protectedRoutesGuard: ProtectedRoutesGuard,\n    protected service: CmsPageGuardService,\n    protected routingConfig: RoutingConfigService\n  ) {}\n\n  /**\n   * Tries to load the CMS page data for the anticipated route and returns:\n   * - `true` - if it can be activated\n   * - `false` - if it cannot be activated\n   * - `UrlTree` - if user should be redirected to a given `UrlTree`\n   *\n   * If the route can be activated, it fires additional calculations on the CMS components present on this CMS page,\n   * based on their configuration (`cmsComponents` config).\n   *\n   * For more, see docs of the `CmsPageGuardService.canActivatePage`.\n   */\n  canActivate(\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    return this.protectedRoutesGuard.canActivate(route).pipe(\n      switchMap((canActivate) =>\n        canActivate === true\n          ? this.routingService.getNextPageContext().pipe(\n              take(1),\n              switchMap((pageContext) =>\n                this.cmsService.getPage(pageContext, this.shouldReload()).pipe(\n                  first(),\n                  switchMap((pageData) =>\n                    pageData\n                      ? this.service.canActivatePage(\n                          pageContext,\n                          pageData,\n                          route,\n                          state\n                        )\n                      : this.service.canActivateNotFoundPage(\n                          pageContext,\n                          route,\n                          state\n                        )\n                  )\n                )\n              )\n            )\n          : of(canActivate)\n      )\n    );\n  }\n\n  /**\n   * Returns whether we should reload the CMS page data, even when it was loaded before.\n   */\n  private shouldReload(): boolean {\n    return this.routingConfig.getLoadStrategy() !== RouteLoadStrategy.ONCE;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { ActiveCartService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, startWith } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-mini-cart',\n  templateUrl: './mini-cart.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MiniCartComponent {\n  iconTypes = ICON_TYPE;\n\n  quantity$: Observable<number> = this.activeCartService.getActive().pipe(\n    startWith({ deliveryItemsQuantity: 0 }),\n    map((cart) => cart.deliveryItemsQuantity || 0)\n  );\n\n  total$: Observable<string> = this.activeCartService.getActive().pipe(\n    filter((cart) => !!cart.totalPrice),\n    map((cart) => cart.totalPrice.formattedValue)\n  );\n\n  constructor(protected activeCartService: ActiveCartService) {}\n}\n","<a\n  [attr.aria-label]=\"\n    'miniCart.item' | cxTranslate: { count: quantity$ | async }\n  \"\n  [routerLink]=\"{ cxRoute: 'cart' } | cxUrl\"\n>\n  <cx-icon [type]=\"iconTypes.CART\"></cx-icon>\n\n  <span class=\"total\">\n    {{ 'miniCart.total' | cxTranslate: { total: total$ | async } }}\n  </span>\n\n  <span class=\"count\">\n    {{ 'miniCart.count' | cxTranslate: { count: quantity$ | async } }}\n  </span>\n</a>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { MiniCartComponent } from './mini-cart.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, IconModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MiniCartComponent: {\n          component: MiniCartComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [MiniCartComponent],\n  exports: [MiniCartComponent],\n})\nexport class MiniCartModule {}\n","export const ORDER_ENTRIES_CONTEXT = Symbol('ORDER_ENTRIES_CONTEXT');\n","import { Component, OnInit } from '@angular/core';\nimport {\n  ActiveCartService,\n  Cart,\n  CmsParagraphComponent,\n  CmsService,\n  OrderEntry,\n  PromotionLocation,\n  SelectiveCartService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-save-for-later',\n  templateUrl: './save-for-later.component.html',\n})\nexport class SaveForLaterComponent implements OnInit {\n  saveForLater$: Observable<Cart>;\n  cart$: Observable<Cart>;\n  entries$: Observable<OrderEntry[]>;\n  cartLoaded$: Observable<boolean>;\n  data$: Observable<CmsParagraphComponent>;\n  isCartEmpty$: Observable<boolean>;\n  CartLocation = PromotionLocation;\n\n  constructor(\n    protected cmsService: CmsService,\n    protected cartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService\n  ) {}\n\n  ngOnInit() {\n    this.isCartEmpty$ = this.cartService\n      .getActive()\n      .pipe(map((cart) => !(cart && cart.totalItems && cart.totalItems > 0)));\n    this.saveForLater$ = this.selectiveCartService.getCart();\n    this.entries$ = this.selectiveCartService\n      .getEntries()\n      .pipe(filter((entries) => entries.length > 0));\n    this.cartLoaded$ = combineLatest([\n      this.cartService.isStable(),\n      this.selectiveCartService.isStable(),\n    ]).pipe(map(([cartLoaded, sflLoaded]) => cartLoaded && sflLoaded));\n    this.data$ = this.cmsService.getComponentData(\n      'EmptyCartParagraphComponent'\n    );\n  }\n\n  moveToCart(item: OrderEntry) {\n    this.selectiveCartService.removeEntry(item);\n    this.cartService.addEntry(item.product.code, item.quantity);\n  }\n}\n","<ng-container *ngIf=\"isCartEmpty$ | async\">\n  <p\n    *ngIf=\"data$ | async as data\"\n    [innerHTML]=\"data.content\"\n    class=\"cx-empty-cart-info\"\n  ></p>\n</ng-container>\n\n<ng-container *ngIf=\"saveForLater$ | async as saveForLater\">\n  <ng-container *ngIf=\"entries$ | async as entries\">\n    <div *ngIf=\"saveForLater.totalItems > 0\" class=\"cart-details-wrapper\">\n      <div class=\"cx-total\">\n        {{\n          'saveForLaterItems.itemTotal'\n            | cxTranslate: { count: saveForLater.totalItems }\n        }}\n      </div>\n      <cx-cart-item-list\n        [items]=\"entries\"\n        [readonly]=\"false\"\n        [cartIsLoading]=\"!(cartLoaded$ | async)\"\n        [promotionLocation]=\"CartLocation.SaveForLater\"\n        [options]=\"{\n          isSaveForLater: true,\n          optionalBtn: moveToCartBtn\n        }\"\n      ></cx-cart-item-list>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template let-ctx #moveToCartBtn>\n  <div class=\"col-md-3 col-lg-3 col-xl-3 cx-sfl-btn\">\n    <button\n      class=\"link cx-action-link\"\n      [disabled]=\"ctx.loading\"\n      (click)=\"moveToCart(ctx.item)\"\n      type=\"button\"\n    >\n      {{ 'saveForLaterItems.moveToCart' | cxTranslate }}\n    </button>\n  </div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  CmsConfig,\n  FeaturesConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CartSharedModule } from '../cart-shared/cart-shared.module';\nimport { SaveForLaterComponent } from './save-for-later.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, CartSharedModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig | FeaturesConfig>{\n      cmsComponents: {\n        SaveForLaterComponent: {\n          component: SaveForLaterComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [SaveForLaterComponent],\n  exports: [SaveForLaterComponent],\n})\nexport class SaveForLaterModule {}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { CartModule } from '@spartacus/core';\nimport { CmsPageGuard } from '../../cms-structure/guards/cms-page.guard';\nimport { PAGE_LAYOUT_HANDLER } from '../../cms-structure/page/page-layout/page-layout-handler';\nimport { PageLayoutComponent } from '../../cms-structure/page/page-layout/page-layout.component';\nimport { AddToCartModule } from './add-to-cart/add-to-cart.module';\nimport { AddToWishListModule } from './add-to-wishlist/add-to-wish-list.module';\nimport { CartDetailsModule } from './cart-details/cart-details.module';\nimport { CartPageLayoutHandler } from './cart-page-layout-handler';\nimport { ActiveCartOrderEntriesContext } from './cart-page/active-cart-order-entries-context';\nimport { CartSharedModule } from './cart-shared/cart-shared.module';\nimport { CartTotalsModule } from './cart-totals/cart-totals.module';\nimport { MiniCartModule } from './mini-cart/mini-cart.module';\nimport { AddOrderEntriesContext } from './order-entries-context/add-order-entries.context';\nimport { GetOrderEntriesContext } from './order-entries-context/get-order-entries.context';\nimport { ORDER_ENTRIES_CONTEXT } from './order-entries-context/order-entires.context';\nimport { SaveForLaterModule } from './save-for-later/save-for-later.module';\n\nexport type OrderEntriesContext = Partial<\n  AddOrderEntriesContext & GetOrderEntriesContext\n>;\n\n@NgModule({\n  imports: [\n    NgbModule,\n    CartDetailsModule,\n    CartTotalsModule,\n    CartSharedModule,\n    SaveForLaterModule,\n    RouterModule.forChild([\n      {\n        // @ts-ignore\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'cart',\n          cxContext: {\n            [ORDER_ENTRIES_CONTEXT]: ActiveCartOrderEntriesContext,\n          },\n        },\n      },\n    ]),\n  ],\n  exports: [\n    AddToWishListModule,\n    CartDetailsModule,\n    CartTotalsModule,\n    CartSharedModule,\n    AddToCartModule,\n    MiniCartModule,\n    CartModule,\n    SaveForLaterModule,\n  ],\n  declarations: [],\n  providers: [\n    {\n      provide: PAGE_LAYOUT_HANDLER,\n      useExisting: CartPageLayoutHandler,\n      multi: true,\n    },\n  ],\n})\nexport class CartComponentModule {}\n","import { NgModule } from '@angular/core';\nimport { CartValidationWarningsModule } from './cart-warnings/cart-validation-warnings.module';\nimport { CartItemValidationWarningModule } from './cart-item-warning/cart-item-validation-warning.module';\n\n@NgModule({\n  imports: [CartValidationWarningsModule, CartItemValidationWarningModule],\n  providers: [],\n})\nexport class CartValidationComponentsModule {}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport {\n  CartValidationService,\n  SemanticPathService,\n  GlobalMessageService,\n  ActiveCartService,\n  GlobalMessageType,\n  CartConfigService,\n  CartValidationStatusCode,\n} from '@spartacus/core';\nimport { map, withLatestFrom } from 'rxjs/operators';\nimport { CartValidationStateService } from '../cart-validation-state.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartValidationGuard implements CanActivate {\n  constructor(\n    protected cartValidationService: CartValidationService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router,\n    protected globalMessageService: GlobalMessageService,\n    protected activeCartService: ActiveCartService,\n    protected cartValidationStateService: CartValidationStateService,\n    protected cartConfigService: CartConfigService\n  ) {}\n\n  protected GLOBAL_MESSAGE_TIMEOUT = 10000;\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return !this.cartConfigService.isCartValidationEnabled()\n      ? of(true)\n      : this.cartValidationService.validateCart().pipe(\n          withLatestFrom(this.activeCartService.getEntries()),\n          map(([cartModificationList, cartEntries]) => {\n            this.cartValidationStateService.updateValidationResultAndRoutingId(\n              cartModificationList?.cartModifications\n            );\n\n            if (cartModificationList?.cartModifications?.length !== 0) {\n              let validationResultMessage;\n\n              if (\n                cartEntries.length === 1 &&\n                cartEntries[0].product.code ===\n                  cartModificationList?.cartModifications[0].entry.product\n                    .code &&\n                cartModificationList?.cartModifications[0].statusCode ===\n                  CartValidationStatusCode.NO_STOCK\n              ) {\n                validationResultMessage = {\n                  key: 'validation.cartEntryRemoved',\n                  params: {\n                    name: cartModificationList?.cartModifications[0].entry\n                      .product.name,\n                  },\n                };\n              } else {\n                validationResultMessage = {\n                  key: 'validation.cartEntriesChangeDuringCheckout',\n                };\n              }\n\n              this.globalMessageService.add(\n                validationResultMessage,\n                GlobalMessageType.MSG_TYPE_ERROR,\n                this.GLOBAL_MESSAGE_TIMEOUT\n              );\n              this.activeCartService.reloadActiveCart();\n              return this.router.parseUrl(this.semanticPathService.get('cart'));\n            }\n\n            return true;\n          })\n        );\n  }\n}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport { CmsBannerComponent, Image, ImageGroup } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-banner',\n  templateUrl: './banner.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BannerComponent {\n  @HostBinding('class') styleClasses: string | undefined;\n\n  data$: Observable<CmsBannerComponent> = this.component.data$.pipe(\n    tap((data) => (this.styleClasses = data.styleClasses))\n  );\n\n  constructor(protected component: CmsComponentData<CmsBannerComponent>) {}\n\n  /**\n   * Returns `_blank` to force opening the link in a new window whenever the\n   * `data.external` flag is set to true.\n   */\n  getTarget(data: CmsBannerComponent): string | null {\n    return data.external === 'true' || data.external === true ? '_blank' : null;\n  }\n\n  getImage(data: CmsBannerComponent): Image | ImageGroup | undefined {\n    if (data.media) {\n      if ('url' in data.media) {\n        return data.media as Image;\n      } else {\n        return data.media as ImageGroup;\n      }\n    }\n  }\n}\n","<ng-container *ngIf=\"data$ | async as data\">\n  <cx-generic-link\n    *ngIf=\"data.urlLink\"\n    [url]=\"data.urlLink\"\n    [target]=\"getTarget(data)\"\n  >\n    <p class=\"headline\" *ngIf=\"data.headline\" [innerHTML]=\"data.headline\"></p>\n    <cx-media [container]=\"getImage(data)\"></cx-media>\n    <p class=\"content\" *ngIf=\"data.content\" [innerHTML]=\"data.content\"></p>\n  </cx-generic-link>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { BannerComponent } from './banner.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, GenericLinkModule, MediaModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        SimpleResponsiveBannerComponent: {\n          component: BannerComponent,\n        },\n        BannerComponent: {\n          component: BannerComponent,\n        },\n        SimpleBannerComponent: {\n          component: BannerComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BannerComponent],\n  exports: [BannerComponent],\n})\nexport class BannerModule {}\n","import {\n  ComponentFactoryResolver,\n  ComponentRef,\n  ElementRef,\n  Injectable,\n  Injector,\n  NgModuleRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { ComponentHandler } from './component-handler';\nimport { Observable } from 'rxjs';\nimport { CmsComponentMapping, Priority } from '@spartacus/core';\n\n/**\n * Default component handler used for dynamically launching cms components implemented\n * as native Angular components.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DefaultComponentHandler implements ComponentHandler {\n  hasMatch(componentMapping: CmsComponentMapping): boolean {\n    return typeof componentMapping.component === 'function';\n  }\n\n  getPriority(): Priority {\n    return Priority.FALLBACK;\n  }\n\n  launcher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }> {\n    return new Observable<{\n      elementRef: ElementRef;\n      componentRef?: ComponentRef<any>;\n    }>((subscriber) => {\n      let componentRef: ComponentRef<any>;\n\n      const injector = elementInjector ?? viewContainerRef.injector;\n\n      const dispose = () => {\n        if (componentRef) {\n          componentRef.destroy();\n        }\n      };\n\n      const factory = this.getComponentFactory(\n        injector,\n        componentMapping.component\n      );\n\n      if (factory) {\n        componentRef = viewContainerRef.createComponent(\n          factory,\n          undefined,\n          injector,\n          undefined,\n          module\n        );\n        subscriber.next({ elementRef: componentRef.location, componentRef });\n      }\n\n      return dispose;\n    });\n  }\n\n  protected getComponentFactory(injector: Injector, component: any): any {\n    if (!component) {\n      return null;\n    }\n    const factory = injector\n      .get(ComponentFactoryResolver)\n      .resolveComponentFactory(component);\n\n    return factory;\n  }\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Injectable,\n  Injector,\n  NgModuleRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { CmsComponentMapping, Priority } from '@spartacus/core';\nimport { from, Observable } from 'rxjs';\nimport { DefaultComponentHandler } from './default-component.handler';\nimport { switchMap } from 'rxjs/operators';\nimport { ComponentHandler } from './component-handler';\n\n/**\n * Lazy component handler used for launching lazy loaded cms components implemented\n * as native Angular components.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LazyComponentHandler implements ComponentHandler {\n  constructor(protected defaultHandler: DefaultComponentHandler) {}\n\n  /**\n   * We want to mach dynamic import signature () => import('')\n   */\n  hasMatch(componentMapping: CmsComponentMapping): boolean {\n    return (\n      typeof componentMapping.component === 'function' &&\n      this.isNotClass(componentMapping.component)\n    );\n  }\n\n  private isNotClass(symbol: any): boolean {\n    const signature = symbol.toString().substr(0, 20).replace(' ', '');\n    return signature.startsWith('function()') || signature.startsWith('()=>');\n  }\n\n  getPriority(): Priority {\n    return Priority.LOW;\n  }\n\n  launcher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }> {\n    return from(componentMapping.component()).pipe(\n      switchMap((component) =>\n        this.defaultHandler.launcher(\n          { ...componentMapping, component },\n          viewContainerRef,\n          elementInjector,\n          module\n        )\n      )\n    );\n  }\n}\n","import {\n  Directive,\n  Injector,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewContainerRef,\n} from '@angular/core';\nimport { CmsComponent, DynamicAttributeService } from '@spartacus/core';\nimport { map } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\nimport { CmsComponentData } from '../model/cms-component-data';\nimport { CmsComponentsService } from '../../services/cms-components.service';\nimport { ComponentHandlerService } from './services/component-handler.service';\nimport { CmsInjectorService } from './services/cms-injector.service';\nimport { ComponentWrapperDirective } from './component-wrapper.directive';\n\n@Directive({\n  selector: '[cxInnerComponentsHost]',\n})\nexport class InnerComponentsHostDirective implements OnInit, OnDestroy {\n  protected innerComponents$ = this.data.data$.pipe(\n    map((data) => data?.composition?.inner ?? [])\n  );\n\n  protected componentWrappers: any[] = [];\n  protected subscription?: Subscription;\n\n  constructor(\n    protected data: CmsComponentData<CmsComponent>,\n    protected vcr: ViewContainerRef,\n    // dependencies required for ComponentWrapper directive\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector,\n    protected dynamicAttributeService: DynamicAttributeService,\n    protected renderer: Renderer2,\n    protected componentHandler: ComponentHandlerService,\n    protected cmsInjector: CmsInjectorService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscription = this.innerComponents$.subscribe((x) => {\n      this.renderComponents(x);\n    });\n  }\n\n  protected renderComponents(components: string[]) {\n    this.clearComponents();\n    components.forEach((component) => this.renderComponent(component));\n  }\n\n  protected renderComponent(component: string) {\n    const componentWrapper = new ComponentWrapperDirective(\n      this.vcr,\n      this.cmsComponentsService,\n      this.injector,\n      this.dynamicAttributeService,\n      this.renderer,\n      this.componentHandler,\n      this.cmsInjector\n    );\n    componentWrapper.cxComponentWrapper = { flexType: component, uid: '' };\n    componentWrapper.ngOnInit();\n    this.componentWrappers.push(componentWrapper);\n  }\n\n  protected clearComponents() {\n    this.componentWrappers.forEach((wrapper) => wrapper.ngOnDestroy());\n    this.componentWrappers = [];\n  }\n\n  ngOnDestroy(): void {\n    this.subscription?.unsubscribe();\n    this.clearComponents();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { ComponentWrapperDirective } from './component-wrapper.directive';\nimport { ComponentHandler } from './handlers/component-handler';\nimport { DefaultComponentHandler } from './handlers/default-component.handler';\nimport { LazyComponentHandler } from './handlers/lazy-component.handler';\nimport { InnerComponentsHostDirective } from './inner-components-host.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [ComponentWrapperDirective, InnerComponentsHostDirective],\n  exports: [ComponentWrapperDirective, InnerComponentsHostDirective],\n})\nexport class PageComponentModule {\n  static forRoot(): ModuleWithProviders<PageComponentModule> {\n    return {\n      ngModule: PageComponentModule,\n      providers: [\n        {\n          provide: ComponentHandler,\n          useExisting: DefaultComponentHandler,\n          multi: true,\n        },\n        {\n          provide: ComponentHandler,\n          useExisting: LazyComponentHandler,\n          multi: true,\n        },\n      ],\n    };\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OutletModule } from '../../outlet/outlet.module';\nimport { PageComponentModule } from '../component/page-component.module';\nimport { PageSlotComponent } from './page-slot.component';\nimport { PageSlotService } from './page-slot.service';\n\n@NgModule({\n  imports: [CommonModule, OutletModule, PageComponentModule],\n  declarations: [PageSlotComponent],\n  exports: [PageSlotComponent],\n})\nexport class PageSlotModule {\n  // instantiate PageSlotService ASAP, so it can examine SSR pre-rendered DOM\n  constructor(_pageSlot: PageSlotService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { PageSlotModule } from '../../../cms-structure/page/slot/page-slot.module';\nimport { OutletModule } from '../../outlet/outlet.module';\nimport { PageLayoutComponent } from './page-layout.component';\nimport { PageTemplateDirective } from './page-template.directive';\n\n@NgModule({\n  imports: [CommonModule, OutletModule, PageSlotModule],\n  declarations: [PageLayoutComponent, PageTemplateDirective],\n  exports: [PageLayoutComponent, PageTemplateDirective],\n})\nexport class PageLayoutModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class PWAModuleConfig {\n  pwa?: {\n    enabled?: boolean;\n    addToHomeScreen?: boolean;\n  };\n}\n\nexport const defaultPWAModuleConfig: PWAModuleConfig = {\n  pwa: {\n    enabled: false,\n    addToHomeScreen: false,\n  },\n};\n\ndeclare module '@spartacus/core' {\n  interface Config extends PWAModuleConfig {}\n}\n","import { Injectable } from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  WindowRef,\n} from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { PWAModuleConfig } from '../pwa.module-config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AddToHomeScreenService {\n  protected deferredEvent: any;\n\n  protected canPrompt = new BehaviorSubject<boolean>(false);\n\n  canPrompt$: Observable<boolean> = this.canPrompt.asObservable();\n\n  constructor(\n    protected config: PWAModuleConfig,\n    protected globalMessageService: GlobalMessageService,\n    protected winRef: WindowRef\n  ) {\n    if (this.config.pwa.addToHomeScreen) {\n      this.init();\n    }\n  }\n\n  init() {\n    if (this.winRef.nativeWindow) {\n      this.winRef.nativeWindow.addEventListener(\n        'beforeinstallprompt',\n        (event) => {\n          event.preventDefault();\n          this.deferredEvent = event;\n          this.enableAddToHomeScreen();\n        }\n      );\n\n      this.winRef.nativeWindow.addEventListener('appinstalled', () => {\n        this.globalMessageService.add(\n          { key: 'pwa.addedToHomeScreen' },\n          GlobalMessageType.MSG_TYPE_CONFIRMATION\n        );\n\n        this.disableAddToHomeScreen();\n        this.deferredEvent = null;\n      });\n    }\n  }\n\n  enableAddToHomeScreen(): void {\n    this.canPrompt.next(true);\n  }\n\n  disableAddToHomeScreen(): void {\n    this.canPrompt.next(false);\n  }\n\n  firePrompt(): void {\n    if (this.deferredEvent) {\n      this.deferredEvent.prompt();\n    }\n  }\n}\n","import { OnInit, Directive } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { AddToHomeScreenService } from '../services/add-to-home-screen.service';\n\n@Directive()\n// eslint-disable-next-line @angular-eslint/directive-class-suffix\nexport abstract class AddToHomeScreenComponent implements OnInit {\n  canPrompt$: Observable<boolean>;\n  constructor(protected addToHomeScreenService: AddToHomeScreenService) {}\n\n  ngOnInit(): void {\n    this.canPrompt$ = this.addToHomeScreenService.canPrompt$;\n  }\n\n  prompt(): void {\n    this.addToHomeScreenService.firePrompt();\n  }\n}\n","import { Component } from '@angular/core';\nimport { AddToHomeScreenService } from '../../services/add-to-home-screen.service';\nimport { AddToHomeScreenComponent } from '../add-to-home-screen.component';\n\n@Component({\n  selector: 'cx-add-to-home-screen-banner',\n  templateUrl: './add-to-home-screen-banner.component.html',\n})\nexport class AddToHomeScreenBannerComponent extends AddToHomeScreenComponent {\n  constructor(protected addToHomeScreenService: AddToHomeScreenService) {\n    super(addToHomeScreenService);\n  }\n}\n","<div *ngIf=\"canPrompt$ | async\">\n  <div class=\"cx-add-to-home-screen-banner\">\n    <div class=\"cx-add-to-home-screen-banner-inner\">\n      <p>\n        {{ 'pwa.addToHomeScreenDescription' | cxTranslate }}\n      </p>\n      <ul>\n        <li>{{ 'pwa.noInstallationNeeded' | cxTranslate }}</li>\n        <li>{{ 'pwa.fastAccessToApplication' | cxTranslate }}</li>\n      </ul>\n      <button (click)=\"prompt()\" class=\"btn btn-primary\">\n        {{ 'pwa.addToHomeScreen' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport { AddToHomeScreenService } from '../../services/add-to-home-screen.service';\nimport { AddToHomeScreenComponent } from '../add-to-home-screen.component';\n\n@Component({\n  selector: 'cx-add-to-home-screen-btn',\n  templateUrl: './add-to-home-screen-btn.component.html',\n})\nexport class AddToHomeScreenBtnComponent extends AddToHomeScreenComponent {\n  constructor(protected addToHomeScreenService: AddToHomeScreenService) {\n    super(addToHomeScreenService);\n  }\n}\n","<span (click)=\"prompt()\">\n  <ng-content *ngIf=\"canPrompt$ | async\"></ng-content>\n</span>\n","import { CommonModule } from '@angular/common';\nimport { APP_INITIALIZER, isDevMode, NgModule } from '@angular/core';\nimport {\n  ServiceWorkerModule,\n  SwRegistrationOptions,\n} from '@angular/service-worker';\nimport { Config, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { AddToHomeScreenBannerComponent } from './components/add-to-home-screen-banner/add-to-home-screen-banner.component';\nimport { AddToHomeScreenBtnComponent } from './components/add-to-home-screen-btn/add-to-home-screen-btn.component';\nimport { defaultPWAModuleConfig, PWAModuleConfig } from './pwa.module-config';\nimport { AddToHomeScreenService } from './services/add-to-home-screen.service';\n\nexport function pwaConfigurationFactory(\n  pwaConfig: PWAModuleConfig\n): SwRegistrationOptions {\n  return { enabled: (!isDevMode() && pwaConfig.pwa.enabled) || false };\n}\n\nexport function pwaFactory(addToHomeScreenService): any {\n  const result = () => addToHomeScreenService;\n  return result;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ServiceWorkerModule.register('ngsw-worker.js'),\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(defaultPWAModuleConfig),\n    {\n      provide: SwRegistrationOptions,\n      useFactory: pwaConfigurationFactory,\n      deps: [Config],\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: pwaFactory,\n      deps: [AddToHomeScreenService],\n      multi: true,\n    },\n  ],\n  declarations: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],\n  exports: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],\n})\nexport class PwaModule {}\n","import { Injector } from '@angular/core';\nimport { Route, Router } from '@angular/router';\nimport { CmsPageGuard } from '../../guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../page/page-layout/page-layout.component';\n\nconst cmsRoute: Route = {\n  path: '**',\n  canActivate: [CmsPageGuard],\n  component: PageLayoutComponent,\n};\n\nexport function addCmsRoute(injector: Injector): () => void {\n  const result = () => {\n    const router = injector.get(Router);\n    router.config.push(cmsRoute);\n  };\n  return result;\n}\n","import { NgModule, APP_INITIALIZER, Injector } from '@angular/core';\nimport { addCmsRoute } from './add-cms-route';\n\n@NgModule({\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      deps: [Injector],\n      useFactory: addCmsRoute,\n    },\n  ],\n})\nexport class CmsRouteModule {}\n","import { RoutesConfig, RoutingConfig } from '@spartacus/core';\n\nexport const defaultStorefrontRoutesConfig: RoutesConfig = {\n  home: { paths: [''] },\n  notFound: { paths: ['not-found'] },\n  cart: { paths: ['cart'] },\n\n  // semantic links for login related pages\n  login: {\n    paths: ['login'],\n    protected: false,\n    authFlow: true,\n  },\n  register: {\n    paths: ['login/register'],\n    protected: false,\n    authFlow: true,\n  },\n  forgotPassword: {\n    paths: ['login/forgot-password'],\n    protected: false,\n    authFlow: true,\n  },\n  resetPassword: {\n    paths: ['login/pw/change'],\n    protected: false,\n    authFlow: true,\n  },\n  logout: { paths: ['logout'], protected: false, authFlow: true },\n\n  // plp routes\n  search: { paths: ['search/:query'] },\n  category: {\n    paths: ['category/:categoryCode'],\n    paramsMapping: { categoryCode: 'code' },\n  },\n  brand: { paths: ['Brands/:brandName/c/:brandCode'] },\n\n  // pdp routes\n  product: {\n    paths: ['product/:productCode/:name'],\n    paramsMapping: { productCode: 'code' },\n  },\n\n  termsAndConditions: { paths: ['terms-and-conditions'] },\n\n  /** @deprecated since 4.2, use order lib instead */\n  orders: {\n    paths: ['my-account/orders'],\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  orderDetails: {\n    paths: ['my-account/order/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  orderGuest: {\n    paths: ['guest/order/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  orderReturn: {\n    paths: ['my-account/order/return/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  orderReturnConfirmation: {\n    paths: ['my-account/order/return/confirmation/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  orderCancel: {\n    paths: ['my-account/order/cancel/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  orderCancelConfirmation: {\n    paths: ['my-account/order/cancel/confirmation/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  returnRequestDetails: {\n    paths: ['my-account/return-request/:returnCode'],\n    paramsMapping: { returnCode: 'rma' },\n  },\n  coupons: { paths: ['my-account/coupons'] },\n  couponClaim: {\n    paths: ['my-account/coupon/claim/:couponCode'],\n    paramsMapping: { couponCode: 'code' },\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  replenishmentOrders: {\n    paths: ['my-account/my-replenishments'],\n  },\n  /** @deprecated since 4.2, use order lib instead */\n  replenishmentDetails: {\n    paths: ['my-account/my-replenishment/:replenishmentOrderCode'],\n    paramsMapping: { replenishmentOrderCode: 'replenishmentOrderCode' },\n  },\n};\n\nexport const defaultRoutingConfig: RoutingConfig = {\n  routing: {\n    routes: defaultStorefrontRoutesConfig,\n  },\n};\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport {\n  provideDefaultConfig,\n  RoutingModule as CoreRoutingModule,\n} from '@spartacus/core';\nimport { CmsRouteModule } from './cms-route/cms-route.module';\nimport { defaultRoutingConfig } from './default-routing-config';\n\n@NgModule({\n  imports: [CoreRoutingModule.forRoot(), CmsRouteModule],\n})\nexport class RoutingModule {\n  static forRoot(): ModuleWithProviders<RoutingModule> {\n    return {\n      ngModule: RoutingModule,\n      providers: [provideDefaultConfig(defaultRoutingConfig)],\n    };\n  }\n}\n","import { isDevMode } from '@angular/core';\nimport { UrlMatchResult, UrlSegment } from '@angular/router';\n\n/**\n * Matches the pattern '[ ** / ] marker / :paramName'\n *\n * @param marker phrase that indicates the start of the match\n * @param paramName name of the parameter present after the marker\n * @param precedingParamName name of the parameter for every preceding url segment\n *        i.e. `param` will result in `param0`, `param1`, ...\n */\nexport function getSuffixUrlMatcher({\n  marker,\n  paramName,\n  precedingParamName,\n}: {\n  marker: string;\n  paramName: string;\n  precedingParamName?: string;\n}) {\n  precedingParamName = precedingParamName || 'param';\n  const matcher = function suffixUrlMatcher(\n    segments: UrlSegment[]\n  ): UrlMatchResult | null {\n    const markerIndex = findLastIndex(segments, ({ path }) => path === marker);\n    const isMarkerLastSegment = markerIndex === segments.length - 1;\n\n    if (markerIndex === -1 || isMarkerLastSegment) {\n      return null;\n    }\n\n    const paramIndex = markerIndex + 1;\n    const posParams: { [name: string]: UrlSegment } = {\n      [paramName]: segments[paramIndex],\n    };\n\n    for (let i = 0; i < markerIndex; i++) {\n      posParams[`${precedingParamName}${i}`] = segments[i];\n    }\n\n    return { consumed: segments.slice(0, paramIndex + 1), posParams };\n  };\n\n  if (isDevMode()) {\n    matcher['_suffixRouteConfig'] = { marker, paramName, precedingParamName }; // property added for easier debugging of routes\n  }\n\n  return matcher;\n}\n\nfunction findLastIndex<T>(elements: T[], predicate: (el: T) => boolean) {\n  for (let index = elements.length - 1; index >= 0; index--) {\n    if (predicate(elements[index])) {\n      return index;\n    }\n  }\n  return -1;\n}\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageMetaLinkService {\n  constructor(\n    protected winRef: WindowRef,\n    protected rendererFactory: RendererFactory2\n  ) {}\n\n  /**\n   * Adds a canonical link element to the document head.\n   *\n   * If an id is provided, the link will be updated.\n   * If no url is provided, the link element will be deleted.\n   */\n  setCanonicalLink(url: string | undefined): void {\n    let link: HTMLLinkElement = this.winRef.document.querySelector(\n      'link[rel=\"canonical\"]'\n    ) as HTMLLinkElement;\n\n    if (!url) {\n      // Removing the link is an edge case, but useful if the canonical url\n      // is created in CSR while developing/testing.\n      link?.remove();\n      return;\n    }\n\n    if (!link) {\n      link = this.renderer.createElement('link');\n      link.rel = 'canonical';\n      link.href = url;\n      this.renderer.appendChild(this.winRef.document.head, link);\n    } else {\n      link?.setAttribute('href', url);\n    }\n  }\n\n  protected get renderer(): Renderer2 {\n    return this.rendererFactory.createRenderer(null, null);\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Meta, MetaDefinition, Title } from '@angular/platform-browser';\nimport {\n  isNotNullable,\n  PageMeta,\n  PageMetaService,\n  PageRobotsMeta,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { PageMetaLinkService } from './page-meta-link.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SeoMetaService implements OnDestroy {\n  constructor(\n    protected ngTitle: Title,\n    protected ngMeta: Meta,\n    protected pageMetaService: PageMetaService,\n    protected pageMetaLinkService?: PageMetaLinkService\n  ) {}\n\n  private subscription: Subscription;\n\n  init() {\n    this.subscription = this.pageMetaService\n      .getMeta()\n      .pipe(filter(isNotNullable))\n      .subscribe((meta) => (this.meta = meta));\n  }\n\n  protected set meta(meta: PageMeta) {\n    this.title = meta.title;\n    this.description = meta.description;\n    this.image = meta.image;\n    this.robots = meta.robots;\n    this.canonicalUrl = meta.canonicalUrl;\n  }\n\n  protected set title(title: string | undefined) {\n    this.ngTitle.setTitle(title || '');\n  }\n\n  protected set description(value: string | undefined) {\n    if (value) {\n      this.addTag({ name: 'description', content: value || '' });\n    } else {\n      this.ngMeta.removeTag('name=\"description\"');\n    }\n  }\n\n  protected set image(imageUrl: string | undefined) {\n    if (imageUrl) {\n      this.addTag({ name: 'og:image', content: imageUrl });\n    } else {\n      this.ngMeta.removeTag('name=\"og:image\"');\n    }\n  }\n\n  protected set robots(value: PageRobotsMeta[] | undefined) {\n    if (value && value.length > 0) {\n      this.addTag({ name: 'robots', content: value.join(', ') });\n    }\n  }\n\n  /**\n   * Add the canonical Url to the head of the page.\n   *\n   * If the canonical url already exists the link is removed. This is quite\n   * unlikely though, since canonical links are (typically) only added in SSR.\n   */\n  protected set canonicalUrl(url: string | undefined) {\n    this.pageMetaLinkService?.setCanonicalLink(url);\n  }\n\n  protected addTag(meta: MetaDefinition): void {\n    if (meta.content) {\n      this.ngMeta.updateTag(meta);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { SeoConfig } from './seo.config';\n\nexport const defaultSeoConfig: SeoConfig = {\n  seo: {\n    structuredData: {\n      disableInDevMode: true,\n    },\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class SeoConfig {\n  seo?: SeoOptions;\n}\n\nexport interface SeoOptions {\n  structuredData?: StructuredData;\n}\n\nexport interface StructuredData {\n  disableInDevMode?: boolean;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends SeoConfig {}\n}\n","import { APP_INITIALIZER, Provider } from '@angular/core';\nimport { LanguageService, WindowRef } from '@spartacus/core';\n\nexport const htmlLangProvider: Provider = {\n  provide: APP_INITIALIZER,\n  multi: true,\n  useFactory: setHtmlLangAttribute,\n  deps: [WindowRef, LanguageService],\n};\n\n/**\n * Sets active language in <html lang=\"\">\n */\nexport function setHtmlLangAttribute(\n  winRef: WindowRef,\n  languageService: LanguageService\n): () => void {\n  const result = () => {\n    languageService.getActive().subscribe((lang) => {\n      winRef.document.documentElement.lang = lang.replace(/_/g, '-');\n    });\n  };\n  return result;\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport {\n  Inject,\n  Injectable,\n  isDevMode,\n  PLATFORM_ID,\n  Renderer2,\n  RendererFactory2,\n  SecurityContext,\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { WindowRef } from '@spartacus/core';\nimport { SeoConfig } from '../config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdScriptFactory {\n  constructor(\n    @Inject(PLATFORM_ID) protected platformId: string,\n    protected winRef: WindowRef,\n    protected rendererFactory: RendererFactory2,\n    protected sanitizer: DomSanitizer,\n    protected config: SeoConfig\n  ) {}\n\n  build(schema: {}[]): void {\n    if (schema && this.isJsonLdRequired()) {\n      this.getJsonLdScriptElement().innerHTML = this.sanitize(schema);\n    }\n  }\n\n  /**\n   * Indicates whether json ld data should be generated.\n   *\n   * This is only required on the server, but can be enabled in dev mode.\n   */\n  isJsonLdRequired(): boolean {\n    return (\n      !isPlatformBrowser(this.platformId) ||\n      (isDevMode() && !this.config.seo?.structuredData?.disableInDevMode)\n    );\n  }\n\n  /**\n   * Creates a json-ld script element. The element is created one, and appended\n   * to the html body element.\n   *\n   * ```html\n   * <script id=\"json-ld\" type=\"application/ld+json\">\n   * </script>\n   * ```\n   */\n  protected getJsonLdScriptElement(): HTMLScriptElement {\n    const id = 'json-ld';\n    let scriptElement: HTMLScriptElement = <HTMLScriptElement>(\n      this.winRef.document.getElementById(id)\n    );\n\n    if (!scriptElement) {\n      const renderer: Renderer2 = this.rendererFactory.createRenderer(\n        null,\n        null\n      );\n      const script: HTMLScriptElement = renderer.createElement('script');\n      script.id = id;\n      script.type = 'application/ld+json';\n      renderer.appendChild(this.winRef.document.body, script);\n      scriptElement = script;\n    }\n    return scriptElement;\n  }\n\n  /**\n   * Sanitizes the given json-ld schema by leveraging the angular HTML sanitizer.\n   *\n   * The given schema is not trusted, as malicious code could be injected (XSS)\n   * into the json-ld script.\n   */\n  sanitize(schema: {}): string {\n    return JSON.stringify(schema, (_key, value) =>\n      typeof value === 'string'\n        ? this.sanitizer.sanitize(SecurityContext.HTML, value)\n        : value\n    );\n  }\n}\n","import { Directive, HostBinding, Input } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { JsonLdScriptFactory } from './json-ld-script.factory';\n\n/**\n * Low level directive that adds a json-ld script tag to the component.\n * This code bypasses the strict XSS security, as otherwise we're not able\n * to append a script tag with JS inside.\n *\n * This helper directive is actually not used in Spartacus, as Spartacus\n * appends json-ld the data to the document body.\n *\n * This directive can however be used by merchants to write static schema data\n * to the DOM in a save way.\n */\n@Directive({\n  selector: '[cxJsonLd]',\n})\nexport class JsonLdDirective {\n  /**\n   * Writes the schema data to a json-ld script element.\n   */\n  @Input() set cxJsonLd(schema: string | {}) {\n    this.jsonLD = this.generateJsonLdScript(schema);\n  }\n\n  @HostBinding('innerHTML') jsonLD: SafeHtml;\n\n  constructor(\n    protected jsonLdScriptFactory: JsonLdScriptFactory,\n    protected sanitizer: DomSanitizer\n  ) {}\n\n  /**\n   * Returns the json-ld script tag with the schema data. The script is\n   * _bypassing_ sanitization explicitly.\n   */\n  protected generateJsonLdScript(schema: string | {}): SafeHtml {\n    if (schema && this.jsonLdScriptFactory.isJsonLdRequired()) {\n      const sanitizedSchema = this.jsonLdScriptFactory.sanitize(schema);\n      const html = `<script type=\"application/ld+json\">${sanitizedSchema}</script>`;\n      return this.sanitizer.bypassSecurityTrustHtml(html);\n    }\n  }\n}\n","import { InjectionToken } from '@angular/core';\n\n/**\n * Injection token to extend schema builders for adding structural data (json-ld).\n *\n * Some builders (i.e. `JSONLD_PRODUCT_BUILDER`) might have additional\n * lower level builder to further extend the schema.\n */\nexport const SCHEMA_BUILDER = new InjectionToken('SchemaBuilderToken');\n\n/**\n * Injection token to add specific json-ld builders for product related schemas.\n * See see https://schema.org/product for more information.\n */\nexport const JSONLD_PRODUCT_BUILDER = new InjectionToken(\n  'JsonLdProductBuilderToken'\n);\n","import { Inject, Injectable, OnDestroy, Optional } from '@angular/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { SchemaBuilder } from './builders/schema.interface';\nimport { SCHEMA_BUILDER } from './builders/tokens';\nimport { JsonLdScriptFactory } from './json-ld-script.factory';\n\n/**\n * Factory service that is used to build the structured data for\n * all configured schema builders.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class StructuredDataFactory implements OnDestroy {\n  constructor(\n    private scriptBuilder: JsonLdScriptFactory,\n    @Optional()\n    @Inject(SCHEMA_BUILDER)\n    private builders: SchemaBuilder[]\n  ) {}\n\n  protected subscription: Subscription = new Subscription();\n\n  /**\n   * Initiates the build of structured data by collecting all schema\n   * builders.\n   */\n  build(): void {\n    if (this.scriptBuilder.isJsonLdRequired() && this.builders) {\n      this.subscription.add(\n        this.collectSchemas().subscribe((schema: {}[]) => {\n          this.scriptBuilder.build(schema);\n        })\n      );\n    }\n  }\n\n  /**\n   * Collects all schema builders and observe their structured data.\n   */\n  protected collectSchemas(): Observable<any[]> {\n    return combineLatest(this.builders.map((builder) => builder.build()));\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\nimport { JsonLdDirective } from './json-ld.directive';\nimport { StructuredDataFactory } from './structured-data.factory';\n\n/**\n * Factory to build the structure data\n * without any interaction with the UI.\n */\nexport function getStructuredDataFactory(injector: Injector): () => void {\n  const result = () => {\n    const factory = injector.get(StructuredDataFactory);\n    factory.build();\n  };\n  return result;\n}\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [JsonLdDirective],\n  exports: [JsonLdDirective],\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      useFactory: getStructuredDataFactory,\n      deps: [Injector],\n      multi: true,\n    },\n  ],\n})\nexport class StructuredDataModule {}\n","import { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultSeoConfig } from './config';\nimport { htmlLangProvider } from './html-lang-provider';\nimport { SeoMetaService } from './seo-meta.service';\nimport { StructuredDataModule } from './structured-data/structured-data.module';\n\nexport function initSeoService(injector: Injector): () => void {\n  const result = () => {\n    const service = injector.get(SeoMetaService);\n    service.init();\n  };\n  return result;\n}\n\n@NgModule({\n  imports: [StructuredDataModule],\n  providers: [\n    provideDefaultConfig(defaultSeoConfig),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: initSeoService,\n      deps: [Injector],\n      multi: true,\n    },\n    htmlLangProvider,\n  ],\n})\nexport class SeoModule {}\n","import { Injectable } from '@angular/core';\nimport { PageMeta, PageMetaService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SchemaBuilder } from '../schema.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BreadcrumbSchemaBuilder implements SchemaBuilder {\n  constructor(protected pageMetaService: PageMetaService) {}\n\n  build(): Observable<any> {\n    return this.pageMetaService\n      .getMeta()\n      .pipe(map((pageMeta: PageMeta) => this.collect(pageMeta)));\n  }\n\n  protected collect(pageMeta: PageMeta): any {\n    if (!pageMeta?.breadcrumbs) {\n      return;\n    }\n    const crumbs = pageMeta.breadcrumbs.map((crumb, index) => {\n      return {\n        '@type': 'ListItem',\n        position: index + 1,\n        item: {\n          '@id': crumb.link,\n          name: crumb.label,\n        },\n      };\n    });\n\n    if (pageMeta.title) {\n      crumbs.push({\n        '@type': 'ListItem',\n        position: crumbs.length + 1,\n        item: {\n          '@id': pageMeta.title,\n          name: pageMeta.title,\n        },\n      });\n    }\n\n    return {\n      '@context': 'http://schema.org',\n      '@type': 'BreadcrumbList',\n      itemListElement: crumbs,\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { JsonLdBuilder } from '../schema.interface';\n\n/**\n * Builds the basic structured data for the product, see https://schema.org/product.\n * This builder includes data for sku number, name, description, brand and main image.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdBaseProductBuilder implements JsonLdBuilder<Product> {\n  build(product: Product): Observable<any> {\n    return of({\n      ...this.getProductBase(product),\n      ...this.getProductBrand(product),\n      ...this.getProductImage(product),\n    });\n  }\n\n  /**\n   * Returns the product sku, name and description.\n   */\n  private getProductBase(product: Product) {\n    const result: any = { sku: product.code };\n    if (product.name) {\n      result.name = product.name;\n    }\n    if (product.summary) {\n      result.description = product.summary;\n    }\n    return result;\n  }\n\n  /**\n   * Returns the image object with the main product image url.\n   *\n   * If the image is not available, an empty object is returned.\n   */\n  protected getProductImage(product: Product): { image?: string } {\n    const image = product.images?.PRIMARY?.['zoom']?.url;\n    return image ? { image } : {};\n  }\n\n  /**\n   * Returns the brand object with the product manufacturer.\n   *\n   * If the brand is not available, an empty object is returned.\n   */\n  protected getProductBrand(product: Product): { brand?: string } {\n    const brand = product.manufacturer;\n    return brand ? { brand } : {};\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { JsonLdBuilder } from '../schema.interface';\n\n/**\n * Builds the structured data for the product offer, see https://schema.org/offers.\n * The data includes the price, currency and availability level.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdProductOfferBuilder implements JsonLdBuilder<Product> {\n  build(product: Product): Observable<any> {\n    const schema: any = { '@type': 'Offer' };\n\n    if (product.price?.value) {\n      schema.price = product.price.value;\n      if (product.price.currencyIso) {\n        schema.priceCurrency = product.price.currencyIso;\n      }\n    }\n\n    if (product.stock && product.stock.stockLevelStatus) {\n      schema.availability =\n        product.stock.stockLevelStatus === 'inStock' ? 'InStock' : 'OutOfStock';\n    }\n\n    return of({ offers: schema });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product, ProductReviewService, Review } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SeoConfig } from '../../../config';\nimport { JsonLdBuilder } from '../schema.interface';\n\n/**\n * Builds the structured data for the product reviews, see https://schema.org/Review.\n * The data includes the aggregated product rating and the individual reviews.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdProductReviewBuilder implements JsonLdBuilder<Product> {\n  constructor(\n    protected reviewService: ProductReviewService,\n    protected config: SeoConfig\n  ) {}\n\n  build(product: Product): Observable<any> {\n    return this.reviewService.getByProductCode(product.code).pipe(\n      map((reviews: Review[]) =>\n        reviews?.length > 0\n          ? {\n              aggregateRating: this.buildAggregatedReviews(product, reviews),\n              review: reviews.map((review) => this.buildReviews(review)),\n            }\n          : {}\n      )\n    );\n  }\n\n  protected buildAggregatedReviews(product: Product, reviews: Review[]) {\n    const aggregated: any = {\n      '@type': 'AggregateRating',\n    };\n    if (product.averageRating) {\n      aggregated.ratingValue = product.averageRating;\n    }\n    if (reviews) {\n      aggregated.ratingCount = reviews.filter((rev) => !!rev.rating).length;\n      aggregated.reviewCount = reviews.filter((rev) => !!rev.comment).length;\n    }\n    return aggregated;\n  }\n\n  protected buildReviews(review: Review) {\n    const reviewSchema: any = {\n      '@type': 'review',\n    };\n\n    if (review.principal && review.principal.name) {\n      reviewSchema.author = review.principal.name;\n    }\n    if (review.date) {\n      const date = new Date(review.date);\n      reviewSchema.datePublished = `${date.getFullYear()}-${\n        date.getMonth() + 1\n      }-${date.getDate()}`;\n    }\n    if (review.headline) {\n      reviewSchema.name = review.headline;\n    }\n    if (review.comment) {\n      reviewSchema.description = review.comment;\n    }\n    if (review.rating) {\n      reviewSchema.reviewRating = {\n        '@type': 'Rating',\n        ratingValue: review.rating.toString(),\n      };\n    }\n\n    return reviewSchema;\n  }\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { CurrentProductService } from '../../../../../cms-components/product/current-product.service';\nimport { JsonLdBuilder, SchemaBuilder } from '../schema.interface';\nimport { JSONLD_PRODUCT_BUILDER } from '../tokens';\n\n/**\n * Adds the minimal structured data for the product, see https://schema.org/product.\n * The actual data collection is delegated to `JsonLdBuilder`s, which can be injected\n * using the `JSONLD_PRODUCT_BUILDER` token.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductSchemaBuilder implements SchemaBuilder {\n  constructor(\n    private currentProduct: CurrentProductService,\n    @Optional()\n    @Inject(JSONLD_PRODUCT_BUILDER)\n    protected builders: JsonLdBuilder<Product>[]\n  ) {}\n\n  build(): Observable<any> {\n    return this.currentProduct.getProduct().pipe(\n      switchMap((product: Product) => {\n        if (product) {\n          return combineLatest(this.collect(product)).pipe(\n            map((res: {}[]) => Object.assign({}, ...res))\n          );\n        }\n        return of({});\n      })\n    );\n  }\n\n  protected collect(product: Product): Observable<any>[] {\n    if (!product || !product.code) {\n      return [];\n    }\n    const builders = this.builders\n      ? this.builders.map((builder) => builder.build(product))\n      : [];\n    return [\n      of({\n        '@context': 'http://schema.org',\n        '@type': 'Product',\n      }),\n      ...builders,\n    ];\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BreadcrumbSchemaBuilder } from './breadcrumb/index';\nimport {\n  JsonLdBaseProductBuilder,\n  JsonLdProductOfferBuilder,\n  JsonLdProductReviewBuilder,\n  ProductSchemaBuilder,\n} from './product/index';\nimport { JSONLD_PRODUCT_BUILDER, SCHEMA_BUILDER } from './tokens';\n\n/**\n * Provides several standard json-ld builders that contribute\n * to collecting and building json-ld data.\n */\n@NgModule({\n  providers: [\n    {\n      provide: SCHEMA_BUILDER,\n      useExisting: ProductSchemaBuilder,\n      multi: true,\n    },\n    {\n      provide: SCHEMA_BUILDER,\n      useExisting: BreadcrumbSchemaBuilder,\n      multi: true,\n    },\n    // lower level json-ld builder classes offering fine-grained control\n    // for product related schemas\n    {\n      provide: JSONLD_PRODUCT_BUILDER,\n      useExisting: JsonLdBaseProductBuilder,\n      multi: true,\n    },\n    {\n      provide: JSONLD_PRODUCT_BUILDER,\n      useExisting: JsonLdProductOfferBuilder,\n      multi: true,\n    },\n    {\n      provide: JSONLD_PRODUCT_BUILDER,\n      useExisting: JsonLdProductReviewBuilder,\n      multi: true,\n    },\n  ],\n})\nexport class JsonLdBuilderModule {}\n","import { BREAKPOINT } from '../../layout/config/layout-config';\n\nexport enum PageSection {\n  HEADER = 'header',\n  FOOTER = 'footer',\n  NAVIGATION = 'navigation',\n}\n\nexport interface CmsStructureOptions {\n  /**\n   * The componentId is used to provide a static configuration of (cms) components.\n   */\n  componentId?: string;\n  /**\n   * Page slot position is used to provide the slot configuration.\n   */\n  pageSlotPosition?: string;\n  /**\n   * The page template is used to provide the page slot to the given page template.\n   */\n  pageTemplate?: string;\n  /**\n   * The section is used to provide the page slot to the given section.\n   */\n  section?: PageSection | string;\n  /**\n   * The breakpoint is used to provide the page slot for a specific breakpoint.\n   */\n  breakpoint?: BREAKPOINT;\n}\n","import { ValueProvider } from '@angular/core';\nimport { CmsStructureConfig, provideConfig } from '@spartacus/core';\nimport { LayoutConfig } from '../../layout/config/layout-config';\nimport { CmsStructureOptions } from './cms-structure.model';\n\n/**\n * Helper function to simplify the creation of static CMS structure (`CmsStructureConfig`).\n * The helper function leverage the `provideConfig`, and is only providing an easy way to\n * generate the cms structure. The function creates a configuration structure for components,\n * page slot and page template. The following example adds a component to a page slot:\n *\n * ```ts\n * provideCmsStructure({\n *   componentId: 'LoginComponent',\n *   pageSlotPosition: 'SiteLogin'\n * })\n * ```\n *\n * @param options.componentId component identifier is used to provide component structure\n * @param options.pageSlotPosition page slot position is used to provide the slot configuration\n * @param options.pageTemplate the page template is used to provide the page slot to the given page template\n * @param options.section the section is used to provide the page slot to the given section\n * @param options.breakpoint the breakpoint is used to provide the page slot for a specific breakpoint\n */\nexport function provideCmsStructure(\n  options: CmsStructureOptions\n): ValueProvider {\n  return provideConfig({\n    ...buildCmsStructure(options),\n    ...buildLayoutConfig(options),\n  });\n}\n\n/**\n * @private\n */\nfunction buildCmsStructure({\n  componentId,\n  pageSlotPosition,\n}: CmsStructureOptions = {}): CmsStructureConfig {\n  const config: CmsStructureConfig = { cmsStructure: {} };\n\n  if (componentId) {\n    config.cmsStructure = {\n      components: {\n        [componentId]: {\n          typeCode: componentId,\n          flexType: componentId,\n        },\n      },\n    };\n  }\n\n  if (componentId && pageSlotPosition) {\n    config.cmsStructure.slots = {\n      [pageSlotPosition]: { componentIds: [componentId] },\n    };\n  }\n  return config;\n}\n\n/**\n * @private\n */\nfunction buildLayoutConfig({\n  pageTemplate,\n  pageSlotPosition,\n  breakpoint,\n  section,\n}: CmsStructureOptions = {}): LayoutConfig {\n  const layoutConfig: LayoutConfig = {};\n  if (pageTemplate && pageSlotPosition) {\n    const pageTemplateSlots: any = {};\n    if (breakpoint) {\n      pageTemplateSlots[breakpoint] = {\n        slots: [pageSlotPosition],\n      };\n    } else {\n      pageTemplateSlots.slots = [pageSlotPosition];\n    }\n    layoutConfig.layoutSlots = {\n      [pageTemplate]: pageTemplateSlots,\n    };\n  }\n\n  if (section && pageSlotPosition) {\n    const sectionSlots: any = {};\n    if (breakpoint) {\n      sectionSlots[breakpoint] = { slots: [pageSlotPosition] };\n    } else {\n      sectionSlots.slots = [pageSlotPosition];\n    }\n    if (layoutConfig.layoutSlots) {\n      layoutConfig.layoutSlots[section] = sectionSlots;\n    } else {\n      layoutConfig.layoutSlots = {\n        [section]: sectionSlots,\n      };\n    }\n  }\n  return layoutConfig;\n}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport {\n  CmsBannerCarouselComponent as model,\n  CmsService,\n  ContentSlotComponentData,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/index';\n\n/**\n * Generic carousel that renders CMS Components.\n */\n@Component({\n  selector: 'cx-banner-carousel',\n  templateUrl: 'banner-carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BannerCarouselComponent {\n  private componentData$: Observable<model> = this.componentData.data$.pipe(\n    filter(Boolean),\n    tap((d: model) => (this.theme = `${d.effect}-theme`))\n  );\n\n  private items$: Observable<Observable<ContentSlotComponentData>[]> =\n    this.componentData$.pipe(\n      map((data) => data.banners.trim().split(' ')),\n      map((codes) =>\n        codes.map((code) => this.cmsService.getComponentData(code))\n      )\n    );\n\n  /**\n   * Adds a specific theme for the carousel. The effect can be\n   * used in CSS customisations.\n   */\n  @HostBinding('class') theme = '';\n\n  constructor(\n    private componentData: CmsComponentData<model>,\n    private cmsService: CmsService\n  ) {}\n\n  /**\n   * Returns an Obervable with an Array of Observables. This is done, so that\n   * the component UI could consider to lazy load the UI components when they're\n   * in the viewpoint.\n   */\n  getItems(): Observable<Observable<ContentSlotComponentData>[]> {\n    return this.items$;\n  }\n}\n","<cx-carousel\n  [items]=\"getItems() | async\"\n  [template]=\"template\"\n  itemWidth=\"100%\"\n  class=\"inline-navigation\"\n></cx-carousel>\n\n<ng-template #template let-item=\"item\">\n  <ng-container\n    [cxComponentWrapper]=\"{\n      flexType: item.typeCode,\n      typeCode: item.typeCode,\n      uid: item?.uid\n    }\"\n  >\n  </ng-container>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { PageComponentModule } from '../../../cms-structure/page/component/page-component.module';\nimport { CarouselModule, MediaModule } from '../../../shared/components/index';\nimport { BannerCarouselComponent } from './banner-carousel.component';\n\n@NgModule({\n  imports: [CommonModule, PageComponentModule, CarouselModule, MediaModule],\n  providers: [\n    provideDefaultConfig({\n      cmsComponents: {\n        RotatingImagesComponent: {\n          component: BannerCarouselComponent,\n        },\n      },\n    } as CmsConfig),\n  ],\n  declarations: [BannerCarouselComponent],\n  exports: [BannerCarouselComponent],\n})\nexport class BannerCarouselModule {}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport { CmsLinkComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-link',\n  templateUrl: './link.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LinkComponent {\n  @HostBinding('class') styleClasses: string;\n\n  data$: Observable<CmsLinkComponent> = this.component.data$.pipe(\n    tap((data) => (this.styleClasses = data?.styleClasses))\n  );\n\n  constructor(protected component: CmsComponentData<CmsLinkComponent>) {}\n\n  /**\n   * Returns `_blank` to force opening the link in a new window whenever the\n   * `data.target` flag is set to `true`.\n   */\n  getTarget(data: CmsLinkComponent): string | null {\n    return data.target === 'true' || data.target === true ? '_blank' : null;\n  }\n}\n","<cx-generic-link\n  *ngIf=\"data$ | async as data\"\n  [url]=\"data.url\"\n  [style]=\"data.styleAttributes\"\n  [target]=\"getTarget(data)\"\n  >{{ data.linkName }}</cx-generic-link\n>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { LinkComponent } from './link.component';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, GenericLinkModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSLinkComponent: { component: LinkComponent },\n      },\n    }),\n  ],\n  declarations: [LinkComponent],\n  exports: [LinkComponent],\n})\nexport class LinkModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  HostListener,\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CmsParagraphComponent } from '@spartacus/core';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-paragraph',\n  templateUrl: './paragraph.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ParagraphComponent {\n  @HostListener('click', ['$event'])\n  public handleClick(event: Event): void {\n    if (this.router && event.target instanceof HTMLAnchorElement) {\n      const element = event.target as HTMLAnchorElement;\n      const href = element?.getAttribute('href');\n\n      // Use router for internal link navigation\n      if (href?.indexOf('/') === 0) {\n        event.preventDefault();\n        this.router.navigate([`/${href}`]);\n      }\n    }\n  }\n\n  /**\n   * @deprecated since version 5.0\n   * Use the following constructor instead:\n   * ```\n   * constructor(\n   *   public component: CmsComponentData<CmsParagraphComponent>,\n   *   protected router: Router\n   * ) {}\n   * ```\n   */\n  constructor(component: CmsComponentData<CmsParagraphComponent>);\n  constructor(\n    public component: CmsComponentData<CmsParagraphComponent>,\n    protected router?: Router\n  ) {}\n}\n","<p\n  *ngIf=\"component.data$ | async as data\"\n  [innerHTML]=\"data.content | cxSupplementHashAnchors\"\n></p>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { SupplementHashAnchorsModule } from '../../../shared/pipes/suplement-hash-anchors/supplement-hash-anchors.module';\nimport { ParagraphComponent } from './paragraph.component';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, SupplementHashAnchorsModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSParagraphComponent: {\n          component: ParagraphComponent,\n        },\n        CMSTabParagraphComponent: {\n          component: ParagraphComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ParagraphComponent],\n  exports: [ParagraphComponent],\n})\nexport class CmsParagraphModule {}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChildren,\n} from '@angular/core';\nimport {\n  CmsService,\n  CMSTabParagraphContainer,\n  WindowRef,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, switchMap, take } from 'rxjs/operators';\nimport { ComponentWrapperDirective } from '../../../cms-structure/page/component/component-wrapper.directive';\nimport { CmsComponentData } from '../../../cms-structure/page/model/index';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport { BREAKPOINT } from '../../../layout/config/layout-config';\n\n@Component({\n  selector: 'cx-tab-paragraph-container',\n  templateUrl: './tab-paragraph-container.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TabParagraphContainerComponent\n  implements AfterViewInit, OnInit, OnDestroy\n{\n  activeTabNum = 0;\n\n  @ViewChildren(ComponentWrapperDirective)\n  children!: QueryList<ComponentWrapperDirective>;\n\n  tabTitleParams: (Observable<any> | null)[] = [];\n\n  // TODO: it is not used any more, so can be removed in 5.0\n  subscription: Subscription;\n\n  constructor(\n    public componentData: CmsComponentData<CMSTabParagraphContainer>,\n    protected cmsService: CmsService,\n    protected winRef: WindowRef,\n    protected breakpointService: BreakpointService\n  ) {}\n\n  components$: Observable<any[]> = this.componentData.data$.pipe(\n    distinctUntilChanged((x, y) => x?.components === y?.components),\n    switchMap((data) =>\n      combineLatest(\n        (data?.components ?? '').split(' ').map((component) =>\n          this.cmsService.getComponentData<any>(component).pipe(\n            distinctUntilChanged(),\n            map((tab) => {\n              if (!tab) {\n                return undefined;\n              }\n\n              if (!tab.flexType) {\n                tab = {\n                  ...tab,\n                  flexType: tab.typeCode,\n                };\n              }\n\n              return {\n                ...tab,\n                title: `${data.uid}.tabs.${tab.uid}`,\n              };\n            })\n          )\n        )\n      )\n    )\n  );\n\n  select(tabNum: number, event?: MouseEvent): void {\n    this.breakpointService\n      ?.isDown(BREAKPOINT.sm)\n      .pipe(take(1))\n      .subscribe((res) => {\n        if (res) {\n          this.activeTabNum = this.activeTabNum === tabNum ? -1 : tabNum;\n          if (event && event?.target) {\n            const target = event.target as HTMLElement;\n            const parentNode = target.parentNode as HTMLElement;\n            this.winRef?.nativeWindow?.scrollTo(0, parentNode.offsetTop);\n          }\n        } else {\n          this.activeTabNum = tabNum;\n        }\n      });\n  }\n\n  ngOnInit(): void {\n    this.activeTabNum =\n      this.winRef?.nativeWindow?.history?.state?.activeTab ?? this.activeTabNum;\n  }\n\n  ngAfterViewInit(): void {\n    // If the sub cms components data exist, the components created before ngAfterViewInit are called.\n    // In this case, the title parameters are directly pulled from them.\n    if (this.children.length > 0) {\n      this.getTitleParams(this.children);\n    }\n  }\n\n  tabCompLoaded(componentRef: any): void {\n    this.tabTitleParams.push(componentRef.instance.tabTitleParam$);\n  }\n\n  private getTitleParams(children: QueryList<ComponentWrapperDirective>) {\n    children.forEach((comp) => {\n      if (comp.cmpRef?.instance.tabTitleParam$) {\n        this.tabTitleParams.push(comp.cmpRef.instance.tabTitleParam$);\n      } else {\n        this.tabTitleParams.push(null);\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","<ng-container *ngIf=\"components$ | async as components\">\n  <ng-container *ngFor=\"let component of components; let i = index\">\n    <ng-container *ngIf=\"component\">\n      <button [class.active]=\"i === activeTabNum\" (click)=\"select(i, $event)\">\n        {{\n          component.title | cxTranslate: { param: tabTitleParams[i] | async }\n        }}\n      </button>\n    </ng-container>\n  </ng-container>\n\n  <ng-container *ngFor=\"let component of components; let i = index\">\n    <ng-container *ngIf=\"component\">\n      <div [class.active]=\"i === activeTabNum\">\n        <ng-template [cxOutlet]=\"component.flexType\" [cxOutletContext]=\"{}\">\n          <ng-container\n            [cxComponentWrapper]=\"component\"\n            (cxComponentRef)=\"tabCompLoaded($event)\"\n          ></ng-container>\n        </ng-template>\n      </div>\n    </ng-container>\n  </ng-container>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { PageComponentModule } from '../../../cms-structure/page/component/page-component.module';\nimport { TabParagraphContainerComponent } from './tab-paragraph-container.component';\n\n@NgModule({\n  imports: [CommonModule, PageComponentModule, OutletModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSTabParagraphContainer: {\n          component: TabParagraphContainerComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [TabParagraphContainerComponent],\n  exports: [TabParagraphContainerComponent],\n})\nexport class TabParagraphContainerModule {}\n","import { Injectable } from '@angular/core';\nimport { Address, UserAddressService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AddressBookComponentService {\n  constructor(protected userAddressService: UserAddressService) {}\n\n  getAddresses(): Observable<Address[]> {\n    return this.userAddressService.getAddresses();\n  }\n\n  getAddressesStateLoading(): Observable<boolean> {\n    return this.userAddressService.getAddressesLoading();\n  }\n\n  loadAddresses() {\n    this.userAddressService.loadAddresses();\n  }\n\n  addUserAddress(address: Address) {\n    this.userAddressService.addUserAddress(address);\n  }\n\n  updateUserAddress(addressId: string, address: Address) {\n    this.userAddressService.updateUserAddress(addressId, address);\n  }\n  setAddressAsDefault(addressId: string): void {\n    this.userAddressService.setAddressAsDefault(addressId);\n  }\n\n  deleteUserAddress(addressId: string): void {\n    this.userAddressService.deleteUserAddress(addressId);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnInit,\n} from '@angular/core';\nimport { Address } from '@spartacus/core';\nimport { ModalService } from '../../../../../shared/components/modal/index';\nimport { ICON_TYPE } from '../../../../misc/icon/index';\n\n@Component({\n  selector: 'cx-suggested-addresses-dialog',\n  templateUrl: './suggested-addresses-dialog.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SuggestedAddressDialogComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  constructor(protected modalService: ModalService) {}\n\n  @Input()\n  suggestedAddresses: Address[];\n  @Input()\n  enteredAddress: Address;\n\n  selectedAddress: Address;\n\n  ngOnInit(): void {\n    this.selectedAddress = this.suggestedAddresses.length\n      ? this.suggestedAddresses[0]\n      : this.enteredAddress;\n  }\n\n  closeModal(reason?: any): void {\n    this.modalService.closeActiveModal(reason);\n  }\n}\n","<div class=\"cx-dialog-header modal-header\">\n  <div class=\"cx-dialog-title modal-title\">\n    {{ 'addressSuggestion.verifyYourAddress' | cxTranslate }}\n  </div>\n  <button\n    type=\"button\"\n    class=\"close\"\n    [attr.aria-label]=\"'common.close' | cxTranslate\"\n    (click)=\"closeModal()\"\n  >\n    <span aria-hidden=\"true\">\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </span>\n  </button>\n</div>\n<div class=\"cx-dialog-body modal-body\" ngForm>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"cx-dialog-info col-md-12\">\n        <p>\n          {{ 'addressSuggestion.ensureAccuracySuggestChange' | cxTranslate }}\n          {{ 'addressSuggestion.chooseAddressToUse' | cxTranslate }}\n        </p>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"cx-dialog-options col-md-12\">\n        <div\n          class=\"form-check\"\n          *ngFor=\"let suggestedAddress of suggestedAddresses; let i = index\"\n        >\n          <input\n            class=\"form-check-input\"\n            type=\"radio\"\n            name=\"selectedAddress\"\n            [(ngModel)]=\"selectedAddress\"\n            [value]=\"suggestedAddress\"\n            [id]=\"'suggested-addresses--suggested-' + i\"\n          />\n          <label\n            class=\"form-check-label cx-dialog-label\"\n            [for]=\"'suggested-addresses--suggested-' + i\"\n          >\n            {{ 'addressSuggestion.suggestedAddress' | cxTranslate }}\n            {{ suggestedAddresses?.length > 1 ? i + 1 : null }}\n          </label>\n          <div class=\"cx-dialog-suggested\">\n            {{ suggestedAddress?.firstName }} {{ suggestedAddress?.lastName\n            }}<br />\n            {{ suggestedAddress?.line1 }}<br />\n            <span>{{ suggestedAddress?.line2 }}</span\n            ><br />\n            {{ suggestedAddress?.town }} {{ suggestedAddress?.region?.isocode\n            }}<br />\n            {{ suggestedAddress?.postalCode }}\n          </div>\n        </div>\n        <div class=\"form-check\">\n          <input\n            class=\"form-check-input\"\n            type=\"radio\"\n            name=\"selectedAddress\"\n            [(ngModel)]=\"selectedAddress\"\n            [value]=\"enteredAddress\"\n            id=\"suggested-addresses--entered\"\n          />\n          <label\n            class=\"form-check-label cx-dialog-label\"\n            for=\"suggested-addresses--entered\"\n          >\n            {{ 'addressSuggestion.enteredAddress' | cxTranslate }}\n          </label>\n          <div class=\"cx-dialog-entered\">\n            {{ enteredAddress?.firstName }} {{ enteredAddress?.lastName }}<br />\n            {{ enteredAddress?.line1 }}<br />\n            <span>{{ enteredAddress?.line2 }}</span\n            ><br />\n            {{ enteredAddress?.town }} {{ enteredAddress?.region?.isocode\n            }}<br />\n            {{ enteredAddress?.postalCode }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"cx-dialog-actions col-sm-12 col-md-6 offset-md-6\">\n        <button\n          class=\"btn btn-secondary btn-block cx-dialog-buttons\"\n          (click)=\"closeModal()\"\n        >\n          {{ 'addressSuggestion.editAddress' | cxTranslate }}\n        </button>\n        <button\n          cxAutoFocus\n          class=\"btn btn-primary btn-block cx-dialog-buttons\"\n          (click)=\"closeModal(selectedAddress)\"\n        >\n          {{ 'addressSuggestion.saveAddress' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  Address,\n  AddressValidation,\n  Country,\n  ErrorModel,\n  GlobalMessageService,\n  GlobalMessageType,\n  Region,\n  Title,\n  TranslationService,\n  UserAddressService,\n  UserService,\n} from '@spartacus/core';\nimport { BehaviorSubject, combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, switchMap, take, tap } from 'rxjs/operators';\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../shared/components/modal/index';\nimport { sortTitles } from '../../../../shared/utils/forms/title-utils';\nimport { SuggestedAddressDialogComponent } from './suggested-addresses-dialog/suggested-addresses-dialog.component';\n\n@Component({\n  selector: 'cx-address-form',\n  templateUrl: './address-form.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddressFormComponent implements OnInit, OnDestroy {\n  countries$: Observable<Country[]>;\n  titles$: Observable<Title[]>;\n  regions$: Observable<Region[]>;\n  selectedCountry$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n  addresses$: Observable<Address[]>;\n\n  @Input()\n  addressData: Address;\n\n  @Input()\n  actionBtnLabel: string;\n\n  @Input()\n  cancelBtnLabel: string;\n\n  @Input()\n  setAsDefaultField = true;\n\n  @Input()\n  showTitleCode: boolean;\n\n  @Input()\n  showCancelBtn = true;\n\n  @Output()\n  submitAddress = new EventEmitter<any>();\n\n  @Output()\n  backToAddress = new EventEmitter<any>();\n\n  addressVerifySub: Subscription;\n  regionsSub: Subscription;\n  suggestedAddressModalRef: ModalRef;\n\n  addressForm: FormGroup = this.fb.group({\n    country: this.fb.group({\n      isocode: [null, Validators.required],\n    }),\n    titleCode: [''],\n    firstName: ['', Validators.required],\n    lastName: ['', Validators.required],\n    line1: ['', Validators.required],\n    line2: [''],\n    town: ['', Validators.required],\n    region: this.fb.group({\n      isocode: [null, Validators.required],\n    }),\n    postalCode: ['', Validators.required],\n    phone: '',\n    defaultAddress: [false],\n  });\n\n  constructor(\n    protected fb: FormBuilder,\n    protected userService: UserService,\n    protected userAddressService: UserAddressService,\n    protected globalMessageService: GlobalMessageService,\n    protected modalService: ModalService,\n    protected translation: TranslationService\n  ) {}\n\n  ngOnInit() {\n    // Fetching countries\n    this.countries$ = this.userAddressService.getDeliveryCountries().pipe(\n      tap((countries: Country[]) => {\n        if (Object.keys(countries).length === 0) {\n          this.userAddressService.loadDeliveryCountries();\n        }\n      })\n    );\n\n    // Fetching titles\n    this.titles$ = this.getTitles();\n\n    // Fetching regions\n    this.regions$ = this.selectedCountry$.pipe(\n      switchMap((country) => this.userAddressService.getRegions(country)),\n      tap((regions: Region[]) => {\n        const regionControl = this.addressForm.get('region.isocode');\n        if (regions && regions.length > 0) {\n          regionControl.enable();\n        } else {\n          regionControl.disable();\n        }\n      })\n    );\n\n    if (this.addressData && Object.keys(this.addressData).length !== 0) {\n      this.addressForm.patchValue(this.addressData);\n\n      this.countrySelected(this.addressData.country);\n      if (this.addressData.region) {\n        this.regionSelected(this.addressData.region);\n      }\n    }\n\n    this.addresses$ = this.userAddressService.getAddresses();\n  }\n\n  getTitles(): Observable<Title[]> {\n    return combineLatest([\n      this.translation.translate('addressForm.defaultTitle'),\n      this.userService.getTitles(),\n    ]).pipe(\n      map(([noneTitleText, titles]) => {\n        const noneTitle = { code: '', name: noneTitleText };\n        titles.sort(sortTitles);\n        return [noneTitle, ...titles];\n      })\n    );\n  }\n\n  protected handleAddressVerificationResults(results: AddressValidation) {\n    if (results.decision === 'ACCEPT') {\n      this.submitAddress.emit(this.addressForm.value);\n    } else if (results.decision === 'REJECT') {\n      // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)\n      if (\n        results.errors.errors.some(\n          (error: ErrorModel) => error.subject === 'titleCode'\n        )\n      ) {\n        this.globalMessageService.add(\n          { key: 'addressForm.titleRequired' },\n          GlobalMessageType.MSG_TYPE_ERROR\n        );\n      } else {\n        this.globalMessageService.add(\n          { key: 'addressForm.invalidAddress' },\n          GlobalMessageType.MSG_TYPE_ERROR\n        );\n      }\n    } else if (results.decision === 'REVIEW') {\n      this.openSuggestedAddress(results);\n    }\n  }\n\n  countrySelected(country: Country): void {\n    this.addressForm.get('country')?.get('isocode')?.setValue(country.isocode);\n    this.selectedCountry$.next(country.isocode);\n  }\n\n  regionSelected(region: Region): void {\n    this.addressForm.get('region')?.get('isocode')?.setValue(region.isocode);\n  }\n\n  toggleDefaultAddress(): void {\n    this.addressForm['controls'].defaultAddress.setValue(\n      this.addressForm.value.defaultAddress\n    );\n  }\n\n  back(): void {\n    this.backToAddress.emit();\n  }\n\n  verifyAddress(): void {\n    if (this.addressForm.valid) {\n      if (this.addressForm.get('region').value.isocode) {\n        this.regionsSub = this.regions$.pipe(take(1)).subscribe((regions) => {\n          const obj = regions.find(\n            (region) =>\n              region.isocode ===\n              this.addressForm.controls['region'].value.isocode\n          );\n          Object.assign(this.addressForm.value.region, {\n            isocodeShort: obj.isocodeShort,\n          });\n        });\n      }\n\n      if (this.addressForm.dirty) {\n        this.userAddressService\n          .verifyAddress(this.addressForm.value)\n          .subscribe((result) => {\n            this.handleAddressVerificationResults(result);\n          });\n      } else {\n        // address form value not changed\n        // ignore duplicate address\n        this.submitAddress.emit(undefined);\n      }\n    } else {\n      this.addressForm.markAllAsTouched();\n    }\n  }\n\n  openSuggestedAddress(results: AddressValidation): void {\n    if (!this.suggestedAddressModalRef) {\n      this.suggestedAddressModalRef = this.modalService.open(\n        SuggestedAddressDialogComponent,\n        { centered: true, size: 'lg' }\n      );\n      this.suggestedAddressModalRef.componentInstance.enteredAddress =\n        this.addressForm.value;\n      this.suggestedAddressModalRef.componentInstance.suggestedAddresses =\n        results.suggestedAddresses;\n      this.suggestedAddressModalRef.result\n        .then((address) => {\n          if (address) {\n            address = Object.assign(\n              {\n                titleCode: this.addressForm.value.titleCode,\n                phone: this.addressForm.value.phone,\n                selected: true,\n              },\n              address\n            );\n            this.submitAddress.emit(address);\n          }\n          this.suggestedAddressModalRef = null;\n        })\n        .catch(() => {\n          // this  callback is called when modal is closed with Esc key or clicking backdrop\n          const address = Object.assign(\n            {\n              selected: true,\n            },\n            this.addressForm.value\n          );\n          this.submitAddress.emit(address);\n          this.suggestedAddressModalRef = null;\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.addressVerifySub) {\n      this.addressVerifySub.unsubscribe();\n    }\n\n    if (this.regionsSub) {\n      this.regionsSub.unsubscribe();\n    }\n  }\n}\n","<form (ngSubmit)=\"verifyAddress()\" [formGroup]=\"addressForm\">\n  <div class=\"row\">\n    <div class=\"col-md-12 col-lg-9\">\n      <div class=\"form-group\" formGroupName=\"country\">\n        <ng-container *ngIf=\"countries$ | async as countries\">\n          <div *ngIf=\"countries.length !== 0\">\n            <label>\n              <span class=\"label-content required\">{{\n                'addressForm.country' | cxTranslate\n              }}</span>\n              <ng-select\n                aria-required=\"true\"\n                class=\"country-select\"\n                formControlName=\"isocode\"\n                [searchable]=\"true\"\n                [clearable]=\"false\"\n                [items]=\"countries\"\n                bindLabel=\"name\"\n                bindValue=\"isocode\"\n                placeholder=\"{{ 'addressForm.selectOne' | cxTranslate }}\"\n                (change)=\"countrySelected($event)\"\n              >\n              </ng-select>\n              <cx-form-errors\n                aria-live=\"assertive\"\n                aria-atomic=\"true\"\n                [control]=\"addressForm.get('country.isocode')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n        </ng-container>\n      </div>\n      <div class=\"form-group\" *ngIf=\"showTitleCode\">\n        <ng-container *ngIf=\"titles$ | async as titles\">\n          <div *ngIf=\"titles.length !== 0\">\n            <label>\n              <span class=\"label-content required\">{{\n                'addressForm.title' | cxTranslate\n              }}</span>\n              <ng-select\n                formControlName=\"titleCode\"\n                [searchable]=\"true\"\n                [clearable]=\"false\"\n                [items]=\"titles\"\n                bindLabel=\"name\"\n                bindValue=\"code\"\n                [placeholder]=\"'addressForm.title' | cxTranslate\"\n              >\n              </ng-select>\n            </label>\n          </div>\n        </ng-container>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content required\">{{\n            'addressForm.firstName.label' | cxTranslate\n          }}</span>\n          <input\n            aria-required=\"true\"\n            class=\"form-control\"\n            type=\"text\"\n            placeholder=\"{{\n              'addressForm.firstName.placeholder' | cxTranslate\n            }}\"\n            formControlName=\"firstName\"\n          />\n          <cx-form-errors\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            [control]=\"addressForm.get('firstName')\"\n          ></cx-form-errors>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content required\">{{\n            'addressForm.lastName.label' | cxTranslate\n          }}</span>\n          <input\n            aria-required=\"true\"\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"{{ 'addressForm.lastName.placeholder' | cxTranslate }}\"\n            formControlName=\"lastName\"\n          />\n          <cx-form-errors\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            [control]=\"addressForm.get('lastName')\"\n          ></cx-form-errors>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content required\">{{\n            'addressForm.address1' | cxTranslate\n          }}</span>\n          <input\n            aria-required=\"true\"\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"{{ 'addressForm.streetAddress' | cxTranslate }}\"\n            formControlName=\"line1\"\n          />\n          <cx-form-errors\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            [control]=\"addressForm.get('line1')\"\n          ></cx-form-errors>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'addressForm.address2' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"{{ 'addressForm.aptSuite' | cxTranslate }}\"\n            formControlName=\"line2\"\n          />\n        </label>\n      </div>\n      <div class=\"row\">\n        <div class=\"form-group col-md-6\">\n          <label>\n            <span class=\"label-content required\">{{\n              'addressForm.city.label' | cxTranslate\n            }}</span>\n            <input\n              aria-required=\"true\"\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"{{ 'addressForm.city.placeholder' | cxTranslate }}\"\n              formControlName=\"town\"\n            />\n            <cx-form-errors\n              aria-live=\"assertive\"\n              aria-atomic=\"true\"\n              [control]=\"addressForm.get('town')\"\n            ></cx-form-errors>\n          </label>\n        </div>\n        <div class=\"form-group col-md-6\">\n          <label>\n            <span class=\"label-content required\">{{\n              'addressForm.zipCode.label' | cxTranslate\n            }}</span>\n            <input\n              aria-required=\"true\"\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"{{\n                'addressForm.zipCode.placeholder' | cxTranslate\n              }}\"\n              formControlName=\"postalCode\"\n            />\n            <cx-form-errors\n              aria-live=\"assertive\"\n              aria-atomic=\"true\"\n              [control]=\"addressForm.get('postalCode')\"\n            ></cx-form-errors>\n          </label>\n        </div>\n        <ng-container\n          *ngIf=\"regions$ | async as regions\"\n          formGroupName=\"region\"\n        >\n          <ng-container *ngIf=\"regions.length !== 0\">\n            <div class=\"form-group col-md-6\">\n              <label>\n                <span class=\"label-content required\">{{\n                  'addressForm.state' | cxTranslate\n                }}</span>\n                <ng-select\n                  aria-required=\"true\"\n                  class=\"region-select\"\n                  formControlName=\"isocode\"\n                  [searchable]=\"true\"\n                  [clearable]=\"false\"\n                  [items]=\"regions\"\n                  bindLabel=\"{{ regions[0].name ? 'name' : 'isocode' }}\"\n                  bindValue=\"{{ regions[0].name ? 'isocode' : 'region' }}\"\n                  placeholder=\"{{ 'addressForm.selectOne' | cxTranslate }}\"\n                >\n                </ng-select>\n                <cx-form-errors\n                  aria-live=\"assertive\"\n                  aria-atomic=\"true\"\n                  [control]=\"addressForm.get('region.isocode')\"\n                ></cx-form-errors>\n              </label>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'addressForm.phoneNumber.label' | cxTranslate\n          }}</span>\n          <input\n            type=\"tel\"\n            class=\"form-control\"\n            placeholder=\"{{\n              'addressForm.phoneNumber.placeholder' | cxTranslate\n            }}\"\n            formControlName=\"phone\"\n          />\n        </label>\n      </div>\n      <div\n        class=\"form-group\"\n        *ngIf=\"(addresses$ | async).length && setAsDefaultField\"\n      >\n        <div class=\"form-check\">\n          <label>\n            <input\n              type=\"checkbox\"\n              class=\"form-check-input\"\n              formControlName=\"defaultAddress\"\n              (change)=\"toggleDefaultAddress()\"\n            />\n            <span class=\"form-check-label\">{{\n              'addressForm.setAsDefault' | cxTranslate\n            }}</span>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"cx-address-form-btns row\">\n    <div class=\"col-md-12 col-lg-6\" *ngIf=\"showCancelBtn\">\n      <button class=\"btn btn-block btn-action\" (click)=\"back()\">\n        {{ cancelBtnLabel || ('addressForm.chooseAddress' | cxTranslate) }}\n      </button>\n    </div>\n    <div class=\"col-md-12 col-lg-6\">\n      <button class=\"btn btn-block btn-primary\" type=\"submit\">\n        {{ actionBtnLabel || ('common.continue' | cxTranslate) }}\n      </button>\n    </div>\n  </div>\n</form>\n","import { Component, OnInit } from '@angular/core';\nimport { Address, TranslationService } from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Card } from '../../../shared/components/card';\nimport { AddressBookComponentService } from './address-book.component.service';\n\n@Component({\n  selector: 'cx-address-book',\n  templateUrl: './address-book.component.html',\n})\nexport class AddressBookComponent implements OnInit {\n  addresses$: Observable<Address[]>;\n  cards$: Observable<Card[]>;\n  addressesStateLoading$: Observable<boolean>;\n  currentAddress: Address;\n\n  showAddAddressForm = false;\n  showEditAddressForm = false;\n  editCard: string;\n\n  constructor(\n    public service: AddressBookComponentService,\n    protected translation: TranslationService\n  ) {}\n\n  ngOnInit(): void {\n    this.addresses$ = this.service.getAddresses();\n    this.addressesStateLoading$ = this.service.getAddressesStateLoading();\n    this.service.loadAddresses();\n  }\n\n  addAddressButtonHandle(): void {\n    this.showEditAddressForm = false;\n    this.showAddAddressForm = true;\n  }\n\n  editAddressButtonHandle(address: Address): void {\n    this.showAddAddressForm = false;\n    this.showEditAddressForm = true;\n    this.currentAddress = address;\n  }\n\n  addAddressSubmit(address: Address): void {\n    this.showAddAddressForm = false;\n    this.service.addUserAddress(address);\n  }\n\n  addAddressCancel(): void {\n    this.showAddAddressForm = false;\n  }\n\n  editAddressSubmit(address: Address): void {\n    this.showEditAddressForm = false;\n    this.service.updateUserAddress(this.currentAddress['id'], address);\n  }\n\n  editAddressCancel(): void {\n    this.showEditAddressForm = false;\n  }\n\n  getCardContent(address: Address) {\n    return combineLatest([\n      this.translation.translate('addressCard.default'),\n      this.translation.translate('addressCard.setAsDefault'),\n      this.translation.translate('common.delete'),\n      this.translation.translate('common.edit'),\n      this.translation.translate('addressBook.areYouSureToDeleteAddress'),\n    ]).pipe(\n      map(\n        ([\n          defaultText,\n          setAsDefaultText,\n          textDelete,\n          textEdit,\n          textVerifyDeleteMsg,\n        ]) => {\n          let region = '';\n\n          if (address.region && address.region.isocode) {\n            region = address.region.isocode + ', ';\n          }\n\n          const actions: { name: string; event: string }[] = [];\n          if (!address.defaultAddress) {\n            actions.push({ name: setAsDefaultText, event: 'default' });\n          }\n          actions.push({ name: textEdit, event: 'edit' });\n          actions.push({ name: textDelete, event: 'delete' });\n\n          return {\n            textBold: address.firstName + ' ' + address.lastName,\n            text: [\n              address.line1,\n              address.line2,\n              address.town + ', ' + region + address.country.isocode,\n              address.postalCode,\n              address.phone,\n            ],\n            actions: actions,\n            header: address.defaultAddress ? ` ${defaultText}` : '',\n            deleteMsg: textVerifyDeleteMsg,\n          };\n        }\n      )\n    );\n  }\n\n  setAddressAsDefault(addressId: string): void {\n    this.service.setAddressAsDefault(addressId);\n  }\n\n  deleteAddress(addressId: string): void {\n    this.service.deleteUserAddress(addressId);\n  }\n\n  setEdit(addressId: string): void {\n    if (this.editCard !== addressId) {\n      this.editCard = addressId;\n    } else {\n      this.deleteAddress(addressId);\n    }\n  }\n\n  cancelCard(): void {\n    this.editCard = null;\n  }\n}\n","<div class=\"cx-section\">\n  <ng-container\n    *ngIf=\"\n      (addresses$ | async).length &&\n      !(showAddAddressForm || showEditAddressForm)\n    \"\n  >\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <button\n          class=\"btn btn-block btn-action\"\n          (click)=\"addAddressButtonHandle()\"\n        >\n          {{ 'addressBook.addNewAddress' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n\n    <div\n      class=\"row cx-address-deck\"\n      *ngIf=\"!(addressesStateLoading$ | async); else loading\"\n    >\n      <div\n        *ngFor=\"let address of addresses$ | async\"\n        class=\"col-md-6 cx-address-card\"\n      >\n        <cx-card\n          [border]=\"true\"\n          [fitToContainer]=\"true\"\n          [content]=\"getCardContent(address) | async\"\n          (editCard)=\"editAddressButtonHandle(address)\"\n          (setDefaultCard)=\"setAddressAsDefault(address.id)\"\n          (deleteCard)=\"setEdit(address.id)\"\n          [editMode]=\"address.id === editCard\"\n          (cancelCard)=\"cancelCard()\"\n        ></cx-card>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"!(addresses$ | async).length || showAddAddressForm\">\n    <section>\n      <p class=\"cx-section-msg\">\n        {{ 'addressBook.addNewShippingAddress' | cxTranslate }}\n      </p>\n      <cx-address-form\n        class=\"cx-form\"\n        showTitleCode=\"true\"\n        [showCancelBtn]=\"!((addresses$ | async).length === 0)\"\n        actionBtnLabel=\"{{ 'addressBook.addAddress' | cxTranslate }}\"\n        cancelBtnLabel=\"{{ 'addressBook.backToAddressList' | cxTranslate }}\"\n        [setAsDefaultField]=\"!((addresses$ | async).length === 0)\"\n        (submitAddress)=\"addAddressSubmit($event)\"\n        (backToAddress)=\"addAddressCancel()\"\n        (cancelCard)=\"cancelCard()\"\n      ></cx-address-form>\n    </section>\n  </ng-container>\n\n  <ng-container *ngIf=\"showEditAddressForm\">\n    <section>\n      <p class=\"cx-section-msg\">\n        {{ 'addressBook.editShippingAddress' | cxTranslate }}\n      </p>\n      <cx-address-form\n        showTitleCode=\"true\"\n        actionBtnLabel=\"{{ 'addressBook.updateAddress' | cxTranslate }}\"\n        cancelBtnLabel=\"{{ 'addressBook.backToAddressList' | cxTranslate }}\"\n        [addressData]=\"currentAddress\"\n        (submitAddress)=\"editAddressSubmit($event)\"\n        (backToAddress)=\"editAddressCancel()\"\n      ></cx-address-form>\n    </section>\n  </ng-container>\n</div>\n\n<ng-template #loading>\n  <div class=\"col-md-12 cx-address-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../misc/icon/index';\nimport { AddressFormComponent } from './address-form.component';\nimport { SuggestedAddressDialogComponent } from './suggested-addresses-dialog/suggested-addresses-dialog.component';\nimport { FormErrorsModule } from '../../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    RouterModule,\n    NgSelectModule,\n    IconModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  declarations: [AddressFormComponent, SuggestedAddressDialogComponent],\n  exports: [AddressFormComponent, SuggestedAddressDialogComponent],\n})\nexport class AddressFormModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UserAddressService,\n} from '@spartacus/core';\nimport { CardModule } from '../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { AddressBookComponent } from './address-book.component';\nimport { AddressFormModule } from './address-form/address-form.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CardModule,\n    AddressFormModule,\n    SpinnerModule,\n    I18nModule,\n  ],\n  declarations: [AddressBookComponent],\n  exports: [AddressBookComponent],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountAddressBookComponent: {\n          component: AddressBookComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n    UserAddressService,\n  ],\n})\nexport class AddressBookModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CustomerCoupon,\n  RoutingService,\n  TranslationService,\n} from '@spartacus/core';\nimport { map } from 'rxjs/operators';\nimport { combineLatest, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MyCouponsComponentService {\n  sortLabels: Observable<{\n    byStartDateAsc: string;\n    byStartDateDesc: string;\n    byEndDateAsc: string;\n    byEndDateDesc: string;\n  }>;\n\n  protected readonly RELEVANCE = ':relevance';\n  protected readonly CUSTOMER_COUPON_CODE = ':customerCouponCode:';\n\n  constructor(\n    protected routingService: RoutingService,\n    protected translation: TranslationService\n  ) {}\n\n  launchSearchPage(coupon: CustomerCoupon): void {\n    this.routingService.go(\n      {\n        cxRoute: 'search',\n        params: { query: this.buildSearchParam(coupon) },\n      },\n      {\n        queryParams: {\n          couponcode: coupon.couponId,\n        },\n      }\n    );\n  }\n\n  private buildSearchParam(coupon: CustomerCoupon): string {\n    return coupon.allProductsApplicable\n      ? this.RELEVANCE\n      : this.RELEVANCE + this.CUSTOMER_COUPON_CODE + coupon.couponId;\n  }\n\n  getSortLabels(): Observable<{\n    byStartDateAsc: string;\n    byStartDateDesc: string;\n    byEndDateAsc: string;\n    byEndDateDesc: string;\n  }> {\n    return combineLatest([\n      this.translation.translate('myCoupons.startDateAsc'),\n      this.translation.translate('myCoupons.startDateDesc'),\n      this.translation.translate('myCoupons.endDateAsc'),\n      this.translation.translate('myCoupons.endDateDesc'),\n    ]).pipe(\n      map(\n        ([\n          textByStartDateAsc,\n          textByStartDateDesc,\n          textByEndDateAsc,\n          textByEndDateDesc,\n        ]) => {\n          return {\n            byStartDateAsc: textByStartDateAsc,\n            byStartDateDesc: textByStartDateDesc,\n            byEndDateAsc: textByEndDateAsc,\n            byEndDateDesc: textByEndDateDesc,\n          };\n        }\n      )\n    );\n  }\n}\n","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { ModalService } from '../../../../../shared/components/modal/index';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/index';\nimport { CustomerCoupon } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-coupon-dialog',\n  templateUrl: './coupon-dialog.component.html',\n})\nexport class CouponDialogComponent {\n  iconTypes = ICON_TYPE;\n  coupon: CustomerCoupon;\n\n  @ViewChild('dialog', { read: ElementRef })\n  dialog: ElementRef;\n\n  constructor(protected modalService: ModalService) {}\n\n  dismissModal(reason?: any): void {\n    this.modalService.dismissActiveModal(reason);\n  }\n}\n","<div #dialog>\n  <!-- Modal Header -->\n\n  <div class=\"cx-dialog-header modal-header\">\n    <div class=\"cx-dialog-title modal-title\">\n      {{ 'myCoupons.dialogTitle' | cxTranslate }}\n    </div>\n    <button\n      type=\"button\"\n      class=\"close\"\n      [attr.aria-label]=\"'common.close' | cxTranslate\"\n      (click)=\"dismissModal('Cross click')\"\n    >\n      <span aria-hidden=\"true\">\n        <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n      </span>\n    </button>\n  </div>\n  <!-- Modal Body -->\n  <div class=\"cx-dialog-body modal-body\">\n    <div class=\"cx-dialog-row\">\n      <div class=\"cx-dialog-item col-sm-12 col-md-12\">\n        <div class=\"cx-coupon-card-head\">\n          <span class=\"card-label-bold cx-coupon-card-id\">{{\n            coupon?.couponId\n          }}</span>\n          <span>: {{ coupon?.name }}</span>\n        </div>\n        <div class=\"cx-coupon-description\">{{ coupon?.description }}</div>\n\n        <div class=\"cx-coupon-dialog-date\">\n          <p>{{ 'myCoupons.effectiveTitle' | cxTranslate }}</p>\n          <div class=\"cx-coupon-date\">\n            {{ coupon?.startDate | cxDate: 'medium' }} -\n            {{ coupon?.endDate | cxDate: 'medium' }}\n          </div>\n        </div>\n\n        <div class=\"cx-coupon-dialog-status\">\n          <p>{{ 'myCoupons.status' | cxTranslate }}</p>\n          <div class=\"cx-coupon-status {{ coupon?.status | lowercase }}\">\n            {{ 'myCoupons.' + coupon?.status | cxTranslate }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../shared/components/modal/index';\nimport { CouponDialogComponent } from './coupon-dialog/coupon-dialog.component';\nimport { CustomerCoupon } from '@spartacus/core';\nimport { MyCouponsComponentService } from '../my-coupons.component.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-coupon-card',\n  templateUrl: './coupon-card.component.html',\n})\nexport class CouponCardComponent {\n  @Input() coupon: CustomerCoupon;\n  @Input() couponSubscriptionLoading$: Observable<boolean>;\n  modalRef: ModalRef;\n\n  @Output()\n  notificationChanged = new EventEmitter<{\n    couponId: string;\n    notification: boolean;\n  }>();\n\n  constructor(\n    protected modalService: ModalService,\n    protected myCouponsComponentService: MyCouponsComponentService\n  ) {}\n\n  onSubscriptionChange(): void {\n    this.notificationChanged.emit({\n      couponId: this.coupon.couponId,\n      notification: !this.coupon.notificationOn,\n    });\n  }\n\n  readMore() {\n    let modalInstance: any;\n    this.modalRef = this.modalService.open(CouponDialogComponent, {\n      centered: true,\n      size: 'lg',\n    });\n\n    modalInstance = this.modalRef.componentInstance;\n    modalInstance.coupon = this.coupon;\n  }\n\n  findProducts(): void {\n    this.myCouponsComponentService.launchSearchPage(this.coupon);\n  }\n}\n","<div class=\"card\">\n  <div class=\"card-body cx-card-body\">\n    <div class=\"cx-coupon-data\">\n      <div class=\"cx-coupon-card-row top\">\n        <div class=\"cx-coupon-card-head\">\n          <span class=\"card-label-bold cx-coupon-card-id\">{{\n            coupon?.couponId\n          }}</span>\n          <span>: {{ coupon?.name }}</span>\n        </div>\n\n        <div class=\"cx-coupon-status {{ coupon?.status | lowercase }}\">\n          {{ 'myCoupons.' + coupon?.status | cxTranslate }}\n        </div>\n      </div>\n\n      <div class=\"cx-coupon-card-date\">\n        <p>{{ 'myCoupons.effectiveTitle' | cxTranslate }}</p>\n        <div class=\"cx-coupon-date\">\n          <div class=\"cx-coupon-date-start\">\n            {{ coupon?.startDate | cxDate: 'medium' }} -&nbsp;\n          </div>\n          <div class=\"cx-coupon-date-end\">\n            {{ coupon?.endDate | cxDate: 'medium' }}\n          </div>\n        </div>\n      </div>\n\n      <a (click)=\"readMore()\" class=\"cx-card-read-more\">{{\n        'myCoupons.readMore' | cxTranslate\n      }}</a>\n\n      <div class=\"cx-coupon-card-row bottom\">\n        <div class=\"cx-coupon-notification form-check\">\n          <label>\n            <input\n              type=\"checkbox\"\n              class=\"form-check-input\"\n              [checked]=\"coupon?.notificationOn\"\n              [class.disabled]=\"couponSubscriptionLoading$ | async\"\n              [disabled]=\"couponSubscriptionLoading$ | async\"\n              (change)=\"onSubscriptionChange()\"\n            />\n            <span class=\"form-check-label\">\n              {{ 'myCoupons.notification' | cxTranslate }}\n            </span>\n          </label>\n        </div>\n\n        <div class=\"cx-coupon-find-product col-lg-6 col-md-12 col-sm-6\">\n          <button class=\"btn btn-block btn-action\" (click)=\"findProducts()\">\n            {{ 'myCoupons.findProducts' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  CustomerCouponSearchResult,\n  CustomerCouponService,\n  PaginationModel,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../misc/icon/icon.model';\nimport { MyCouponsComponentService } from './my-coupons.component.service';\n\n@Component({\n  selector: 'cx-my-coupons',\n  templateUrl: './my-coupons.component.html',\n})\nexport class MyCouponsComponent implements OnInit, OnDestroy {\n  couponResult$: Observable<CustomerCouponSearchResult>;\n  couponsLoading$: Observable<boolean>;\n  couponSubscriptionLoading$: Observable<boolean>;\n\n  iconTypes = ICON_TYPE;\n\n  private subscriptions = new Subscription();\n\n  private PAGE_SIZE = 10;\n  private sortMapping = {\n    byStartDateAsc: 'startDate:asc',\n    byStartDateDesc: 'startDate:desc',\n    byEndDateAsc: 'endDate:asc',\n    byEndDateDesc: 'endDate:desc',\n  };\n  sort = 'byStartDateAsc';\n\n  sortOptions = [\n    {\n      code: 'byStartDateAsc',\n      selected: false,\n    },\n    {\n      code: 'byStartDateDesc',\n      selected: false,\n    },\n    {\n      code: 'byEndDateAsc',\n      selected: false,\n    },\n    {\n      code: 'byEndDateDesc',\n      selected: false,\n    },\n  ];\n\n  pagination: PaginationModel;\n  sortLabels: Observable<{\n    byStartDateAsc: string;\n    byStartDateDesc: string;\n    byEndDateAsc: string;\n    byEndDateDesc: string;\n  }>;\n\n  constructor(\n    protected couponService: CustomerCouponService,\n    protected myCouponsComponentService: MyCouponsComponentService\n  ) {}\n\n  ngOnInit(): void {\n    this.couponResult$ = this.couponService\n      .getCustomerCoupons(this.PAGE_SIZE)\n      .pipe(\n        tap(\n          (coupons) =>\n            (this.pagination = {\n              currentPage: coupons.pagination.page,\n              pageSize: coupons.pagination.count,\n              totalPages: coupons.pagination.totalPages,\n              totalResults: coupons.pagination.totalCount,\n              sort: this.sort,\n            })\n        )\n      );\n    this.couponsLoading$ = this.couponService.getCustomerCouponsLoading();\n    this.couponSubscriptionLoading$ = combineLatest([\n      this.couponService.getSubscribeCustomerCouponResultLoading(),\n      this.couponService.getUnsubscribeCustomerCouponResultLoading(),\n    ]).pipe(\n      map(([subscribing, unsubscribing]) => subscribing || unsubscribing)\n    );\n    this.sortLabels = this.myCouponsComponentService.getSortLabels();\n\n    this.subscriptions\n      .add(\n        this.couponService\n          .getSubscribeCustomerCouponResultError()\n          .subscribe((error) => {\n            this.subscriptionFail(error);\n          })\n      )\n      .add(\n        this.couponService\n          .getUnsubscribeCustomerCouponResultError()\n          .subscribe((error) => {\n            this.subscriptionFail(error);\n          })\n      );\n  }\n\n  private subscriptionFail(error: boolean) {\n    if (error) {\n      this.couponService.loadCustomerCoupons(this.PAGE_SIZE);\n    }\n  }\n\n  sortChange(sort: string): void {\n    this.sort = sort;\n\n    this.couponService.loadCustomerCoupons(\n      this.PAGE_SIZE,\n      this.pagination.currentPage,\n      this.sortMapping[sort]\n    );\n  }\n\n  pageChange(page: number): void {\n    this.couponService.loadCustomerCoupons(\n      this.PAGE_SIZE,\n      page,\n      this.sortMapping[this.sort]\n    );\n  }\n\n  notificationChange({\n    couponId,\n    notification,\n  }: {\n    couponId: string;\n    notification: boolean;\n  }): void {\n    if (notification) {\n      this.couponService.subscribeCustomerCoupon(couponId);\n    } else {\n      this.couponService.unsubscribeCustomerCoupon(couponId);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<div class=\"cx-section\">\n  <ng-container *ngIf=\"!(couponsLoading$ | async); else loading\">\n    <ng-container *ngIf=\"couponResult$ | async as couponResult\">\n      <div class=\"cx-my-coupons-header\">\n        <h3>{{ 'myCoupons.myCoupons' | cxTranslate }}</h3>\n      </div>\n\n      <ng-container\n        *ngIf=\"couponResult.pagination.totalCount > 0; else noCoupons\"\n      >\n        <div class=\"cx-my-coupons-sort top row\">\n          <label\n            class=\"\n              cx-my-coupons-form-group\n              form-group\n              col-sm-12 col-md-4 col-lg-4\n            \"\n          >\n            <span>{{ 'myCoupons.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"sortOptions\"\n              [sortLabels]=\"sortLabels | async\"\n              (sortListEvent)=\"sortChange($event)\"\n              [selectedOption]=\"sort\"\n            >\n            </cx-sorting>\n          </label>\n          <div class=\"cx-my-coupons-pagination cx-mycoupon-thead-mobile\">\n            <cx-pagination\n              [pagination]=\"pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n\n        <div class=\"row cx-coupon-deck\">\n          <div\n            *ngFor=\"let coupon of couponResult.coupons\"\n            class=\"col-md-6 cx-coupon-card\"\n          >\n            <cx-coupon-card\n              [coupon]=\"coupon\"\n              [couponSubscriptionLoading$]=\"couponSubscriptionLoading$\"\n              (notificationChanged)=\"notificationChange($event)\"\n            ></cx-coupon-card>\n          </div>\n        </div>\n\n        <div class=\"cx-my-coupons-sort bottom row\">\n          <label\n            class=\"\n              cx-my-coupons-form-group\n              form-group\n              cx-mycoupon-thead-mobile\n              col-sm-12 col-md-4 col-lg-4\n            \"\n          >\n            <span>{{ 'myCoupons.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"sortOptions\"\n              [sortLabels]=\"sortLabels | async\"\n              (sortListEvent)=\"sortChange($event)\"\n              [selectedOption]=\"sort\"\n              placeholder=\"{{ 'myCoupons.sortBy' | cxTranslate }}\"\n            >\n            </cx-sorting>\n          </label>\n          <div class=\"cx-my-coupons-pagination\">\n            <cx-pagination\n              [pagination]=\"pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <div class=\"cx-my-coupons-notes\">\n          <span>\n            <cx-icon [type]=\"iconTypes.INFO\"></cx-icon>\n            {{ 'myCoupons.notesPreffix' | cxTranslate\n            }}<a [routerLink]=\"['/my-account/notification-preference']\">{{\n              'myCoupons.notesLink' | cxTranslate\n            }}</a\n            >{{ 'myCoupons.notesSuffix' | cxTranslate }}</span\n          >\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #noCoupons>\n      <section>\n        <p class=\"cx-section-msg\">\n          {{ 'myCoupons.noCouponsMessage' | cxTranslate }}\n        </p>\n      </section>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #loading>\n    <div class=\"col-md-12 cx-coupon-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </ng-template>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport {\n  RoutingService,\n  CustomerCouponService,\n  GlobalMessageService,\n  GlobalMessageType,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  template: '',\n  selector: 'cx-coupon-claim',\n})\nexport class CouponClaimComponent implements OnInit, OnDestroy {\n  subscription: Subscription;\n\n  constructor(\n    protected couponService: CustomerCouponService,\n    protected routingService: RoutingService,\n    protected messageService: GlobalMessageService\n  ) {}\n\n  ngOnInit(): void {\n    this.routingService\n      .getRouterState()\n      .subscribe((k) => {\n        const couponCode = k.state.params.couponCode;\n        if (couponCode) {\n          this.couponService.claimCustomerCoupon(couponCode);\n          this.subscription = this.couponService\n            .getClaimCustomerCouponResultSuccess()\n            .subscribe((success) => {\n              if (success) {\n                this.messageService.add(\n                  { key: 'myCoupons.claimCustomerCoupon' },\n                  GlobalMessageType.MSG_TYPE_CONFIRMATION\n                );\n              }\n              this.routingService.go({ cxRoute: 'coupons' });\n            });\n        } else {\n          this.routingService.go({ cxRoute: 'notFound' });\n        }\n      })\n      .unsubscribe();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CardModule } from '../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { MyCouponsComponent } from './my-coupons.component';\nimport { CouponCardComponent } from './coupon-card/coupon-card.component';\n\nimport { ListNavigationModule } from '../../../shared/components/list-navigation/list-navigation.module';\nimport { CouponDialogComponent } from './coupon-card/coupon-dialog/coupon-dialog.component';\nimport { CouponClaimComponent } from './coupon-claim/coupon-claim.component';\nimport { CmsPageGuard } from '../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../cms-structure/page/page-layout/page-layout.component';\nimport { IconModule } from '../../misc/icon/icon.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CardModule,\n    SpinnerModule,\n    I18nModule,\n    RouterModule,\n    UrlModule,\n    IconModule,\n    ListNavigationModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'couponClaim' },\n      },\n    ]),\n  ],\n  declarations: [\n    MyCouponsComponent,\n    CouponCardComponent,\n    CouponDialogComponent,\n    CouponClaimComponent,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MyCouponsComponent: {\n          component: MyCouponsComponent,\n          guards: [AuthGuard],\n        },\n        CouponClaimComponent: {\n          component: CouponClaimComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  exports: [MyCouponsComponent, CouponClaimComponent],\n})\nexport class MyCouponsModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport {\n  PaginationModel,\n  Product,\n  ProductInterestEntryRelation,\n  ProductInterestSearchResult,\n  ProductScope,\n  ProductService,\n  TranslationService,\n  UserInterestsService,\n} from '@spartacus/core';\nimport { map, tap } from 'rxjs/operators';\n\ninterface ProductInterestSearchResultUI extends ProductInterestSearchResult {\n  results?: (ProductInterestEntryRelation & {\n    product$?: Observable<Product>;\n  })[];\n}\n\n@Component({\n  selector: 'cx-my-interests',\n  templateUrl: './my-interests.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MyInterestsComponent implements OnInit, OnDestroy {\n  private DEFAULT_PAGE_SIZE = 10;\n  private sortMapping = {\n    byNameAsc: 'name:asc',\n    byNameDesc: 'name:desc',\n  };\n\n  sort = 'byNameAsc';\n  sortOptions = [\n    {\n      code: 'byNameAsc',\n      selected: false,\n    },\n    {\n      code: 'byNameDesc',\n      selected: false,\n    },\n  ];\n  pagination: PaginationModel;\n\n  interests$: Observable<ProductInterestSearchResultUI>;\n  isRemoveDisabled$: Observable<boolean>;\n  getInterestsloading$: Observable<boolean>;\n  sortLabels: Observable<{ byNameAsc: string; byNameDesc: string }>;\n\n  constructor(\n    private productInterestService: UserInterestsService,\n    private translationService: TranslationService,\n    private productService: ProductService\n  ) {}\n\n  ngOnInit() {\n    this.interests$ = this.productInterestService\n      .getAndLoadProductInterests(this.DEFAULT_PAGE_SIZE)\n      .pipe(\n        tap(\n          (interests) =>\n            (this.pagination = {\n              currentPage: interests.pagination.page,\n              pageSize: interests.pagination.count,\n              totalPages: interests.pagination.totalPages,\n              totalResults: interests.pagination.totalCount,\n              sort: 'byNameAsc',\n            })\n        ),\n        map((interest) => ({\n          ...interest,\n          results: interest.results\n            ? interest.results.map((result) => ({\n                ...result,\n                product$: this.getProduct(result),\n              }))\n            : interest.results,\n        }))\n      );\n\n    this.getInterestsloading$ =\n      this.productInterestService.getProdutInterestsLoading();\n    this.isRemoveDisabled$ = combineLatest([\n      this.getInterestsloading$,\n      this.productInterestService.getRemoveProdutInterestLoading(),\n    ]).pipe(map(([getLoading, removeLoading]) => getLoading || removeLoading));\n\n    this.sortLabels = this.getSortLabels();\n  }\n\n  private getSortLabels(): Observable<{\n    byNameAsc: string;\n    byNameDesc: string;\n  }> {\n    return combineLatest([\n      this.translationService.translate('myInterests.sorting.byNameAsc'),\n      this.translationService.translate('myInterests.sorting.byNameDesc'),\n    ]).pipe(\n      map(([asc, desc]) => {\n        return {\n          byNameAsc: asc,\n          byNameDesc: desc,\n        };\n      })\n    );\n  }\n\n  private getProduct(\n    interest: ProductInterestEntryRelation\n  ): Observable<Product> {\n    return this.productService.get(interest.product.code, ProductScope.DETAILS);\n  }\n\n  removeInterest(\n    relation: ProductInterestEntryRelation & {\n      product$?: Observable<Product>;\n    }\n  ): void {\n    this.productInterestService.removeProdutInterest({\n      product: relation.product,\n      productInterestEntry: relation.productInterestEntry,\n    });\n  }\n\n  sortChange(sort: string): void {\n    this.sort = sort;\n    this.productInterestService.loadProductInterests(\n      this.DEFAULT_PAGE_SIZE,\n      0,\n      this.sortMapping[sort]\n    );\n  }\n\n  pageChange(page: number): void {\n    this.productInterestService.loadProductInterests(\n      this.DEFAULT_PAGE_SIZE,\n      page,\n      this.sortMapping[this.sort]\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.productInterestService.clearProductInterests();\n    this.productInterestService.resetRemoveInterestState();\n  }\n}\n","<div *ngIf=\"interests$ | async as interests\" class=\"container\">\n  <div class=\"cx-product-interests-title h3\">\n    <h3>{{ 'myInterests.header' | cxTranslate }}</h3>\n  </div>\n  <div\n    class=\"cx-product-interests-body\"\n    *ngIf=\"!(getInterestsloading$ | async); else loading\"\n  >\n    <ng-container *ngIf=\"interests.pagination.totalCount > 0; else noInterest\">\n      <div class=\"cx-product-interests-sort top row\">\n        <label\n          class=\"\n            cx-product-interests-form-group\n            form-group\n            col-sm-12 col-md-4 col-lg-4\n          \"\n          ><span>{{ 'myInterests.sortBy' | cxTranslate }}</span>\n          <cx-sorting\n            [sortOptions]=\"sortOptions\"\n            [sortLabels]=\"sortLabels | async\"\n            (sortListEvent)=\"sortChange($event)\"\n            [selectedOption]=\"sort\"\n            placeholder=\"{{ 'myInterests.sortBy' | cxTranslate }}\"\n          >\n          </cx-sorting>\n        </label>\n        <div\n          class=\"\n            cx-product-interests-pagination cx-product-interests-thead-mobile\n          \"\n        >\n          <cx-pagination\n            [pagination]=\"pagination\"\n            (viewPageEvent)=\"pageChange($event)\"\n          ></cx-pagination>\n        </div>\n      </div>\n      <table class=\"table cx-product-interests-table\">\n        <thead class=\"cx-product-interests-thead-mobile\">\n          <th scope=\"col\">\n            {{ 'myInterests.item' | cxTranslate }}\n          </th>\n          <th scope=\"col\"></th>\n          <th scope=\"col\">\n            {{ 'myInterests.price' | cxTranslate }}\n          </th>\n          <th scope=\"col\">\n            {{ 'myInterests.notifications' | cxTranslate }}\n          </th>\n          <th scope=\"col\"></th>\n        </thead>\n        <tbody>\n          <tr\n            *ngFor=\"let interest of interests.results\"\n            class=\"cx-product-interests-product-item\"\n          >\n            <ng-container *ngIf=\"interest.product$ | async as product\">\n              <td>\n                <div class=\"cx-product-interests-label\">\n                  <a\n                    class=\"cx-product-interests-product-image-link\"\n                    tabindex=\"-1\"\n                    [routerLink]=\"\n                      { cxRoute: 'product', params: product } | cxUrl\n                    \"\n                  >\n                    <cx-media\n                      [container]=\"product.images?.PRIMARY\"\n                      format=\"thumbnail\"\n                    ></cx-media>\n                  </a>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-info col-10\">\n                  <div class=\"cx-info-container row\">\n                    <div>\n                      <div *ngIf=\"product.name\" class=\"cx-name\">\n                        <a\n                          class=\"cx-link cx-product-interests-product-code-link\"\n                          [routerLink]=\"\n                            { cxRoute: 'product', params: product } | cxUrl\n                          \"\n                        >\n                          {{ product.name }}\n                        </a>\n                      </div>\n                      <div *ngIf=\"product.code\" class=\"cx-code\">\n                        <span>{{\n                          'myInterests.productId'\n                            | cxTranslate: { code: product.code }\n                        }}</span>\n                      </div>\n\n                      <ng-container\n                        *ngFor=\"let baseOptions of product.baseOptions\"\n                      >\n                        <div\n                          *ngFor=\"\n                            let variant of baseOptions.selected\n                              ?.variantOptionQualifiers\n                          \"\n                          class=\"cx-property\"\n                        >\n                          <div\n                            class=\"cx-label cx-product-interests-variant-name\"\n                          >\n                            {{ variant.name }}\n                          </div>\n                          <div\n                            class=\"cx-value cx-product-interests-variant-value\"\n                          >\n                            {{ variant.value }}\n                          </div>\n                        </div>\n                      </ng-container>\n                      <div\n                        class=\"cx-property\"\n                        *ngIf=\"product.stock.stockLevelStatus === 'outOfStock'\"\n                      >\n                        <div\n                          class=\"cx-label cx-product-interests-product-stock\"\n                        >\n                          {{ 'myInterests.outOfStock' | cxTranslate }}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-product-interests-product-price\">\n                  <div class=\"d-md-none cx-product-interests-label\">\n                    {{ 'myInterests.price' | cxTranslate }}\n                  </div>\n                  <span>{{ product.price.formattedValue }}</span>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-product-interests-subscriptions\">\n                  <div class=\"d-md-none cx-product-interests-label\">\n                    {{ 'myInterests.notifications' | cxTranslate }}\n                  </div>\n                  <div\n                    class=\"cx-product-interests-notification\"\n                    *ngFor=\"let interestEntry of interest.productInterestEntry\"\n                  >\n                    <span class=\"cx-product-interests-type\">\n                      {{\n                        'myInterests.' + interestEntry.interestType\n                          | cxTranslate\n                      }}\n                    </span>\n                    <span class=\"cx-product-interests-expiration-date\">\n                      {{\n                        'myInterests.expirationDate'\n                          | cxTranslate\n                            : {\n                                expirationDate:\n                                  interestEntry.expirationDate | date\n                              }\n                      }}\n                    </span>\n                  </div>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-actions cx-product-interests-remove-button\">\n                  <button\n                    type=\"button\"\n                    class=\"link cx-product-interests-remove-btn\"\n                    [disabled]=\"isRemoveDisabled$ | async\"\n                    (click)=\"removeInterest(interest)\"\n                  >\n                    {{ 'myInterests.remove' | cxTranslate }}\n                  </button>\n                </div>\n              </td>\n            </ng-container>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"cx-product-interests-sort bottom row\">\n        <label\n          class=\"\n            cx-product-interests-form-group cx-product-interests-thead-mobile\n            form-group\n            col-sm-12 col-md-4 col-lg-4\n          \"\n          ><span>{{ 'myInterests.sortBy' | cxTranslate }}</span>\n          <cx-sorting\n            [sortOptions]=\"sortOptions\"\n            [sortLabels]=\"sortLabels | async\"\n            (sortListEvent)=\"sortChange($event)\"\n            [selectedOption]=\"sort\"\n            placeholder=\"{{ 'myInterests.sortBy' | cxTranslate }}\"\n          >\n          </cx-sorting>\n        </label>\n        <div class=\"cx-product-interests-pagination\">\n          <cx-pagination\n            [pagination]=\"pagination\"\n            (viewPageEvent)=\"pageChange($event)\"\n          ></cx-pagination>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n<ng-template #noInterest>\n  <div class=\"cx-product-interests-message\">\n    {{ 'myInterests.noInterests' | cxTranslate }}\n  </div>\n</ng-template>\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { ListNavigationModule } from '../../../shared/components/list-navigation/list-navigation.module';\nimport { MyInterestsComponent } from './my-interests.component';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\n\n@NgModule({\n  declarations: [MyInterestsComponent],\n  imports: [\n    CommonModule,\n    I18nModule,\n    RouterModule,\n    ListNavigationModule,\n    I18nModule,\n    UrlModule,\n    MediaModule,\n    SpinnerModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MyInterestsComponent: {\n          component: MyInterestsComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  exports: [MyInterestsComponent],\n})\nexport class MyInterestsModule {}\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport {\n  NotificationPreference,\n  UserNotificationPreferenceService,\n} from '@spartacus/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-notification-preference',\n  templateUrl: './notification-preference.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NotificationPreferenceComponent implements OnInit {\n  preferences$: Observable<NotificationPreference[]>;\n  isLoading$: Observable<boolean>;\n\n  protected preferences: NotificationPreference[] = [];\n\n  constructor(\n    private notificationPreferenceService: UserNotificationPreferenceService\n  ) {}\n\n  ngOnInit() {\n    this.notificationPreferenceService.resetNotificationPreferences();\n    this.preferences$ = this.notificationPreferenceService\n      .getPreferences()\n      .pipe(tap((preferences) => (this.preferences = preferences)));\n    this.notificationPreferenceService.loadPreferences();\n\n    this.isLoading$ = combineLatest([\n      this.notificationPreferenceService.getPreferencesLoading(),\n      this.notificationPreferenceService.getUpdatePreferencesResultLoading(),\n    ]).pipe(\n      map(([prefsLoading, updateLoading]) => prefsLoading || updateLoading)\n    );\n  }\n\n  updatePreference(preference: NotificationPreference) {\n    const updatedPreferences = [];\n    this.preferences.forEach((p) => {\n      if (p.channel === preference.channel) {\n        updatedPreferences.push({\n          ...p,\n          enabled: !p.enabled,\n        });\n      } else {\n        updatedPreferences.push(p);\n      }\n    });\n    this.notificationPreferenceService.updatePreferences(updatedPreferences);\n  }\n}\n","<ng-container *ngIf=\"preferences$ | async as preferences\">\n  <div *ngIf=\"preferences.length > 0; else loading\">\n    <div class=\"row d-flex justify-content-center\">\n      <div class=\"col-md-8\">\n        <div class=\"pref-header\">\n          {{ 'notificationPreference.message' | cxTranslate }}\n        </div>\n        <div class=\"form-check cx-notification-channels\">\n          <ng-container *ngFor=\"let preference of preferences\">\n            <label *ngIf=\"preference.visible\" class=\"pref-channel\">\n              <input\n                class=\"form-check-input cx-np-checkbox\"\n                role=\"checkbox\"\n                type=\"checkbox\"\n                [checked]=\"preference.enabled\"\n                (change)=\"updatePreference(preference)\"\n                [disabled]=\"isLoading$ | async\"\n              />\n              <span class=\"form-check-label\">\n                {{\n                  'notificationPreference.' + preference.channel | cxTranslate\n                }}\n                {{ preference.value }}\n              </span>\n            </label>\n          </ng-container>\n        </div>\n        <label class=\"pref-note\"\n          ><strong>{{ 'notificationPreference.note' | cxTranslate }}</strong\n          >{{ 'notificationPreference.noteMessage' | cxTranslate }}\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <ng-template #loading>\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </ng-template>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { NotificationPreferenceComponent } from './notification-preference.component';\n\n@NgModule({\n  declarations: [NotificationPreferenceComponent],\n  imports: [CommonModule, SpinnerModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        NotificationPreferenceComponent: {\n          component: NotificationPreferenceComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  exports: [NotificationPreferenceComponent],\n})\nexport class NotificationPreferenceModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  HostBinding,\n  Input,\n} from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { RoutingService } from '@spartacus/core';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-amend-order-actions',\n  templateUrl: './amend-order-actions.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AmendOrderActionsComponent {\n  @Input() orderCode: string;\n  @Input() amendOrderForm: FormGroup;\n  @Input() backRoute: string;\n  @Input() forwardRoute: string;\n\n  @HostBinding('class') styles = 'row';\n\n  constructor(protected routingService: RoutingService) {}\n\n  continue(event: Event): void {\n    if (this.amendOrderForm.valid) {\n      this.routingService.go({\n        cxRoute: this.forwardRoute,\n        params: { code: this.orderCode },\n      });\n    } else {\n      this.amendOrderForm.markAllAsTouched();\n      event.stopPropagation();\n    }\n  }\n}\n","<div class=\"col-xs-12 col-md-4 col-lg-3\">\n  <a\n    [routerLink]=\"\n      {\n        cxRoute: backRoute,\n        params: { code: orderCode }\n      } | cxUrl\n    \"\n    class=\"btn btn-block btn-action\"\n  >\n    {{ 'common.back' | cxTranslate }}\n  </a>\n</div>\n<div class=\"col-xs-12 col-md-4 col-lg-3\">\n  <button\n    *ngIf=\"forwardRoute\"\n    class=\"btn btn-block btn-primary\"\n    (click)=\"continue($event)\"\n  >\n    {{ 'common.continue' | cxTranslate }}\n  </button>\n\n  <button *ngIf=\"!forwardRoute\" class=\"btn btn-block btn-primary\" type=\"submit\">\n    {{ 'orderDetails.cancellationAndReturn.submit' | cxTranslate }}\n  </button>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { AmendOrderActionsComponent } from './amend-order-actions.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [AmendOrderActionsComponent],\n  exports: [AmendOrderActionsComponent],\n})\nexport class AmendOrderActionsModule {}\n","/**\n * @deprecated since 4.2 - use order lib instead\n */\nexport enum AmendOrderType {\n  CANCEL,\n  RETURN,\n}\n","import { Order } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n// TODO: remove this token in 5.0\nexport abstract class OrderDetailsServiceTransitionalToken {\n  abstract getOrderDetails(): Observable<Order>;\n}\n","import { Injectable } from '@angular/core';\nimport {\n  getLastValueSync,\n  Order,\n  RoutingService,\n  UnifiedInjector,\n  UserOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  map,\n  shareReplay,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\nimport { OrderDetailsServiceTransitionalToken } from '../order-transitional-tokens';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderDetailsService {\n  orderCode$: Observable<string>;\n  orderLoad$: Observable<{}>;\n\n  constructor(\n    private userOrderService: UserOrderService,\n    private routingService: RoutingService,\n    private unifiedInjector?: UnifiedInjector\n  ) {\n    this.orderCode$ = this.routingService.getRouterState().pipe(\n      map((routingData) => routingData.state.params.orderCode),\n      distinctUntilChanged()\n    );\n\n    this.orderLoad$ = this.orderCode$.pipe(\n      tap((orderCode) => {\n        if (orderCode) {\n          this.userOrderService.loadOrderDetails(orderCode);\n        } else {\n          this.userOrderService.clearOrderDetails();\n        }\n      }),\n      shareReplay({ bufferSize: 1, refCount: true })\n    );\n  }\n\n  getOrderDetails(): Observable<Order> {\n    if (this.unifiedInjector) {\n      const serivce = getLastValueSync(\n        this.unifiedInjector.get(OrderDetailsServiceTransitionalToken)\n      );\n      if (serivce) {\n        return serivce.getOrderDetails();\n      }\n    }\n\n    return this.orderLoad$.pipe(\n      switchMap(() => this.userOrderService.getOrderDetails())\n    );\n  }\n}\n","import { formatCurrency, getCurrencySymbol } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Order, OrderEntry, Price } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { OrderDetailsService } from '../order-details/order-details.service';\nimport { AmendOrderType } from './amend-order.model';\n\nfunction ValidateQuantityToCancel(control: FormControl) {\n  if (!control.value) {\n    return null;\n  }\n  const quantity = Object.values(control.value).reduce(\n    (acc: number, val: number) => acc + val,\n    0\n  );\n  return quantity > 0 ? null : { cxNoSelectedItemToCancel: true };\n}\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable()\nexport abstract class OrderAmendService {\n  protected amendType: AmendOrderType;\n  protected form: FormGroup;\n\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  /**\n   * Returns entries for the given order.\n   */\n  abstract getEntries(): Observable<OrderEntry[]>;\n\n  /**\n   * Returns entries with an amended quantity.\n   */\n  getAmendedEntries(): Observable<OrderEntry[]> {\n    return this.getForm().pipe(\n      switchMap((form) => {\n        return this.getEntries().pipe(\n          map((entries) =>\n            entries.filter(\n              (entry) => this.getFormControl(form, entry).value > 0\n            )\n          )\n        );\n      })\n    );\n  }\n\n  /**\n   * Submits the amended order.\n   */\n  abstract save(): void;\n\n  getOrder(): Observable<Order> {\n    return this.orderDetailsService.getOrderDetails();\n  }\n\n  /**\n   * returns the form with form data at runtime\n   */\n  getForm(): Observable<FormGroup> {\n    return this.getOrder().pipe(\n      tap((order) => {\n        if (!this.form || this.form.get('orderCode').value !== order.code) {\n          this.buildForm(order);\n        }\n      }),\n      map(() => this.form)\n    );\n  }\n\n  private buildForm(order: Order): void {\n    this.form = new FormGroup({});\n    this.form.addControl('orderCode', new FormControl(order.code));\n\n    const entryGroup = new FormGroup(\n      {},\n      { validators: [ValidateQuantityToCancel] }\n    );\n    this.form.addControl('entries', entryGroup);\n\n    (order.entries || []).forEach((entry) => {\n      const key = entry.entryNumber.toString();\n      entryGroup.addControl(\n        key,\n        new FormControl(0, {\n          validators: [\n            Validators.min(0),\n            Validators.max(this.getMaxAmendQuantity(entry)),\n          ],\n        })\n      );\n    });\n  }\n\n  protected getFormControl(form: FormGroup, entry: OrderEntry): FormControl {\n    return <FormControl>form.get('entries').get(entry.entryNumber.toString());\n  }\n\n  /**\n   * As discussed, this calculation is moved to SPA side.\n   * The calculation and validation should be in backend facade layer.\n   */\n  getAmendedPrice(entry: OrderEntry): Price {\n    const amendedQuantity = this.getFormControl(this.form, entry).value;\n    const amendedPrice = Object.assign({}, entry.basePrice);\n    amendedPrice.value =\n      Math.round(entry.basePrice.value * amendedQuantity * 100) / 100;\n\n    amendedPrice.formattedValue = formatCurrency(\n      amendedPrice.value,\n      // TODO: user current language\n      'en',\n      getCurrencySymbol(amendedPrice.currencyIso, 'narrow'),\n      amendedPrice.currencyIso\n    );\n\n    return amendedPrice;\n  }\n\n  getMaxAmendQuantity(entry: OrderEntry) {\n    return (\n      (this.isCancellation()\n        ? entry.cancellableQuantity\n        : entry.returnableQuantity) || entry.quantity\n    );\n  }\n\n  isCancellation() {\n    return this.amendType === AmendOrderType.CANCEL;\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { OrderEntry, Price } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { OrderAmendService } from '../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-amend-order-items',\n  templateUrl: './amend-order-items.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CancelOrReturnItemsComponent {\n  @Input() entries: OrderEntry[];\n  @Input() isConfirmation = false;\n\n  form$: Observable<FormGroup> = this.orderAmendService.getForm();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n\n  getControl(form: FormGroup, entry: OrderEntry): FormControl {\n    const control = <FormControl>(\n      form.get('entries').get(entry.entryNumber.toString())\n    );\n    return control;\n  }\n\n  setAll(form: FormGroup): void {\n    this.entries.forEach((entry) =>\n      this.getControl(form, entry).setValue(this.getMaxAmendQuantity(entry))\n    );\n  }\n\n  getItemPrice(entry: OrderEntry): Price {\n    return this.orderAmendService.getAmendedPrice(entry);\n  }\n\n  getMaxAmendQuantity(entry: OrderEntry) {\n    return this.orderAmendService.getMaxAmendQuantity(entry);\n  }\n\n  isCancellation() {\n    return this.orderAmendService.isCancellation();\n  }\n}\n","<div *ngIf=\"form$ | async as form\">\n  <button\n    *ngIf=\"!isConfirmation\"\n    class=\"btn btn-link cx-action-link\"\n    (click)=\"setAll(form)\"\n  >\n    {{ 'orderDetails.cancellationAndReturn.setAll' | cxTranslate }}\n  </button>\n\n  <div class=\"d-none d-md-block cx-item-list-header\">\n    <div class=\"row\">\n      <div class=\"text-left col-6\">\n        {{ 'orderDetails.cancellationAndReturn.item' | cxTranslate }}\n      </div>\n      <div class=\"text-center col-2\">\n        {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n      </div>\n      <div *ngIf=\"!isConfirmation\" class=\"text-center col-2\">\n        {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-qty col-2 text-right\">\n        {{\n          (isCancellation()\n            ? 'orderDetails.cancellationAndReturn.cancelQty'\n            : 'orderDetails.cancellationAndReturn.returnQty'\n          ) | cxTranslate\n        }}\n      </div>\n      <div *ngIf=\"isConfirmation\" class=\"cx-item-list-total col-2\">\n        {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n\n  <div class=\"cx-item-list-row\" *ngFor=\"let item of entries; let i = index\">\n    <div class=\"row cx-item-list-items\">\n      <!-- Item Image -->\n      <cx-media\n        class=\"col-2\"\n        [container]=\"item.product.images?.PRIMARY\"\n        format=\"thumbnail\"\n      ></cx-media>\n\n      <!-- Item Information -->\n      <div class=\"cx-info col-10\">\n        <div class=\"cx-info-container row\">\n          <!-- Item Description -->\n          <div class=\"col-md-4 col-xl-5 cx-list-item-desc\">\n            <div *ngIf=\"item.product.name\" class=\"cx-name\">\n              {{ item.product.name }}\n            </div>\n            <div *ngIf=\"item.product.code\" class=\"cx-code\">\n              {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\n            </div>\n            <!-- Variants -->\n            <ng-container *ngIf=\"item.product.baseOptions?.length\">\n              <div\n                *ngFor=\"\n                  let variant of item.product.baseOptions[0]?.selected\n                    ?.variantOptionQualifiers\n                \"\n                class=\"cx-property\"\n              >\n                <div class=\"cx-label\" *ngIf=\"variant.name\">\n                  {{ variant.name }}:\n                </div>\n                <div class=\"cx-value\" *ngIf=\"variant.value\">\n                  {{ variant.value }}\n                </div>\n              </div>\n            </ng-container>\n          </div>\n          <!-- Price -->\n          <div\n            *ngIf=\"item.basePrice\"\n            class=\"cx-price col-md-3 col-lg-3 col-xl-2\"\n          >\n            <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n              {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n            </div>\n            <div *ngIf=\"item.basePrice\" class=\"cx-value\">\n              {{ item.basePrice?.formattedValue }}\n            </div>\n          </div>\n          <!-- item Quantity -->\n          <div *ngIf=\"!isConfirmation\" class=\"cx-request-qty col-md-3\">\n            <div\n              class=\"cx-label d-block d-md-none d-lg-none d-xl-none\"\n              placement=\"left\"\n              title=\"{{ 'cartItems.quantityTitle' | cxTranslate }}\"\n            >\n              {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n            </div>\n            <div class=\"cx-value\">\n              {{ getMaxAmendQuantity(item) }}\n            </div>\n          </div>\n          <!-- Amended Quantity -->\n          <div class=\"cx-quantity col-xs-12 col-md-2 col-sm-12\">\n            <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n              {{\n                (isCancellation()\n                  ? 'orderDetails.cancellationAndReturn.cancelQty'\n                  : 'orderDetails.cancellationAndReturn.returnQty'\n                ) | cxTranslate\n              }}\n            </div>\n\n            <div\n              *ngIf=\"isConfirmation\"\n              class=\"w-100 text-center cx-order-quantity-value\"\n            >\n              {{ getControl(form, item).value }}\n            </div>\n            <cx-item-counter\n              *ngIf=\"!isConfirmation\"\n              [min]=\"0\"\n              [max]=\"getMaxAmendQuantity(item)\"\n              [control]=\"getControl(form, item)\"\n            >\n            </cx-item-counter>\n          </div>\n          <!-- Total Price -->\n          <div *ngIf=\"isConfirmation\" class=\"cx-total col-3\">\n            <div class=\"cx-label d-block d-md-none\">\n              {{\n                'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate\n              }}\n            </div>\n            <div class=\"cx-value\">\n              {{ getItemPrice(item)?.formattedValue }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { FeaturesConfigModule, I18nModule } from '@spartacus/core';\nimport {\n  FormErrorsModule,\n  ItemCounterModule,\n  MediaModule,\n} from '../../../../../shared/index';\nimport { CancelOrReturnItemsComponent } from './amend-order-items.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    I18nModule,\n    MediaModule,\n    ItemCounterModule,\n    FeaturesConfigModule,\n    FormErrorsModule,\n  ],\n  declarations: [CancelOrReturnItemsComponent],\n  exports: [CancelOrReturnItemsComponent],\n})\nexport class AmendOrderItemsModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-cancel-order-confirmation',\n  templateUrl: './cancel-order-confirmation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CancelOrderConfirmationComponent {\n  orderCode: string;\n\n  form$ = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<OrderEntry[]> =\n    this.orderAmendService.getAmendedEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n\n  submit(form: FormGroup) {\n    if (form.valid) {\n      this.orderAmendService.save();\n    } else {\n      form.markAllAsTouched();\n    }\n  }\n}\n","<form\n  *ngIf=\"form$ | async as form\"\n  [formGroup]=\"form\"\n  (ngSubmit)=\"submit(form)\"\n>\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items\n    *ngIf=\"entries$ | async as entries\"\n    [entries]=\"entries\"\n    [isConfirmation]=\"true\"\n  >\n  </cx-amend-order-items>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [amendOrderForm]=\"form\"\n      backRoute=\"orderCancel\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</form>\n","import { Injectable } from '@angular/core';\nimport {\n  CancelOrReturnRequestEntryInput,\n  GlobalMessageService,\n  GlobalMessageType,\n  OrderEntry,\n  RoutingService,\n  UserOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, first, map } from 'rxjs/operators';\nimport { OrderDetailsService } from '../../order-details/order-details.service';\nimport { AmendOrderType } from '../amend-order.model';\nimport { OrderAmendService } from '../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderCancellationService extends OrderAmendService {\n  amendType = AmendOrderType.CANCEL;\n\n  constructor(\n    protected orderDetailsService: OrderDetailsService,\n    protected userOrderService: UserOrderService,\n    protected routing: RoutingService,\n    protected globalMessageService: GlobalMessageService\n  ) {\n    super(orderDetailsService);\n  }\n  /**\n   * Return cancellable order entries.\n   */\n  getEntries(): Observable<OrderEntry[]> {\n    return this.getOrder().pipe(\n      filter((order) => !!order?.entries),\n      map((order) =>\n        order.entries.filter(\n          (entry) => entry.entryNumber !== -1 && entry.cancellableQuantity > 0\n        )\n      )\n    );\n  }\n\n  save(): void {\n    const orderCode = this.form.value.orderCode;\n    const entries = this.form.value.entries;\n    const inputs: CancelOrReturnRequestEntryInput[] = Object.keys(entries)\n      .filter((entryNumber) => <number>entries[entryNumber] > 0)\n      .map(\n        (entryNumber) =>\n          ({\n            orderEntryNumber: Number(entryNumber),\n            quantity: <number>entries[entryNumber],\n          } as CancelOrReturnRequestEntryInput)\n      );\n\n    this.form.reset();\n\n    this.userOrderService.cancelOrder(orderCode, {\n      cancellationRequestEntryInputs: inputs,\n    });\n\n    this.userOrderService\n      .getCancelOrderSuccess()\n      .pipe(first(Boolean))\n      .subscribe(() => this.afterSave(orderCode));\n  }\n\n  private afterSave(orderCode: string): void {\n    this.userOrderService.resetCancelOrderProcessState();\n    this.globalMessageService.add(\n      {\n        key: 'orderDetails.cancellationAndReturn.cancelSuccess',\n        params: { orderCode },\n      },\n      GlobalMessageType.MSG_TYPE_CONFIRMATION\n    );\n    this.routing.go({\n      cxRoute: 'orders',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { SemanticPathService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrderCancellationService } from './order-cancellation.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderCancellationGuard implements CanActivate {\n  constructor(\n    protected orderAmendService: OrderCancellationService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return this.orderAmendService.getForm().pipe(\n      map((form) => {\n        if (!form.valid) {\n          // the order code is not available in the route\n          // as long as we're inside a guard, hence we redirect\n          // to the common orders page.\n          return this.router.parseUrl(this.semanticPathService.get('orders'));\n        } else {\n          return true;\n        }\n      })\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { AuthGuard, CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../../../cms-structure/page/page-layout/page-layout.component';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderCancellationGuard } from '../order-cancellation.guard';\nimport { OrderCancellationService } from '../order-cancellation.service';\nimport { CancelOrderConfirmationComponent } from './cancel-order-confirmation.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderCancelConfirmation',\n        },\n      },\n    ]),\n    ReactiveFormsModule,\n    AmendOrderItemsModule,\n    AmendOrderActionsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CancelOrderConfirmationComponent: {\n          component: CancelOrderConfirmationComponent,\n          guards: [AuthGuard, OrderCancellationGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderCancellationService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [CancelOrderConfirmationComponent],\n  exports: [CancelOrderConfirmationComponent],\n})\nexport class CancelOrderConfirmationModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-cancel-order',\n  templateUrl: './cancel-order.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CancelOrderComponent {\n  orderCode: string;\n\n  form$: Observable<FormGroup> = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<OrderEntry[]> = this.orderAmendService.getEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n}\n","<ng-container *ngIf=\"form$ | async as form\">\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items *ngIf=\"entries$ | async as entries\" [entries]=\"entries\">\n  </cx-amend-order-items>\n\n  <cx-form-errors\n    aria-live=\"assertive\"\n    aria-atomic=\"true\"\n    [control]=\"form.get('entries')\"\n  ></cx-form-errors>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [amendOrderForm]=\"form\"\n      backRoute=\"orderDetails\"\n      forwardRoute=\"orderCancelConfirmation\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AuthGuard, CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport {\n  CmsPageGuard,\n  PageLayoutComponent,\n} from '../../../../../../cms-structure/index';\nimport { FormErrorsModule } from '../../../../../../shared/index';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderCancellationService } from '../order-cancellation.service';\nimport { CancelOrderComponent } from './cancel-order.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderCancel',\n        },\n      },\n    ]),\n    AmendOrderItemsModule,\n    AmendOrderActionsModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CancelOrderComponent: {\n          component: CancelOrderComponent,\n          guards: [AuthGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderCancellationService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [CancelOrderComponent],\n  exports: [CancelOrderComponent],\n})\nexport class CancelOrderModule {}\n","import { NgModule } from '@angular/core';\nimport { CancelOrderConfirmationModule } from './cancel-order-confirmation/cancel-order-confirmation.module';\nimport { CancelOrderModule } from './cancel-order/cancel-order.module';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [CancelOrderModule, CancelOrderConfirmationModule],\n})\nexport class OrderCancellationModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CancelOrReturnRequestEntryInput,\n  GlobalMessageService,\n  GlobalMessageType,\n  OrderEntry,\n  OrderReturnRequestService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, first, map } from 'rxjs/operators';\nimport { OrderDetailsService } from '../../order-details/order-details.service';\nimport { AmendOrderType } from '../amend-order.model';\nimport { OrderAmendService } from '../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderReturnService extends OrderAmendService {\n  amendType = AmendOrderType.RETURN;\n\n  constructor(\n    protected orderDetailsService: OrderDetailsService,\n    protected returnRequestService: OrderReturnRequestService,\n    protected routing: RoutingService,\n    protected globalMessageService: GlobalMessageService\n  ) {\n    super(orderDetailsService);\n  }\n\n  getEntries(): Observable<OrderEntry[]> {\n    return this.getOrder().pipe(\n      filter((order) => !!order.entries),\n      map((order) =>\n        order.entries.filter(\n          (entry) => entry.entryNumber !== -1 && entry.returnableQuantity > 0\n        )\n      )\n    );\n  }\n\n  save(): void {\n    const orderCode = this.form.value.orderCode;\n    const entries = this.form.value.entries;\n    const inputs: CancelOrReturnRequestEntryInput[] = Object.keys(entries)\n      .filter((entryNumber) => <number>entries[entryNumber] > 0)\n      .map(\n        (entryNumber) =>\n          ({\n            orderEntryNumber: Number(entryNumber),\n            quantity: <number>entries[entryNumber],\n          } as CancelOrReturnRequestEntryInput)\n      );\n\n    this.form.reset();\n\n    this.returnRequestService.createOrderReturnRequest({\n      orderCode,\n      returnRequestEntryInputs: inputs,\n    });\n\n    this.returnRequestService\n      .getReturnRequestSuccess()\n      .pipe(first(Boolean))\n      .subscribe(() => this.afterSave());\n  }\n\n  private afterSave(): void {\n    this.returnRequestService\n      .getOrderReturnRequest()\n      .pipe(first((r) => !!r))\n      .subscribe((returnRequest) => {\n        const rma = returnRequest.rma;\n        this.globalMessageService.add(\n          {\n            key: 'orderDetails.cancellationAndReturn.returnSuccess',\n            params: { rma },\n          },\n          GlobalMessageType.MSG_TYPE_CONFIRMATION\n        );\n        this.routing.go({\n          cxRoute: 'returnRequestDetails',\n          params: { rma },\n        });\n      });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { SemanticPathService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrderReturnService } from './order-return.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderReturnGuard implements CanActivate {\n  constructor(\n    protected orderAmendService: OrderReturnService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return this.orderAmendService.getForm().pipe(\n      map((form) => {\n        if (!form.valid) {\n          // the order code is not available in the route\n          // as long as we're inside a guard, hence we redirect\n          // to the common orders page.\n          return this.router.parseUrl(this.semanticPathService.get('orders'));\n        } else {\n          return true;\n        }\n      })\n    );\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-return-order-confirmation',\n  templateUrl: './return-order-confirmation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnOrderConfirmationComponent {\n  orderCode: string;\n\n  form$ = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<OrderEntry[]> =\n    this.orderAmendService.getAmendedEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n\n  submit(form: FormGroup): void {\n    form.disable();\n    this.orderAmendService.save();\n  }\n}\n","<form\n  *ngIf=\"form$ | async as form\"\n  [formGroup]=\"form\"\n  (ngSubmit)=\"submit(form)\"\n>\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items\n    *ngIf=\"entries$ | async as entries\"\n    [entries]=\"entries\"\n    [isConfirmation]=\"true\"\n  >\n  </cx-amend-order-items>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [amendOrderForm]=\"form\"\n      backRoute=\"orderReturn\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</form>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../../../cms-structure/page/page-layout/page-layout.component';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderReturnGuard } from '../order-return.guard';\nimport { OrderReturnService } from '../order-return.service';\nimport { ReturnOrderConfirmationComponent } from './return-order-confirmation.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderReturnConfirmation',\n        },\n      },\n    ]),\n    AmendOrderItemsModule,\n    I18nModule,\n    ReactiveFormsModule,\n    AmendOrderActionsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturnOrderConfirmationComponent: {\n          component: ReturnOrderConfirmationComponent,\n          guards: [AuthGuard, OrderReturnGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderReturnService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [ReturnOrderConfirmationComponent],\n  exports: [ReturnOrderConfirmationComponent],\n})\nexport class ReturnOrderConfirmationModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-return-order',\n  templateUrl: './return-order.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnOrderComponent {\n  orderCode: string;\n\n  form$: Observable<FormGroup> = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<OrderEntry[]> = this.orderAmendService.getEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n}\n","<ng-container *ngIf=\"form$ | async as form\">\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items *ngIf=\"entries$ | async as entries\" [entries]=\"entries\">\n  </cx-amend-order-items>\n\n  <cx-form-errors\n    aria-live=\"assertive\"\n    aria-atomic=\"true\"\n    [control]=\"form.get('entries')\"\n  ></cx-form-errors>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [amendOrderForm]=\"form\"\n      backRoute=\"orderDetails\"\n      forwardRoute=\"orderReturnConfirmation\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AuthGuard, CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../../../cms-structure/page/page-layout/page-layout.component';\nimport { FormErrorsModule } from '../../../../../../shared/index';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderReturnService } from '../order-return.service';\nimport { ReturnOrderComponent } from './return-order.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderReturn',\n        },\n      },\n    ]),\n    AmendOrderItemsModule,\n    AmendOrderActionsModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturnOrderComponent: {\n          component: ReturnOrderComponent,\n          guards: [AuthGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderReturnService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [ReturnOrderComponent],\n  exports: [ReturnOrderComponent],\n})\nexport class ReturnOrderModule {}\n","import { NgModule } from '@angular/core';\nimport { ReturnOrderConfirmationModule } from './return-order-confirmation/return-order-confirmation.module';\nimport { ReturnOrderModule } from './return-order/return-order.module';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [ReturnOrderModule, ReturnOrderConfirmationModule],\n})\nexport class OrderReturnModule {}\n","import { Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OrderDetailsService } from '../order-details.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-details-actions',\n  templateUrl: './order-detail-actions.component.html',\n})\nexport class OrderDetailActionsComponent {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  order$: Observable<any> = this.orderDetailsService.getOrderDetails();\n}\n","<ng-container *ngIf=\"order$ | async as order\">\n  <div class=\"cx-nav row\">\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <button\n        [routerLink]=\"{ cxRoute: 'orders' } | cxUrl\"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'common.back' | cxTranslate }}\n      </button>\n    </div>\n\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <a\n        *ngIf=\"order.cancellable\"\n        [routerLink]=\"\n          {\n            cxRoute: 'orderCancel',\n            params: order\n          } | cxUrl\n        \"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'orderDetails.cancellationAndReturn.cancelAction' | cxTranslate }}\n      </a>\n\n      <a\n        *ngIf=\"order.returnable\"\n        [routerLink]=\"\n          {\n            cxRoute: 'orderReturn',\n            params: order\n          } | cxUrl\n        \"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'orderDetails.cancellationAndReturn.returnAction' | cxTranslate }}\n      </a>\n    </div>\n  </div>\n</ng-container>\n","import { Component, OnDestroy } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ConsignmentTracking, UserOrderService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-tracking-events',\n  templateUrl: './tracking-events.component.html',\n})\nexport class TrackingEventsComponent implements OnDestroy {\n  tracking$: Observable<ConsignmentTracking>;\n  shipDate: Date;\n  consignmentCode: string;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    private userOrderService: UserOrderService\n  ) {}\n\n  ngOnDestroy(): void {\n    this.userOrderService.clearConsignmentTracking();\n  }\n}\n","<div class=\"cx-consignment-tracking-dialog\">\n  <!-- Modal Header -->\n  <ng-container *ngIf=\"tracking$ | async as consignmentTracking; else loading\">\n    <div class=\"header modal-header\">\n      <div class=\"title modal-title\">\n        {{ 'orderDetails.consignmentTracking.dialog.header' | cxTranslate }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        [attr.aria-label]=\"'common.close' | cxTranslate\"\n        (click)=\"activeModal.dismiss('Cross click')\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <!-- Modal Body -->\n    <!-- shipment header -->\n    <ng-container\n      *ngIf=\"\n        consignmentTracking?.carrierDetails && consignmentTracking?.trackingID;\n        else noTracking\n      \"\n    >\n      <div class=\"shipment-heading\">\n        <div class=\"row\">\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.shipped' | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              {{ shipDate | cxDate: 'medium' }}\n            </div>\n          </div>\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.estimate' | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              {{ consignmentTracking?.targetArrivalDate | cxDate: 'medium' }}\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.carrier' | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              {{ consignmentTracking?.carrierDetails?.name }}\n            </div>\n          </div>\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.trackingId'\n                  | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              <ng-container *ngIf=\"consignmentTracking?.trackingUrl\">\n                <a target=\"_blank\" [href]=\"consignmentTracking.trackingUrl\">{{\n                  consignmentTracking?.trackingID\n                }}</a>\n              </ng-container>\n              <ng-container *ngIf=\"!consignmentTracking?.trackingUrl\">\n                <label>\n                  {{ consignmentTracking?.trackingID }}\n                </label>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n\n    <!-- tracking events -->\n    <div class=\"events modal-body\">\n      <ng-container\n        *ngFor=\"let consignmentEvent of consignmentTracking.trackingEvents\"\n      >\n        <div class=\"event-body\">\n          <div class=\"event-content\">\n            {{ consignmentEvent.eventDate | cxDate: 'medium' }}\n          </div>\n          <div class=\"event-title\">\n            {{ consignmentEvent.referenceCode }}\n          </div>\n          <div class=\"event-content\">{{ consignmentEvent.detail }}</div>\n          <div class=\"event-city\">\n            location: {{ consignmentEvent.location }}\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </ng-container>\n\n  <ng-template #noTracking>\n    <div class=\"no-tracking-heading\">\n      <div class=\"shipment-content\">\n        {{ 'orderDetails.consignmentTracking.dialog.noTracking' | cxTranslate }}\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #loading>\n    <div class=\"tracking-loading\">\n      <div class=\"header modal-header\">\n        <div class=\"title modal-title\">\n          {{\n            'orderDetails.consignmentTracking.dialog.loadingHeader'\n              | cxTranslate\n          }}\n        </div>\n        <button\n          type=\"button\"\n          class=\"close btn-dismiss\"\n          [attr.aria-label]=\"'common.close' | cxTranslate\"\n          (click)=\"activeModal.dismiss('Cross click')\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <!-- Modal Body -->\n      <div class=\"body modal-body\">\n        <div class=\"row\">\n          <div class=\"col-sm-12\">\n            <cx-spinner></cx-spinner>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n</div>\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport {\n  Consignment,\n  ConsignmentTracking,\n  UserOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../../../shared/components/modal/index';\nimport { TrackingEventsComponent } from './tracking-events/tracking-events.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-consignment-tracking',\n  templateUrl: './consignment-tracking.component.html',\n})\nexport class ConsignmentTrackingComponent implements OnInit, OnDestroy {\n  consignmentStatus: string[] = [\n    'SHIPPED',\n    'IN_TRANSIT',\n    'DELIVERY_COMPLETED',\n    'DELIVERY_REJECTED',\n    'DELIVERING',\n  ];\n  modalRef: ModalRef;\n\n  @Input()\n  consignment: Consignment;\n  @Input()\n  orderCode: string;\n  consignmentTracking$: Observable<ConsignmentTracking>;\n\n  constructor(\n    private userOrderService: UserOrderService,\n    private modalService: ModalService\n  ) {}\n\n  ngOnInit() {\n    this.consignmentTracking$ = this.userOrderService.getConsignmentTracking();\n  }\n\n  openTrackingDialog(consignment: Consignment) {\n    this.userOrderService.loadConsignmentTracking(\n      this.orderCode,\n      consignment.code\n    );\n    let modalInstance: any;\n    this.modalRef = this.modalService.open(TrackingEventsComponent, {\n      centered: true,\n      size: 'lg',\n    });\n\n    modalInstance = this.modalRef.componentInstance;\n    modalInstance.tracking$ = this.consignmentTracking$;\n    modalInstance.shipDate = consignment.statusDate;\n    modalInstance.consignmentCode = consignment.code;\n  }\n\n  ngOnDestroy(): void {\n    this.userOrderService.clearConsignmentTracking();\n  }\n}\n","<ng-container *ngIf=\"consignment && consignment.status\">\n  <div *ngIf=\"consignmentStatus.includes(consignment.status)\">\n    <button\n      (click)=\"openTrackingDialog(consignment)\"\n      class=\"btn btn-action btn-track\"\n      type=\"button\"\n    >\n      {{ 'orderDetails.consignmentTracking.action' | cxTranslate }}\n    </button>\n  </div>\n</ng-container>\n","import { Component, Input } from '@angular/core';\nimport {\n  Consignment,\n  Order,\n  OrderEntry,\n  PromotionLocation,\n} from '@spartacus/core';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-consigned-entries',\n  templateUrl: './order-consigned-entries.component.html',\n})\nexport class OrderConsignedEntriesComponent {\n  @Input() consignments: Consignment[];\n  @Input() order: Order;\n  promotionLocation: PromotionLocation = PromotionLocation.Order;\n\n  getConsignmentProducts(consignment: Consignment): OrderEntry[] {\n    const products: OrderEntry[] = [];\n    consignment.entries.forEach((element) => {\n      products.push(element.orderEntry);\n    });\n\n    return products;\n  }\n}\n","<div *ngFor=\"let consignment of consignments\" class=\"cx-list row\">\n  <div class=\"cx-list-header col-12\">\n    <div class=\"cx-list-status\">\n      <span *ngIf=\"consignment\">\n        {{ 'orderDetails.deliveryStatus_' + consignment?.status | cxTranslate }}\n      </span>\n    </div>\n    <div *ngIf=\"consignment?.statusDate\" class=\"cx-list-date\">\n      <div>{{ consignment?.statusDate | cxDate }}</div>\n    </div>\n\n    <cx-consignment-tracking\n      [orderCode]=\"order.code\"\n      [consignment]=\"consignment\"\n      *cxFeature=\"'consignmentTracking'\"\n    >\n    </cx-consignment-tracking>\n  </div>\n  <div class=\"cx-list-item col-12\">\n    <cx-cart-item-list\n      [items]=\"consignment.entries\"\n      [readonly]=\"true\"\n      [promotionLocation]=\"promotionLocation\"\n    ></cx-cart-item-list>\n  </div>\n</div>\n","export const completedValues = ['DELIVERY_COMPLETED', 'PICKUP_COMPLETE'];\nexport const cancelledValues = ['CANCELLED'];\n","import { Component, OnInit } from '@angular/core';\nimport { Consignment, PromotionLocation } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrderDetailsService } from '../order-details.service';\nimport {\n  cancelledValues,\n  completedValues,\n} from './order-consigned-entries/order-consigned-entries.model';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-details-items',\n  templateUrl: './order-detail-items.component.html',\n})\nexport class OrderDetailItemsComponent implements OnInit {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  promotionLocation: PromotionLocation = PromotionLocation.Order;\n  order$: Observable<any> = this.orderDetailsService.getOrderDetails();\n  others$: Observable<Consignment[]>;\n  completed$: Observable<Consignment[]>;\n  cancel$: Observable<Consignment[]>;\n\n  ngOnInit() {\n    this.others$ = this.getOtherStatus(...completedValues, ...cancelledValues);\n    this.completed$ = this.getExactStatus(completedValues);\n    this.cancel$ = this.getExactStatus(cancelledValues);\n  }\n\n  private getExactStatus(\n    consignmentStatus: string[]\n  ): Observable<Consignment[]> {\n    return this.order$.pipe(\n      map((order) => {\n        if (Boolean(order.consignments)) {\n          return order.consignments.filter((consignment) =>\n            consignmentStatus.includes(consignment.status)\n          );\n        }\n      })\n    );\n  }\n\n  private getOtherStatus(\n    ...consignmentStatus: string[]\n  ): Observable<Consignment[]> {\n    return this.order$.pipe(\n      map((order) => {\n        if (Boolean(order.consignments)) {\n          return order.consignments.filter(\n            (consignment) => !consignmentStatus.includes(consignment.status)\n          );\n        }\n      })\n    );\n  }\n}\n","<ng-container *ngIf=\"order$ | async as order\">\n  <ng-container\n    *ngIf=\"\n      order.consignments?.length ||\n      order.unconsignedEntries?.length ||\n      order.replenishmentOrderCode\n    \"\n  >\n    <cx-promotions\n      [promotions]=\"order.appliedOrderPromotions || []\"\n    ></cx-promotions>\n  </ng-container>\n\n  <!-- consigned entries -->\n  <ng-container *ngIf=\"order.consignments?.length\">\n    <cx-order-consigned-entries\n      *ngIf=\"others$ | async as others\"\n      [order]=\"order\"\n      [consignments]=\"others\"\n    ></cx-order-consigned-entries>\n\n    <cx-order-consigned-entries\n      *ngIf=\"completed$ | async as completed\"\n      [order]=\"order\"\n      [consignments]=\"completed\"\n    ></cx-order-consigned-entries>\n\n    <cx-order-consigned-entries\n      *ngIf=\"cancel$ | async as cancel\"\n      [order]=\"order\"\n      [consignments]=\"cancel\"\n    ></cx-order-consigned-entries>\n  </ng-container>\n\n  <!-- unconsigned entries OR any entries -->\n  <ng-container\n    *ngIf=\"\n      order?.unconsignedEntries?.length ||\n      (order?.entries && order?.replenishmentOrderCode)\n    \"\n  >\n    <div class=\"cx-list row\">\n      <div *ngIf=\"order?.statusDisplay\" class=\"cx-list-header col-12\">\n        <div class=\"cx-list-status\">\n          {{\n            'orderDetails.statusDisplay_' + order?.statusDisplay | cxTranslate\n          }}\n        </div>\n      </div>\n      <div class=\"cx-list-item col-12\">\n        <cx-cart-item-list\n          [items]=\"\n            order?.unconsignedEntries ? order.unconsignedEntries : order.entries\n          \"\n          [readonly]=\"true\"\n          [promotionLocation]=\"promotionLocation\"\n        ></cx-cart-item-list>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OrderDetailsService } from '../order-details.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-details-shipping',\n  templateUrl: './order-detail-shipping.component.html',\n})\nexport class OrderDetailShippingComponent implements OnInit {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  order$: Observable<any>;\n\n  ngOnInit() {\n    this.order$ = this.orderDetailsService.getOrderDetails();\n  }\n}\n","<ng-container *ngIf=\"order$ | async as order\">\n  <cx-order-overview [order]=\"order\"></cx-order-overview>\n</ng-container>\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OrderDetailsService } from '../order-details.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-details-totals',\n  templateUrl: './order-detail-totals.component.html',\n})\nexport class OrderDetailTotalsComponent implements OnInit {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  order$: Observable<any>;\n\n  ngOnInit() {\n    this.order$ = this.orderDetailsService.getOrderDetails();\n  }\n}\n","<ng-container *ngIf=\"order$ | async as order\">\n  <div class=\"row justify-content-end\">\n    <div class=\"cx-summary col-sm-12 col-md-6 col-lg-5 col-xl-4\">\n      <cx-order-summary [cart]=\"order\"></cx-order-summary>\n    </div>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  FeaturesConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ConsignmentTrackingComponent } from '../../../../cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/consignment-tracking.component';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport {\n  CardModule,\n  OrderOverviewModule,\n  SpinnerModule,\n} from '../../../../shared/index';\nimport { CartSharedModule } from '../../../cart/cart-shared/cart-shared.module';\nimport { PromotionsModule } from '../../../misc/promotions/promotions.module';\nimport { OrderDetailActionsComponent } from './order-detail-actions/order-detail-actions.component';\nimport { TrackingEventsComponent } from './order-detail-items/consignment-tracking/tracking-events/tracking-events.component';\nimport { OrderConsignedEntriesComponent } from './order-detail-items/order-consigned-entries/order-consigned-entries.component';\nimport { OrderDetailItemsComponent } from './order-detail-items/order-detail-items.component';\nimport { OrderDetailShippingComponent } from './order-detail-shipping/order-detail-shipping.component';\nimport { OrderDetailTotalsComponent } from './order-detail-totals/order-detail-totals.component';\nimport { OrderDetailsService } from './order-details.service';\n\nconst moduleComponents = [\n  OrderDetailActionsComponent,\n  OrderDetailItemsComponent,\n  OrderDetailTotalsComponent,\n  OrderDetailShippingComponent,\n  TrackingEventsComponent,\n  ConsignmentTrackingComponent,\n  OrderConsignedEntriesComponent,\n];\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CartSharedModule,\n    CardModule,\n    CommonModule,\n    I18nModule,\n    FeaturesConfigModule,\n    PromotionsModule,\n    OrderOverviewModule,\n    UrlModule,\n    SpinnerModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { pageLabel: 'order', cxRoute: 'orderGuest' },\n      },\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'orderDetails' },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig | FeaturesConfig>{\n      cmsComponents: {\n        AccountOrderDetailsActionsComponent: {\n          component: OrderDetailActionsComponent,\n        },\n        AccountOrderDetailsItemsComponent: {\n          component: OrderDetailItemsComponent,\n        },\n        AccountOrderDetailsTotalsComponent: {\n          component: OrderDetailTotalsComponent,\n        },\n        AccountOrderDetailsShippingComponent: {\n          component: OrderDetailShippingComponent,\n        },\n      },\n      features: {\n        consignmentTracking: '1.2',\n      },\n    }),\n    OrderDetailsService,\n  ],\n  declarations: [...moduleComponents],\n  exports: [...moduleComponents],\n})\nexport class OrderDetailsModule {}\n","import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\nimport {\n  isNotUndefined,\n  Order,\n  OrderHistoryList,\n  RoutingService,\n  TranslationService,\n  UserOrderService,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, take, tap } from 'rxjs/operators';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-history',\n  templateUrl: './order-history.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderHistoryComponent implements OnDestroy {\n  constructor(\n    protected routing: RoutingService,\n    protected userOrderService: UserOrderService,\n    protected translation: TranslationService,\n    protected userReplenishmentOrderService: UserReplenishmentOrderService\n  ) {}\n\n  private PAGE_SIZE = 5;\n  sortType: string;\n\n  orders$: Observable<OrderHistoryList> = this.userOrderService\n    .getOrderHistoryList(this.PAGE_SIZE)\n    .pipe(\n      tap((orders: OrderHistoryList) => {\n        if (orders.pagination) {\n          this.sortType = orders.pagination.sort;\n        }\n      })\n    );\n\n  hasReplenishmentOrder$: Observable<boolean> =\n    this.userReplenishmentOrderService\n      .getReplenishmentOrderDetails()\n      .pipe(map((order) => order && Object.keys(order).length !== 0));\n\n  isLoaded$: Observable<boolean> =\n    this.userOrderService.getOrderHistoryListLoaded();\n\n  /**\n   * When \"Order Return\" feature is enabled, this component becomes one tab in\n   * TabParagraphContainerComponent. This can be read from TabParagraphContainer.\n   */\n  tabTitleParam$: Observable<number> = this.orders$.pipe(\n    map((order) => order.pagination?.totalResults),\n    filter(isNotUndefined),\n    take(1)\n  );\n\n  ngOnDestroy(): void {\n    this.userOrderService.clearOrderList();\n  }\n\n  changeSortCode(sortCode: string): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode,\n      currentPage: 0,\n    };\n    this.sortType = sortCode;\n    this.fetchOrders(event);\n  }\n\n  pageChange(page: number): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode: this.sortType,\n      currentPage: page,\n    };\n    this.fetchOrders(event);\n  }\n\n  goToOrderDetail(order: Order): void {\n    this.routing.go({\n      cxRoute: 'orderDetails',\n      params: order,\n    });\n  }\n\n  getSortLabels(): Observable<{ byDate: string; byOrderNumber: string }> {\n    return combineLatest([\n      this.translation.translate('sorting.date'),\n      this.translation.translate('sorting.orderNumber'),\n    ]).pipe(\n      map(([textByDate, textByOrderNumber]) => {\n        return {\n          byDate: textByDate,\n          byOrderNumber: textByOrderNumber,\n        };\n      })\n    );\n  }\n\n  private fetchOrders(event: { sortCode: string; currentPage: number }): void {\n    this.userOrderService.loadOrderList(\n      this.PAGE_SIZE,\n      event.currentPage,\n      event.sortCode\n    );\n  }\n}\n","<ng-container\n  *ngIf=\"{\n    orderHistory: orders$ | async,\n    replenishmentOrder: hasReplenishmentOrder$ | async\n  } as type\"\n>\n  <ng-container *ngIf=\"type.orderHistory\">\n    <div [ngClass]=\"type.replenishmentOrder ? '' : 'container'\">\n      <!-- HEADER -->\n      <div\n        [ngClass]=\"\n          type.replenishmentOrder\n            ? 'cx-replenishment-details-order-history-header'\n            : 'cx-order-history-header'\n        \"\n      >\n        <h4 *ngIf=\"type.replenishmentOrder\">\n          {{ 'orderHistory.replenishmentHistory' | cxTranslate }}\n        </h4>\n        <h3 *ngIf=\"!type.replenishmentOrder\">\n          {{ 'orderHistory.orderHistory' | cxTranslate }}\n        </h3>\n      </div>\n\n      <!-- BODY -->\n      <div class=\"cx-order-history-body\">\n        <ng-container\n          *ngIf=\"type.orderHistory.pagination.totalResults > 0; else noOrder\"\n        >\n          <!-- Select Form and Pagination Top -->\n          <div class=\"cx-order-history-sort top row\">\n            <label\n              class=\"\n                cx-order-history-form-group\n                form-group\n                col-sm-12 col-md-4 col-lg-4\n              \"\n              ><span>\n                {{ 'orderHistory.sortBy' | cxTranslate }}\n              </span>\n              <cx-sorting\n                [sortOptions]=\"type.orderHistory.sorts\"\n                [sortLabels]=\"getSortLabels() | async\"\n                (sortListEvent)=\"changeSortCode($event)\"\n                [selectedOption]=\"type.orderHistory.pagination.sort\"\n                placeholder=\"{{ 'orderHistory.sortBy' | cxTranslate }}\"\n              ></cx-sorting>\n            </label>\n            <div\n              *ngIf=\"type.orderHistory.pagination.totalPages > 1\"\n              class=\"cx-order-history-pagination\"\n            >\n              <cx-pagination\n                [pagination]=\"type.orderHistory.pagination\"\n                (viewPageEvent)=\"pageChange($event)\"\n              ></cx-pagination>\n            </div>\n          </div>\n          <!-- TABLE -->\n          <table class=\"table cx-order-history-table\">\n            <thead class=\"cx-order-history-thead-mobile\">\n              <th scope=\"col\">\n                {{ 'orderHistory.orderId' | cxTranslate }}\n              </th>\n              <th scope=\"col\">{{ 'orderHistory.date' | cxTranslate }}</th>\n              <th scope=\"col\">\n                {{ 'orderHistory.status' | cxTranslate }}\n              </th>\n              <th scope=\"col\">{{ 'orderHistory.total' | cxTranslate }}</th>\n            </thead>\n            <tbody>\n              <tr\n                *ngFor=\"let order of type.orderHistory.orders\"\n                (click)=\"goToOrderDetail(order)\"\n              >\n                <td class=\"cx-order-history-code\">\n                  <div class=\"d-md-none cx-order-history-label\">\n                    {{ 'orderHistory.orderId' | cxTranslate }}\n                  </div>\n                  <a\n                    [routerLink]=\"\n                      {\n                        cxRoute: 'orderDetails',\n                        params: order\n                      } | cxUrl\n                    \"\n                    class=\"cx-order-history-value\"\n                  >\n                    {{ order?.code }}</a\n                  >\n                </td>\n                <td class=\"cx-order-history-placed\">\n                  <div class=\"d-md-none cx-order-history-label\">\n                    {{ 'orderHistory.date' | cxTranslate }}\n                  </div>\n                  <a\n                    [routerLink]=\"\n                      {\n                        cxRoute: 'orderDetails',\n                        params: order\n                      } | cxUrl\n                    \"\n                    class=\"cx-order-history-value\"\n                    >{{ order?.placed | cxDate: 'longDate' }}</a\n                  >\n                </td>\n                <td class=\"cx-order-history-status\">\n                  <div class=\"d-md-none cx-order-history-label\">\n                    {{ 'orderHistory.status' | cxTranslate }}\n                  </div>\n                  <a\n                    [routerLink]=\"\n                      {\n                        cxRoute: 'orderDetails',\n                        params: order\n                      } | cxUrl\n                    \"\n                    class=\"cx-order-history-value\"\n                  >\n                    {{\n                      'orderDetails.statusDisplay_' + order?.statusDisplay\n                        | cxTranslate\n                    }}</a\n                  >\n                </td>\n                <td class=\"cx-order-history-total\">\n                  <div class=\"d-md-none cx-order-history-label\">\n                    {{ 'orderHistory.total' | cxTranslate }}\n                  </div>\n                  <a\n                    [routerLink]=\"\n                      {\n                        cxRoute: 'orderDetails',\n                        params: order\n                      } | cxUrl\n                    \"\n                    class=\"cx-order-history-value\"\n                  >\n                    {{ order?.total.formattedValue }}</a\n                  >\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <!-- Select Form and Pagination Bottom -->\n          <div class=\"cx-order-history-sort bottom row\">\n            <div\n              *ngIf=\"type.orderHistory.pagination.totalPages > 1\"\n              class=\"cx-order-history-pagination\"\n            >\n              <cx-pagination\n                [pagination]=\"type.orderHistory.pagination\"\n                (viewPageEvent)=\"pageChange($event)\"\n              ></cx-pagination>\n            </div>\n          </div>\n        </ng-container>\n\n        <!-- NO ORDER CONTAINER -->\n        <ng-template #noOrder>\n          <div\n            *ngIf=\"isLoaded$ | async\"\n            [ngClass]=\"\n              type.replenishmentOrder\n                ? 'cx-replenishment-details-order-history-no-order row'\n                : 'cx-order-history-no-order row'\n            \"\n          >\n            <div\n              [ngClass]=\"\n                type.replenishmentOrder ? '' : 'col-sm-12 col-md-6 col-lg-4'\n              \"\n            >\n              <ng-container *ngIf=\"type.replenishmentOrder; else otherOrder\">\n                <div>{{ 'orderHistory.notFound' | cxTranslate }}</div>\n              </ng-container>\n\n              <ng-template #otherOrder>\n                <div>{{ 'orderHistory.noOrders' | cxTranslate }}</div>\n                <a\n                  [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n                  routerLinkActive=\"active\"\n                  class=\"btn btn-primary btn-block\"\n                  >{{ 'orderHistory.startShopping' | cxTranslate }}</a\n                >\n              </ng-template>\n            </div>\n          </div>\n        </ng-template>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport { ListNavigationModule } from '../../../../shared/components/list-navigation/list-navigation.module';\nimport { OrderHistoryComponent } from './order-history.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'orders' },\n      },\n    ]),\n    RouterModule,\n    FormsModule,\n    NgSelectModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n  ],\n  declarations: [OrderHistoryComponent],\n  exports: [OrderHistoryComponent],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountOrderHistoryComponent: {\n          component: OrderHistoryComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n})\nexport class OrderHistoryModule {}\n","import { LayoutConfig } from '../../../../layout/config/layout-config';\nimport { DIALOG_TYPE } from '../../../../layout/launch-dialog/index';\nimport { ReplenishmentOrderCancellationDialogComponent } from '../../../../shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\nexport const defaultReplenishmentOrderCancellationLayoutConfig: LayoutConfig = {\n  launch: {\n    REPLENISHMENT_ORDER: {\n      inline: true,\n      component: ReplenishmentOrderCancellationDialogComponent,\n      dialogType: DIALOG_TYPE.DIALOG,\n    },\n  },\n};\n","import {\n  Component,\n  ElementRef,\n  OnDestroy,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  ReplenishmentOrder,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { LAUNCH_CALLER } from '../../../../../layout/launch-dialog/config/launch-config';\nimport { LaunchDialogService } from '../../../../../layout/launch-dialog/services/launch-dialog.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-replenishment-order-cancellation',\n  templateUrl: './replenishment-order-cancellation.component.html',\n})\nexport class ReplenishmentOrderCancellationComponent implements OnDestroy {\n  @ViewChild('element') element: ElementRef;\n\n  private subscription = new Subscription();\n\n  replenishmentOrder$: Observable<ReplenishmentOrder> =\n    this.userReplenishmentOrderService.getReplenishmentOrderDetails();\n\n  constructor(\n    protected userReplenishmentOrderService: UserReplenishmentOrderService,\n    protected vcr: ViewContainerRef,\n    protected launchDialogService: LaunchDialogService\n  ) {}\n\n  openDialog() {\n    const dialog = this.launchDialogService.openDialog(\n      LAUNCH_CALLER.REPLENISHMENT_ORDER,\n      this.element,\n      this.vcr\n    );\n\n    if (dialog) {\n      this.subscription.add(dialog.pipe(take(1)).subscribe());\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.userReplenishmentOrderService.clearReplenishmentOrderDetails();\n  }\n}\n","<div class=\"cx-cancel-replenishment-btns row\">\n  <div class=\"col-xs-12 col-md-5 col-lg-4\">\n    <a\n      class=\"btn btn-block btn-action\"\n      [routerLink]=\"\n        {\n          cxRoute: 'replenishmentOrders'\n        } | cxUrl\n      \"\n    >\n      {{ 'common.back' | cxTranslate }}\n    </a>\n  </div>\n  <div\n    *ngIf=\"(replenishmentOrder$ | async).active\"\n    class=\"col-xs-12 col-md-5 col-lg-4\"\n  >\n    <button #element class=\"btn btn-block btn-action\" (click)=\"openDialog()\">\n      {{ 'orderDetails.cancelReplenishment.title' | cxTranslate }}\n    </button>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport {\n  ReplenishmentOrder,\n  RoutingService,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  map,\n  shareReplay,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReplenishmentOrderDetailsService {\n  protected replenishmentOrderCode$ = this.routingService.getRouterState().pipe(\n    map((routingData) => routingData.state.params.replenishmentOrderCode),\n    distinctUntilChanged()\n  );\n\n  protected replenishmentOrderLoad$ = this.replenishmentOrderCode$.pipe(\n    tap((replenishmentOrderCode: string) => {\n      if (Boolean(replenishmentOrderCode)) {\n        this.userReplenishmentOrderService.loadReplenishmentOrderDetails(\n          replenishmentOrderCode\n        );\n      } else {\n        this.userReplenishmentOrderService.clearReplenishmentOrderDetails();\n      }\n    }),\n    shareReplay({ bufferSize: 1, refCount: true })\n  );\n\n  constructor(\n    protected routingService: RoutingService,\n    protected userReplenishmentOrderService: UserReplenishmentOrderService\n  ) {}\n\n  getOrderDetails(): Observable<ReplenishmentOrder> {\n    return this.replenishmentOrderLoad$.pipe(\n      switchMap((_) =>\n        this.userReplenishmentOrderService.getReplenishmentOrderDetails()\n      )\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport {\n  CardModule,\n  ListNavigationModule,\n  ReplenishmentOrderCancellationDialogModule,\n  SpinnerModule,\n} from '../../../../shared/index';\nimport { CartSharedModule } from '../../../cart/cart-shared/cart-shared.module';\nimport { PromotionsModule } from '../../../misc/promotions/promotions.module';\nimport { OrderDetailItemsComponent } from '../order-details/order-detail-items/order-detail-items.component';\nimport { OrderDetailShippingComponent } from '../order-details/order-detail-shipping/order-detail-shipping.component';\nimport { OrderDetailTotalsComponent } from '../order-details/order-detail-totals/order-detail-totals.component';\nimport { OrderDetailsService } from '../order-details/order-details.service';\nimport { OrderHistoryComponent } from '../order-history/order-history.component';\nimport { defaultReplenishmentOrderCancellationLayoutConfig } from './default-replenishment-order-cancellation-layout.config';\nimport { ReplenishmentOrderCancellationComponent } from './replenishment-order-cancellation/replenishment-order-cancellation.component';\nimport { ReplenishmentOrderDetailsService } from './replenishment-order-details.service';\n\nconst moduleComponents = [ReplenishmentOrderCancellationComponent];\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CartSharedModule,\n    CardModule,\n    CommonModule,\n    I18nModule,\n    PromotionsModule,\n    UrlModule,\n    ReplenishmentOrderCancellationDialogModule,\n    SpinnerModule,\n    ListNavigationModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'replenishmentDetails' },\n      },\n    ]),\n  ],\n  providers: [\n    provideConfig(defaultReplenishmentOrderCancellationLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReplenishmentDetailItemsComponent: {\n          component: OrderDetailItemsComponent,\n          providers: [\n            {\n              provide: OrderDetailsService,\n              useExisting: ReplenishmentOrderDetailsService,\n            },\n          ],\n        },\n        ReplenishmentDetailTotalsComponent: {\n          component: OrderDetailTotalsComponent,\n          providers: [\n            {\n              provide: OrderDetailsService,\n              useExisting: ReplenishmentOrderDetailsService,\n            },\n          ],\n        },\n        ReplenishmentDetailShippingComponent: {\n          component: OrderDetailShippingComponent,\n          providers: [\n            {\n              provide: OrderDetailsService,\n              useExisting: ReplenishmentOrderDetailsService,\n            },\n          ],\n        },\n        ReplenishmentDetailActionsComponent: {\n          component: ReplenishmentOrderCancellationComponent,\n        },\n        ReplenishmentDetailOrderHistoryComponent: {\n          component: OrderHistoryComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [...moduleComponents],\n  exports: [...moduleComponents],\n})\nexport class ReplenishmentOrderDetailsModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  OnDestroy,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  ReplenishmentOrder,\n  ReplenishmentOrderList,\n  RoutingService,\n  TranslationService,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, take, tap } from 'rxjs/operators';\nimport { LAUNCH_CALLER } from '../../../../layout/launch-dialog/config/launch-config';\nimport { LaunchDialogService } from '../../../../layout/launch-dialog/services/launch-dialog.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-replenishment-order-history',\n  templateUrl: './replenishment-order-history.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReplenishmentOrderHistoryComponent implements OnDestroy {\n  @ViewChild('element') element: ElementRef;\n\n  private subscription = new Subscription();\n\n  private PAGE_SIZE = 5;\n  sortType: string;\n\n  replenishmentOrders$: Observable<ReplenishmentOrderList> =\n    this.userReplenishmentOrderService\n      .getReplenishmentOrderHistoryList(this.PAGE_SIZE)\n      .pipe(\n        tap((replenishmentOrders: ReplenishmentOrderList) => {\n          if (replenishmentOrders.pagination) {\n            this.sortType = replenishmentOrders.pagination.sort;\n          }\n        })\n      );\n\n  isLoaded$: Observable<boolean> =\n    this.userReplenishmentOrderService.getReplenishmentOrderHistoryListSuccess();\n\n  constructor(\n    protected routing: RoutingService,\n    protected userReplenishmentOrderService: UserReplenishmentOrderService,\n    protected translation: TranslationService,\n    protected vcr: ViewContainerRef,\n    protected launchDialogService: LaunchDialogService\n  ) {}\n\n  changeSortCode(sortCode: string): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode,\n      currentPage: 0,\n    };\n    this.sortType = sortCode;\n    this.fetchReplenishmentOrders(event);\n  }\n\n  pageChange(page: number): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode: this.sortType,\n      currentPage: page,\n    };\n    this.fetchReplenishmentOrders(event);\n  }\n\n  goToOrderDetail(order: ReplenishmentOrder): void {\n    this.routing.go({\n      cxRoute: 'replenishmentDetails',\n      params: order,\n    });\n  }\n\n  getSortLabels(): Observable<{\n    byDate: string;\n    byReplenishmentNumber: string;\n    byNextOrderDate: string;\n  }> {\n    return combineLatest([\n      this.translation.translate('sorting.date'),\n      this.translation.translate('sorting.replenishmentNumber'),\n      this.translation.translate('sorting.nextOrderDate'),\n    ]).pipe(\n      map(([textByDate, textByOrderNumber, textbyNextOrderDate]) => {\n        return {\n          byDate: textByDate,\n          byReplenishmentNumber: textByOrderNumber,\n          byNextOrderDate: textbyNextOrderDate,\n        };\n      })\n    );\n  }\n\n  openDialog(event: Event, replenishmentOrderCode: string): void {\n    const dialog = this.launchDialogService.openDialog(\n      LAUNCH_CALLER.REPLENISHMENT_ORDER,\n      this.element,\n      this.vcr,\n      replenishmentOrderCode\n    );\n\n    if (dialog) {\n      this.subscription.add(dialog.pipe(take(1)).subscribe());\n    }\n    event.stopPropagation();\n  }\n\n  private fetchReplenishmentOrders(event: {\n    sortCode: string;\n    currentPage: number;\n  }): void {\n    this.userReplenishmentOrderService.loadReplenishmentOrderList(\n      this.PAGE_SIZE,\n      event.currentPage,\n      event.sortCode\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.userReplenishmentOrderService.clearReplenishmentOrderList();\n  }\n}\n","<ng-container *ngIf=\"replenishmentOrders$ | async as replenishmentOrders\">\n  <div class=\"container\">\n    <!-- HEADER -->\n    <div class=\"cx-replenishment-order-history-header\">\n      <h3>\n        {{ 'orderHistory.replenishmentOrderHistory' | cxTranslate }}\n      </h3>\n    </div>\n\n    <!-- BODY -->\n    <div class=\"cx-replenishment-order-history-body\">\n      <ng-container\n        *ngIf=\"replenishmentOrders.pagination.totalResults > 0; else noOrder\"\n      >\n        <!-- Select Form and Pagination Top -->\n        <div class=\"cx-replenishment-order-history-sort top row\">\n          <label\n            class=\"\n              cx-replenishment-order-history-form-group\n              form-group\n              col-sm-12 col-md-4 col-lg-4\n            \"\n          >\n            <span>{{ 'orderHistory.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"replenishmentOrders.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"replenishmentOrders.pagination.sort\"\n              placeholder=\"{{ 'orderHistory.sortBy' | cxTranslate }}\"\n            ></cx-sorting>\n          </label>\n          <div\n            class=\"cx-replenishment-order-history-pagination\"\n            *ngIf=\"replenishmentOrders.pagination.totalPages > 1\"\n          >\n            <cx-pagination\n              [pagination]=\"replenishmentOrders.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <!-- TABLE -->\n        <table class=\"table cx-replenishment-order-history-table\">\n          <thead class=\"cx-replenishment-order-history-thead-mobile\">\n            <th scope=\"col\">\n              <span class=\"cx-replenishment-order-history-ellipses\">\n                {{ 'orderHistory.replenishmentOrderId' | cxTranslate }}\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"cx-replenishment-order-history-ellipses\">\n                {{ 'orderHistory.purchaseOrderNumber' | cxTranslate }}\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"cx-replenishment-order-history-ellipses\">\n                {{ 'orderHistory.startOn' | cxTranslate }}\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"cx-replenishment-order-history-ellipses\">\n                {{ 'orderHistory.frequency' | cxTranslate }}\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"cx-replenishment-order-history-ellipses\">\n                {{ 'orderHistory.nextOrderDate' | cxTranslate }}\n              </span>\n            </th>\n            <th scope=\"col\" class=\"cx-replenishment-order-history-total\">\n              <span class=\"cx-replenishment-order-history-ellipses\">\n                {{ 'orderHistory.total' | cxTranslate }}\n              </span>\n            </th>\n            <th scope=\"col\"></th>\n          </thead>\n          <tbody>\n            <tr\n              *ngFor=\"let order of replenishmentOrders.replenishmentOrders\"\n              (click)=\"goToOrderDetail(order)\"\n            >\n              <td class=\"cx-replenishment-order-history-code\">\n                <div class=\"d-md-none cx-replenishment-order-history-label\">\n                  {{ 'orderHistory.replenishmentOrderId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'replenishmentDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-replenishment-order-history-value\"\n                >\n                  {{ order?.replenishmentOrderCode }}</a\n                >\n              </td>\n              <td>\n                <div class=\"d-md-none cx-replenishment-order-history-label\">\n                  {{ 'orderHistory.purchaseOrderNumber' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'replenishmentDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"\n                    cx-replenishment-order-history-value\n                    cx-purchase-order-number\n                  \"\n                >\n                  {{\n                    order?.purchaseOrderNumber?.length > 0\n                      ? order?.purchaseOrderNumber\n                      : ('orderHistory.emptyPurchaseOrderId' | cxTranslate)\n                  }}\n                </a>\n              </td>\n              <td>\n                <div class=\"d-md-none cx-replenishment-order-history-label\">\n                  {{ 'orderHistory.startOn' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'replenishmentDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-replenishment-order-history-value\"\n                >\n                  {{ order?.firstDate | cxDate: 'M/d/yyyy' }}</a\n                >\n              </td>\n              <td class=\"cx-replenishment-order-history-frequency\">\n                <div class=\"d-md-none cx-replenishment-order-history-label\">\n                  {{ 'orderHistory.frequency' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'replenishmentDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-replenishment-order-history-value\"\n                >\n                  {{ order?.trigger.displayTimeTable | slice: 0:-12 }}\n                </a>\n              </td>\n              <td>\n                <div class=\"d-md-none cx-replenishment-order-history-label\">\n                  {{ 'orderHistory.nextOrderDate' | cxTranslate }}\n                </div>\n\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'replenishmentDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"\n                    cx-replenishment-order-history-value cx-next-order-date\n                  \"\n                >\n                  {{\n                    order?.active\n                      ? (order?.trigger.activationTime | cxDate: 'M/d/yyyy')\n                      : ('orderHistory.cancelled' | cxTranslate)\n                  }}\n                </a>\n              </td>\n              <td class=\"cx-replenishment-order-history-total\">\n                <div class=\"d-md-none cx-replenishment-order-history-label\">\n                  {{ 'orderHistory.total' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'replenishmentDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-replenishment-order-history-value\"\n                >\n                  {{ order?.totalPriceWithTax.formattedValue }}</a\n                >\n              </td>\n              <td class=\"cx-replenishment-order-history-cancel\">\n                <div\n                  class=\"d-md-none cx-replenishment-order-history-label\"\n                ></div>\n                <button\n                  (click)=\"openDialog($event, order?.replenishmentOrderCode)\"\n                  class=\"cx-order-cancel btn btn-link\"\n                  #element\n                  *ngIf=\"order?.active\"\n                >\n                  {{ 'orderHistory.cancel' | cxTranslate }}\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <!-- Select Form and Pagination Bottom -->\n        <div class=\"cx-replenishment-order-history-sort bottom row\">\n          <div class=\"cx-replenishment-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"replenishmentOrders.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n              *ngIf=\"replenishmentOrders.pagination.totalPages > 1\"\n            ></cx-pagination>\n          </div>\n        </div>\n      </ng-container>\n\n      <!-- NO ORDER CONTAINER -->\n      <ng-template #noOrder>\n        <div\n          class=\"cx-replenishment-order-history-no-order row\"\n          *ngIf=\"isLoaded$ | async\"\n        >\n          <div class=\"col-sm-12 col-md-6 col-lg-4\">\n            <div>{{ 'orderHistory.noReplenishmentOrders' | cxTranslate }}</div>\n            <a\n              [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n              routerLinkActive=\"active\"\n              class=\"btn btn-primary btn-block\"\n              >{{ 'orderHistory.startShopping' | cxTranslate }}</a\n            >\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport { ListNavigationModule } from '../../../../shared/components/list-navigation/list-navigation.module';\nimport { defaultReplenishmentOrderCancellationLayoutConfig } from '../replenishment-order-details/default-replenishment-order-cancellation-layout.config';\nimport { ReplenishmentOrderHistoryComponent } from './replenishment-order-history.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'replenishmentOrders' },\n      },\n    ]),\n    RouterModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n  ],\n  providers: [\n    provideConfig(defaultReplenishmentOrderCancellationLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountReplenishmentHistoryComponent: {\n          component: ReplenishmentOrderHistoryComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ReplenishmentOrderHistoryComponent],\n  exports: [ReplenishmentOrderHistoryComponent],\n})\nexport class ReplenishmentOrderHistoryModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  OrderReturnRequestService,\n  RoutingService,\n  ReturnRequest,\n  GlobalMessageService,\n  GlobalMessageType,\n} from '@spartacus/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { filter, map, tap, distinctUntilChanged } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReturnRequestService {\n  constructor(\n    protected routingService: RoutingService,\n    protected returnRequestService: OrderReturnRequestService,\n    protected globalMessageService: GlobalMessageService\n  ) {}\n\n  get isCancelling$(): Observable<boolean> {\n    return this.returnRequestService.getCancelReturnRequestLoading();\n  }\n\n  get isCancelSuccess$(): Observable<boolean> {\n    return this.returnRequestService.getCancelReturnRequestSuccess();\n  }\n\n  getReturnRequest(): Observable<ReturnRequest> {\n    return combineLatest([\n      this.routingService.getRouterState(),\n      this.returnRequestService.getOrderReturnRequest(),\n      this.returnRequestService.getReturnRequestLoading(),\n    ]).pipe(\n      map(([routingState, returnRequest, isLoading]) => [\n        routingState.state.params['returnCode'],\n        returnRequest,\n        isLoading,\n      ]),\n      filter(([returnCode]) => Boolean(returnCode)),\n      tap(([returnCode, returnRequest, isLoading]) => {\n        if (\n          (returnRequest === undefined || returnRequest.rma !== returnCode) &&\n          !isLoading\n        ) {\n          this.returnRequestService.loadOrderReturnRequestDetail(returnCode);\n        }\n      }),\n      map(([_, returnRequest]) => returnRequest),\n      filter(Boolean),\n      distinctUntilChanged()\n    );\n  }\n\n  clearReturnRequest(): void {\n    this.returnRequestService.clearOrderReturnRequestDetail();\n  }\n\n  cancelReturnRequest(returnRequestCode: string): void {\n    this.returnRequestService.cancelOrderReturnRequest(returnRequestCode, {\n      status: 'CANCELLING',\n    });\n  }\n\n  cancelSuccess(rma: string): void {\n    this.returnRequestService.resetCancelReturnRequestProcessState();\n    this.globalMessageService.add(\n      {\n        key: 'returnRequest.cancelSuccess',\n        params: { rma },\n      },\n      GlobalMessageType.MSG_TYPE_CONFIRMATION\n    );\n    this.routingService.go({\n      cxRoute: 'orders',\n    });\n  }\n\n  backToList(): void {\n    this.routingService.go(\n      { cxRoute: 'orders' },\n      {\n        state: {\n          activeTab: 1,\n        },\n      }\n    );\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { ReturnRequest } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ReturnRequestService } from '../return-request.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-return-request-items',\n  templateUrl: './return-request-items.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnRequestItemsComponent {\n  constructor(protected returnRequestService: ReturnRequestService) {}\n\n  returnRequest$: Observable<ReturnRequest> =\n    this.returnRequestService.getReturnRequest();\n}\n","<ng-container *ngIf=\"returnRequest$ | async as returnRequest\">\n  <div class=\"d-none d-md-block d-lg-block d-xl-block\">\n    <div class=\"cx-item-list-header row\">\n      <div class=\"cx-item-list-desc col-md-5 col-lg-5 col-xl-6\">\n        {{ 'returnRequest.item' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-price col-md-2 col-lg-2 col-xl-2\">\n        {{ 'returnRequest.itemPrice' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-qty col-md-3 col-lg-3 col-xl-2\">\n        {{ 'returnRequest.returnQty' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n        {{ 'returnRequest.total' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n\n  <div\n    class=\"cx-item-list-row\"\n    *ngFor=\"let returnEntry of returnRequest.returnEntries; let i = index\"\n  >\n    <div class=\"cx-item-list-items\">\n      <div class=\"row\">\n        <!-- Item Image -->\n        <div class=\"col-2 cx-image-container\">\n          <cx-media\n            [container]=\"returnEntry.orderEntry?.product.images?.PRIMARY\"\n            format=\"thumbnail\"\n          ></cx-media>\n        </div>\n        <!-- Item Information -->\n        <div class=\"cx-info col-10\">\n          <div class=\"cx-info-container row\">\n            <!-- Item Description -->\n            <div class=\"col-md-3 col-lg-4 col-xl-5\">\n              <div *ngIf=\"returnEntry.orderEntry?.product.name\" class=\"cx-name\">\n                {{ returnEntry.orderEntry?.product.name }}\n              </div>\n              <div *ngIf=\"returnEntry.orderEntry?.product.code\" class=\"cx-code\">\n                {{ 'cartItems.id' | cxTranslate }}\n                {{ returnEntry.orderEntry?.product.code }}\n              </div>\n              <!-- Variants -->\n              <div\n                *ngFor=\"\n                  let variant of (returnEntry.orderEntry?.product\n                    .baseOptions)[0]?.selected?.variantOptionQualifiers\n                \"\n                class=\"cx-property\"\n              >\n                <div class=\"cx-label\" *ngIf=\"variant.name\">\n                  {{ variant.name }}:\n                </div>\n                <div class=\"cx-value\" *ngIf=\"variant.value\">\n                  {{ variant.value }}\n                </div>\n              </div>\n            </div>\n            <!-- Item Price -->\n            <div\n              *ngIf=\"returnEntry.orderEntry?.basePrice\"\n              class=\"cx-price col-md-3 col-lg-2 col-xl-2\"\n            >\n              <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n                {{ 'returnRequest.itemPrice' | cxTranslate }}\n              </div>\n              <div class=\"cx-value\">\n                {{ returnEntry.orderEntry?.basePrice?.formattedValue }}\n              </div>\n            </div>\n            <!-- return Quantity -->\n            <div class=\"cx-quantity col-md-3 col-lg-3 col-xl-3\">\n              <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n                {{ 'returnRequest.returnQty' | cxTranslate }}\n              </div>\n              <div class=\"cx-value\">\n                {{ returnEntry.expectedQuantity }}\n              </div>\n            </div>\n            <!-- Total Price -->\n            <div class=\"cx-total col-md-3 col-lg-3 col-xl-2\">\n              <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n                {{ 'returnRequest.total' | cxTranslate }}\n              </div>\n              <div class=\"cx-value\">\n                {{ returnEntry.refundAmount?.formattedValue }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ReturnRequest } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ReturnRequestService } from '../return-request.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-return-request-overview',\n  templateUrl: './return-request-overview.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnRequestOverviewComponent implements OnInit, OnDestroy {\n  constructor(protected returnRequestService: ReturnRequestService) {}\n\n  rma: string;\n  subscription: Subscription;\n\n  returnRequest$: Observable<ReturnRequest> = this.returnRequestService\n    .getReturnRequest()\n    .pipe(tap((returnRequest) => (this.rma = returnRequest.rma)));\n\n  isCancelling$ = this.returnRequestService.isCancelling$;\n\n  ngOnInit(): void {\n    this.subscription = this.returnRequestService.isCancelSuccess$.subscribe(\n      (success) => {\n        if (success) {\n          this.returnRequestService.cancelSuccess(this.rma);\n        }\n      }\n    );\n  }\n\n  cancelReturn(returnRequestCode: string): void {\n    this.returnRequestService.cancelReturnRequest(returnRequestCode);\n  }\n\n  back(): void {\n    this.returnRequestService.backToList();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","<ng-container *ngIf=\"returnRequest$ | async as returnRequest\">\n  <div class=\"cx-nav row\">\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <button (click)=\"back()\" class=\"btn btn-block btn-action\">\n        {{ 'common.back' | cxTranslate }}\n      </button>\n    </div>\n\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <button\n        *ngIf=\"returnRequest.cancellable\"\n        class=\"btn btn-block btn-primary\"\n        (click)=\"cancelReturn(returnRequest.rma)\"\n        [disabled]=\"isCancelling$ | async\"\n      >\n        {{ 'returnRequest.cancel' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n  <div class=\"cx-header row\">\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'returnRequest.returnRequestId' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">{{ returnRequest.rma }}</div>\n    </div>\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'returnRequest.orderCode' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">{{ returnRequest.order?.code }}</div>\n    </div>\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'returnRequest.status' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">\n        {{\n          'returnRequestList.statusDisplay_' + returnRequest?.status\n            | cxTranslate\n        }}\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\nimport { ReturnRequest } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ReturnRequestService } from '../return-request.service';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-return-request-totals',\n  templateUrl: './return-request-totals.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnRequestTotalsComponent implements OnDestroy {\n  constructor(protected returnRequestService: ReturnRequestService) {}\n\n  returnRequest$: Observable<ReturnRequest> =\n    this.returnRequestService.getReturnRequest();\n\n  ngOnDestroy() {\n    this.returnRequestService.clearReturnRequest();\n  }\n}\n","<ng-container *ngIf=\"returnRequest$ | async as returnRequest\">\n  <div class=\"row justify-content-end\">\n    <div class=\"cx-summary col-sm-12 col-md-6 col-lg-5 col-xl-4\">\n      <h4>{{ 'returnRequest.summary' | cxTranslate }}</h4>\n      <div class=\"cx-summary-row\">\n        <div class=\"col-6 cx-summary-label\">\n          {{ 'returnRequest.subtotal' | cxTranslate }}\n        </div>\n        <div class=\"col-6 cx-summary-amount\">\n          {{ returnRequest.subTotal?.formattedValue }}\n        </div>\n      </div>\n      <div class=\"cx-summary-row\">\n        <div class=\"col-6 cx-summary-label\">\n          {{ 'returnRequest.deliveryCode' | cxTranslate }}\n        </div>\n        <div class=\"col-6 cx-summary-amount\">\n          {{ returnRequest.deliveryCost?.formattedValue }}\n        </div>\n      </div>\n      <div class=\"cx-summary-row cx-summary-total\">\n        <div class=\"col-6 cx-summary-label\">\n          {{ 'returnRequest.estimatedRefund' | cxTranslate }}\n        </div>\n        <div class=\"col-6 cx-summary-amount\">\n          {{ returnRequest.totalPrice?.formattedValue }}\n        </div>\n      </div>\n      <div class=\"cx-summary-row cx-footnote\">\n        {{ 'returnRequest.note' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport { MediaModule } from '../../../../shared/index';\nimport { ReturnRequestItemsComponent } from './return-request-items/return-request-items.component';\nimport { ReturnRequestOverviewComponent } from './return-request-overview/return-request-overview.component';\nimport { ReturnRequestTotalsComponent } from './return-request-totals/return-request-totals.component';\n\nconst components = [\n  ReturnRequestOverviewComponent,\n  ReturnRequestItemsComponent,\n  ReturnRequestTotalsComponent,\n];\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'returnRequestDetails' },\n      },\n    ]),\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    MediaModule,\n    FeaturesConfigModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturnRequestOverviewComponent: {\n          component: ReturnRequestOverviewComponent,\n        },\n        ReturnRequestItemsComponent: {\n          component: ReturnRequestItemsComponent,\n        },\n        ReturnRequestTotalsComponent: {\n          component: ReturnRequestTotalsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [...components],\n  exports: [...components],\n})\nexport class ReturnRequestDetailModule {}\n","import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\nimport {\n  isNotUndefined,\n  OrderReturnRequestService,\n  ReturnRequestList,\n  TranslationService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, take, tap } from 'rxjs/operators';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@Component({\n  selector: 'cx-order-return-request-list',\n  templateUrl: './order-return-request-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderReturnRequestListComponent implements OnDestroy {\n  constructor(\n    private returnRequestService: OrderReturnRequestService,\n    private translation: TranslationService\n  ) {}\n\n  private PAGE_SIZE = 5;\n  sortType: string;\n\n  returnRequests$: Observable<ReturnRequestList> = this.returnRequestService\n    .getOrderReturnRequestList(this.PAGE_SIZE)\n    .pipe(\n      tap((requestList: ReturnRequestList) => {\n        if (requestList.pagination) {\n          this.sortType = requestList.pagination.sort;\n        }\n      })\n    );\n\n  /**\n   * When \"Order Return\" feature is enabled, this component becomes one tab in\n   * TabParagraphContainerComponent. This can be read from TabParagraphContainer.\n   */\n  tabTitleParam$: Observable<number> = this.returnRequests$.pipe(\n    map((returnRequests) => returnRequests.pagination?.totalResults),\n    filter(isNotUndefined),\n    take(1)\n  );\n\n  ngOnDestroy(): void {\n    this.returnRequestService.clearOrderReturnRequestList();\n  }\n\n  changeSortCode(sortCode: string): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode,\n      currentPage: 0,\n    };\n    this.sortType = sortCode;\n    this.fetchReturnRequests(event);\n  }\n\n  pageChange(page: number): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode: this.sortType,\n      currentPage: page,\n    };\n    this.fetchReturnRequests(event);\n  }\n\n  getSortLabels(): Observable<{ byDate: string; byRMA: string }> {\n    return combineLatest([\n      this.translation.translate('sorting.date'),\n      this.translation.translate('sorting.rma'),\n    ]).pipe(\n      map(([textByDate, textByRma]) => {\n        return {\n          byDate: textByDate,\n          byRMA: textByRma,\n        };\n      })\n    );\n  }\n\n  private fetchReturnRequests(event: {\n    sortCode: string;\n    currentPage: number;\n  }): void {\n    this.returnRequestService.loadOrderReturnRequestList(\n      this.PAGE_SIZE,\n      event.currentPage,\n      event.sortCode\n    );\n  }\n}\n","<ng-container *ngIf=\"returnRequests$ | async as returnRequests\">\n  <div class=\"container\">\n    <!-- BODY -->\n    <div class=\"cx-order-history-body\">\n      <ng-container *ngIf=\"returnRequests.pagination.totalResults > 0\">\n        <!-- Select Form and Pagination Top -->\n        <div class=\"cx-order-history-sort top row\">\n          <label\n            class=\"\n              cx-order-history-form-group\n              form-group\n              col-sm-12 col-md-4 col-lg-4\n            \"\n            ><span>{{ 'returnRequestList.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"returnRequests.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"returnRequests.pagination.sort\"\n            ></cx-sorting>\n          </label>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"returnRequests.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <!-- TABLE -->\n        <table class=\"table cx-order-history-table\">\n          <thead class=\"cx-order-history-thead-mobile\">\n            <th scope=\"col\">\n              {{ 'returnRequestList.returnRequestId' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'returnRequestList.orderId' | cxTranslate }}</th>\n            <th scope=\"col\">\n              {{ 'returnRequestList.date' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'returnRequestList.status' | cxTranslate }}</th>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let return of returnRequests.returnRequests\">\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.returnRequestId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'returnRequestDetails',\n                      params: return\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ return?.rma }}</a\n                >\n              </td>\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.orderId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: return?.order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ return?.order?.code }}</a\n                >\n              </td>\n\n              <td class=\"cx-order-history-placed\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.date' | cxTranslate }}\n                </div>\n                {{ return?.creationTime | cxDate: 'longDate' }}\n              </td>\n              <td class=\"cx-order-history-status\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.status' | cxTranslate }}\n                </div>\n                {{\n                  'returnRequestList.statusDisplay_' + return?.status\n                    | cxTranslate\n                }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <!-- Select Form and Pagination Bottom -->\n        <div class=\"cx-order-history-sort bottom row\">\n          <label\n            class=\"\n              cx-order-history-form-group\n              form-group\n              col-sm-12 col-md-4 col-lg-4\n            \"\n            ><span>{{ 'returnRequestList.sortBy' | cxTranslate }}</span>\n            <cx-sorting\n              [sortOptions]=\"returnRequests.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"returnRequests.pagination.sort\"\n            ></cx-sorting>\n          </label>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"returnRequests.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ListNavigationModule } from '../../../../shared/components/list-navigation/list-navigation.module';\nimport { OrderReturnRequestListComponent } from './order-return-request-list.component';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        OrderReturnRequestListComponent: {\n          component: OrderReturnRequestListComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [OrderReturnRequestListComponent],\n  exports: [OrderReturnRequestListComponent],\n})\nexport class ReturnRequestListModule {}\n","import { NgModule } from '@angular/core';\nimport {\n  OrderCancellationModule,\n  OrderReturnModule,\n} from './amend-order/index';\nimport { OrderDetailsModule } from './order-details/order-details.module';\nimport { OrderHistoryModule } from './order-history/order-history.module';\nimport { ReplenishmentOrderDetailsModule } from './replenishment-order-details/replenishment-order-details.module';\nimport { ReplenishmentOrderHistoryModule } from './replenishment-order-history/replenishment-order-history.module';\nimport { ReturnRequestDetailModule } from './return-request-detail/return-request-detail.module';\nimport { ReturnRequestListModule } from './return-request-list/order-return-request-list.module';\n\n/**\n * @deprecated since 4.2 - use order lib instead\n */\n@NgModule({\n  imports: [\n    OrderHistoryModule,\n    OrderDetailsModule,\n    ReplenishmentOrderDetailsModule,\n    OrderCancellationModule,\n    OrderReturnModule,\n    ReplenishmentOrderHistoryModule,\n    ReturnRequestListModule,\n    ReturnRequestDetailModule,\n  ],\n})\nexport class OrderModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  PaymentDetails,\n  TranslationService,\n  UserPaymentService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon';\nimport { Card } from '../../../shared/components/card/card.component';\n\n@Component({\n  selector: 'cx-payment-methods',\n  templateUrl: './payment-methods.component.html',\n})\nexport class PaymentMethodsComponent implements OnInit {\n  paymentMethods$: Observable<PaymentDetails[]>;\n  editCard: string;\n  iconTypes = ICON_TYPE;\n  loading$: Observable<boolean>;\n\n  constructor(\n    private userPaymentService: UserPaymentService,\n    private translation: TranslationService\n  ) {}\n\n  ngOnInit(): void {\n    this.paymentMethods$ = this.userPaymentService.getPaymentMethods().pipe(\n      tap((paymentDetails) => {\n        // Set first payment method to DEFAULT if none is set\n        if (\n          paymentDetails.length > 0 &&\n          !paymentDetails.find((paymentDetail) => paymentDetail.defaultPayment)\n        ) {\n          this.setDefaultPaymentMethod(paymentDetails[0]);\n        }\n      })\n    );\n\n    this.editCard = null;\n    this.loading$ = this.userPaymentService.getPaymentMethodsLoading();\n    this.userPaymentService.loadPaymentMethods();\n  }\n\n  getCardContent({\n    defaultPayment,\n    accountHolderName,\n    expiryMonth,\n    expiryYear,\n    cardNumber,\n    cardType,\n  }: PaymentDetails): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('paymentCard.setAsDefault'),\n      this.translation.translate('common.delete'),\n      this.translation.translate('paymentCard.deleteConfirmation'),\n      this.translation.translate('paymentCard.expires', {\n        month: expiryMonth,\n        year: expiryYear,\n      }),\n      this.translation.translate('paymentCard.defaultPaymentMethod'),\n    ]).pipe(\n      map(\n        ([\n          textSetAsDefault,\n          textDelete,\n          textDeleteConfirmation,\n          textExpires,\n          textDefaultPaymentMethod,\n        ]) => {\n          const actions: { name: string; event: string }[] = [];\n          if (!defaultPayment) {\n            actions.push({ name: textSetAsDefault, event: 'default' });\n          }\n          actions.push({ name: textDelete, event: 'edit' });\n          const card: Card = {\n            header: defaultPayment ? textDefaultPaymentMethod : null,\n            textBold: accountHolderName,\n            text: [cardNumber, textExpires],\n            actions,\n            deleteMsg: textDeleteConfirmation,\n            img: this.getCardIcon(cardType.code),\n          };\n\n          return card;\n        }\n      )\n    );\n  }\n\n  deletePaymentMethod(paymentMethod: PaymentDetails): void {\n    this.userPaymentService.deletePaymentMethod(paymentMethod.id);\n    this.editCard = null;\n  }\n\n  setEdit(paymentMethod: PaymentDetails): void {\n    this.editCard = paymentMethod.id;\n  }\n\n  cancelCard(): void {\n    this.editCard = null;\n  }\n\n  setDefaultPaymentMethod(paymentMethod: PaymentDetails): void {\n    this.userPaymentService.setPaymentMethodAsDefault(paymentMethod.id);\n  }\n\n  getCardIcon(code: string): string {\n    let ccIcon: string;\n    if (code === 'visa') {\n      ccIcon = this.iconTypes.VISA;\n    } else if (code === 'master' || code === 'mastercard_eurocard') {\n      ccIcon = this.iconTypes.MASTER_CARD;\n    } else if (code === 'diners') {\n      ccIcon = this.iconTypes.DINERS_CLUB;\n    } else if (code === 'amex') {\n      ccIcon = this.iconTypes.AMEX;\n    } else {\n      ccIcon = this.iconTypes.CREDIT_CARD;\n    }\n\n    return ccIcon;\n  }\n}\n","<ng-container *ngIf=\"paymentMethods$ | async as paymentMethods\">\n  <div class=\"cx-payment container\">\n    <div class=\"cx-header\">\n      <h3>{{ 'paymentMethods.paymentMethods' | cxTranslate }}</h3>\n    </div>\n\n    <div class=\"cx-body\">\n      <div class=\"cx-msg\">\n        {{\n          'paymentMethods.newPaymentMethodsAreAddedDuringCheckout' | cxTranslate\n        }}\n      </div>\n      <div *ngIf=\"loading$ | async; else cards\"><cx-spinner></cx-spinner></div>\n      <ng-template #cards>\n        <div class=\"cx-existing row\">\n          <div\n            class=\"cx-payment-card col-sm-12 col-md-12 col-lg-6\"\n            *ngFor=\"let paymentMethod of paymentMethods\"\n          >\n            <div class=\"cx-payment-inner\">\n              <cx-card\n                [border]=\"true\"\n                [fitToContainer]=\"true\"\n                [content]=\"getCardContent(paymentMethod) | async\"\n                (deleteCard)=\"deletePaymentMethod(paymentMethod)\"\n                (setDefaultCard)=\"setDefaultPaymentMethod(paymentMethod)\"\n                (editCard)=\"setEdit(paymentMethod)\"\n                [editMode]=\"editCard === paymentMethod.id\"\n                (cancelCard)=\"cancelCard()\"\n              ></cx-card>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CardModule } from '../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { PaymentMethodsComponent } from './payment-methods.component';\n\n@NgModule({\n  imports: [CommonModule, CardModule, SpinnerModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountPaymentDetailsComponent: {\n          component: PaymentMethodsComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [PaymentMethodsComponent],\n  exports: [PaymentMethodsComponent],\n})\nexport class PaymentMethodsModule {}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport {\n  CmsPageTitleComponent,\n  isNotNullable,\n  PageMetaService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-page-title',\n  templateUrl: './page-title.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PageTitleComponent implements OnInit {\n  title$: Observable<string>;\n\n  constructor(\n    public component: CmsComponentData<CmsPageTitleComponent>,\n    protected pageMetaService: PageMetaService\n  ) {}\n\n  ngOnInit(): void {\n    this.setTitle();\n  }\n\n  private setTitle(): void {\n    this.title$ = this.pageMetaService.getMeta().pipe(\n      filter(isNotNullable),\n      map((meta) => (meta.heading || meta.title) ?? '')\n    );\n  }\n}\n","<h1 class=\"cx-visually-hidden\">{{ title$ | async }}</h1>\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport {\n  CmsBreadcrumbsComponent,\n  PageMetaService,\n  TranslationService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { PageTitleComponent } from '../page-header/page-title.component';\n\n@Component({\n  selector: 'cx-breadcrumb',\n  templateUrl: './breadcrumb.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BreadcrumbComponent extends PageTitleComponent implements OnInit {\n  crumbs$: Observable<any[]>;\n\n  constructor(\n    public component: CmsComponentData<CmsBreadcrumbsComponent>,\n    protected pageMetaService: PageMetaService,\n    private translation: TranslationService\n  ) {\n    super(component, pageMetaService);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.setCrumbs();\n  }\n\n  private setCrumbs(): void {\n    this.crumbs$ = combineLatest([\n      this.pageMetaService.getMeta(),\n      this.translation.translate('common.home'),\n    ]).pipe(\n      map(([meta, textHome]) =>\n        meta?.breadcrumbs ? meta.breadcrumbs : [{ label: textHome, link: '/' }]\n      )\n    );\n  }\n}\n","<nav>\n  <span *ngFor=\"let crumb of crumbs$ | async\">\n    <a [routerLink]=\"crumb.link\" [innerHTML]=\"crumb.label\"></a>\n  </span>\n</nav>\n<h1>{{ title$ | async }}</h1>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  PageMetaModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { BreadcrumbComponent } from './breadcrumb.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, PageMetaModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        BreadcrumbComponent: {\n          component: BreadcrumbComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BreadcrumbComponent],\n  exports: [BreadcrumbComponent],\n})\nexport class BreadcrumbModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CmsNavigationComponent,\n  CmsService,\n  SemanticPathService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { filter, map, switchMap, tap } from 'rxjs/operators';\nimport { NavigationNode } from './navigation-node.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NavigationService {\n  constructor(\n    protected cmsService: CmsService,\n    protected semanticPathService: SemanticPathService\n  ) {}\n\n  public createNavigation(\n    data$: Observable<CmsNavigationComponent>\n  ): Observable<NavigationNode> {\n    return combineLatest([data$, this.getNavigationNode(data$)]).pipe(\n      map(([data, nav]) => {\n        return data\n          ? {\n              title: data.name,\n              children: [nav],\n            }\n          : undefined;\n      })\n    );\n  }\n\n  /**\n   * returns an observable with the `NavigationNode` for the given `CmsNavigationComponent`.\n   * This function will load the navigation underlying entries and children if they haven't been\n   * loaded so far.\n   */\n  public getNavigationNode(\n    data$: Observable<CmsNavigationComponent>\n  ): Observable<NavigationNode> {\n    if (!data$) {\n      return of();\n    }\n    return data$.pipe(\n      filter((data) => !!data),\n      switchMap((data) => {\n        const navigation = data.navigationNode ? data.navigationNode : data;\n        return this.cmsService.getNavigationEntryItems(navigation.uid).pipe(\n          tap((items) => {\n            if (items === undefined) {\n              this.loadNavigationEntryItems(navigation, true);\n            } else {\n              // we should check whether the existing node items are what expected\n              const expectedItems = [];\n              this.loadNavigationEntryItems(navigation, false, expectedItems);\n              const existingItems = Object.keys(items).map(\n                (key) => items[key].uid\n              );\n              const missingItems = expectedItems.filter(\n                (it) => !existingItems.includes(it.id)\n              );\n              if (missingItems.length > 0) {\n                this.cmsService.loadNavigationItems(\n                  navigation.uid,\n                  missingItems\n                );\n              }\n            }\n          }),\n          filter(Boolean),\n          map((items) => this.populateNavigationNode(navigation, items))\n        );\n      })\n    );\n  }\n\n  /**\n   * Loads all navigation entry items' type and id. Dispatch action to load all these items\n   * @param nodeData\n   * @param root\n   * @param itemsList\n   */\n  private loadNavigationEntryItems(\n    nodeData: any,\n    root: boolean,\n    itemsList = []\n  ): void {\n    if (nodeData.entries && nodeData.entries.length > 0) {\n      nodeData.entries.forEach((entry) => {\n        itemsList.push({\n          superType: entry.itemSuperType,\n          id: entry.itemId,\n        });\n      });\n    }\n\n    if (nodeData.children && nodeData.children.length > 0) {\n      nodeData.children.forEach((child) =>\n        this.loadNavigationEntryItems(child, false, itemsList)\n      );\n    }\n\n    if (root) {\n      this.cmsService.loadNavigationItems(nodeData.uid, itemsList);\n    }\n  }\n\n  /**\n   * Create a new node tree for the view\n   * @param nodeData\n   * @param items\n   */\n  private populateNavigationNode(nodeData: any, items: any): NavigationNode {\n    const node: NavigationNode = {};\n\n    if (nodeData.title) {\n      // the node title will be populated by the first entry (if any)\n      // if there's no nodeData.title available\n      node.title = nodeData.title;\n    }\n\n    // populate style classes to apply CMS driven styling\n    if (nodeData.styleClasses) {\n      node.styleClasses = nodeData.styleClasses;\n    }\n    // populate style attributes to apply CMS driven styling\n    if (nodeData.styleAttributes) {\n      node.styleAttributes = nodeData.styleAttributes;\n    }\n\n    if (nodeData.entries && nodeData.entries.length > 0) {\n      this.populateLink(node, nodeData.entries[0], items);\n    }\n\n    if (nodeData.children?.length > 0) {\n      const children = nodeData.children\n        .map((child) => this.populateNavigationNode(child, items))\n        .filter(Boolean);\n      if (children.length > 0) {\n        node.children = children;\n      }\n    }\n\n    // return null in case there are no children\n    return Object.keys(node).length === 0 ? null : node;\n  }\n\n  /**\n   * The node link is driven by the first entry.\n   */\n  private populateLink(node: NavigationNode, entry, items) {\n    const item = items[`${entry.itemId}_${entry.itemSuperType}`];\n\n    // now we only consider CMSLinkComponent\n    if (item && entry.itemType === 'CMSLinkComponent') {\n      if (!node.title) {\n        node.title = item.linkName;\n      }\n      const url = this.getLink(item);\n      // only populate the node link if we have a visible node\n      if (node.title && url) {\n        node.url = url;\n        // the backend provide boolean value for the target\n        // in case the link should be opened in a new window\n        if (item.target === 'true' || item.target === true) {\n          node.target = '_blank';\n        }\n      }\n      // populate style classes to apply CMS driven styling\n      if (item.styleClasses) {\n        node.styleClasses = item.styleClasses;\n      }\n      // populate style attributes to apply CMS driven styling\n      if (item.styleAttributes) {\n        node.styleAttributes = item.styleAttributes;\n      }\n    }\n  }\n\n  /**\n   *\n   * Gets the URL or link to a related item (category),\n   * also taking into account content pages (contentPageLabelOrId)\n   * and product pages (productCode)\n   */\n  protected getLink(item): string | string[] {\n    if (item.url) {\n      return item.url;\n    } else if (item.contentPageLabelOrId) {\n      return item.contentPageLabelOrId;\n    } else if (item.categoryCode) {\n      return this.semanticPathService.transform({\n        cxRoute: 'category',\n        params: {\n          code: item.categoryCode,\n          name: item.name,\n        },\n      });\n    } else if (item.productCode) {\n      return this.semanticPathService.transform({\n        cxRoute: 'product',\n        params: {\n          code: item.productCode,\n          name: item.name,\n        },\n      });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NavigationStart, Router } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HamburgerMenuService {\n  isExpanded: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  constructor(router: Router) {\n    router.events\n      .pipe(filter((event) => event instanceof NavigationStart))\n      .subscribe(() => {\n        this.toggle(true);\n      });\n  }\n\n  /**\n   * toggles the expand state of the hamburger menu\n   */\n  toggle(forceCollapse?: boolean): void {\n    if (forceCollapse) {\n      this.isExpanded.next(false);\n    } else {\n      this.isExpanded.next(!this.isExpanded.value);\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  OnDestroy,\n  Renderer2,\n  OnInit,\n} from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { debounceTime, filter } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../misc/icon/index';\nimport { NavigationNode } from './navigation-node.model';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { HamburgerMenuService } from './../../../layout/header/hamburger-menu/hamburger-menu.service';\n\n@Component({\n  selector: 'cx-navigation-ui',\n  templateUrl: './navigation-ui.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NavigationUIComponent implements OnInit, OnDestroy {\n  /**\n   * The navigation node to render.\n   */\n  @Input() node: NavigationNode;\n\n  /**\n   * The number of child nodes that must be wrapped.\n   */\n  @Input() wrapAfter: number;\n\n  /**\n   * Flag indicates whether to reset the state of menu navigation (ie. Collapse all submenus) when the menu is closed.\n   */\n  @Input() resetMenuOnClose: boolean;\n\n  /**\n   * the icon type that will be used for navigation nodes\n   * with children.\n   */\n  iconType = ICON_TYPE;\n\n  /**\n   * Indicates whether the navigation should support flyout.\n   * If flyout is set to true, the\n   * nested child navigation nodes will only appear on hover or focus.\n   */\n  @Input() @HostBinding('class.flyout') flyout = true;\n\n  @Input() @HostBinding('class.is-open') isOpen = false;\n\n  private openNodes: HTMLElement[] = [];\n  private subscriptions = new Subscription();\n  private resize = new EventEmitter();\n\n  @HostListener('window:resize')\n  onResize() {\n    this.resize.next();\n  }\n\n  constructor(\n    private router: Router,\n    private renderer: Renderer2,\n    private elemRef: ElementRef,\n    protected hamburgerMenuService: HamburgerMenuService\n  ) {\n    this.subscriptions.add(\n      this.router.events\n        .pipe(filter((event) => event instanceof NavigationEnd))\n        .subscribe(() => this.clear())\n    );\n    this.subscriptions.add(\n      this.resize.pipe(debounceTime(50)).subscribe(() => {\n        this.alignWrappersToRightIfStickOut();\n      })\n    );\n  }\n\n  /**\n   * During initialization of this component, we will check the resetMenuOnClose flag and attach a menu reset listener if needed.\n   */\n  ngOnInit() {\n    if (this.resetMenuOnClose) {\n      this.resetOnMenuCollapse();\n    }\n  }\n\n  /**\n   * This method performs the action of resetting the menu (close all sub menus and return to main options)\n   * when the menu is closed.\n   */\n  resetOnMenuCollapse(): void {\n    this.subscriptions.add(\n      this.hamburgerMenuService?.isExpanded\n        .pipe(distinctUntilChanged(), filter(Boolean))\n        .subscribe(() => {\n          this.reinitalizeMenu();\n        })\n    );\n  }\n\n  /**\n   * This method performs the actions required to reset the state of the menu and reset any visual components.\n   */\n  reinitalizeMenu(): void {\n    if (this.openNodes?.length > 0) {\n      this.clear();\n      this.renderer.removeClass(this.elemRef.nativeElement, 'is-open');\n    }\n  }\n\n  toggleOpen(event: UIEvent): void {\n    if (event.type === 'keydown') {\n      event.preventDefault();\n    }\n    const node = <HTMLElement>event.currentTarget;\n    if (this.openNodes.includes(node)) {\n      if (event.type === 'keydown') {\n        this.back();\n      } else {\n        this.openNodes = this.openNodes.filter((n) => n !== node);\n        this.renderer.removeClass(node, 'is-open');\n      }\n    } else {\n      this.openNodes.push(node);\n    }\n\n    this.updateClasses();\n\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n  }\n\n  back(): void {\n    if (this.openNodes[this.openNodes.length - 1]) {\n      this.renderer.removeClass(\n        this.openNodes[this.openNodes.length - 1],\n        'is-open'\n      );\n      this.openNodes.pop();\n      this.updateClasses();\n    }\n  }\n\n  clear(): void {\n    this.openNodes = [];\n    this.updateClasses();\n  }\n\n  onMouseEnter(event: MouseEvent) {\n    this.alignWrapperToRightIfStickOut(<HTMLElement>event.currentTarget);\n    this.focusAfterPreviousClicked(event);\n  }\n\n  getTotalDepth(node: NavigationNode, depth = 0): number {\n    if (node.children && node.children.length > 0) {\n      return Math.max(\n        ...node.children.map((n) => this.getTotalDepth(n, depth + 1))\n      );\n    } else {\n      return depth;\n    }\n  }\n\n  getColumnCount(length: number): number {\n    return Math.round(length / (this.wrapAfter || length));\n  }\n\n  focusAfterPreviousClicked(event: MouseEvent) {\n    const target: HTMLElement = <HTMLElement>(\n      (event.target || event.relatedTarget)\n    );\n    if (\n      target.ownerDocument.activeElement.matches('nav[tabindex]') &&\n      target.parentElement.matches('.flyout')\n    ) {\n      target.focus();\n    }\n    return target.ownerDocument;\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n\n  private alignWrapperToRightIfStickOut(node: HTMLElement) {\n    const wrapper = <HTMLElement>node.querySelector('.wrapper');\n    const body = <HTMLElement>node.closest('body');\n    if (wrapper) {\n      this.renderer.removeStyle(wrapper, 'margin-left');\n      if (\n        wrapper.offsetLeft + wrapper.offsetWidth >\n        body.offsetLeft + body.offsetWidth\n      ) {\n        this.renderer.setStyle(\n          wrapper,\n          'margin-left',\n          `${node.offsetWidth - wrapper.offsetWidth}px`\n        );\n      }\n    }\n  }\n\n  private alignWrappersToRightIfStickOut() {\n    const navs = <HTMLCollection>this.elemRef.nativeElement.childNodes;\n    Array.from(navs)\n      .filter((node) => node.tagName === 'NAV')\n      .forEach((nav) => this.alignWrapperToRightIfStickOut(<HTMLElement>nav));\n  }\n\n  private updateClasses(): void {\n    this.openNodes.forEach((node, i) => {\n      if (i + 1 < this.openNodes.length) {\n        this.renderer.addClass(node, 'is-opened');\n        this.renderer.removeClass(node, 'is-open');\n      } else {\n        this.renderer.removeClass(node, 'is-opened');\n        this.renderer.addClass(node, 'is-open');\n      }\n    });\n\n    this.isOpen = this.openNodes.length > 0;\n  }\n}\n","<div\n  *ngIf=\"flyout && node?.children.length > 1\"\n  class=\"back is-open\"\n  (click)=\"back()\"\n>\n  <span>\n    <cx-icon [type]=\"iconType.CARET_LEFT\"></cx-icon>\n    {{ 'common.back' | cxTranslate }}\n  </span>\n</div>\n\n<ng-container *ngFor=\"let child of node?.children\">\n  <ng-container *ngTemplateOutlet=\"nav; context: { node: child, depth: 0 }\">\n  </ng-container>\n</ng-container>\n\n<!-- we generate links in a recursive manner -->\n<ng-template #nav let-node=\"node\" let-depth=\"depth\">\n  <nav\n    (click)=\"toggleOpen($event)\"\n    (mouseenter)=\"onMouseEnter($event)\"\n    (keydown.space)=\"toggleOpen($event)\"\n    (keydown.esc)=\"back()\"\n  >\n    <cx-generic-link\n      *ngIf=\"\n        node.url && (!node.children || node.children?.length === 0);\n        else heading\n      \"\n      [url]=\"node.url\"\n      [target]=\"node.target\"\n      [style]=\"node.styleAttributes\"\n      [class]=\"node.styleClasses\"\n    >\n      {{ node.title }}\n      <cx-icon\n        *ngIf=\"flyout && node.children?.length > 0\"\n        [type]=\"iconType.CARET_DOWN\"\n      ></cx-icon>\n    </cx-generic-link>\n\n    <ng-template #heading>\n      <span [attr.tabindex]=\"flyout && (depth === 0 || node.url) ? 0 : -1\">\n        {{ node.title }}\n        <cx-icon\n          *ngIf=\"flyout && node.children?.length > 0\"\n          [type]=\"iconType.CARET_DOWN\"\n        ></cx-icon>\n      </span>\n    </ng-template>\n\n    <!-- we add a wrapper to allow for better layout handling in CSS -->\n    <div class=\"wrapper\" *ngIf=\"node.children?.length > 0\">\n      <cx-generic-link\n        *ngIf=\"node.url\"\n        [url]=\"node.url\"\n        [target]=\"node.target\"\n        class=\"all\"\n      >\n        {{ 'navigation.shopAll' | cxTranslate: { navNode: node.title } }}\n      </cx-generic-link>\n      <div\n        class=\"childs\"\n        [attr.depth]=\"getTotalDepth(node)\"\n        [attr.wrap-after]=\"node.children?.length > wrapAfter ? wrapAfter : null\"\n        [attr.columns]=\"getColumnCount(node.children?.length)\"\n      >\n        <ng-container *ngFor=\"let child of node.children\">\n          <ng-container\n            *ngTemplateOutlet=\"nav; context: { node: child, depth: depth + 1 }\"\n          >\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n  </nav>\n</ng-template>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsNavigationComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { NavigationNode } from '../navigation/navigation-node.model';\nimport { NavigationService } from '../navigation/navigation.service';\n\n@Component({\n  selector: 'cx-category-navigation',\n  templateUrl: './category-navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CategoryNavigationComponent {\n  node$: Observable<NavigationNode> = this.service.getNavigationNode(\n    this.componentData.data$\n  );\n\n  data$: Observable<CmsNavigationComponent> = this.componentData.data$;\n\n  constructor(\n    protected componentData: CmsComponentData<CmsNavigationComponent>,\n    protected service: NavigationService\n  ) {}\n}\n","<cx-navigation-ui\n  *ngIf=\"data$ | async as data\"\n  [node]=\"node$ | async\"\n  [ngClass]=\"data.styleClass\"\n  [wrapAfter]=\"data.wrapAfter\"\n  [resetMenuOnClose]=\"data.resetMenuOnClose\"\n></cx-navigation-ui>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsNavigationComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { NavigationNode } from './navigation-node.model';\nimport { NavigationService } from './navigation.service';\n\n@Component({\n  selector: 'cx-navigation',\n  templateUrl: './navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NavigationComponent {\n  node$: Observable<NavigationNode> = this.service.createNavigation(\n    this.componentData.data$\n  );\n\n  styleClass$: Observable<string> = this.componentData.data$.pipe(\n    map((d) => d?.styleClass)\n  );\n\n  constructor(\n    protected componentData: CmsComponentData<CmsNavigationComponent>,\n    protected service: NavigationService\n  ) {}\n}\n","<cx-navigation-ui [node]=\"node$ | async\" [ngClass]=\"styleClass$ | async\">\n</cx-navigation-ui>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { NavigationUIComponent } from './navigation-ui.component';\nimport { NavigationComponent } from './navigation.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    IconModule,\n    GenericLinkModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        NavigationComponent: {\n          component: NavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [NavigationComponent, NavigationUIComponent],\n  exports: [NavigationComponent, NavigationUIComponent],\n})\nexport class NavigationModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { NavigationModule } from '../navigation/navigation.module';\nimport { CategoryNavigationComponent } from './category-navigation.component';\n\n@NgModule({\n  imports: [CommonModule, NavigationModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CategoryNavigationComponent: {\n          component: CategoryNavigationComponent,\n          data: {\n            resetMenuOnClose: true,\n          },\n        },\n      },\n    }),\n  ],\n  declarations: [CategoryNavigationComponent],\n  exports: [CategoryNavigationComponent],\n})\nexport class CategoryNavigationModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsNavigationComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { NavigationNode } from '../navigation/navigation-node.model';\nimport { NavigationService } from '../navigation/navigation.service';\n\n@Component({\n  selector: 'cx-footer-navigation',\n  templateUrl: './footer-navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FooterNavigationComponent {\n  node$: Observable<NavigationNode> = this.service.getNavigationNode(\n    this.componentData.data$\n  );\n\n  styleClass$: Observable<string> = this.componentData.data$.pipe(\n    map((d) => d?.styleClass)\n  );\n\n  constructor(\n    protected componentData: CmsComponentData<CmsNavigationComponent>,\n    protected service: NavigationService\n  ) {}\n}\n","<cx-navigation-ui\n  [node]=\"node$ | async\"\n  [flyout]=\"false\"\n  [ngClass]=\"styleClass$ | async\"\n></cx-navigation-ui>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\nimport { NavigationModule } from '../navigation/navigation.module';\nimport { FooterNavigationComponent } from './footer-navigation.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    NavigationModule,\n    GenericLinkModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        FooterNavigationComponent: {\n          component: FooterNavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [FooterNavigationComponent],\n  exports: [FooterNavigationComponent],\n})\nexport class FooterNavigationModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  PageMetaModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { PageTitleComponent } from './page-title.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, PageMetaModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        PageTitleComponent: {\n          component: PageTitleComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [PageTitleComponent],\n  exports: [PageTitleComponent],\n  entryComponents: [PageTitleComponent],\n})\nexport class PageTitleModule {}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'cxHighlight' })\nexport class HighlightPipe implements PipeTransform {\n  transform(text: string, match?: string): string {\n    if (!match) {\n      return text;\n    }\n    return text.replace(\n      match.trim(),\n      `<span class=\"highlight\">${match.trim()}</span>`\n    );\n  }\n}\n","import { CxEvent, Suggestion } from '@spartacus/core';\n\n/**\n * Indicates that the user chose a suggestion\n */\nexport class SearchBoxSuggestionSelectedEvent extends CxEvent {\n  /**\n   * Event's type\n   */\n  static readonly type = 'SearchBoxSuggestionSelectedEvent';\n  freeText: string;\n  selectedSuggestion: string;\n  searchSuggestions: Suggestion[];\n}\n\n/**\n * Indicates that the user chose a product suggestion\n */\nexport class SearchBoxProductSelectedEvent extends CxEvent {\n  /**\n   * Event's type\n   */\n  static readonly type = 'SearchBoxProductSelectedEvent';\n  freeText: string;\n  productCode: string;\n}\n","import { Injectable } from '@angular/core';\nimport {\n  EventService,\n  ProductSearchPage,\n  RoutingService,\n  SearchboxService,\n  TranslationService,\n  WindowRef,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport {\n  SearchBoxProductSelectedEvent,\n  SearchBoxSuggestionSelectedEvent,\n} from './search-box.events';\nimport { SearchBoxConfig, SearchResults } from './search-box.model';\n\nconst HAS_SEARCH_RESULT_CLASS = 'has-searchbox-results';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SearchBoxComponentService {\n  constructor(\n    public searchService: SearchboxService,\n    protected routingService: RoutingService,\n    protected translationService: TranslationService,\n    protected winRef: WindowRef,\n    protected eventService: EventService\n  ) {}\n\n  /**\n   * Executes the search for products and suggestions,\n   * unless the configuration is setup to not search for\n   * products or suggestions.\n   */\n  search(query: string, config: SearchBoxConfig): void {\n    if (!query || query === '') {\n      this.clearResults();\n      return;\n    }\n\n    if (\n      config.minCharactersBeforeRequest &&\n      query.length < config.minCharactersBeforeRequest\n    ) {\n      return;\n    }\n\n    if (config.displayProducts) {\n      this.searchService.search(query, {\n        pageSize: config.maxProducts,\n      });\n    }\n\n    if (config.displaySuggestions) {\n      this.searchService.searchSuggestions(query, {\n        pageSize: config.maxSuggestions,\n      });\n    }\n  }\n\n  /**\n   * Returns an observable with the SearchResults. When there's any\n   * result, the body tag will get a classname, so that specific style\n   * rules can be applied.\n   */\n  getResults(config: SearchBoxConfig): Observable<SearchResults> {\n    return combineLatest([\n      this.getProductResults(config),\n      this.getProductSuggestions(config),\n      this.getSearchMessage(config),\n    ]).pipe(\n      map(([productResults, suggestions, message]) => {\n        return {\n          products: productResults ? productResults.products : null,\n          suggestions,\n          message,\n        };\n      }),\n      tap((results) =>\n        this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, this.hasResults(results))\n      )\n    );\n  }\n\n  /**\n   * Clears the searchbox results, so that old values are\n   * no longer emited upon next search.\n   */\n  clearResults() {\n    this.searchService.clearResults();\n    this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, false);\n  }\n\n  hasBodyClass(className: string): boolean {\n    return this.winRef.document.body.classList.contains(className);\n  }\n\n  toggleBodyClass(className: string, add?: boolean) {\n    if (add === undefined) {\n      this.winRef.document.body.classList.toggle(className);\n    } else {\n      add\n        ? this.winRef.document.body.classList.add(className)\n        : this.winRef.document.body.classList.remove(className);\n    }\n  }\n\n  /**\n   * Dispatches a searchbox event for product selected\n   *\n   * @param eventData data for the \"SearchBoxProductSelectedEvent\"\n   */\n  dispatchProductSelectedEvent(eventData: SearchBoxProductSelectedEvent): void {\n    this.eventService.dispatch<SearchBoxProductSelectedEvent>(\n      {\n        freeText: eventData.freeText,\n        productCode: eventData.productCode,\n      },\n      SearchBoxProductSelectedEvent\n    );\n  }\n\n  /**\n   * Dispatches a searchbox event for suggestion selected\n   *\n   * @param eventData data for the \"SearchBoxSuggestionSelectedEvent\"\n   */\n  dispatchSuggestionSelectedEvent(\n    eventData: SearchBoxSuggestionSelectedEvent\n  ): void {\n    this.eventService.dispatch<SearchBoxSuggestionSelectedEvent>(\n      {\n        freeText: eventData.freeText,\n        selectedSuggestion: eventData.selectedSuggestion,\n        searchSuggestions: eventData.searchSuggestions,\n      },\n      SearchBoxSuggestionSelectedEvent\n    );\n  }\n\n  /**\n   * For search results model, it returns true when:\n   * * there is any product OR\n   * * the is any search suggestion OR\n   * * there is a message.\n   *\n   * Otherwise it returns false.\n   */\n  protected hasResults(results: SearchResults): boolean {\n    return (\n      (!!results.products && results.products.length > 0) ||\n      (!!results.suggestions && results.suggestions.length > 0) ||\n      !!results.message\n    );\n  }\n\n  /**\n   * Emits product search results in case when the config property `displayProducts` is true.\n   * Otherwise it emits an empty object.\n   */\n  protected getProductResults(\n    config: SearchBoxConfig\n  ): Observable<ProductSearchPage> {\n    if (config.displayProducts) {\n      return this.searchService.getResults();\n    } else {\n      return of({});\n    }\n  }\n\n  /**\n   * Loads suggestions from the backend. In case there's no suggestion\n   * available, we try to get an exact match suggestion.\n   */\n  protected getProductSuggestions(\n    config: SearchBoxConfig\n  ): Observable<string[]> {\n    if (!config.displaySuggestions) {\n      return of([]);\n    } else {\n      return this.searchService.getSuggestionResults().pipe(\n        map((res) => res.map((suggestion) => suggestion.value)),\n        switchMap((suggestions) => {\n          if (suggestions.length === 0) {\n            return this.getExactSuggestion(config).pipe(\n              map((match) => (match ? [match] : []))\n            );\n          } else {\n            return of(suggestions);\n          }\n        })\n      );\n    }\n  }\n\n  /**\n   * Whenever there is at least 1 product, we simulate\n   * a suggestion to provide easy access to the search result page\n   */\n  protected getExactSuggestion(config: SearchBoxConfig): Observable<string> {\n    return this.getProductResults(config).pipe(\n      switchMap((productResult) => {\n        return productResult.products && productResult.products.length > 0\n          ? this.fetchTranslation('searchBox.help.exactMatch', {\n              term: productResult.freeTextSearch,\n            })\n          : of(null);\n      })\n    );\n  }\n\n  /**\n   * Emits a 'no match' message, in case the product search results and search suggestions are empty.\n   * Otherwise it emits null.\n   */\n  protected getSearchMessage(config: SearchBoxConfig): Observable<string> {\n    return combineLatest([\n      this.getProductResults(config),\n      this.getProductSuggestions(config),\n    ]).pipe(\n      switchMap(([productResult, suggestions]) => {\n        if (\n          productResult &&\n          productResult.products &&\n          productResult.products.length === 0 &&\n          suggestions &&\n          suggestions.length === 0\n        ) {\n          return this.fetchTranslation('searchBox.help.noMatch');\n        } else {\n          return of(null);\n        }\n      })\n    );\n  }\n\n  /**\n   * Navigates to the search result page with a given query\n   */\n  launchSearchPage(query: string): void {\n    this.routingService.go({\n      cxRoute: 'search',\n      params: { query },\n    });\n  }\n\n  private fetchTranslation(\n    translationKey: string,\n    options?: any\n  ): Observable<string> {\n    return this.translationService.translate(translationKey, options);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n} from '@angular/core';\nimport {\n  CmsSearchBoxComponent,\n  PageType,\n  RoutingService,\n  WindowRef,\n} from '@spartacus/core';\nimport { Observable, of, Subscription } from 'rxjs';\nimport { filter, map, switchMap, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/index';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { SearchBoxComponentService } from './search-box-component.service';\nimport {\n  SearchBoxProductSelectedEvent,\n  SearchBoxSuggestionSelectedEvent,\n} from './search-box.events';\nimport { SearchBoxConfig, SearchResults } from './search-box.model';\n\nconst DEFAULT_SEARCH_BOX_CONFIG: SearchBoxConfig = {\n  minCharactersBeforeRequest: 1,\n  displayProducts: true,\n  displaySuggestions: true,\n  maxProducts: 5,\n  maxSuggestions: 5,\n  displayProductImages: true,\n};\n\n@Component({\n  selector: 'cx-searchbox',\n  templateUrl: './search-box.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SearchBoxComponent implements OnInit, OnDestroy {\n  @Input() config: SearchBoxConfig;\n\n  /**\n   * Sets the search box input field\n   */\n  @Input('queryText')\n  set queryText(value: string) {\n    if (value) {\n      this.search(value);\n    }\n  }\n\n  iconTypes = ICON_TYPE;\n\n  /**\n   * In some occasions we need to ignore the close event,\n   * for example when we click inside the search result section.\n   */\n  private ignoreCloseEvent = false;\n  chosenWord = '';\n  public subscription: Subscription;\n\n  constructor(\n    protected searchBoxComponentService: SearchBoxComponentService,\n    @Optional()\n    protected componentData: CmsComponentData<CmsSearchBoxComponent>,\n    protected winRef: WindowRef,\n    protected routingService: RoutingService\n  ) {}\n\n  /**\n   * Returns the SearchBox configuration. The configuration is driven by multiple\n   * layers: default configuration, (optional) backend configuration and (optional)\n   * input configuration.\n   */\n  protected config$: Observable<SearchBoxConfig> = (\n    this.componentData?.data$ || of({} as any)\n  ).pipe(\n    map((config) => {\n      const isBool = (obj: SearchBoxConfig, prop: string): boolean =>\n        obj?.[prop] !== 'false' && obj?.[prop] !== false;\n\n      return {\n        ...DEFAULT_SEARCH_BOX_CONFIG,\n        ...config,\n        displayProducts: isBool(config, 'displayProducts'),\n        displayProductImages: isBool(config, 'displayProductImages'),\n        displaySuggestions: isBool(config, 'displaySuggestions'),\n        // we're merging the (optional) input of this component, but write the merged\n        // result back to the input property, as the view logic depends on it.\n        ...this.config,\n      };\n    }),\n    tap((config) => (this.config = config))\n  );\n\n  results$: Observable<SearchResults> = this.config$.pipe(\n    switchMap((config) => this.searchBoxComponentService.getResults(config))\n  );\n\n  ngOnInit(): void {\n    this.subscription = this.routingService\n      .getRouterState()\n      .pipe(filter((data) => !data.nextState))\n      .subscribe((data) => {\n        if (\n          !(\n            data.state.context?.id === 'search' &&\n            data.state.context?.type === PageType.CONTENT_PAGE\n          )\n        )\n          this.chosenWord = '';\n      });\n  }\n\n  /**\n   * Closes the searchBox and opens the search result page.\n   */\n  search(query: string): void {\n    this.searchBoxComponentService.search(query, this.config);\n    // force the searchBox to open\n    this.open();\n  }\n\n  /**\n   * Opens the type-ahead searchBox\n   */\n  open(): void {\n    this.searchBoxComponentService.toggleBodyClass('searchbox-is-active', true);\n  }\n\n  /**\n   * Dispatch UI events for Suggestion selected\n   *\n   * @param eventData the data for the event\n   */\n  dispatchSuggestionEvent(eventData: SearchBoxSuggestionSelectedEvent): void {\n    this.searchBoxComponentService.dispatchSuggestionSelectedEvent(eventData);\n  }\n\n  /**\n   * Dispatch UI events for Product selected\n   *\n   * @param eventData the data for the event\n   */\n  dispatchProductEvent(eventData: SearchBoxProductSelectedEvent): void {\n    this.searchBoxComponentService.dispatchProductSelectedEvent(eventData);\n  }\n\n  /**\n   * Closes the type-ahead searchBox.\n   */\n  close(event: UIEvent, force?: boolean): void {\n    // Use timeout to detect changes\n    setTimeout(() => {\n      if ((!this.ignoreCloseEvent && !this.isSearchBoxFocused()) || force) {\n        this.blurSearchBox(event);\n      }\n    });\n  }\n\n  protected blurSearchBox(event: UIEvent): void {\n    this.searchBoxComponentService.toggleBodyClass(\n      'searchbox-is-active',\n      false\n    );\n    if (event && event.target) {\n      (<HTMLElement>event.target).blur();\n    }\n  }\n\n  // Check if focus is on searchbox or result list elements\n  private isSearchBoxFocused(): boolean {\n    return (\n      this.getResultElements().includes(this.getFocusedElement()) ||\n      this.winRef.document.querySelector('input[aria-label=\"Search\"]') ===\n        this.getFocusedElement()\n    );\n  }\n\n  /**\n   * Especially in mobile we do not want the search icon\n   * to focus the input again when it's already open.\n   * */\n  avoidReopen(event: UIEvent): void {\n    if (this.searchBoxComponentService.hasBodyClass('searchbox-is-active')) {\n      this.close(event);\n      event.preventDefault();\n    }\n  }\n\n  // Return result list as HTMLElement array\n  private getResultElements(): HTMLElement[] {\n    return Array.from(\n      this.winRef.document.querySelectorAll(\n        '.products > li a, .suggestions > li a'\n      )\n    );\n  }\n\n  // Return focused element as HTMLElement\n  private getFocusedElement(): HTMLElement {\n    return <HTMLElement>this.winRef.document.activeElement;\n  }\n\n  updateChosenWord(chosenWord: string): void {\n    this.chosenWord = chosenWord;\n  }\n\n  private getFocusedIndex(): number {\n    return this.getResultElements().indexOf(this.getFocusedElement());\n  }\n\n  // Focus on previous item in results list\n  focusPreviousChild(event: UIEvent) {\n    event.preventDefault(); // Negate normal keyscroll\n    const [results, focusedIndex] = [\n      this.getResultElements(),\n      this.getFocusedIndex(),\n    ];\n    // Focus on last index moving to first\n    if (results.length) {\n      if (focusedIndex < 1) {\n        results[results.length - 1].focus();\n      } else {\n        results[focusedIndex - 1].focus();\n      }\n    }\n  }\n\n  // Focus on next item in results list\n  focusNextChild(event: UIEvent) {\n    this.open();\n    event.preventDefault(); // Negate normal keyscroll\n    const [results, focusedIndex] = [\n      this.getResultElements(),\n      this.getFocusedIndex(),\n    ];\n    // Focus on first index moving to last\n    if (results.length) {\n      if (focusedIndex >= results.length - 1) {\n        results[0].focus();\n      } else {\n        results[focusedIndex + 1].focus();\n      }\n    }\n  }\n\n  /**\n   * Opens the PLP with the given query.\n   *\n   * TODO: if there's a single product match, we could open the PDP.\n   */\n  launchSearchResult(event: UIEvent, query: string): void {\n    if (!query || query.trim().length === 0) {\n      return;\n    }\n    this.close(event);\n    this.searchBoxComponentService.launchSearchPage(query);\n  }\n\n  /**\n   * Disables closing the search result list.\n   */\n  disableClose(): void {\n    this.ignoreCloseEvent = true;\n  }\n\n  preventDefault(ev: UIEvent): void {\n    ev.preventDefault();\n  }\n\n  /**\n   * Clears the search box input field\n   */\n  clear(el: HTMLInputElement): void {\n    this.disableClose();\n    el.value = '';\n    this.searchBoxComponentService.clearResults();\n\n    // Use Timeout to run after blur event to prevent the searchbox from closing on mobile\n    setTimeout(() => {\n      // Retain focus on input lost by clicking on icon\n      el.focus();\n      this.ignoreCloseEvent = false;\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription?.unsubscribe();\n  }\n}\n","<label class=\"searchbox\" [class.dirty]=\"!!searchInput.value\">\n  <input\n    #searchInput\n    [placeholder]=\"'searchBox.placeholder' | cxTranslate\"\n    autocomplete=\"off\"\n    aria-describedby=\"initialDescription\"\n    aria-controls=\"results\"\n    [attr.aria-label]=\"'common.search' | cxTranslate\"\n    (focus)=\"open()\"\n    (click)=\"open()\"\n    (input)=\"search(searchInput.value)\"\n    (blur)=\"close($event)\"\n    (keydown.escape)=\"close($event)\"\n    (keydown.enter)=\"\n      close($event, true);\n      launchSearchResult($event, searchInput.value);\n      updateChosenWord(searchInput.value)\n    \"\n    (keydown.arrowup)=\"focusPreviousChild($event)\"\n    (keydown.arrowdown)=\"focusNextChild($event)\"\n    value=\"{{ chosenWord }}\"\n  />\n\n  <button\n    [attr.aria-label]=\"'common.reset' | cxTranslate\"\n    (mousedown)=\"clear(searchInput)\"\n    (keydown.enter)=\"clear(searchInput)\"\n    class=\"reset\"\n  >\n    <cx-icon [type]=\"iconTypes.RESET\"></cx-icon>\n  </button>\n\n  <div role=\"presentation\" class=\"search-icon\">\n    <cx-icon [type]=\"iconTypes.SEARCH\"></cx-icon>\n  </div>\n\n  <button\n    [attr.aria-label]=\"'common.search' | cxTranslate\"\n    class=\"search\"\n    (click)=\"open()\"\n  >\n    <cx-icon [type]=\"iconTypes.SEARCH\"></cx-icon>\n  </button>\n</label>\n\n<div\n  *ngIf=\"results$ | async as result\"\n  class=\"results\"\n  id=\"results\"\n  (click)=\"close($event, true)\"\n  role=\"listbox\"\n>\n  <div\n    *ngIf=\"result.message\"\n    class=\"message\"\n    [innerHTML]=\"result.message\"\n  ></div>\n\n  <ul\n    class=\"suggestions\"\n    attr.aria-label=\"{{ 'searchBox.ariaLabelSuggestions' | cxTranslate }}\"\n    tabindex=\"0\"\n  >\n    <li *ngFor=\"let suggestion of result.suggestions\">\n      <a\n        [innerHTML]=\"suggestion | cxHighlight: searchInput.value\"\n        [routerLink]=\"\n          {\n            cxRoute: 'search',\n            params: { query: suggestion }\n          } | cxUrl\n        \"\n        (keydown.arrowup)=\"focusPreviousChild($event)\"\n        (keydown.arrowdown)=\"focusNextChild($event)\"\n        (keydown.enter)=\"close($event, true)\"\n        (keydown.escape)=\"close($event, true)\"\n        (blur)=\"close($event)\"\n        (mousedown)=\"preventDefault($event)\"\n        (click)=\"\n          dispatchSuggestionEvent({\n            freeText: searchInput.value,\n            selectedSuggestion: suggestion,\n            searchSuggestions: result.suggestions\n          });\n          updateChosenWord(suggestion)\n        \"\n      >\n      </a>\n    </li>\n  </ul>\n\n  <ul\n    class=\"products\"\n    *ngIf=\"result.products\"\n    attr.aria-label=\"{{ 'searchBox.ariaLabelProducts' | cxTranslate }}\"\n    tabindex=\"0\"\n  >\n    <li *ngFor=\"let product of result.products\">\n      <a\n        [routerLink]=\"\n          {\n            cxRoute: 'product',\n            params: product\n          } | cxUrl\n        \"\n        [class.has-media]=\"config.displayProductImages\"\n        (keydown.arrowup)=\"focusPreviousChild($event)\"\n        (keydown.arrowdown)=\"focusNextChild($event)\"\n        (keydown.enter)=\"close($event, true)\"\n        (keydown.escape)=\"close($event, true)\"\n        (blur)=\"close($event)\"\n        (mousedown)=\"preventDefault($event)\"\n        (click)=\"\n          dispatchProductEvent({\n            freeText: searchInput.value,\n            productCode: product.code\n          })\n        \"\n      >\n        <cx-media\n          *ngIf=\"config.displayProductImages\"\n          [container]=\"product.images?.PRIMARY\"\n          format=\"thumbnail\"\n          role=\"presentation\"\n        ></cx-media>\n        <div class=\"name\" [innerHTML]=\"product.nameHtml\"></div>\n        <span class=\"price\">{{ product.price?.formattedValue }}</span>\n      </a>\n    </li>\n  </ul>\n  <span id=\"initialDescription\" class=\"cx-visually-hidden\">\n    {{ 'searchBox.initialDescription' | cxTranslate }}\n  </span>\n  <div\n    *ngIf=\"result.suggestions?.length || result.products?.length\"\n    aria-live=\"assertive\"\n    class=\"cx-visually-hidden\"\n  >\n    {{\n      'searchBox.suggestionsResult'\n        | cxTranslate: { count: result.suggestions?.length }\n    }}\n    {{\n      'searchBox.productsResult'\n        | cxTranslate: { count: result.products?.length }\n    }}\n    {{ 'searchBox.initialDescription' | cxTranslate }}\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { HighlightPipe } from './highlight.pipe';\nimport { SearchBoxComponent } from './search-box.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    MediaModule,\n    IconModule,\n    UrlModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        SearchBoxComponent: {\n          component: SearchBoxComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [SearchBoxComponent, HighlightPipe],\n  exports: [SearchBoxComponent, HighlightPipe],\n})\nexport class SearchBoxModule {}\n","import { Injectable } from '@angular/core';\nimport { Product, ProductService, SemanticPathService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { ProductCarouselItem } from './product-carousel.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductCarouselService {\n  constructor(\n    protected productService: ProductService,\n    protected semanticPathService: SemanticPathService\n  ) {}\n\n  /**\n   * Loads the product data and converts it `CarouselItem`.\n   */\n  loadProduct(code: string): Observable<ProductCarouselItem> {\n    return this.productService.get(code).pipe(\n      filter(Boolean),\n      map((product) => this.convertProduct(product))\n    );\n  }\n\n  /**\n   * Converts the product to a generic CarouselItem\n   */\n  private convertProduct(\n    source: Product,\n    displayTitle = true,\n    displayProductPrices = true\n  ): ProductCarouselItem {\n    const item: ProductCarouselItem = {};\n    if (displayTitle) {\n      item.title = source.name;\n    }\n    if (displayProductPrices && source.price && source.price.formattedValue) {\n      item.price = source.price.formattedValue;\n    }\n    if (source.images && source.images.PRIMARY) {\n      item.media = {\n        container: source.images.PRIMARY,\n        format: 'product',\n      };\n    }\n    item.route = this.semanticPathService.transform({\n      cxRoute: 'product',\n      params: source,\n    });\n    return item;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  CmsProductCarouselComponent as model,\n  Product,\n  ProductScope,\n  ProductService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-product-carousel',\n  templateUrl: './product-carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductCarouselComponent {\n  protected readonly PRODUCT_SCOPE = ProductScope.LIST;\n\n  private componentData$: Observable<model> = this.componentData.data$.pipe(\n    filter(Boolean)\n  );\n\n  /**\n   * returns an Observable string for the title.\n   */\n  title$: Observable<string> = this.componentData$.pipe(\n    map((data) => data.title)\n  );\n\n  /**\n   * Observable that holds an Array of Observables. This is done, so that\n   * the component UI could consider to lazy load the UI components when they're\n   * in the viewpoint.\n   */\n  items$: Observable<Observable<Product>[]> = this.componentData$.pipe(\n    map((data) => data.productCodes?.trim().split(' ') ?? []),\n    map((codes) =>\n      codes.map((code) =>\n        this.productService.get(code, [this.PRODUCT_SCOPE, ProductScope.PRICE])\n      )\n    )\n  );\n\n  constructor(\n    protected componentData: CmsComponentData<model>,\n    protected productService: ProductService\n  ) {}\n}\n","<cx-carousel\n  [items]=\"items$ | async\"\n  [title]=\"title$ | async\"\n  [template]=\"carouselItem\"\n  itemWidth=\"285px\"\n>\n</cx-carousel>\n\n<ng-template #carouselItem let-item=\"item\">\n  <a tabindex=\"0\" [routerLink]=\"{ cxRoute: 'product', params: item } | cxUrl\">\n    <cx-media\n      [container]=\"item.images?.PRIMARY\"\n      format=\"product\"\n      [alt]=\"item.name\"\n    ></cx-media>\n    <h3>\n      {{ item.name }}\n    </h3>\n    <div class=\"price\">\n      {{ item.price?.formattedValue }}\n    </div>\n  </a>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig, UrlModule } from '@spartacus/core';\nimport {\n  CarouselModule,\n  MediaModule,\n} from '../../../../shared/components/index';\nimport { ProductCarouselComponent } from './product-carousel.component';\n\n@NgModule({\n  imports: [CommonModule, CarouselModule, MediaModule, RouterModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductCarouselComponent: {\n          component: ProductCarouselComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductCarouselComponent],\n  exports: [ProductCarouselComponent],\n})\nexport class ProductCarouselModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  CmsProductReferencesComponent,\n  isNotNullable,\n  Product,\n  ProductReference,\n  ProductReferenceService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../../cms-structure/page/model/cms-component-data';\nimport { CurrentProductService } from '../../current-product.service';\n\n@Component({\n  selector: 'cx-product-references',\n  templateUrl: './product-references.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductReferencesComponent {\n  constructor(\n    protected cmsComponentData: CmsComponentData<CmsProductReferencesComponent>,\n    protected currentProductService: CurrentProductService,\n    protected productReferenceService: ProductReferenceService\n  ) {}\n\n  protected get componentData$(): Observable<CmsProductReferencesComponent> {\n    return this.cmsComponentData.data$.pipe(filter(Boolean));\n  }\n\n  /**\n   * Returns an Observable String for the product code\n   */\n  protected get productCode$(): Observable<string> {\n    return this.currentProductService.getProduct().pipe(\n      filter(isNotNullable),\n      map((product) => product.code),\n      tap((_) => this.productReferenceService.cleanReferences())\n    );\n  }\n\n  /**\n   * Returns an Observable String for the title\n   */\n  get title$(): Observable<string> {\n    return this.componentData$.pipe(map((data) => data?.title));\n  }\n\n  /**\n   * Observable with an Array of Observables. This is done so that\n   * the component UI could consider to lazy load the UI components when they're\n   * in the viewpoint.\n   */\n  items$: Observable<Observable<Product>[]> = this.productCode$.pipe(\n    withLatestFrom(this.componentData$),\n    tap(([productCode, data]) =>\n      this.productReferenceService.loadProductReferences(\n        productCode,\n        data?.productReferenceTypes\n      )\n    ),\n    switchMap(([productCode, data]) =>\n      this.getProductReferences(productCode, data?.productReferenceTypes)\n    )\n  );\n\n  /**\n   * Returns an observable for product references\n   */\n  private getProductReferences(\n    code: string,\n    referenceType: string\n  ): Observable<Observable<Product>[]> {\n    return this.productReferenceService\n      .getProductReferences(code, referenceType)\n      .pipe(\n        filter(Boolean),\n        map((references: ProductReference[]) =>\n          references.map((reference) => of(reference.target))\n        )\n      );\n  }\n}\n","<cx-carousel\n  [title]=\"title$ | async\"\n  [items]=\"items$ | async\"\n  [template]=\"carouselItem\"\n>\n</cx-carousel>\n\n<ng-template #carouselItem let-item=\"item\">\n  <a tabindex=\"0\" [routerLink]=\"{ cxRoute: 'product', params: item } | cxUrl\">\n    <cx-media [container]=\"item.images?.PRIMARY\" format=\"product\"></cx-media>\n    <h4>{{ item.name }}</h4>\n    <div class=\"price\">{{ item.price?.formattedValue }}</div>\n  </a>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig, UrlModule } from '@spartacus/core';\nimport { CarouselModule } from '../../../../shared/components/carousel/carousel.module';\nimport { MediaModule } from '../../../../shared/components/media/media.module';\nimport { ProductReferencesComponent } from './product-references.component';\n\n@NgModule({\n  imports: [CommonModule, CarouselModule, MediaModule, RouterModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductReferencesComponent: {\n          component: ProductReferencesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductReferencesComponent],\n  exports: [ProductReferencesComponent],\n})\nexport class ProductReferencesModule {}\n","import { ViewConfig } from '../../../shared/config/view-config';\n\nexport const defaultViewConfig: ViewConfig = {\n  view: {\n    defaultPageSize: 12,\n    infiniteScroll: {\n      active: false,\n      productLimit: 0,\n      showMoreButton: false,\n    },\n  },\n};\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { ImageGroup, isNotNullable, Product } from '@spartacus/core';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, tap } from 'rxjs/operators';\nimport { CurrentProductService } from '../current-product.service';\n\n@Component({\n  selector: 'cx-product-images',\n  templateUrl: './product-images.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImagesComponent {\n  protected mainMediaContainer = new BehaviorSubject<any>(null);\n\n  protected product$: Observable<Product> = this.currentProductService\n    .getProduct()\n    .pipe(\n      filter(isNotNullable),\n      distinctUntilChanged(),\n      tap((p: Product) => {\n        this.mainMediaContainer.next(p.images?.PRIMARY ? p.images.PRIMARY : {});\n      })\n    );\n\n  thumbs$: Observable<any[]> = this.product$.pipe(\n    map((p: Product) => this.createThumbs(p))\n  );\n\n  mainImage$ = combineLatest([this.product$, this.mainMediaContainer]).pipe(\n    map(([, container]) => container)\n  );\n\n  constructor(protected currentProductService: CurrentProductService) {}\n\n  openImage(item: any): void {\n    this.mainMediaContainer.next(item);\n  }\n\n  isActive(thumbnail: ImageGroup): Observable<boolean> {\n    return this.mainMediaContainer.pipe(\n      filter(Boolean),\n      map((container: any) => {\n        return (\n          container.zoom &&\n          container.zoom.url &&\n          thumbnail.zoom &&\n          thumbnail.zoom.url &&\n          container.zoom.url === thumbnail.zoom.url\n        );\n      })\n    );\n  }\n\n  /** find the index of the main media in the list of media */\n  getActive(thumbs: any[]): Observable<number> {\n    return this.mainMediaContainer.pipe(\n      filter(Boolean),\n      map((container: any) => {\n        const current = thumbs.find(\n          (t) =>\n            t.media &&\n            container.zoom &&\n            t.media.container &&\n            t.media.container.zoom &&\n            t.media.container.zoom.url === container.zoom.url\n        );\n        return thumbs.indexOf(current);\n      })\n    );\n  }\n\n  /**\n   * Return an array of CarouselItems for the product thumbnails.\n   * In case there are less then 2 thumbs, we return null.\n   */\n  private createThumbs(product: Product): Observable<any>[] {\n    if (\n      !product.images ||\n      !product.images.GALLERY ||\n      product.images.GALLERY.length < 2\n    ) {\n      return [];\n    }\n\n    return (<any[]>product.images.GALLERY).map((c) => of({ container: c }));\n  }\n}\n","<ng-container *ngIf=\"mainImage$ | async as main\">\n  <cx-media [container]=\"main\"></cx-media>\n</ng-container>\n\n<ng-container *ngIf=\"thumbs$ | async as thumbs\">\n  <cx-carousel\n    *ngIf=\"thumbs.length\"\n    class=\"thumbs\"\n    [items]=\"thumbs\"\n    itemWidth=\"120px\"\n    [hideIndicators]=\"false\"\n    [template]=\"thumb\"\n  ></cx-carousel>\n</ng-container>\n\n<ng-template #thumb let-item=\"item\">\n  <cx-media\n    [container]=\"item.container\"\n    tabindex=\"0\"\n    (focus)=\"openImage(item.container)\"\n    [class.is-active]=\"isActive(item.container) | async\"\n    format=\"product\"\n  >\n  </cx-media>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/index';\nimport { CarouselModule } from '../../../shared/components/carousel/index';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { ProductImagesComponent } from './product-images.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    MediaModule,\n    OutletModule,\n    CarouselModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductImagesComponent: {\n          component: ProductImagesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductImagesComponent],\n  exports: [ProductImagesComponent],\n})\nexport class ProductImagesModule {}\n","import {\n  AfterContentChecked,\n  ChangeDetectionStrategy,\n  Component,\n} from '@angular/core';\nimport { Product, TranslationService, WindowRef } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { CurrentProductService } from '../current-product.service';\n\n@Component({\n  selector: 'cx-product-intro',\n  templateUrl: './product-intro.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductIntroComponent implements AfterContentChecked {\n  reviewsTabAvailable = new BehaviorSubject<boolean>(false);\n\n  product$: Observable<Product> = this.currentProductService.getProduct();\n\n  constructor(\n    protected currentProductService: CurrentProductService,\n    private translationService: TranslationService,\n    protected winRef: WindowRef\n  ) {}\n\n  ngAfterContentChecked() {\n    this.reviewsTabAvailable.next(!!this.getReviewsComponent());\n  }\n\n  // Scroll to views component on page and click \"Reviews\" tab\n  showReviews() {\n    // Use translated label for Reviews tab reference\n    this.translationService\n      .translate('TabPanelContainer.tabs.ProductReviewsTabComponent')\n      .subscribe((reviewsTabLabel) => {\n        const tabsComponent = this.getTabsComponent();\n        const reviewsTab = this.getTabByLabel(reviewsTabLabel, tabsComponent);\n        const reviewsComponent = this.getReviewsComponent();\n        if (reviewsTab && reviewsComponent) {\n          this.clickTabIfInactive(reviewsTab);\n          setTimeout(\n            () => reviewsComponent.scrollIntoView({ behavior: 'smooth' }),\n            0\n          );\n        }\n      })\n      .unsubscribe();\n  }\n\n  // NOTE: Does not currently exists as its own component\n  // but part of tabs component. This is likely to change in refactor.\n  private getReviewsComponent(): Element {\n    return this.winRef.document.querySelector('cx-product-reviews');\n  }\n\n  // Get Tabs Component if exists on page\n  private getTabsComponent(): Element {\n    return this.winRef.document.querySelector('cx-tab-paragraph-container');\n  }\n\n  // Click to activate tab if not already active\n  private clickTabIfInactive(tab: HTMLElement): void {\n    if (\n      !tab.classList.contains('active') ||\n      tab.classList.contains('toggled')\n    ) {\n      tab.click();\n    }\n  }\n\n  // Get Tab by label if exists on page\n  private getTabByLabel(label: string, tabsComponent: Element): HTMLElement {\n    if (tabsComponent) {\n      // NOTE: Reads through button tags to click on correct tab\n      // There may be a better way of doing this now/after refactor\n      const tabElements: HTMLCollectionOf<HTMLElement> =\n        tabsComponent.getElementsByTagName('button');\n\n      // Look through button tab elements until finding tab with label\n      for (const buttonElement of Array.from(tabElements)) {\n        if (buttonElement.innerHTML.includes(label)) {\n          return buttonElement;\n        }\n      }\n    }\n  }\n}\n","<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"rating\" *ngIf=\"product.averageRating\">\n    <cx-star-rating [rating]=\"product?.averageRating\"></cx-star-rating>\n\n    <div class=\"count\">({{ product?.numberOfReviews }})</div>\n\n    <button\n      *ngIf=\"reviewsTabAvailable | async\"\n      class=\"btn btn-link cx-action-link\"\n      (click)=\"showReviews()\"\n      [attr.aria-label]=\"\n        'productSummary.showReviewsDetailed'\n          | cxTranslate\n            : {\n                rating: product.averageRating | number: '1.0-1',\n                count: product?.numberOfReviews\n              }\n      \"\n    >\n      {{ 'productSummary.showReviews' | cxTranslate }}\n    </button>\n  </div>\n  <div class=\"rating\" *ngIf=\"!product.averageRating\">\n    {{ 'productDetails.noReviews' | cxTranslate }}\n  </div>\n  <div class=\"code\">\n    {{ 'productSummary.id' | cxTranslate }} {{ product?.code }}\n  </div>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { StarRatingModule } from '../../../shared/components/star-rating/star-rating.module';\nimport { ProductIntroComponent } from './product-intro.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, StarRatingModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductIntroComponent: {\n          component: ProductIntroComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductIntroComponent],\n  exports: [ProductIntroComponent],\n})\nexport class ProductIntroModule {}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  ActivatedRouterStateSnapshot,\n  CurrencyService,\n  LanguageService,\n  ProductSearchPage,\n  ProductSearchService,\n  RouterState,\n  RoutingService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, using } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  map,\n  shareReplay,\n  tap,\n} from 'rxjs/operators';\nimport { ProductListRouteParams, SearchCriteria } from './product-list.model';\nimport { ViewConfig } from '../../../../shared/config/view-config';\n\n/**\n * The `ProductListComponentService` is used to search products. The service is used\n * on the Product Listing Page, for listing products and the facet navigation.\n *\n * The service exposes the product search results based on the category and search\n * route parameters. The route parameters are used to query products by the help of\n * the `ProductSearchService`.\n */\n@Injectable({ providedIn: 'root' })\nexport class ProductListComponentService {\n  protected readonly RELEVANCE_ALLCATEGORIES = ':relevance:allCategories:';\n\n  constructor(\n    protected productSearchService: ProductSearchService,\n    protected routing: RoutingService,\n    protected activatedRoute: ActivatedRoute,\n    protected currencyService: CurrencyService,\n    protected languageService: LanguageService,\n    protected router: Router,\n    protected config: ViewConfig\n  ) {}\n\n  /**\n   * Emits the search results for the current search query.\n   *\n   * The `searchResults$` is _not_ concerned with querying, it only observes the\n   * `productSearchService.getResults()`\n   */\n  protected searchResults$: Observable<ProductSearchPage> =\n    this.productSearchService\n      .getResults()\n      .pipe(filter((searchResult) => Object.keys(searchResult).length > 0));\n\n  /**\n   * Observes the route and performs a search on each route change.\n   *\n   * Context changes, such as language and currencies are also taken\n   * into account, so that the search is performed again.\n   */\n  protected searchByRouting$: Observable<ActivatedRouterStateSnapshot> =\n    combineLatest([\n      this.routing.getRouterState().pipe(\n        distinctUntilChanged((x, y) => {\n          // router emits new value also when the anticipated `nextState` changes\n          // but we want to perform search only when current url changes\n          return x.state.url === y.state.url;\n        })\n      ),\n      ...this.siteContext,\n    ]).pipe(\n      debounceTime(0),\n      map(([routerState, ..._context]) => (routerState as RouterState).state),\n      tap((state: ActivatedRouterStateSnapshot) => {\n        const criteria = this.getCriteriaFromRoute(\n          state.params,\n          state.queryParams\n        );\n        this.search(criteria);\n      })\n    );\n\n  /**\n   * This stream is used for the Product Listing and Product Facets.\n   *\n   * It not only emits search results, but also performs a search on every change\n   * of the route (i.e. route params or query params).\n   *\n   * When a user leaves the PLP route, the PLP component unsubscribes from this stream\n   * so no longer the search is performed on route change.\n   */\n  readonly model$: Observable<ProductSearchPage> = using(\n    () => this.searchByRouting$.subscribe(),\n    () => this.searchResults$\n  ).pipe(shareReplay({ bufferSize: 1, refCount: true }));\n\n  /**\n   * Expose the `SearchCriteria`. The search criteria are driven by the route parameters.\n   *\n   * This search route configuration is not yet configurable\n   * (see https://github.com/SAP/spartacus/issues/7191).\n   */\n  protected getCriteriaFromRoute(\n    routeParams: ProductListRouteParams,\n    queryParams: SearchCriteria\n  ): SearchCriteria {\n    return {\n      query: queryParams.query || this.getQueryFromRouteParams(routeParams),\n      pageSize: queryParams.pageSize || this.config.view?.defaultPageSize,\n      currentPage: queryParams.currentPage,\n      sortCode: queryParams.sortCode,\n    };\n  }\n\n  /**\n   * Resolves the search query from the given `ProductListRouteParams`.\n   */\n  protected getQueryFromRouteParams({\n    query,\n    categoryCode,\n    brandCode,\n  }: ProductListRouteParams) {\n    if (query) {\n      return query;\n    }\n    if (categoryCode) {\n      return this.RELEVANCE_ALLCATEGORIES + categoryCode;\n    }\n\n    // TODO: drop support for brands as they should be treated\n    // similarly as any category.\n    if (brandCode) {\n      return this.RELEVANCE_ALLCATEGORIES + brandCode;\n    }\n  }\n\n  /**\n   * Performs a search based on the given search criteria.\n   *\n   * The search is delegated to the `ProductSearchService`.\n   */\n  protected search(criteria: SearchCriteria): void {\n    const currentPage = criteria.currentPage;\n    const pageSize = criteria.pageSize;\n    const sort = criteria.sortCode;\n\n    this.productSearchService.search(\n      criteria.query,\n      // TODO: consider dropping this complex passing of cleaned object\n      Object.assign(\n        {},\n        currentPage && { currentPage },\n        pageSize && { pageSize },\n        sort && { sort }\n      )\n    );\n  }\n\n  /**\n   * Get items from a given page without using navigation\n   */\n  getPageItems(pageNumber: number): void {\n    this.routing\n      .getRouterState()\n      .subscribe((route) => {\n        const routeCriteria = this.getCriteriaFromRoute(\n          route.state.params,\n          route.state.queryParams\n        );\n        const criteria = {\n          ...routeCriteria,\n          currentPage: pageNumber,\n        };\n        this.search(criteria);\n      })\n      .unsubscribe();\n  }\n\n  /**\n   * Sort the search results by the given sort code.\n   */\n  sort(sortCode: string): void {\n    this.route({ sortCode });\n  }\n\n  /**\n   * Routes to the next product listing page, using the given `queryParams`. The\n   * `queryParams` support sorting, pagination and querying.\n   *\n   * The `queryParams` are delegated to the Angular router `NavigationExtras`.\n   */\n  protected route(queryParams: SearchCriteria): void {\n    this.router.navigate([], {\n      queryParams,\n      queryParamsHandling: 'merge',\n      relativeTo: this.activatedRoute,\n    });\n  }\n\n  /**\n   * The site context is used to update the search query in case of a\n   * changing context. The context will typically influence the search data.\n   *\n   * We keep this private for now, as we're likely refactoring this in the next\n   * major version.\n   */\n  private get siteContext(): Observable<string>[] {\n    // TODO: we should refactor this so that custom context will be taken\n    // into account automatically. Ideally, we drop the specific context\n    // from the constructor, and query a ContextService for all contexts.\n\n    return [this.languageService.getActive(), this.currencyService.getActive()];\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { ICON_TYPE } from '../../../misc/icon/icon.model';\n\nexport enum ViewModes {\n  Grid = 'grid',\n  List = 'list',\n}\n\n@Component({\n  selector: 'cx-product-view',\n  templateUrl: './product-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductViewComponent {\n  iconTypes = ICON_TYPE;\n  @Input()\n  mode: ViewModes;\n  @Output()\n  modeChange = new EventEmitter<string>();\n\n  get buttonClass() {\n    const viewName: string = this.viewMode.toLowerCase();\n    return `cx-product-${viewName}`;\n  }\n\n  /**\n   *   Display icons inversely to allow users\n   *   to see the view they will navigate to\n   */\n  get viewMode() {\n    if (this.mode === 'list') {\n      return this.iconTypes.GRID;\n    } else if (this.mode === 'grid') {\n      return this.iconTypes.LIST;\n    }\n  }\n\n  changeMode() {\n    const newMode =\n      this.mode === ViewModes.Grid ? ViewModes.List : ViewModes.Grid;\n    this.modeChange.emit(newMode);\n  }\n}\n","<button\n  class=\"btn cx-product-layout\"\n  [ngClass]=\"buttonClass\"\n  (click)=\"changeMode()\"\n  tabindex=\"0\"\n  attr.aria-label=\"{{\n    viewMode === iconTypes.GRID\n      ? ('productView.gridView' | cxTranslate)\n      : viewMode === iconTypes.LIST\n      ? ('productView.listView' | cxTranslate)\n      : null\n  }}\"\n>\n  <cx-icon\n    *ngIf=\"viewMode === iconTypes.GRID\"\n    [type]=\"iconTypes.GRID\"\n  ></cx-icon>\n  <cx-icon\n    *ngIf=\"viewMode === iconTypes.LIST\"\n    [type]=\"iconTypes.LIST\"\n  ></cx-icon>\n</button>\n","export enum ProductDetailOutlets {\n  INTRO = 'PDP.INTRO',\n  PRICE = 'PDP.PRICE',\n  SHARE = 'PDP.SHARE',\n  SUMMARY = 'PDP.SUMMARY',\n}\nexport enum ProductListOutlets {\n  ITEM_ACTIONS = 'cx-product-list-item.actions',\n  ITEM_DETAILS = 'cx-product-list-item.details',\n}\n","import { Injectable } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n/**\n * Context for `ProductListItemComponent`.\n */\n@Injectable()\nexport abstract class ProductListItemContext {\n  readonly product$: Observable<Product>;\n}\n","import { Injectable } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { ReplaySubject } from 'rxjs';\nimport { ProductListItemContext } from './product-list-item-context.model';\n\n/**\n * Context source for `ProductListItemComponent`.\n *\n * `ProductListItemContext` should be injected instead in child components.\n */\n@Injectable()\nexport class ProductListItemContextSource extends ProductListItemContext {\n  readonly product$ = new ReplaySubject<Product>(1);\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { ProductListOutlets } from '../../product-outlets.model';\nimport { ProductListItemContextSource } from '../model/product-list-item-context-source.model';\nimport { ProductListItemContext } from '../model/product-list-item-context.model';\n\n@Component({\n  selector: 'cx-product-grid-item',\n  templateUrl: './product-grid-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    ProductListItemContextSource,\n    {\n      provide: ProductListItemContext,\n      useExisting: ProductListItemContextSource,\n    },\n  ],\n})\nexport class ProductGridItemComponent implements OnChanges {\n  readonly ProductListOutlets = ProductListOutlets;\n  @Input() product: any;\n\n  constructor(\n    protected productListItemContextSource: ProductListItemContextSource\n  ) {}\n\n  ngOnChanges(changes?: SimpleChanges): void {\n    if (changes?.product) {\n      this.productListItemContextSource.product$.next(this.product);\n    }\n  }\n}\n","<a\n  [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n  class=\"cx-product-image-container\"\n  tabindex=\"-1\"\n>\n  <cx-media\n    class=\"cx-product-image\"\n    [container]=\"product.images?.PRIMARY\"\n    format=\"product\"\n    [alt]=\"product.summary\"\n  ></cx-media>\n</a>\n<a\n  [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n  class=\"cx-product-name\"\n  [innerHTML]=\"product.nameHtml\"\n></a>\n\n<ng-template [cxOutlet]=\"ProductListOutlets.ITEM_DETAILS\">\n  <div class=\"cx-product-rating\">\n    <cx-star-rating\n      *ngIf=\"product.averageRating\"\n      [rating]=\"product?.averageRating\"\n    ></cx-star-rating>\n    <div *ngIf=\"!product.averageRating\">\n      {{ 'productDetails.noReviews' | cxTranslate }}\n    </div>\n  </div>\n  <div class=\"cx-product-price-container\">\n    <div\n      class=\"cx-product-price\"\n      [attr.aria-label]=\"'productDetails.productPrice' | cxTranslate\"\n    >\n      {{ product.price?.formattedValue }}\n    </div>\n  </div>\n</ng-template>\n\n<ng-template [cxOutlet]=\"ProductListOutlets.ITEM_ACTIONS\">\n  <cx-add-to-cart\n    *ngIf=\"product.stock?.stockLevelStatus !== 'outOfStock'\"\n    [showQuantity]=\"false\"\n    [product]=\"product\"\n  ></cx-add-to-cart>\n</ng-template>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { ProductListOutlets } from '../../product-outlets.model';\nimport { ProductListItemContextSource } from '../model/product-list-item-context-source.model';\nimport { ProductListItemContext } from '../model/product-list-item-context.model';\n\n@Component({\n  selector: 'cx-product-list-item',\n  templateUrl: './product-list-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    ProductListItemContextSource,\n    {\n      provide: ProductListItemContext,\n      useExisting: ProductListItemContextSource,\n    },\n  ],\n})\nexport class ProductListItemComponent implements OnChanges {\n  readonly ProductListOutlets = ProductListOutlets;\n  @Input() product: any;\n\n  constructor(\n    protected productListItemContextSource: ProductListItemContextSource\n  ) {}\n\n  ngOnChanges(changes?: SimpleChanges): void {\n    if (changes?.product) {\n      this.productListItemContextSource.product$.next(this.product);\n    }\n  }\n}\n","<div class=\"row\">\n  <div class=\"col-12 col-md-4\">\n    <a\n      [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n      class=\"cx-product-image-container\"\n      tabindex=\"-1\"\n    >\n      <cx-media\n        class=\"cx-product-image\"\n        [container]=\"product.images?.PRIMARY\"\n        format=\"product\"\n        [alt]=\"product.summary\"\n      ></cx-media>\n    </a>\n  </div>\n  <div class=\"col-12 col-md-8\">\n    <a\n      [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n      class=\"cx-product-name\"\n    >\n      <h2 [innerHtml]=\"product.nameHtml\"></h2>\n    </a>\n\n    <ng-template [cxOutlet]=\"ProductListOutlets.ITEM_DETAILS\">\n      <cx-star-rating\n        *ngIf=\"product.averageRating\"\n        [rating]=\"product?.averageRating\"\n      ></cx-star-rating>\n      <div *ngIf=\"!product.averageRating\" class=\"cx-product-no-review\">\n        {{ 'productDetails.noReviews' | cxTranslate }}\n      </div>\n      <div\n        class=\"cx-product-price\"\n        [attr.aria-label]=\"'productDetails.productPrice' | cxTranslate\"\n      >\n        {{ product.price?.formattedValue }}\n      </div>\n    </ng-template>\n\n    <div class=\"row\">\n      <div class=\"col-12 col-md-8\">\n        <p class=\"cx-product-summary\" [innerHtml]=\"product.summary\">\n          {{ product.summary }}\n        </p>\n      </div>\n      <div class=\"col-12 col-md-4\">\n        <ng-template [cxOutlet]=\"ProductListOutlets.ITEM_ACTIONS\">\n          <cx-add-to-cart\n            *ngIf=\"product.stock?.stockLevelStatus !== 'outOfStock'\"\n            [showQuantity]=\"false\"\n            [product]=\"product\"\n          ></cx-add-to-cart>\n        </ng-template>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, Input, OnDestroy, ChangeDetectorRef } from '@angular/core';\nimport { ProductSearchPage } from '@spartacus/core';\nimport { ViewModes } from '../../product-view/product-view.component';\nimport { Subscription } from 'rxjs';\nimport { ProductListComponentService } from '../product-list-component.service';\nimport { ViewConfig } from '../../../../../shared/config/view-config';\n\n@Component({\n  selector: 'cx-product-scroll',\n  templateUrl: './product-scroll.component.html',\n})\nexport class ProductScrollComponent implements OnDestroy {\n  private subscription = new Subscription();\n\n  @Input('scrollConfig')\n  set setConfig(inputConfig: ViewConfig) {\n    this.setComponentConfigurations(inputConfig);\n  }\n\n  model: ProductSearchPage;\n  @Input('model')\n  set setModel(inputModel: ProductSearchPage) {\n    this.infiniteScrollOperations(inputModel);\n  }\n\n  inputViewMode: ViewModes;\n  @Input('inputViewMode')\n  set setViewMode(inputViewMode: ViewModes) {\n    this.inputViewMode = inputViewMode;\n    //If viewMode is already set (meaning it is not the first load)\n    //Reset the product list\n    if (this.viewMode) {\n      this.resetListOnViewModeChange();\n    } else {\n      //If viewMode is not set (meaning it is the first load)\n      //Set the viewMode\n      this.viewMode = inputViewMode;\n    }\n  }\n\n  viewMode: ViewModes;\n  productLimit: number;\n  maxProducts: number;\n\n  ViewModes = ViewModes;\n  appendProducts = false;\n  resetList = false;\n  isMaxProducts = false;\n  isLastPage = false;\n  isEmpty = false;\n\n  constructor(\n    private productListComponentService: ProductListComponentService,\n    private ref: ChangeDetectorRef\n  ) {}\n\n  scrollPage(pageNumber: number): void {\n    this.appendProducts = true;\n    this.ref.markForCheck();\n    this.productListComponentService.getPageItems(pageNumber);\n  }\n\n  loadNextPage(pageNumber: number): void {\n    this.isMaxProducts = false;\n    this.scrollPage(pageNumber);\n  }\n\n  scrollToTop(): void {\n    window.scroll(0, 0);\n  }\n\n  private setComponentConfigurations(scrollConfig: ViewConfig): void {\n    const isButton = scrollConfig.view?.infiniteScroll?.showMoreButton;\n    const configProductLimit = scrollConfig.view?.infiniteScroll?.productLimit;\n\n    //Display \"show more\" button every time when button configuration is true\n    //Otherwise, only display \"show more\" when the configuration product limit is reached\n    this.productLimit = isButton ? 1 : configProductLimit;\n  }\n\n  private infiniteScrollOperations(inputModel: ProductSearchPage): void {\n    if (this.appendProducts) {\n      this.model = {\n        ...inputModel,\n        products: this.model.products.concat(inputModel.products),\n      };\n    } else {\n      this.model = inputModel;\n      this.maxProducts = this.productLimit;\n    }\n    this.setConditions();\n    this.ref.markForCheck();\n  }\n\n  private resetListOnViewModeChange(): void {\n    this.scrollToTop();\n    this.resetList = true;\n    this.productListComponentService.getPageItems(0);\n  }\n\n  //Set booleans after model has been retrieved\n  private setConditions(): void {\n    this.isEmpty = !this.model.products || this.model.products.length === 0;\n\n    this.isLastPage =\n      this.model.pagination.currentPage ===\n      this.model.pagination.totalPages - 1;\n\n    this.isMaxProducts =\n      this.productLimit &&\n      this.productLimit !== 0 &&\n      this.model.products.length >= this.maxProducts;\n\n    //Add the productLimit to the current number of products to determine the next max number of products\n    if (this.isMaxProducts) {\n      this.maxProducts = this.model.products.length + this.productLimit;\n    }\n\n    //Only change viewMode once the new model is set\n    //This prevents flickering issues\n    if (this.viewMode !== this.inputViewMode) {\n      this.viewMode = this.inputViewMode;\n    }\n\n    this.resetList = false;\n    this.appendProducts = false;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","<ng-container *ngIf=\"viewMode === ViewModes.Grid\">\n  <div\n    infiniteScroll\n    [infiniteScrollDistance]=\"5\"\n    [infiniteScrollThrottle]=\"50\"\n    [infiniteScrollDisabled]=\"isMaxProducts || isLastPage || isEmpty\"\n    (scrolled)=\"scrollPage(model?.pagination?.currentPage + 1)\"\n  >\n    <div class=\"row\">\n      <cx-product-grid-item\n        *ngFor=\"let product of model?.products\"\n        [product]=\"product\"\n        class=\"col-12 col-sm-6 col-md-4\"\n      ></cx-product-grid-item>\n    </div>\n    <div\n      [className]=\"\n        !isLastPage && model?.pagination?.currentPage > 0\n          ? 'cx-double-btn-container grid-btn-padding'\n          : 'cx-single-btn-container grid-btn-padding'\n      \"\n    >\n      <div\n        *ngIf=\"\n          (isMaxProducts || isLastPage) && model?.pagination?.currentPage > 0\n        \"\n        (click)=\"scrollToTop()\"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'productList.backToTopBtn' | cxTranslate }}\n      </div>\n      <div\n        *ngIf=\"isMaxProducts && !isLastPage\"\n        (click)=\"loadNextPage(model?.pagination?.currentPage + 1)\"\n        class=\"btn btn-block btn-action align-btn\"\n      >\n        {{ 'productList.showMoreBtn' | cxTranslate }}\n      </div>\n    </div>\n    <div *ngIf=\"appendProducts\" class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n</ng-container>\n\n<ng-container *ngIf=\"viewMode === ViewModes.List\">\n  <div\n    infiniteScroll\n    [infiniteScrollDistance]=\"3\"\n    [infiniteScrollThrottle]=\"50\"\n    [infiniteScrollDisabled]=\"isMaxProducts || isLastPage || isEmpty\"\n    (scrolled)=\"scrollPage(model?.pagination?.currentPage + 1)\"\n  >\n    <cx-product-list-item\n      *ngFor=\"let product of model?.products\"\n      [product]=\"product\"\n      class=\"cx-product-search-list\"\n    ></cx-product-list-item>\n    <div\n      [className]=\"\n        !isLastPage && model?.pagination?.currentPage > 0\n          ? 'cx-double-btn-container'\n          : 'cx-single-btn-container'\n      \"\n    >\n      <div\n        *ngIf=\"\n          (isMaxProducts || isLastPage) && model?.pagination?.currentPage > 0\n        \"\n        (click)=\"scrollToTop()\"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'productList.backToTopBtn' | cxTranslate }}\n      </div>\n      <div\n        *ngIf=\"isMaxProducts && !isLastPage\"\n        (click)=\"loadNextPage(model?.pagination?.currentPage + 1)\"\n        class=\"btn btn-block btn-action align-btn\"\n      >\n        {{ 'productList.showMoreBtn' | cxTranslate }}\n      </div>\n    </div>\n    <div *ngIf=\"appendProducts\" class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n</ng-container>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ProductSearchPage } from '@spartacus/core';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { PageLayoutService } from '../../../../cms-structure/page/index';\nimport { ViewConfig } from '../../../../shared/config/view-config';\nimport { ViewModes } from '../product-view/product-view.component';\nimport { ProductListComponentService } from './product-list-component.service';\n\n@Component({\n  selector: 'cx-product-list',\n  templateUrl: './product-list.component.html',\n})\nexport class ProductListComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n\n  isInfiniteScroll: boolean;\n\n  model$: Observable<ProductSearchPage> =\n    this.productListComponentService.model$;\n\n  viewMode$ = new BehaviorSubject<ViewModes>(ViewModes.Grid);\n  ViewModes = ViewModes;\n\n  constructor(\n    private pageLayoutService: PageLayoutService,\n    private productListComponentService: ProductListComponentService,\n    public scrollConfig: ViewConfig\n  ) {}\n\n  ngOnInit(): void {\n    this.isInfiniteScroll = this.scrollConfig.view?.infiniteScroll?.active;\n\n    this.subscription.add(\n      this.pageLayoutService.templateName$\n        .pipe(take(1))\n        .subscribe((template) => {\n          this.viewMode$.next(\n            template === 'ProductGridPageTemplate'\n              ? ViewModes.Grid\n              : ViewModes.List\n          );\n        })\n    );\n  }\n\n  sortList(sortCode: string): void {\n    this.productListComponentService.sort(sortCode);\n  }\n\n  setViewMode(mode: ViewModes): void {\n    this.viewMode$.next(mode);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","<div class=\"cx-page\" *ngIf=\"model$ | async as model\">\n  <section class=\"cx-page-section\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-12 col-lg-12\" *ngIf=\"viewMode$ | async as viewMode\">\n          <div class=\"cx-sorting top\">\n            <div class=\"row\">\n              <label\n                class=\"form-group cx-sort-dropdown col-12 col-lg-4 mr-auto\"\n              >\n                <span>{{ 'productList.sortBy' | cxTranslate }}</span>\n                <cx-sorting\n                  [sortOptions]=\"model.sorts\"\n                  (sortListEvent)=\"sortList($event)\"\n                  [selectedOption]=\"model.pagination.sort\"\n                  placeholder=\"{{ 'productList.sortBy' | cxTranslate }}\"\n                ></cx-sorting>\n              </label>\n              <div *ngIf=\"!isInfiniteScroll\" class=\"col-auto\">\n                <div\n                  class=\"cx-pagination\"\n                  [attr.aria-label]=\"\n                    'productList.productSearchPagination' | cxTranslate\n                  \"\n                >\n                  <cx-pagination\n                    [pagination]=\"model.pagination\"\n                    queryParam=\"currentPage\"\n                    [defaultPage]=\"0\"\n                  ></cx-pagination>\n                </div>\n              </div>\n              <div class=\"col-auto ml-auto ml-lg-0\">\n                <cx-product-view\n                  (modeChange)=\"setViewMode($event)\"\n                  [mode]=\"viewMode\"\n                ></cx-product-view>\n              </div>\n            </div>\n          </div>\n          <div class=\"cx-product-container\">\n            <!-- Product list when using pagination -->\n            <ng-container *ngIf=\"!isInfiniteScroll; else infiniteScroll\">\n              <ng-container *ngIf=\"viewMode === ViewModes.Grid\">\n                <div class=\"row\">\n                  <cx-product-grid-item\n                    *ngFor=\"let product of model?.products\"\n                    [product]=\"product\"\n                    class=\"col-12 col-sm-6 col-md-4\"\n                  ></cx-product-grid-item>\n                </div>\n              </ng-container>\n\n              <ng-container *ngIf=\"viewMode === ViewModes.List\">\n                <cx-product-list-item\n                  *ngFor=\"let product of model?.products\"\n                  [product]=\"product\"\n                  class=\"cx-product-search-list\"\n                ></cx-product-list-item>\n              </ng-container>\n            </ng-container>\n\n            <!-- Product list when using infinite scroll -->\n            <ng-template #infiniteScroll>\n              <cx-product-scroll\n                [scrollConfig]=\"scrollConfig\"\n                [model]=\"model\"\n                [inputViewMode]=\"viewMode\"\n              ></cx-product-scroll>\n            </ng-template>\n          </div>\n          <div class=\"cx-sorting bottom\">\n            <div class=\"row\">\n              <label\n                class=\"form-group cx-sort-dropdown col-12 col-lg-4 mr-auto\"\n              >\n                <span>{{ 'productList.sortBy' | cxTranslate }}</span>\n                <cx-sorting\n                  [sortOptions]=\"model.sorts\"\n                  (sortListEvent)=\"sortList($event)\"\n                  [selectedOption]=\"model.pagination.sort\"\n                  placeholder=\"{{ 'productList.sortBy' | cxTranslate }}\"\n                ></cx-sorting>\n              </label>\n              <div\n                *ngIf=\"!isInfiniteScroll\"\n                class=\"col-auto\"\n                [attr.aria-label]=\"\n                  'productList.productSearchPagination' | cxTranslate\n                \"\n              >\n                <div class=\"cx-pagination\">\n                  <cx-pagination\n                    [pagination]=\"model.pagination\"\n                    queryParam=\"currentPage\"\n                    [defaultPage]=\"0\"\n                  ></cx-pagination>\n                </div>\n              </div>\n              <div class=\"col-auto ml-auto ml-lg-0\">\n                <cx-product-view\n                  (modeChange)=\"setViewMode($event)\"\n                  [mode]=\"viewMode\"\n                ></cx-product-view>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</div>\n","import { Breadcrumb, Facet } from '@spartacus/core';\n\n/**\n * UI model that holds the full list of facet and active facets for\n * the product list.\n */\nexport interface FacetList {\n  facets: Facet[];\n  activeFacets?: Breadcrumb[];\n}\n\nexport interface FacetCollapseState {\n  /**\n   * Indicates whether the facet is toggled to expand or collapse the facet values.\n   * Whether the toggle results in an expanded or collapsed state, depends on the\n   * experience, which is controlled in CSS.\n   */\n  toggled?: FacetGroupCollapsedState;\n\n  /**\n   * The top number of facet values that will be visible.\n   */\n  topVisible?: number;\n\n  /**\n   * The max number of facet values which will be visible. This includes\n   * the top visible number.\n   */\n  maxVisible?: number;\n}\n\nexport enum FacetGroupCollapsedState {\n  EXPANDED = 'EXPANDED',\n  COLLAPSED = 'COLLAPSED',\n}\n","import { Injectable } from '@angular/core';\nimport { Params } from '@angular/router';\nimport {\n  ActivatedRouterStateSnapshot,\n  Breadcrumb,\n  PageType,\n  ProductSearchPage,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, pluck, switchMap } from 'rxjs/operators';\nimport { ProductListComponentService } from '../../container/product-list-component.service';\nimport { FacetList } from '../facet.model';\n\n/**\n * Provides access to all the facets and active facets for the Product Listing Page.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductFacetService {\n  constructor(\n    protected routing: RoutingService,\n    protected productListComponentService: ProductListComponentService\n  ) {}\n\n  protected readonly routeState$ = this.routing\n    .getRouterState()\n    .pipe(pluck('state'));\n\n  /**\n   * Returns the search results for the current page.\n   */\n  protected readonly searchResult$: Observable<ProductSearchPage> =\n    this.routeState$.pipe(\n      switchMap((state) =>\n        this.productListComponentService.model$.pipe(\n          filter((page) => this.filterForPage(state, page)),\n          map((page) => ({\n            ...page,\n            breadcrumbs: this.filterBreadcrumbs(\n              page?.breadcrumbs ?? [],\n              state.params\n            ),\n          }))\n        )\n      )\n    );\n\n  /**\n   * Observes the facets and active facets for the given page. The facet data\n   * is provided in a `FacetList`.\n   */\n  readonly facetList$: Observable<FacetList> = this.searchResult$.pipe(\n    map(\n      (result: ProductSearchPage) =>\n        ({\n          facets: result.facets,\n          activeFacets: result.breadcrumbs,\n        } as FacetList)\n    )\n  );\n\n  /**\n   * Filters the current result by verifying if the result is related to the page.\n   * This is done to avoid a combination of the next page and the current search results.\n   */\n  protected filterForPage(\n    state: ActivatedRouterStateSnapshot,\n    page: ProductSearchPage\n  ): boolean {\n    if (!page.currentQuery?.query?.value) {\n      return false;\n    }\n    if (state.context.type === PageType.CATEGORY_PAGE) {\n      return (\n        page.currentQuery.query.value.indexOf(\n          `allCategories:${state.context.id}`\n        ) > -1\n      );\n    }\n\n    if (\n      state.context.type === PageType.CONTENT_PAGE &&\n      state.context.id === 'search'\n    ) {\n      return page.currentQuery.query.value.startsWith(`${state.params.query}:`);\n    }\n    return false;\n  }\n\n  /**\n   * Filter breadcrumbs which are not actively selected but coming from\n   * the route navigation.\n   *\n   * The breadcrumbs might include the active category page code, which is not actively\n   * selected by the user.\n   */\n  protected filterBreadcrumbs(\n    breadcrumbs: Breadcrumb[],\n    params: Params\n  ): Breadcrumb[] {\n    return breadcrumbs\n      ? breadcrumbs.filter(\n          (breadcrumb) =>\n            !(\n              breadcrumb.facetCode === 'allCategories' &&\n              (breadcrumb.facetValueCode === params.categoryCode ||\n                breadcrumb.facetValueCode === params.brandCode)\n            )\n        )\n      : [];\n  }\n}\n","import { HttpUrlEncodingCodec } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Facet } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport {\n  FacetCollapseState,\n  FacetGroupCollapsedState,\n  FacetList,\n} from '../facet.model';\nimport { ProductFacetService } from './product-facet.service';\n\n/**\n * Provides access to the facets as well as their UI state. The UI state\n * represents user related changes on the facets, such as expanding or\n * collapsing a facet group or expanding the number of _visible_ facet values.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class FacetService {\n  /**\n   * An internal map where we keep the UI state of the facets.\n   */\n  protected facetState = new Map<string, BehaviorSubject<FacetCollapseState>>();\n\n  constructor(protected productFacetService: ProductFacetService) {}\n\n  /**\n   * Observes the facets for the given page and configures the initial UI state.\n   *\n   * Facets are configured on each emission so that we keep the facet UI state.\n   * This is mainly done to keep the state during usage of the facet, but also\n   * benefitial when the facets are rebuild while using them.\n   */\n  facetList$: Observable<FacetList> = this.productFacetService.facetList$.pipe(\n    tap((facetList) => {\n      facetList.facets.forEach((facet) => this.initialize(facet));\n    })\n  );\n\n  /**\n   * Returns the observed UI state for the facet.\n   *\n   * The state is initialized using the `initialize` method.\n   */\n  getState(facet: Facet): Observable<FacetCollapseState> {\n    this.initialize(facet);\n    return this.facetState.get(facet.name);\n  }\n\n  /**\n   * Returns the UI state for the facet.\n   *\n   * The state is initialized using the `initialize` method.\n   */\n  protected getStateSnapshot(facet: Facet): FacetCollapseState {\n    return (this.getState(facet) as BehaviorSubject<FacetCollapseState>).value;\n  }\n\n  /**\n   * Toggles the facet expanded state. If the expanded state becomes false,\n   * the visible values will decrease to the top values only.\n   *\n   * If the optional value argument is provided the expanded state will be set\n   * to this value, regardless of the current `expanded` state.\n   */\n  toggle(facet: Facet, isExpanded: boolean): void {\n    const state = this.getStateSnapshot(facet);\n\n    const toggledState = {\n      toggled: isExpanded\n        ? FacetGroupCollapsedState.COLLAPSED\n        : FacetGroupCollapsedState.EXPANDED,\n    } as FacetCollapseState;\n\n    if (toggledState.toggled === FacetGroupCollapsedState.COLLAPSED) {\n      toggledState.maxVisible = state.topVisible;\n    }\n\n    this.updateState(facet, toggledState);\n  }\n\n  /**\n   * Increases the visible values to the maximum values of the facet.\n   */\n  increaseVisibleValues(facet: Facet): void {\n    this.updateState(facet, { maxVisible: facet.values.length });\n  }\n\n  /**\n   * Decreases the visible values to the topValueCount.\n   *\n   * The topValueCount defaults to 6, but can be controlled in\n   * the backend as well.\n   */\n  decreaseVisibleValues(facet: Facet): void {\n    this.updateState(facet, { maxVisible: facet.topValueCount });\n  }\n\n  /**\n   * Persists the facet state and initializes the default values for the top\n   * and max visible values.\n   */\n  protected initialize(facet: Facet): void {\n    const topFacets =\n      facet.topValueCount > 0 ? facet.topValueCount : facet.values?.length || 0;\n    if (!this.hasState(facet)) {\n      this.facetState.set(\n        facet.name,\n        new BehaviorSubject({\n          topVisible: topFacets,\n          maxVisible: topFacets,\n        } as FacetCollapseState)\n      );\n    }\n  }\n\n  /**\n   * Updates the state of the facet in the local facet map.\n   */\n  protected updateState(facet: Facet, property: FacetCollapseState): void {\n    const state = { ...this.getStateSnapshot(facet), ...property };\n    this.facetState.get(facet.name).next(state);\n  }\n\n  protected hasState(facet: Facet): boolean {\n    return this.facetState.has(facet.name);\n  }\n\n  getLinkParams(query: string): { [key: string]: string } {\n    return {\n      // to avoid encoding issues with facets that have space (' ') in their name,\n      // we replace the decoded '+' back to empty space ' '.\n      // For more, see https://github.com/SAP/spartacus/issues/7348\n      query: new HttpUrlEncodingCodec().decodeValue(query).replace(/\\+/g, ' '),\n    };\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { Breadcrumb } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/icon.model';\nimport { FacetList } from '../facet.model';\nimport { FacetService } from '../services/facet.service';\n\n/**\n * Active facets render the applied facet values as a list of focusable buttons\n * which can be used to remove the applied facet value.\n */\n@Component({\n  selector: 'cx-active-facets',\n  templateUrl: './active-facets.component.html',\n  changeDetection: ChangeDetectionStrategy.Default,\n})\nexport class ActiveFacetsComponent {\n  /** Active facets which are applied to the product results. */\n  facetList$: Observable<FacetList> = this.facetService.facetList$;\n\n  /** Configurable icon which is used for the active facet close button */\n  @Input() closeIcon = ICON_TYPE.CLOSE;\n\n  constructor(protected facetService: FacetService) {}\n\n  getLinkParams(facet: Breadcrumb) {\n    return this.facetService.getLinkParams(facet.removeQuery?.query?.value);\n  }\n\n  /**\n   * The focus key is used to persist the focus on the facet when the DOM is being\n   * recreated. We only apply the focus key for the given _active_ facet when there\n   * the original facets is not available. This happens for non multi-valued facets.\n   *\n   * With this approach, the we keep the focus, either at the facet list or on the\n   * active facets.\n   */\n  getFocusKey(facetList: FacetList, facet: Breadcrumb) {\n    return facetList.facets?.find((f) =>\n      f.values?.find((val) => val.name === facet.facetValueName)\n    )\n      ? ''\n      : facet.facetValueName;\n  }\n}\n","<ng-container *ngIf=\"facetList$ | async as facetList\">\n  <h4 *ngIf=\"facetList?.activeFacets?.length > 0\">\n    {{ 'productList.appliedFilter' | cxTranslate }}\n  </h4>\n\n  <a\n    *ngFor=\"let facet of facetList?.activeFacets\"\n    routerLink=\"./\"\n    [queryParams]=\"getLinkParams(facet)\"\n    [cxFocus]=\"getFocusKey(facetList, facet)\"\n  >\n    <span>{{ facet.facetValueName }}</span>\n    <cx-icon aria-hidden=\"true\" [type]=\"closeIcon\"></cx-icon>\n  </a>\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../../../cms-components/misc/icon/icon.module';\nimport { KeyboardFocusModule } from '../../../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { ActiveFacetsComponent } from './active-facets.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    I18nModule,\n    IconModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [ActiveFacetsComponent],\n  exports: [ActiveFacetsComponent],\n})\nexport class ActiveFacetsModule {}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n} from '@angular/core';\nimport { Facet, FacetValue } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/icon.model';\nimport { FocusDirective } from '../../../../../layout/a11y/keyboard-focus/focus.directive';\nimport { FacetCollapseState } from '../facet.model';\nimport { FacetService } from '../services/facet.service';\n\n@Component({\n  selector: 'cx-facet',\n  templateUrl: './facet.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FacetComponent {\n  protected _facet: Facet;\n\n  state$: Observable<FacetCollapseState>;\n\n  /** configurable icon that is used to collapse the facet group  */\n  @Input() expandIcon: ICON_TYPE = ICON_TYPE.EXPAND;\n  @Input() collapseIcon: ICON_TYPE = ICON_TYPE.COLLAPSE;\n\n  @HostBinding('class.multi-select') isMultiSelect: boolean;\n\n  @ViewChildren('facetValue') values: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChild(FocusDirective) keyboardFocus: FocusDirective;\n\n  @Input()\n  set facet(value: Facet) {\n    this._facet = value;\n    this.isMultiSelect = !!value.multiSelect;\n    this.state$ = this.facetService.getState(value);\n  }\n\n  get facet(): Facet {\n    return this._facet;\n  }\n\n  constructor(\n    protected facetService: FacetService,\n    protected elementRef: ElementRef<HTMLElement>,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  /**\n   * Handles clicking the heading of the facet group, which means toggling\n   * the visibility of the group (collapse / expand) and optionally focusing\n   * the group.\n   */\n  toggleGroup(event: UIEvent) {\n    const host: HTMLElement = this.elementRef.nativeElement;\n    const isLocked = this.keyboardFocus?.isLocked;\n\n    this.facetService.toggle(this.facet, this.isExpanded);\n\n    if (!isLocked || this.isExpanded) {\n      host.focus();\n      // we stop propagating the event as otherwise the focus on the host will trigger\n      // an unlock event from the LockFocus directive.\n      event.stopPropagation();\n    }\n  }\n\n  get isExpanded(): boolean {\n    return this.values.first.nativeElement.offsetParent !== null;\n  }\n\n  openLink(event: KeyboardEvent) {\n    (event.target as HTMLElement).click();\n    event.preventDefault();\n  }\n\n  /**\n   * Increases the number of visible values for the facet. This is delegated\n   * to `facetService.increaseVisibleValues`.\n   */\n  increaseVisibleValues(): void {\n    this.facetService.increaseVisibleValues(this.facet);\n  }\n\n  /**\n   * Decreases the number of visible values for the facet. This is delegated\n   * to `facetService.decreaseVisibleValues`.\n   */\n  decreaseVisibleValues(): void {\n    this.facetService.decreaseVisibleValues(this.facet);\n  }\n\n  getLinkParams(value: FacetValue) {\n    return this.facetService.getLinkParams(value.query?.query.value);\n  }\n}\n","<ng-container *ngIf=\"state$ | async as state\">\n  <button class=\"heading\" (click)=\"toggleGroup($event)\">\n    {{ facet.name }}\n    <cx-icon class=\"collapse-icon\" [type]=\"collapseIcon\"></cx-icon>\n    <cx-icon class=\"expand-icon\" [type]=\"expandIcon\"></cx-icon>\n  </button>\n\n  <a\n    *ngFor=\"let value of facet.values | slice: 0:state.topVisible\"\n    #facetValue\n    routerLink=\"./\"\n    [queryParams]=\"getLinkParams(value)\"\n    class=\"value\"\n    [class.selected]=\"value.selected\"\n    [cxFocus]=\"value.name\"\n    (keydown.space)=\"openLink($event)\"\n  >\n    <span>\n      <span class=\"label\">{{ value.name }}</span>\n      <span class=\"count\">{{ value.count }}</span>\n    </span>\n  </a>\n\n  <div class=\"more\">\n    <a\n      *ngFor=\"\n        let value of facet.values | slice: state.topVisible:state.maxVisible\n      \"\n      #facetValue\n      routerLink=\"./\"\n      [queryParams]=\"getLinkParams(value)\"\n      class=\"value\"\n      [class.selected]=\"value.selected\"\n      [cxFocus]=\"value.name\"\n      (keydown.space)=\"openLink($event)\"\n    >\n      <span\n        >{{ value.name }}<span class=\"count\">{{ value.count }}</span></span\n      >\n    </a>\n\n    <button\n      *ngIf=\"state.maxVisible > state.topVisible\"\n      (click)=\"decreaseVisibleValues()\"\n      class=\"cx-action-link\"\n      cxFocus=\"moreorless\"\n    >\n      {{ 'productList.showLess' | cxTranslate }}\n    </button>\n\n    <button\n      *ngIf=\"state.maxVisible > 0 && state.maxVisible < facet.values.length\"\n      (click)=\"increaseVisibleValues()\"\n      class=\"cx-action-link\"\n      cxFocus=\"moreorless\"\n    >\n      {{ 'productList.showMore' | cxTranslate }}\n    </button>\n  </div>\n</ng-container>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { Facet } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FocusConfig } from '../../../../../layout/a11y/keyboard-focus/index';\nimport { ICON_TYPE } from '../../../../misc/icon/icon.model';\nimport { FacetGroupCollapsedState, FacetList } from '../facet.model';\nimport { FacetComponent } from '../facet/facet.component';\nimport { FacetService } from '../services/facet.service';\n\n@Component({\n  selector: 'cx-facet-list',\n  templateUrl: './facet-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FacetListComponent {\n  private _isDialog: boolean;\n  /**\n   * Indicates that the facet navigation is rendered in dialog.\n   */\n  @Input()\n  set isDialog(value: boolean) {\n    this._isDialog = value;\n    if (value) {\n      this.renderer.addClass(document.body, 'modal-open');\n    }\n  }\n\n  get isDialog(): boolean {\n    return this._isDialog;\n  }\n\n  /** Emits when the list must close */\n  @Output() closeList = new EventEmitter();\n\n  /** The list of all facet and values related to the products in the list */\n  facetList$: Observable<FacetList> = this.facetService.facetList$;\n\n  iconTypes = ICON_TYPE;\n\n  dialogFocusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    focusOnEscape: true,\n    autofocus: 'cx-facet',\n  };\n\n  @HostListener('click') handleClick() {\n    this.close();\n  }\n\n  constructor(\n    protected facetService: FacetService,\n    protected elementRef: ElementRef,\n    protected renderer: Renderer2\n  ) {}\n\n  /**\n   * Toggles the facet group in case it is not expanded.\n   */\n  expandFacetGroup(facet: Facet, ref: FacetComponent) {\n    if (!ref.isExpanded) {\n      this.facetService.toggle(facet, ref.isExpanded);\n    }\n  }\n\n  /**\n   * Indicates that the facet group has been expanded.\n   */\n  isExpanded(facet: Facet): Observable<boolean> {\n    return this.facetService\n      .getState(facet)\n      .pipe(\n        map((value) => value.toggled === FacetGroupCollapsedState.EXPANDED)\n      );\n  }\n\n  /**\n   * Indicates that the facet group has been collapsed.\n   */\n  isCollapsed(facet: Facet): Observable<boolean> {\n    return this.facetService\n      .getState(facet)\n      .pipe(\n        map((value) => value.toggled === FacetGroupCollapsedState.COLLAPSED)\n      );\n  }\n\n  close(event?: boolean): void {\n    this.renderer.removeClass(document.body, 'modal-open');\n    this.closeList.emit(event);\n  }\n\n  block(event?: MouseEvent) {\n    event.stopPropagation();\n  }\n}\n","<div\n  class=\"inner\"\n  *ngIf=\"(facetList$ | async)?.facets as facets\"\n  [cxFocus]=\"isDialog ? dialogFocusConfig : {}\"\n  (esc)=\"close($event)\"\n  (click)=\"block($event)\"\n>\n  <h4>\n    {{ 'productList.filterBy.label' | cxTranslate }}\n    <button\n      type=\"button\"\n      class=\"close\"\n      [attr.aria-label]=\"'common.close' | cxTranslate\"\n      (click)=\"close()\"\n    >\n      <cx-icon aria-hidden=\"true\" [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </h4>\n\n  <!-- \n      Here we'd like to introduce configurable facet components, \n      either by using specific configuration or generic sproutlets \n  -->\n  <cx-facet\n    *ngFor=\"let facet of facets\"\n    #facetRef\n    [facet]=\"facet\"\n    [cxFocus]=\"{ lock: true, trap: true, autofocus: 'a' }\"\n    (unlock)=\"expandFacetGroup(facet, facetRef)\"\n    [class.expanded]=\"isExpanded(facet) | async\"\n    [class.collapsed]=\"isCollapsed(facet) | async\"\n  ></cx-facet>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { IconModule } from '../../../../../cms-components/misc/icon/index';\nimport { KeyboardFocusModule } from '../../../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { FacetComponent } from './facet.component';\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    IconModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [FacetComponent],\n  exports: [FacetComponent],\n})\nexport class FacetModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { KeyboardFocusModule } from '../../../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { IconModule } from '../../../../misc/icon/icon.module';\nimport { FacetModule } from '../facet/facet.module';\nimport { FacetListComponent } from './facet-list.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    IconModule,\n    FacetModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [FacetListComponent],\n  exports: [FacetListComponent],\n})\nexport class FacetListModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  ViewChild,\n} from '@angular/core';\nimport { asapScheduler, BehaviorSubject, interval, Observable, of } from 'rxjs';\nimport { delayWhen, observeOn, switchMap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../../cms-components/misc/icon/icon.model';\nimport { BreakpointService } from '../../../../layout/breakpoint/breakpoint.service';\n\n@Component({\n  selector: 'cx-product-facet-navigation',\n  templateUrl: './product-facet-navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductFacetNavigationComponent {\n  iconTypes = ICON_TYPE;\n\n  /**\n   * We delay the removal of DOM so that animations can finish playing before the\n   * DOM is removed. Removing the DOM, as hidding is not enough to stop elements\n   * to be focused.\n   */\n  protected CLOSE_DELAY = 300;\n\n  /**\n   * Used to open the facet navigation in a dialog. The usage of the dialog depends\n   * on the availability of the trigger element, which is driven by CSS.\n   *\n   * The reference is also used to refocus the trigger after the dialog is closed.\n   */\n  @ViewChild('trigger') trigger: ElementRef<HTMLElement>;\n\n  protected open$ = new BehaviorSubject(false);\n\n  /**\n   * Emits the open state that indicates whether the facet list should be rendered.\n   * This is either done instantly, or after the user triggers this by using the trigger\n   * button. This driven by the visiibility of the trigger, so that the CSS drives\n   * the behaviour. This can differ per breakpoint.\n   *\n   * There's a configurable delay for the closed state, so that the DOM is not removed\n   * before some CSS animations are done.\n   */\n  isOpen$: Observable<boolean> = this.breakpointService.breakpoint$.pipe(\n    // deffer emitting a new value to the next micro-task to ensure that the `hasTrigger`\n    // method represents the actual UI state.\n    observeOn(asapScheduler),\n    switchMap(() => (this.hasTrigger ? this.open$ : of(true))),\n    delayWhen((launched) => interval(launched ? 0 : this.CLOSE_DELAY))\n  );\n\n  /**\n   * Emits the active state that indicates whether the facet list is activated. Activation\n   * is related to the css, so that a animation or transition can visualize opening/closing\n   * the list (i.e. dialog).\n   */\n  isActive$ = this.open$.pipe(\n    // deffer emitting a new value to the next micro-task to ensure the active class is\n    //  applied after the DOM is created\n    observeOn(asapScheduler)\n  );\n\n  constructor(protected breakpointService: BreakpointService) {}\n\n  launch() {\n    this.open$.next(true);\n  }\n\n  close() {\n    this.open$.next(false);\n    this.trigger.nativeElement.focus();\n  }\n\n  /**\n   * Indicates that the facet navigation should be open explicitely by a trigger.\n   * This is fully controlled by CSS, where the trigger button can be hidden\n   * (display:none) for certain screen sizes.\n   */\n  get hasTrigger() {\n    return this.trigger.nativeElement.offsetParent !== null;\n  }\n}\n","<button\n  #trigger\n  class=\"btn btn-action btn-block dialog-trigger\"\n  (click)=\"launch()\"\n>\n  <cx-icon [type]=\"iconTypes.FILTER\"></cx-icon>\n  {{ 'productList.filterBy.label' | cxTranslate }}\n</button>\n\n<cx-active-facets></cx-active-facets>\n\n<cx-facet-list\n  *ngIf=\"isOpen$ | async\"\n  [isDialog]=\"hasTrigger\"\n  (closeList)=\"close()\"\n  [class.active]=\"isActive$ | async\"\n  [class.dialog]=\"hasTrigger\"\n></cx-facet-list>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../misc/icon/icon.module';\nimport { ActiveFacetsModule } from './active-facets/active-facets.module';\nimport { FacetListModule } from './facet-list/facet-list.module';\nimport { ProductFacetNavigationComponent } from './product-facet-navigation.component';\n@NgModule({\n  imports: [\n    CommonModule,\n    FacetListModule,\n    ActiveFacetsModule,\n    IconModule,\n    I18nModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductRefinementComponent: {\n          component: ProductFacetNavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductFacetNavigationComponent],\n  exports: [ProductFacetNavigationComponent],\n})\nexport class ProductFacetNavigationModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { ViewConfig } from '../../../shared/config/view-config';\nimport {\n  ItemCounterModule,\n  ListNavigationModule,\n  MediaModule,\n  SpinnerModule,\n  StarRatingModule,\n} from '../../../shared/index';\nimport { AddToCartModule } from '../../cart/index';\nimport { IconModule } from '../../misc/icon/index';\nimport { defaultViewConfig } from '../config/default-view-config';\nimport { ProductListComponent } from './container/product-list.component';\nimport { ProductScrollComponent } from './container/product-scroll/product-scroll.component';\nimport { ProductGridItemComponent } from './product-grid-item/product-grid-item.component';\nimport { ProductListItemComponent } from './product-list-item/product-list-item.component';\nimport { ProductViewComponent } from './product-view/product-view.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    MediaModule,\n    AddToCartModule,\n    ItemCounterModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n    StarRatingModule,\n    IconModule,\n    SpinnerModule,\n    InfiniteScrollModule,\n    FeaturesConfigModule,\n    OutletModule,\n  ],\n  providers: [\n    provideDefaultConfig(<ViewConfig>defaultViewConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSProductListComponent: {\n          component: ProductListComponent,\n        },\n        ProductGridComponent: {\n          component: ProductListComponent,\n        },\n        SearchResultsListComponent: {\n          component: ProductListComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [\n    ProductListComponent,\n    ProductListItemComponent,\n    ProductGridItemComponent,\n    ProductViewComponent,\n    ProductScrollComponent,\n  ],\n  exports: [\n    ProductListComponent,\n    ProductListItemComponent,\n    ProductGridItemComponent,\n    ProductViewComponent,\n    ProductScrollComponent,\n  ],\n})\nexport class ProductListModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Product, ProductScope } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../current-product.service';\nimport { ProductDetailOutlets } from '../product-outlets.model';\n\n@Component({\n  selector: 'cx-product-summary',\n  templateUrl: './product-summary.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductSummaryComponent {\n  outlets = ProductDetailOutlets;\n\n  product$: Observable<Product> = this.currentProductService.getProduct([\n    ProductScope.DETAILS,\n    ProductScope.PRICE,\n  ]);\n\n  constructor(protected currentProductService: CurrentProductService) {}\n}\n","<ng-container *ngIf=\"product$ | async as product\">\n  <ng-template\n    [cxOutlet]=\"outlets.PRICE\"\n    [cxOutletContext]=\"{ product: product }\"\n  >\n    <div\n      [attr.aria-label]=\"'productSummary.newItemPrice' | cxTranslate\"\n      class=\"price\"\n    >\n      {{ product?.price?.formattedValue }}\n    </div>\n  </ng-template>\n\n  <ng-template\n    [cxOutlet]=\"outlets.SUMMARY\"\n    [cxOutletContext]=\"{ product: product }\"\n  >\n    <p [innerHTML]=\"product?.summary\" class=\"summary\"></p>\n  </ng-template>\n\n  <!-- @TODO: Temp. Comment out share link while not in use by CMS -->\n  <!-- <ng-container *cxOutlet=\"outlets.SHARE\">\n        <div>\n          <a href=\"#\" class=\"share btn-link\">\n            {{ 'productSummary.share' | cxTranslate }}\n          </a>\n        </div>\n      </ng-container> -->\n</ng-container>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { ProductSummaryComponent } from './product-summary.component';\n\n@NgModule({\n  imports: [CommonModule, OutletModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductSummaryComponent: {\n          component: ProductSummaryComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductSummaryComponent],\n  exports: [ProductSummaryComponent],\n})\nexport class ProductSummaryModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Product, ProductScope } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../../current-product.service';\n\n@Component({\n  selector: 'cx-product-attributes',\n  templateUrl: './product-attributes.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductAttributesComponent {\n  product$: Observable<Product> = this.currentProductService.getProduct(\n    ProductScope.ATTRIBUTES\n  );\n\n  constructor(protected currentProductService: CurrentProductService) {}\n}\n","<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"container\">\n    <h2>{{ 'productDetails.specification' | cxTranslate }}</h2>\n    <table *ngFor=\"let class of product?.classifications\">\n      <th>\n        <h3>{{ class.name }}</h3>\n      </th>\n      <tr *ngFor=\"let feature of class.features\">\n        <td>{{ feature.name }}</td>\n        <td>\n          <ul>\n            <li *ngFor=\"let featureValue of feature?.featureValues\">\n              {{ featureValue?.value }}\n              <span\n                *ngIf=\"\n                  feature.featureUnit?.symbol?.length > 0 &&\n                  feature.featureUnit.unitType != '300'\n                \"\n              >\n                {{ feature.featureUnit.symbol }}\n              </span>\n            </li>\n          </ul>\n        </td>\n      </tr>\n    </table>\n  </div>\n</ng-container>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { ProductAttributesComponent } from './product-attributes.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductSpecsTabComponent: {\n          component: ProductAttributesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductAttributesComponent],\n  exports: [ProductAttributesComponent],\n})\nexport class ProductAttributesModule {}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../../current-product.service';\n\n@Component({\n  selector: 'cx-product-details-tab',\n  templateUrl: './product-details-tab.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductDetailsTabComponent implements OnInit {\n  product$: Observable<Product>;\n\n  constructor(protected currentProductService: CurrentProductService) {}\n\n  ngOnInit() {\n    this.product$ = this.currentProductService.getProduct();\n  }\n}\n","<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"container\" [innerHTML]=\"product?.description\"></div>\n</ng-container>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { ProductDetailsTabComponent } from './product-details-tab.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductDetailsTabComponent: {\n          component: ProductDetailsTabComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductDetailsTabComponent],\n  exports: [ProductDetailsTabComponent],\n})\nexport class ProductDetailsTabModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ViewChild,\n  ElementRef,\n  ChangeDetectorRef,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Product, ProductReviewService, Review } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\nimport { CurrentProductService } from '../../current-product.service';\nimport { CustomFormValidators } from '../../../../shared/index';\n\n@Component({\n  selector: 'cx-product-reviews',\n  templateUrl: './product-reviews.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductReviewsComponent {\n  @ViewChild('titleInput', { static: false }) titleInput: ElementRef;\n  @ViewChild('writeReviewButton', { static: false })\n  writeReviewButton: ElementRef;\n\n  isWritingReview = false;\n\n  // TODO: configurable\n  initialMaxListItems = 5;\n  maxListItems: number;\n  reviewForm: FormGroup;\n\n  product$: Observable<Product> = this.currentProductService.getProduct();\n\n  reviews$: Observable<Review[]> = this.product$.pipe(\n    filter((p) => !!p),\n    map((p) => p.code),\n    distinctUntilChanged(),\n    switchMap((productCode) =>\n      this.reviewService.getByProductCode(productCode)\n    ),\n    tap(() => {\n      this.resetReviewForm();\n      this.maxListItems = this.initialMaxListItems;\n    })\n  );\n\n  constructor(\n    protected reviewService: ProductReviewService,\n    protected currentProductService: CurrentProductService,\n    private fb: FormBuilder,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  initiateWriteReview(): void {\n    this.isWritingReview = true;\n\n    this.cd.detectChanges();\n\n    if (this.titleInput && this.titleInput.nativeElement) {\n      this.titleInput.nativeElement.focus();\n    }\n  }\n\n  cancelWriteReview(): void {\n    this.isWritingReview = false;\n    this.resetReviewForm();\n\n    this.cd.detectChanges();\n\n    if (this.writeReviewButton && this.writeReviewButton.nativeElement) {\n      this.writeReviewButton.nativeElement.focus();\n    }\n  }\n\n  setRating(rating: number): void {\n    this.reviewForm.controls.rating.setValue(rating);\n  }\n\n  submitReview(product: Product) {\n    if (this.reviewForm.valid) {\n      this.addReview(product);\n    } else {\n      this.reviewForm.markAllAsTouched();\n    }\n  }\n\n  addReview(product: Product): void {\n    const reviewFormControls = this.reviewForm.controls;\n    const review: Review = {\n      headline: reviewFormControls.title.value,\n      comment: reviewFormControls.comment.value,\n      rating: reviewFormControls.rating.value,\n      alias: reviewFormControls.reviewerName.value,\n    };\n\n    this.reviewService.add(product.code, review);\n\n    this.isWritingReview = false;\n    this.resetReviewForm();\n\n    this.cd.detectChanges();\n\n    if (this.writeReviewButton && this.writeReviewButton.nativeElement) {\n      this.writeReviewButton.nativeElement.focus();\n    }\n  }\n\n  private resetReviewForm(): void {\n    this.reviewForm = this.fb.group({\n      title: ['', Validators.required],\n      comment: ['', Validators.required],\n      rating: [null, CustomFormValidators.starRatingEmpty],\n      reviewerName: '',\n    });\n  }\n}\n","<div class=\"container\" *ngIf=\"product$ | async as product\">\n  <h2>\n    {{ 'productDetails.reviews' | cxTranslate }} ({{ product.numberOfReviews }})\n  </h2>\n  <ng-container *ngIf=\"!isWritingReview; else writeReview\">\n    <div class=\"header\">\n      <h3>{{ 'productReview.overallRating' | cxTranslate }}</h3>\n      <button\n        #writeReviewButton\n        class=\"btn btn-primary\"\n        (click)=\"initiateWriteReview()\"\n      >\n        {{ 'productReview.writeReview' | cxTranslate }}\n      </button>\n      <cx-star-rating\n        *ngIf=\"product.averageRating\"\n        class=\"rating\"\n        [rating]=\"product.averageRating\"\n      ></cx-star-rating>\n      <div class=\"rating\" *ngIf=\"!product.averageRating\">\n        {{ 'productDetails.noReviews' | cxTranslate }}\n      </div>\n    </div>\n\n    <ng-container *ngIf=\"!isWritingReview; else writeReview\">\n      <ng-container *ngIf=\"reviews$ | async as reviews\">\n        <div\n          class=\"review\"\n          tabindex=\"0\"\n          *ngFor=\"let review of reviews | slice: 0:maxListItems\"\n        >\n          <div class=\"title\">{{ review.headline }}</div>\n          <cx-star-rating [rating]=\"review.rating\"></cx-star-rating>\n          <div class=\"name\">\n            {{ review.alias ? review.alias : review.principal?.name }}\n          </div>\n          <div class=\"date\">{{ review.date | cxDate }}</div>\n          <div class=\"text\">{{ review.comment }}</div>\n        </div>\n        <div *ngIf=\"reviews.length > initialMaxListItems\">\n          <button\n            class=\"btn btn-primary\"\n            (click)=\"maxListItems = reviews.length\"\n            *ngIf=\"maxListItems === initialMaxListItems\"\n          >\n            {{ 'productReview.more' | cxTranslate }}\n          </button>\n          <button\n            class=\"btn btn-primary\"\n            (click)=\"maxListItems = initialMaxListItems\"\n            *ngIf=\"maxListItems !== initialMaxListItems\"\n          >\n            {{ 'productReview.less' | cxTranslate }}\n          </button>\n        </div>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n\n  <ng-template #writeReview>\n    <form (ngSubmit)=\"submitReview(product)\" [formGroup]=\"reviewForm\">\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.reviewTitle' | cxTranslate\n          }}</span>\n          <input\n            aria-required=\"true\"\n            #titleInput\n            type=\"text\"\n            class=\"form-control\"\n            formControlName=\"title\"\n          />\n          <cx-form-errors\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            [control]=\"reviewForm.get('title')\"\n          ></cx-form-errors>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.writeYourComments' | cxTranslate\n          }}</span>\n          <textarea\n            aria-required=\"true\"\n            class=\"form-control\"\n            rows=\"3\"\n            formControlName=\"comment\"\n          ></textarea>\n          <cx-form-errors\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            [control]=\"reviewForm.get('comment')\"\n          ></cx-form-errors>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.rating' | cxTranslate\n          }}</span>\n          <input\n            aria-required=\"true\"\n            type=\"number\"\n            formControlName=\"rating\"\n            class=\"rating-input\"\n          />\n          <cx-star-rating\n            (change)=\"setRating($event)\"\n            [disabled]=\"false\"\n          ></cx-star-rating>\n          <cx-form-errors\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            [control]=\"reviewForm.get('rating')\"\n          ></cx-form-errors>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.reviewerName' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            formControlName=\"reviewerName\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group row\">\n        <div class=\"col-12 col-md-4\">\n          <button\n            type=\"button\"\n            class=\"btn btn-block btn-secondary\"\n            (click)=\"cancelWriteReview()\"\n          >\n            {{ 'common.cancel' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-12 col-md-4\">\n          <button type=\"submit\" class=\"btn btn-block btn-primary\">\n            {{ 'common.submit' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </form>\n  </ng-template>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { ProductReviewsComponent } from './product-reviews.component';\nimport { StarRatingModule, FormErrorsModule } from '../../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    I18nModule,\n    StarRatingModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductReviewsTabComponent: {\n          component: ProductReviewsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductReviewsComponent],\n  exports: [ProductReviewsComponent],\n})\nexport class ProductReviewsModule {}\n","import { NgModule } from '@angular/core';\nimport { ProductAttributesModule } from './product-attributes/product-attributes.module';\nimport { ProductDetailsTabModule } from './product-details-tab/product-details-tab.module';\nimport { ProductReviewsModule } from './product-reviews/product-reviews.module';\n\n@NgModule({\n  imports: [\n    ProductAttributesModule,\n    ProductDetailsTabModule,\n    ProductReviewsModule,\n  ],\n})\nexport class ProductTabsModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport { NotificationPreference, UserInterestsService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ModalService } from '../../../../shared/components/modal/modal.service';\n\n@Component({\n  selector: 'cx-stock-notification-dialog',\n  templateUrl: './stock-notification-dialog.component.html',\n})\nexport class StockNotificationDialogComponent implements OnDestroy {\n  subscribeSuccess$: Observable<boolean>;\n  enabledPrefs: NotificationPreference[] = [];\n\n  constructor(\n    private modalService: ModalService,\n    private interestsService: UserInterestsService\n  ) {}\n\n  close() {\n    this.modalService.dismissActiveModal();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscribeSuccess$) {\n      this.subscribeSuccess$\n        .subscribe((success) => {\n          if (success) {\n            this.interestsService.resetAddInterestState();\n          }\n        })\n        .unsubscribe();\n    }\n  }\n}\n","<div class=\"cx-dialog-header modal-header\">\n  <div class=\"cx-dialog-title modal-title\">\n    {{ 'stockNotification.subscriptionDialog.header' | cxTranslate }}\n  </div>\n  <button\n    type=\"button\"\n    [attr.aria-label]=\"'common.close' | cxTranslate\"\n    class=\"close\"\n    tabindex=\"-1\"\n    (click)=\"close()\"\n  >\n    <span aria-hidden=\"true\">&times;</span>\n  </button>\n</div>\n\n<ng-container *ngIf=\"subscribeSuccess$ | async; else loading\">\n  <div class=\"cx-dialog-body modal-body\">\n    <div class=\"container\">\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.notifiedPrefix' | cxTranslate\n        }}\n      </p>\n      <p *ngFor=\"let preference of enabledPrefs\" class=\"channels\">\n        <span>{{ preference.channel }}</span\n        ><span *ngIf=\"preference.value\">{{ ': ' + preference.value }}</span>\n      </p>\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.notifiedSuffix' | cxTranslate\n        }}\n      </p>\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.manageChannelsPrefix'\n            | cxTranslate\n        }}\n        <a\n          (click)=\"close()\"\n          [routerLink]=\"['/my-account/notification-preference']\"\n          class=\"link-prefs\"\n        >\n          {{\n            'stockNotification.subscriptionDialog.manageChannelsLink'\n              | cxTranslate\n          }}</a\n        >\n        {{\n          'stockNotification.subscriptionDialog.manageChannelsSuffix'\n            | cxTranslate\n        }}\n      </p>\n\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.manageSubscriptionsPrefix'\n            | cxTranslate\n        }}\n        <a\n          (click)=\"close()\"\n          [routerLink]=\"['/my-account/my-interests']\"\n          class=\"link-interests\"\n        >\n          {{\n            'stockNotification.subscriptionDialog.manageSubscriptionsLink'\n              | cxTranslate\n          }}</a\n        >\n        {{\n          'stockNotification.subscriptionDialog.manageSubscriptionsSuffix'\n            | cxTranslate\n        }}\n      </p>\n      <div class=\"row\">\n        <div class=\"cx-dialog-actions col-sm-12 col-md-3 offset-md-9\">\n          <button\n            class=\"btn btn-primary btn-block btn-ok\"\n            type=\"button\"\n            (click)=\"close()\"\n          >\n            {{ 'stockNotification.subscriptionDialog.okBtn' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #loading>\n  <div class=\"cx-dialog-body modal-body\">\n    <p>\n      {{ 'stockNotification.subscriptionDialog.subscribing' | cxTranslate }}\n    </p>\n    <div class=\"cx-dialog-row\">\n      <div class=\"col-sm-12\">\n        <cx-spinner></cx-spinner>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  isNotNullable,\n  NotificationPreference,\n  NotificationType,\n  OCC_USER_ID_ANONYMOUS,\n  Product,\n  TranslationService,\n  UserIdService,\n  UserInterestsService,\n  UserNotificationPreferenceService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { filter, first, map, tap } from 'rxjs/operators';\nimport { ModalService } from '../../../shared/components/modal/modal.service';\nimport { CurrentProductService } from '../current-product.service';\nimport { StockNotificationDialogComponent } from './stock-notification-dialog/stock-notification-dialog.component';\n\n@Component({\n  selector: 'cx-stock-notification',\n  templateUrl: './stock-notification.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class StockNotificationComponent implements OnInit, OnDestroy {\n  hasProductInterests$: Observable<boolean>;\n  prefsEnabled$: Observable<boolean>;\n  outOfStock$: Observable<boolean>;\n  isRemoveInterestLoading$: Observable<boolean>;\n  anonymous = true;\n\n  private enabledPrefs: NotificationPreference[] = [];\n  private productCode: string;\n  private subscribeSuccess$: Observable<boolean>;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private currentProductService: CurrentProductService,\n    private globalMessageService: GlobalMessageService,\n    private translationService: TranslationService,\n    private interestsService: UserInterestsService,\n    private modalService: ModalService,\n    private notificationPrefService: UserNotificationPreferenceService,\n    private userIdService: UserIdService\n  ) {}\n\n  ngOnInit() {\n    this.outOfStock$ = combineLatest([\n      this.currentProductService.getProduct().pipe(filter(isNotNullable)),\n      this.userIdService.getUserId(),\n    ]).pipe(\n      tap(([product, userId]) => {\n        this.productCode = product.code;\n        if (userId !== OCC_USER_ID_ANONYMOUS) {\n          this.anonymous = false;\n          this.notificationPrefService.loadPreferences();\n          this.interestsService.loadProductInterests(\n            null,\n            null,\n            null,\n            product.code,\n            NotificationType.BACK_IN_STOCK\n          );\n        }\n      }),\n      map(\n        ([product]: [Product, String]) =>\n          !!product.stock && product.stock.stockLevelStatus === 'outOfStock'\n      )\n    );\n\n    this.hasProductInterests$ = this.interestsService\n      .getProductInterests()\n      .pipe(\n        map(\n          (interests) => !!interests.results && interests.results.length === 1\n        )\n      );\n    this.subscribeSuccess$ =\n      this.interestsService.getAddProductInterestSuccess();\n    this.isRemoveInterestLoading$ =\n      this.interestsService.getRemoveProdutInterestLoading();\n    this.prefsEnabled$ = this.notificationPrefService\n      .getEnabledPreferences()\n      .pipe(\n        tap((prefs) => (this.enabledPrefs = prefs)),\n        map((prefs) => prefs.length > 0)\n      );\n\n    this.subscriptions.add(\n      this.interestsService.getAddProductInterestError().subscribe((error) => {\n        if (error) {\n          this.onInterestAddingError();\n        }\n      })\n    );\n    this.subscriptions.add(\n      this.interestsService\n        .getRemoveProdutInterestSuccess()\n        .subscribe((success) => {\n          if (success) {\n            this.onInterestRemovingSuccess();\n          }\n        })\n    );\n  }\n\n  subscribe() {\n    this.openDialog();\n    this.interestsService.addProductInterest(\n      this.productCode,\n      NotificationType.BACK_IN_STOCK\n    );\n  }\n\n  unsubscribe() {\n    this.interestsService.removeProdutInterest(\n      {\n        product: {\n          code: this.productCode,\n        },\n        productInterestEntry: [\n          {\n            interestType: NotificationType.BACK_IN_STOCK,\n          },\n        ],\n      },\n      true\n    );\n  }\n\n  private onInterestRemovingSuccess() {\n    this.subscriptions.add(\n      this.translationService\n        .translate('stockNotification.unsubscribeSuccess')\n        .pipe(first())\n        .subscribe((text) =>\n          this.globalMessageService.add(text, GlobalMessageType.MSG_TYPE_INFO)\n        )\n    );\n    this.interestsService.resetRemoveInterestState();\n  }\n\n  private onInterestAddingError() {\n    this.modalService.dismissActiveModal();\n    this.interestsService.resetAddInterestState();\n  }\n\n  private openDialog() {\n    const modalInstance = this.modalService.open(\n      StockNotificationDialogComponent,\n      {\n        centered: true,\n        size: 'lg',\n      }\n    ).componentInstance;\n    modalInstance.subscribeSuccess$ = this.subscribeSuccess$;\n    modalInstance.enabledPrefs = this.enabledPrefs;\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    this.interestsService.clearProductInterests();\n    this.notificationPrefService.clearPreferences();\n  }\n}\n","<ng-container *ngIf=\"outOfStock$ | async\">\n  <ng-container *ngIf=\"!(hasProductInterests$ | async); else stopNotify\">\n    <ng-container *ngIf=\"prefsEnabled$ | async; else disableNotify\">\n      <div class=\"stock-notification-notes\">\n        <p>{{ 'stockNotification.getNotified' | cxTranslate }}</p>\n      </div>\n      <button\n        class=\"btn btn-primary btn-block btn-notify\"\n        type=\"button\"\n        (click)=\"subscribe()\"\n      >\n        {{ 'stockNotification.notifyMe' | cxTranslate }}\n      </button>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #disableNotify>\n  <div class=\"stock-notification-notes\" id=\"outOfStockMessage\">\n    <p>\n      <ng-container *ngIf=\"anonymous; else loggedIn\">\n        <a [routerLink]=\"{ cxRoute: 'login' } | cxUrl\">\n          {{ 'miniLogin.signInRegister' | cxTranslate }}</a\n        >\n        {{ 'stockNotification.getNotifySuffix' | cxTranslate }}<br />\n      </ng-container>\n      <ng-template #loggedIn>\n        {{ 'stockNotification.getNotify' | cxTranslate }}<br />\n        {{ 'stockNotification.activateChannelsPrefix' | cxTranslate\n        }}<a [routerLink]=\"['/my-account/notification-preference']\">{{\n          'stockNotification.channelsLink' | cxTranslate\n        }}</a\n        >{{ 'stockNotification.activateChannelsSuffix' | cxTranslate }}\n      </ng-template>\n    </p>\n  </div>\n  <button\n    class=\"btn btn-primary btn-block btn-notify\"\n    type=\"button\"\n    disabled=\"true\"\n    aria-describedby=\"outOfStockMessage\"\n  >\n    {{ 'stockNotification.notifyMe' | cxTranslate }}\n  </button>\n</ng-template>\n\n<ng-template #stopNotify>\n  <ng-container *ngIf=\"!(isRemoveInterestLoading$ | async); else loading\">\n    <div class=\"stock-notification-notes\">\n      <p>{{ 'stockNotification.notified' | cxTranslate }}</p>\n    </div>\n    <button\n      class=\"btn btn-primary btn-block btn-stop-notify\"\n      type=\"button\"\n      (click)=\"unsubscribe()\"\n    >\n      {{ 'stockNotification.stopNotify' | cxTranslate }}\n    </button>\n  </ng-container>\n</ng-template>\n\n<ng-template #loading>\n  <div class=\"cx-dialog-body modal-body\">\n    <div class=\"cx-dialog-row\">\n      <div class=\"col-sm-12\">\n        <cx-spinner></cx-spinner>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { StockNotificationComponent } from './stock-notification.component';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { StockNotificationDialogComponent } from './stock-notification-dialog/stock-notification-dialog.component';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  declarations: [StockNotificationComponent, StockNotificationDialogComponent],\n  imports: [CommonModule, RouterModule, I18nModule, SpinnerModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        StockNotificationComponent: {\n          component: StockNotificationComponent,\n        },\n      },\n    }),\n  ],\n  exports: [StockNotificationComponent, StockNotificationDialogComponent],\n})\nexport class StockNotificationModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  RouterStateSnapshot,\n  UrlTree,\n} from '@angular/router';\nimport {\n  AuthConfigService,\n  AuthRedirectService,\n  AuthService,\n  OAuthFlow,\n} from '@spartacus/core';\nimport { EMPTY, Observable, of } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\nimport { CmsPageGuard } from '../../../cms-structure/guards/cms-page.guard';\n\n/**\n * Guards the _login_ route.\n *\n * Takes care of routing the user to a auth server login page (if implicit or code flow is used).\n * In case of Resource Owner Password Flow just renders the page as normal CMS page.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoginGuard implements CanActivate {\n  constructor(\n    protected authService: AuthService,\n    protected authRedirectService: AuthRedirectService,\n    protected authConfigService: AuthConfigService,\n    protected cmsPageGuard: CmsPageGuard\n  ) {}\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    return this.authService.isUserLoggedIn().pipe(\n      take(1),\n      switchMap((isUserLoggedIn) => {\n        if (\n          this.authConfigService.getOAuthFlow() ===\n            OAuthFlow.ResourceOwnerPasswordFlow ||\n          isUserLoggedIn\n        ) {\n          return this.cmsPageGuard.canActivate(route, state);\n        } else {\n          // Remember the previous url, so we can redirect user to that page after OAuth server callback\n          this.authRedirectService.reportNotAuthGuard();\n          // This method can trigger redirect to OAuth server that's why we don't return anything in this case\n          const redirected = this.authService.loginWithRedirect();\n          if (!redirected) {\n            return of(false);\n          }\n          return EMPTY;\n        }\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  PageLayoutComponent,\n  PageLayoutModule,\n} from '../../../cms-structure/page/index';\nimport { LoginGuard } from './login.guard';\n\n/**\n * This module enables to quickly switch from Resource Owner Password Flow\n * to Implicit Flow or Authorization Code Flow. The `login` route in this case will be\n * responsible for initalizing the redirect to OAuth server to login.\n *\n * Instead of manually invoking OAuth redirect you only have to redirect to `login` page.\n */\n@NgModule({\n  imports: [\n    PageLayoutModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [LoginGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'login' },\n      },\n    ]),\n  ],\n})\nexport class LoginRouteModule {}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport {\n  AuthRedirectService,\n  AuthService,\n  CmsService,\n  PageType,\n  ProtectedRoutesService,\n  SemanticPathService,\n} from '@spartacus/core';\nimport { from, Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\n\n/**\n * Guards the _logout_ route.\n *\n * Takes care of routing the user to a logout page (if available) or redirects to\n * the homepage. If the homepage is protected, the user is redirected\n * to the login route instead.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LogoutGuard implements CanActivate {\n  constructor(\n    protected auth: AuthService,\n    protected cms: CmsService,\n    protected semanticPathService: SemanticPathService,\n    protected protectedRoutes: ProtectedRoutesService,\n    protected router: Router,\n    protected authRedirectService: AuthRedirectService\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    // Logout route should never be remembered as a redirect url after login (that would cause logout right after login).\n    this.authRedirectService.reportNotAuthGuard();\n    /**\n     * First we want to complete logout process before redirecting to logout page\n     * We want to avoid errors like `token is no longer valid`\n     */\n    return from(this.logout()).pipe(\n      switchMap(() => {\n        return this.cms\n          .hasPage({\n            id: this.semanticPathService.get('logout'),\n            type: PageType.CONTENT_PAGE,\n          })\n          .pipe(\n            map((hasPage) => {\n              if (!hasPage) {\n                return this.getRedirectUrl();\n              }\n              // TODO(#9385): Use CMS page guard here.\n              return hasPage;\n            })\n          );\n      })\n    );\n  }\n\n  protected logout(): Promise<any> {\n    return this.auth.coreLogout();\n  }\n\n  /**\n   * Whenever there is no specific \"logout\" page configured in the CMS,\n   * we redirect after the user is logged out.\n   *\n   * The user gets redirected to the homepage, unless the homepage is protected\n   * (in case of a closed shop). We'll redirect to the login page instead.\n   */\n  protected getRedirectUrl(): UrlTree {\n    const cxRoute = this.protectedRoutes.shouldProtect ? 'login' : 'home';\n    return this.router.parseUrl(this.semanticPathService.get(cxRoute));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsPageGuard } from '../../../cms-structure/guards/cms-page.guard';\nimport {\n  PageLayoutComponent,\n  PageLayoutModule,\n} from '../../../cms-structure/page/index';\nimport { LogoutGuard } from './logout.guard';\n\n@NgModule({\n  imports: [\n    PageLayoutModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [LogoutGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'logout' },\n      },\n    ]),\n  ],\n})\nexport class LogoutModule {}\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { UrlModule } from '@spartacus/core';\nimport { LoginRouteModule } from './login-route/login-route.module';\nimport { LogoutModule } from './logout/logout.module';\n\n@NgModule({\n  imports: [\n    LogoutModule,\n    LoginRouteModule,\n    ReactiveFormsModule,\n    RouterModule,\n    UrlModule,\n  ],\n})\nexport class UserComponentModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { OrderEntry } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-wish-list-item',\n  templateUrl: './wish-list-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class WishListItemComponent {\n  @Input()\n  isLoading = false;\n  @Input() cartEntry: OrderEntry;\n\n  @Output()\n  remove = new EventEmitter<OrderEntry>();\n\n  removeEntry(item: OrderEntry) {\n    this.remove.emit(item);\n  }\n}\n","<div class=\"row\">\n  <!-- Item Image -->\n  <div class=\"cx-image-container col-2\">\n    <a\n      [routerLink]=\"{ cxRoute: 'product', params: cartEntry.product } | cxUrl\"\n      tabindex=\"-1\"\n    >\n      <cx-media\n        [container]=\"cartEntry.product.images?.PRIMARY\"\n        format=\"thumbnail\"\n      ></cx-media>\n    </a>\n  </div>\n  <!-- Item Information -->\n  <div class=\"cx-info col-10\">\n    <div class=\"cx-info-container row\">\n      <!-- Item Description -->\n      <div class=\"col-md-5 col-lg-5 col-xl-5\">\n        <div *ngIf=\"cartEntry.product.name\" class=\"cx-name\">\n          <a\n            class=\"cx-link\"\n            [routerLink]=\"\n              { cxRoute: 'product', params: cartEntry.product } | cxUrl\n            \"\n            ><h2>{{ cartEntry.product.name }}</h2></a\n          >\n        </div>\n        <div *ngIf=\"cartEntry.product.code\" class=\"cx-code\">\n          {{ 'cartItems.id' | cxTranslate }} {{ cartEntry.product.code }}\n        </div>\n        <!-- Variants -->\n        <ng-container *ngIf=\"cartEntry.product.baseOptions?.length\">\n          <div\n            *ngFor=\"\n              let variant of cartEntry.product.baseOptions[0]?.selected\n                ?.variantOptionQualifiers\n            \"\n            class=\"cx-property\"\n          >\n            <div class=\"cx-label\" *ngIf=\"variant.name && variant.value\">\n              {{ variant.name }}: {{ variant.value }}\n            </div>\n          </div>\n        </ng-container>\n      </div>\n      <!-- Item Price -->\n      <div\n        *ngIf=\"cartEntry.basePrice\"\n        class=\"cx-price col-md-3 col-lg-4 col-xl-4\"\n      >\n        <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n          {{ 'cartItems.itemPrice' | cxTranslate }}\n        </div>\n        <div *ngIf=\"cartEntry.basePrice\" class=\"cx-value\">\n          {{ cartEntry.basePrice?.formattedValue }}\n        </div>\n      </div>\n      <!-- Total -->\n      <div class=\"col-sm-8 col-md-4 col-lg-3 col-xl-3 cx-add-to-cart\">\n        <cx-add-to-cart\n          *ngIf=\"\n            cartEntry.product.stock.stockLevelStatus !== 'outOfStock';\n            else outOfStock\n          \"\n          [showQuantity]=\"false\"\n          [product]=\"cartEntry.product\"\n        ></cx-add-to-cart>\n        <ng-template #outOfStock>\n          <span class=\"cx-out-of-stock\">\n            {{ 'addToCart.outOfStock' | cxTranslate }}\n          </span>\n        </ng-template>\n      </div>\n    </div>\n    <div class=\"cx-return-button col-12\">\n      <button\n        class=\"btn cx-action-link\"\n        (click)=\"removeEntry(cartEntry)\"\n        [disabled]=\"isLoading\"\n      >\n        {{ 'common.remove' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport { Cart, OrderEntry, WishListService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-wish-list',\n  templateUrl: './wish-list.component.html',\n})\nexport class WishListComponent {\n  wishList$: Observable<Cart> = this.wishListService.getWishList();\n  loading$: Observable<boolean> = this.wishListService.getWishListLoading();\n\n  constructor(protected wishListService: WishListService) {}\n\n  removeEntry(item: OrderEntry) {\n    this.wishListService.removeEntry(item);\n  }\n}\n","<ng-container *ngIf=\"wishList$ | async as wishList\">\n  <ng-container *ngIf=\"wishList?.entries?.length > 0; else emptyWishList\">\n    <div class=\"d-none d-md-block d-lg-block d-xl-block\">\n      <div class=\"cx-item-list-header row\">\n        <div class=\"cx-item-list-desc col-md-7 col-lg-6 col-xl-6\">\n          {{ 'cartItems.description' | cxTranslate }}\n        </div>\n        <div class=\"cx-item-list-price col-md-3 col-lg-4 col-xl-4\">\n          {{ 'cartItems.itemPrice' | cxTranslate }}\n        </div>\n        <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n          {{ 'cartItems.total' | cxTranslate }}\n        </div>\n      </div>\n    </div>\n\n    <div class=\"cx-item-list-row\" *ngFor=\"let entry of wishList?.entries\">\n      <cx-wish-list-item\n        [cartEntry]=\"entry\"\n        [isLoading]=\"loading$ | async\"\n        class=\"cx-wish-list-items\"\n        (remove)=\"removeEntry($event)\"\n      ></cx-wish-list-item>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template #emptyWishList>\n  <h2>{{ 'wishlist.empty' | cxTranslate }}</h2>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport {\n  ItemCounterModule,\n  MediaModule,\n  StarRatingModule,\n} from '../../shared/index';\nimport { AddToCartModule } from '../cart/index';\nimport { WishListItemComponent } from './components/wish-list-item/wish-list-item.component';\nimport { WishListComponent } from './components/wish-list/wish-list.component';\n\n@NgModule({\n  imports: [\n    AddToCartModule,\n    CommonModule,\n    I18nModule,\n    MediaModule,\n    RouterModule,\n    StarRatingModule,\n    UrlModule,\n    ItemCounterModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        WishListComponent: {\n          component: WishListComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [WishListComponent, WishListItemComponent],\n  exports: [WishListComponent, WishListItemComponent],\n})\nexport class WishListModule {}\n","import { inject, InjectionToken } from '@angular/core';\nimport { Route } from '@angular/router';\nimport {\n  DEFAULT_URL_MATCHER,\n  UrlMatcherFactory,\n  UrlMatcherService,\n} from '@spartacus/core';\nimport { getSuffixUrlMatcher } from '../../cms-structure/routing/suffix-routes/suffix-url-matcher';\n\nexport function getProductDetailsUrlMatcherFactory(\n  service: UrlMatcherService,\n  defaultMatcherFactory: UrlMatcherFactory\n): UrlMatcherFactory {\n  const factory = (route: Route) => {\n    const defaultMatcher = defaultMatcherFactory(route);\n    const suffixPDPMatcher = getSuffixUrlMatcher({\n      marker: 'p',\n      paramName: 'productCode',\n    });\n    return service.getCombined([defaultMatcher, suffixPDPMatcher]);\n  };\n  return factory;\n}\n\n/**\n * Injection token with url matcher factory for PDP.\n * The provided url matcher matches both:\n * - the configured `paths` from routing config and\n * - custom pattern  `** / p / :productCode`\n *\n * If the this matcher doesn't fit the requirements, it can be replaced with the DEFAULT_URL_MATCHER\n * or additional matchers can be added for a specific route.\n *\n * Note: Matchers will \"match\" a route, but do not contribute to the creation of the route, nor do they guard routes.\n */\nexport const PRODUCT_DETAILS_URL_MATCHER =\n  new InjectionToken<UrlMatcherFactory>('PRODUCT_DETAILS_URL_MATCHER', {\n    providedIn: 'root',\n    factory: () =>\n      getProductDetailsUrlMatcherFactory(\n        inject(UrlMatcherService),\n        inject(DEFAULT_URL_MATCHER)\n      ),\n  });\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig, RoutingConfig } from '@spartacus/core';\nimport { CmsPageGuard } from '../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../cms-structure/page/page-layout/page-layout.component';\nimport { PRODUCT_DETAILS_URL_MATCHER } from './product-details-url-matcher';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'product' },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfig(<RoutingConfig>{\n      routing: {\n        routes: {\n          product: {\n            matchers: [PRODUCT_DETAILS_URL_MATCHER],\n          },\n        },\n      },\n    }),\n  ],\n})\nexport class ProductDetailsPageModule {}\n","import { inject, InjectionToken } from '@angular/core';\nimport { Route } from '@angular/router';\nimport {\n  DEFAULT_URL_MATCHER,\n  UrlMatcherFactory,\n  UrlMatcherService,\n} from '@spartacus/core';\nimport { getSuffixUrlMatcher } from '../../cms-structure/routing/suffix-routes/suffix-url-matcher';\n\nexport function getProductListingUrlMatcherFactory(\n  service: UrlMatcherService,\n  defaultMatcherFactory: UrlMatcherFactory\n): UrlMatcherFactory {\n  const factory = (route: Route) => {\n    const defaultMatcher = defaultMatcherFactory(route);\n    const suffixPLPMatcher = getSuffixUrlMatcher({\n      marker: 'c',\n      paramName: 'categoryCode',\n    });\n    return service.getCombined([defaultMatcher, suffixPLPMatcher]);\n  };\n  return factory;\n}\n\n/**\n * Injection token with url matcher factory for PLP.\n * The provided url matcher matches both:\n * - the configured `paths` from routing config and\n * - custom pattern  `** / c / :categoryCode`\n *\n * If the this matcher doesn't fit the requirements, it can be replaced with the DEFAULT_URL_MATCHER\n * or additional matchers can be added for a specific route.\n *\n * Note: Matchers will \"match\" a route, but do not contribute to the creation of the route, nor do they guard routes.\n */\nexport const PRODUCT_LISTING_URL_MATCHER =\n  new InjectionToken<UrlMatcherFactory>('PRODUCT_LISTING_URL_MATCHER', {\n    providedIn: 'root',\n    factory: () =>\n      getProductListingUrlMatcherFactory(\n        inject(UrlMatcherService),\n        inject(DEFAULT_URL_MATCHER)\n      ),\n  });\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig, RoutingConfig } from '@spartacus/core';\nimport { CmsPageGuard, PageLayoutComponent } from '../../cms-structure/index';\nimport { PRODUCT_LISTING_URL_MATCHER } from './product-listing-url-matcher';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { pageLabel: 'search', cxRoute: 'search' },\n      },\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'brand' },\n      },\n      {\n        // The 'category' route  may include a greedy suffix url matcher '**/c/:categoryCode'\n        // So not to shadow the specific 'brand' route, the 'category' is the last route in the sequence.\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'category' },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfig(<RoutingConfig>{\n      routing: {\n        routes: {\n          category: {\n            matchers: [PRODUCT_LISTING_URL_MATCHER],\n          },\n        },\n      },\n    }),\n  ],\n})\nexport class ProductListingPageModule {}\n","import { Injectable, Injector } from '@angular/core';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { ActivatedRoutesService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { ContextToken } from './context.model';\n\n/**\n * Resolves the context for the specific route, based on the property `data.cxContext`\n * defined in the Angular Route.\n */\n@Injectable({ providedIn: 'root' })\nexport class RoutingContextService {\n  constructor(\n    protected activatedRoutesService: ActivatedRoutesService,\n    protected injector: Injector\n  ) {}\n\n  /**\n   * Combined context token mapping consisting of all mappings defined in currently\n   * Activated Angular Routes.\n   *\n   * The context token mapping is read from each Route's property `data.cxContext`.\n   */\n  protected readonly contextTokenMapping$: Observable<\n    Record<ContextToken, any>\n  > = this.activatedRoutesService.routes$.pipe(\n    map((routes) => this.getRoutesContextTokenMapping(routes)),\n    shareReplay({ refCount: true, bufferSize: 1 })\n  );\n\n  /**\n   * Returns the merged context token mapping, consisting of mappings\n   * defined in all Activated Angular Routes.\n   */\n  protected getRoutesContextTokenMapping(\n    routes: ActivatedRouteSnapshot[]\n  ): Record<ContextToken, any> {\n    return Object.assign({}, ...routes.map((route) => route?.data?.cxContext));\n  }\n\n  /**\n   * Resolves the specified `contextToken` from `cxContext` data parameter of the activated Angular Routes.\n   * @param contextToken\n   *\n   * @returns instance from the root injector if defined, otherwise `undefined`.\n   */\n  get<T>(contextToken: ContextToken): Observable<T | undefined> {\n    return this.contextTokenMapping$.pipe(\n      map((contextMapping) => {\n        const providerToken =\n          contextMapping?.[\n            // TODO: remove 'as any' after upgrading TypeScript to v4.4\n            // See: https://github.com/Microsoft/TypeScript/issues/24587\n            contextToken as any\n          ];\n        return this.injector.get(providerToken, undefined);\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { distinctUntilChanged, shareReplay } from 'rxjs/operators';\nimport { ContextToken } from './context.model';\nimport { RoutingContextService } from './routing-context.service';\n\n/**\n * Generic service for resolving the context for the UI components.\n */\n@Injectable({ providedIn: 'root' })\nexport class ContextService {\n  constructor(protected routingContextService: RoutingContextService) {}\n\n  /**\n   * Returns the context for the given token.\n   */\n  get<T>(contextToken: ContextToken): Observable<T | undefined> {\n    return this.resolveContext<T>(contextToken).pipe(\n      distinctUntilChanged(),\n      shareReplay({ refCount: true, bufferSize: 1 })\n    );\n  }\n\n  /**\n   * Resolves the context for the given token.\n   */\n  protected resolveContext<T>(\n    contextToken: ContextToken\n  ): Observable<T | undefined> {\n    return this.routingContextService.get(contextToken);\n  }\n}\n","import { Params } from '@angular/router';\nimport { CxEvent, PageContext } from '@spartacus/core';\n\n/**\n * Indicates that a user navigated to an arbitrary page.\n */\nexport class NavigationEvent extends CxEvent {\n  /**\n   * Event's type\n   */\n  static readonly type = 'NavigationEvent';\n  /**\n   * The page's context\n   */\n  context: PageContext;\n  /**\n   * The route's semantic name\n   */\n  semanticRoute?: string;\n  /**\n   * The current URL\n   */\n  url: string;\n  /**\n   * The current URL's params\n   */\n  params: Params;\n}\n","import { CxEvent } from '@spartacus/core';\nimport { NavigationEvent } from '../navigation/navigation.event';\n\n/**\n * Indicates that a user visited an arbitrary page.\n */\nexport abstract class PageEvent extends CxEvent {\n  /**\n   * `NavigationEvent`'s payload\n   */\n  navigation: NavigationEvent;\n}\n","import { PageEvent } from '../page/page.events';\n\n/**\n * Indicates that a user visited a cart page.\n */\nexport class CartPageEvent extends PageEvent {\n  /** event's type */\n  static readonly type = 'CartPageEvent';\n}\n","import { Injectable } from '@angular/core';\nimport { createFrom, EventService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { NavigationEvent } from '../navigation/navigation.event';\nimport { CartPageEvent } from './cart-page.events';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartPageEventBuilder {\n  constructor(protected eventService: EventService) {\n    this.register();\n  }\n\n  protected register(): void {\n    this.eventService.register(CartPageEvent, this.buildCartPageEvent());\n  }\n\n  protected buildCartPageEvent(): Observable<CartPageEvent> {\n    return this.eventService.get(NavigationEvent).pipe(\n      filter((navigationEvent) => navigationEvent.semanticRoute === 'cart'),\n      map((navigationEvent) =>\n        createFrom(CartPageEvent, {\n          navigation: navigationEvent,\n        })\n      )\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CartPageEventBuilder } from './cart-page-event.builder';\n\n@NgModule({})\nexport class CartPageEventModule {\n  constructor(_cartPageEventBuilder: CartPageEventBuilder) {}\n}\n","import { PageEvent } from '../page/page.events';\n\n/**\n * Indicates that a user visited a home page.\n */\nexport class HomePageEvent extends PageEvent {\n  /** event's type */\n  static readonly type = 'HomePageEvent';\n}\n","import { Injectable } from '@angular/core';\nimport { createFrom, EventService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { NavigationEvent } from '../navigation/navigation.event';\nimport { HomePageEvent } from './home-page.events';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HomePageEventBuilder {\n  constructor(protected eventService: EventService) {\n    this.register();\n  }\n\n  protected register(): void {\n    this.eventService.register(HomePageEvent, this.buildHomePageEvent());\n  }\n\n  protected buildHomePageEvent(): Observable<HomePageEvent> {\n    return this.eventService.get(NavigationEvent).pipe(\n      filter((navigationEvent) => navigationEvent.semanticRoute === 'home'),\n      map((navigationEvent) =>\n        createFrom(HomePageEvent, {\n          navigation: navigationEvent,\n        })\n      )\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { HomePageEventBuilder } from './home-page-event.builder';\n\n@NgModule({})\nexport class HomePageEventModule {\n  constructor(_homePageEventBuilder: HomePageEventBuilder) {}\n}\n","import { Injectable } from '@angular/core';\nimport { ofType } from '@ngrx/effects';\nimport { RouterNavigatedAction, ROUTER_NAVIGATED } from '@ngrx/router-store';\nimport { ActionsSubject } from '@ngrx/store';\nimport {\n  ActivatedRouterStateSnapshot,\n  createFrom,\n  EventService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { NavigationEvent } from './navigation.event';\n\n/**\n * A builder for the NavigationEvent\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class NavigationEventBuilder {\n  constructor(\n    protected actions: ActionsSubject,\n    protected eventService: EventService\n  ) {\n    this.register();\n  }\n\n  /**\n   * Registers events\n   */\n  protected register(): void {\n    this.eventService.register(NavigationEvent, this.buildNavigationEvent());\n  }\n\n  /**\n   * Builds the navigation events\n   */\n  protected buildNavigationEvent(): Observable<NavigationEvent> {\n    return this.getNavigatedEvent().pipe(\n      map((state) =>\n        createFrom(NavigationEvent, {\n          context: state.context,\n          semanticRoute: state.semanticRoute,\n          url: state.url,\n          params: state.params,\n        })\n      )\n    );\n  }\n\n  private getNavigatedEvent(): Observable<ActivatedRouterStateSnapshot> {\n    return this.actions.pipe(\n      ofType<RouterNavigatedAction<ActivatedRouterStateSnapshot>>(\n        ROUTER_NAVIGATED\n      ),\n      map((event) => event.payload.routerState)\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NavigationEventBuilder } from './navigation-event.builder';\n\n@NgModule({})\nexport class NavigationEventModule {\n  constructor(_navigationEventBuilder: NavigationEventBuilder) {}\n}\n","import { Category, Price } from '@spartacus/core';\nimport { PageEvent } from '../page/page.events';\n\n/**\n * Indicates that a user visited a product details page.\n */\nexport class ProductDetailsPageEvent extends PageEvent {\n  /** event's type */\n  static readonly type = 'ProductDetailsPageEvent';\n  categories?: Category[];\n  code?: string;\n  name?: string;\n  price?: Price;\n}\n\n/**\n * Indicates that a user visited a category page.\n */\nexport class CategoryPageResultsEvent extends PageEvent {\n  /** event's type */\n  static readonly type = 'CategoryPageResultsEvent';\n  categoryCode: string;\n  categoryName?: string;\n  numberOfResults: Number;\n}\n\n/**\n * Indicates that the a user visited the search results page,\n * and that the search results have been retrieved.\n */\nexport class SearchPageResultsEvent extends PageEvent {\n  /** event's type */\n  static readonly type = 'SearchPageResultsEvent';\n  searchTerm: string;\n  numberOfResults: Number;\n}\n","import { Injectable } from '@angular/core';\nimport {\n  createFrom,\n  EventService,\n  ProductSearchService,\n  ProductService,\n} from '@spartacus/core';\nimport { EMPTY, Observable } from 'rxjs';\nimport { filter, map, skip, switchMap, take } from 'rxjs/operators';\nimport { NavigationEvent } from '../navigation/navigation.event';\nimport {\n  CategoryPageResultsEvent,\n  ProductDetailsPageEvent,\n  SearchPageResultsEvent,\n} from './product-page.events';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductPageEventBuilder {\n  constructor(\n    protected eventService: EventService,\n    protected productService: ProductService,\n    protected productSearchService: ProductSearchService\n  ) {\n    this.register();\n  }\n\n  protected register(): void {\n    this.eventService.register(\n      SearchPageResultsEvent,\n      this.buildSearchPageResultsEvent()\n    );\n    this.eventService.register(\n      ProductDetailsPageEvent,\n      this.buildProductDetailsPageEvent()\n    );\n    this.eventService.register(\n      CategoryPageResultsEvent,\n      this.buildCategoryResultsPageEvent()\n    );\n  }\n\n  protected buildProductDetailsPageEvent(): Observable<ProductDetailsPageEvent> {\n    return this.eventService.get(NavigationEvent).pipe(\n      filter((navigationEvent) => navigationEvent.semanticRoute === 'product'),\n      switchMap((navigationEvent) =>\n        this.productService.get(navigationEvent.context.id).pipe(\n          filter((product) => Boolean(product)),\n          take(1),\n          map((product) =>\n            createFrom(ProductDetailsPageEvent, {\n              navigation: navigationEvent,\n              categories: product.categories,\n              code: product.code,\n              name: product.name,\n              price: product.price,\n            })\n          )\n        )\n      )\n    );\n  }\n\n  protected buildCategoryResultsPageEvent(): Observable<CategoryPageResultsEvent> {\n    const searchResults$ = this.productSearchService.getResults().pipe(\n      // skipping the initial value, and preventing emission of the previous search state\n      skip(1)\n    );\n\n    return this.eventService.get(NavigationEvent).pipe(\n      switchMap((navigationEvent) => {\n        if (navigationEvent?.semanticRoute !== 'category') {\n          return EMPTY;\n        }\n\n        return searchResults$.pipe(\n          map((searchResults) =>\n            createFrom(CategoryPageResultsEvent, {\n              navigation: navigationEvent,\n              ...{\n                categoryCode: navigationEvent?.context?.id,\n                numberOfResults: searchResults?.pagination?.totalResults ?? 0,\n                categoryName: searchResults.breadcrumbs?.[0].facetValueName,\n              },\n            })\n          )\n        );\n      })\n    );\n  }\n\n  protected buildSearchPageResultsEvent(): Observable<SearchPageResultsEvent> {\n    const searchResults$ = this.productSearchService.getResults().pipe(\n      // skipping the initial value, and preventing emission of the previous search state\n      skip(1)\n    );\n\n    return this.eventService.get(NavigationEvent).pipe(\n      switchMap((navigationEvent) => {\n        if (navigationEvent?.semanticRoute !== 'search') {\n          return EMPTY;\n        }\n\n        return searchResults$.pipe(\n          map((searchResults) =>\n            createFrom(SearchPageResultsEvent, {\n              navigation: navigationEvent,\n              ...{\n                searchTerm: searchResults?.freeTextSearch ?? '',\n                numberOfResults: searchResults?.pagination?.totalResults ?? 0,\n              },\n            })\n          )\n        );\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ProductPageEventBuilder } from './product-page-event.builder';\n\n@NgModule({})\nexport class ProductPageEventModule {\n  constructor(_productPageEventBuilder: ProductPageEventBuilder) {}\n}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class SkipLinkConfig {\n  skipLinks?: SkipLink[];\n}\n\nexport abstract class SkipLink {\n  key: string;\n  i18nKey: string;\n  target?: HTMLElement;\n  position?: SkipLinkScrollPosition;\n}\n\nexport enum SkipLinkScrollPosition {\n  BEFORE = 'BEFORE',\n  AFTER = 'AFTER',\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends SkipLinkConfig {}\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { KeyboardFocusService } from '../../keyboard-focus/services/keyboard-focus.service';\nimport { SkipLink, SkipLinkConfig } from '../config/skip-link.config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SkipLinkService {\n  private skipLinks$ = new BehaviorSubject<SkipLink[]>([]);\n\n  constructor(\n    protected config: SkipLinkConfig,\n    protected keyboardFocusService: KeyboardFocusService\n  ) {}\n\n  getSkipLinks(): Observable<SkipLink[]> {\n    return this.skipLinks$;\n  }\n\n  add(key: string, target: HTMLElement): void {\n    const found: SkipLink = this.config.skipLinks.find(\n      (skipLink) => skipLink.key === key\n    );\n\n    if (found) {\n      const existing: SkipLink[] = this.skipLinks$.value;\n      existing.splice(this.getSkipLinkIndexInArray(key), 0, {\n        target,\n        i18nKey: found.i18nKey,\n        position: found.position,\n        key,\n      });\n      this.skipLinks$.next(existing);\n    }\n  }\n\n  remove(key: string): void {\n    const found: SkipLink = this.config.skipLinks.find(\n      (skipLink) => skipLink.key === key\n    );\n\n    if (found) {\n      let existing: SkipLink[] = this.skipLinks$.value;\n      existing = existing.filter((skipLink) => skipLink.key !== key);\n      this.skipLinks$.next(existing);\n    }\n  }\n\n  scrollToTarget(skipLink: SkipLink): void {\n    const target =\n      skipLink.target instanceof HTMLElement\n        ? skipLink.target\n        : (skipLink.target as Element).parentElement;\n\n    // focus first focusable element in the\n    const firstFocusable =\n      this.keyboardFocusService.findFirstFocusable(target) || target;\n\n    // we force a tabindex if not available, to ensure we can focus into the element\n    const hasTabindex = firstFocusable.hasAttribute('tabindex');\n    if (!hasTabindex) {\n      firstFocusable.setAttribute('tabindex', '-1');\n    }\n\n    firstFocusable.focus();\n\n    // drop the tmp tabindex\n    if (!hasTabindex) {\n      firstFocusable.removeAttribute('tabindex');\n    }\n  }\n\n  protected getSkipLinkIndexInArray(key: string): number {\n    let index: number = this.config.skipLinks.findIndex(\n      (skipLink) => skipLink.key === key\n    );\n\n    while (index > 0) {\n      index--;\n      const previous: SkipLink = this.config.skipLinks[index];\n      if (previous) {\n        const existing: SkipLink[] = this.skipLinks$.value;\n        const found: number = existing.findIndex(\n          (skipLink) => skipLink.key === previous.key\n        );\n        if (found > -1) {\n          return found + 1;\n        }\n      }\n    }\n    return 0;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SkipLink } from '../config/skip-link.config';\nimport { SkipLinkService } from '../service/skip-link.service';\n\n@Component({\n  selector: 'cx-skip-link',\n  templateUrl: './skip-link.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SkipLinkComponent {\n  skipLinks$: Observable<SkipLink[]> = this.skipLinkService.getSkipLinks();\n\n  constructor(private skipLinkService: SkipLinkService) {}\n\n  scrollToTarget(skipLink: SkipLink): void {\n    this.skipLinkService.scrollToTarget(skipLink);\n  }\n}\n","<div [cxFocus]=\"{ tab: true }\" *ngIf=\"skipLinks$ | async as links\">\n  <button *ngFor=\"let link of links\" (click)=\"scrollToTarget(link)\">\n    {{ 'skipLink.skipTo' | cxTranslate }}\n    {{ link.i18nKey | cxTranslate }}\n  </button>\n</div>\n","import { SkipLinkConfig } from './skip-link.config';\n\nexport const defaultSkipLinkConfig: SkipLinkConfig = {\n  skipLinks: [\n    {\n      key: 'cx-header',\n      i18nKey: 'skipLink.labels.header',\n    },\n    {\n      key: 'cx-main',\n      i18nKey: 'skipLink.labels.main',\n    },\n    { key: 'cx-footer', i18nKey: 'skipLink.labels.footer' },\n  ],\n};\n","import { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { SkipLinkService } from '../service/skip-link.service';\n\n@Directive({\n  selector: '[cxSkipLink]',\n})\nexport class SkipLinkDirective implements OnInit, OnDestroy {\n  @Input() cxSkipLink: string;\n\n  constructor(\n    protected elementRef: ElementRef<HTMLElement>,\n    protected skipLinkService: SkipLinkService\n  ) {}\n\n  ngOnInit(): void {\n    this.skipLinkService.add(this.cxSkipLink, this.elementRef.nativeElement);\n  }\n\n  ngOnDestroy(): void {\n    this.skipLinkService.remove(this.cxSkipLink);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n  APP_INITIALIZER,\n  ComponentFactoryResolver,\n  NgModule,\n} from '@angular/core';\nimport {\n  ConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { OutletPosition } from '../../../cms-structure/outlet/outlet.model';\nimport { OutletService } from '../../../cms-structure/outlet/outlet.service';\nimport { KeyboardFocusModule } from '../keyboard-focus/keyboard-focus.module';\nimport { SkipLinkComponent } from './component/skip-link.component';\nimport { defaultSkipLinkConfig } from './config/default-skip-link.config';\nimport { SkipLinkDirective } from './directive/skip-link.directive';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    ConfigModule.withConfig(defaultSkipLinkConfig),\n    KeyboardFocusModule,\n  ],\n  declarations: [SkipLinkComponent, SkipLinkDirective],\n  exports: [SkipLinkDirective],\n  providers: [\n    provideDefaultConfig(defaultSkipLinkConfig),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: skipLinkFactory,\n      deps: [ComponentFactoryResolver, OutletService],\n      multi: true,\n    },\n  ],\n})\nexport class SkipLinkModule {}\n\n/**\n * Adds the skip link component before the cx-storefront.\n */\nexport function skipLinkFactory(\n  componentFactoryResolver: ComponentFactoryResolver,\n  outletService: OutletService\n): () => void {\n  const isReady = () => {\n    const factory =\n      componentFactoryResolver.resolveComponentFactory(SkipLinkComponent);\n    outletService.add('cx-storefront', <any>factory, OutletPosition.BEFORE);\n  };\n  return isReady;\n}\n","import { LayoutConfig } from './layout-config';\n\nexport const defaultLayoutConfig: LayoutConfig = {\n  breakpoints: {\n    xs: 576,\n    sm: 768,\n    md: 992,\n    lg: 1200,\n    xl: {\n      min: 1200,\n    },\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { Direction } from './direction.model';\n\n/**\n * The direction config provides an easy way to configure \"ltr\" versus \"rtl\" direction\n * for the storefront. The direction can be configured to detect the direction by language.\n *\n * The following configuration detects rtl languages by isoCode for Arabic and Hebrew:\n *\n * ```typescript\n * direction: {\n *   detect: true,\n *   default: DirectionMode.LTR,\n *   rtlLanguages: ['ar', 'he']\n * }\n * ```\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class DirectionConfig {\n  direction?: Direction;\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends DirectionConfig {}\n}\n","import { DirectionConfig } from './direction.config';\nimport { DirectionMode } from './direction.model';\n\nexport const defaultDirectionConfig: DirectionConfig = {\n  direction: {\n    detect: true,\n    default: DirectionMode.LTR,\n    // we're not polluting the system with all defaults for ltr, but add 2 common used\n    // languages (hebrew and arabic) to easily demo directionality\n    // see https://meta.wikimedia.org/wiki/Template:List_of_language_names_ordered_by_code\n    rtlLanguages: ['he', 'ar'],\n  },\n};\n","import { Injectable, OnDestroy } from '@angular/core';\nimport {\n  ConfigInitializerService,\n  LanguageService,\n  WindowRef,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { DirectionConfig } from './config/direction.config';\nimport { Direction, DirectionMode } from './config/direction.model';\n\n/**\n * The `DirectionService` can be used to add the direction to the overall storefront or individual elements.\n * By default, the direction is added to the `html` element (i.e. `<html dir=\"ltr\">`). The API of this service\n * does however provide methods to add direction to individual elements if needed.\n *\n * The direction is configurable and allows for language driven direction configuration.\n *\n * To react to the active language, the service subscribes to the active language in the initialize method. This\n * is called from an APP_INITIALIZER method and should only happen once.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DirectionService implements OnDestroy {\n  protected config: Direction;\n  protected startsDetecting = false;\n\n  protected subscription = new Subscription();\n\n  constructor(\n    protected configInit: ConfigInitializerService,\n    protected languageService: LanguageService,\n    protected winRef: WindowRef\n  ) {}\n\n  /**\n   * Initializes the layout direction for the storefront.\n   */\n  initialize(): Promise<any> {\n    return this.configInit\n      .getStable('direction')\n      .pipe(\n        tap((config: DirectionConfig) => {\n          this.config = config?.direction;\n          if (this.config?.detect) {\n            this.detect();\n          } else {\n            this.setDirection(\n              this.winRef.document.documentElement,\n              this.config?.default\n            );\n          }\n        })\n      )\n      .toPromise();\n  }\n\n  /**\n   * Observes the _active_ language and set the required direction for the given language.\n   * The method is guarded to ensure that the active language is observed only once.\n   */\n  protected detect() {\n    if (this.startsDetecting) {\n      return;\n    }\n    this.subscription.add(\n      this.languageService\n        .getActive()\n        .subscribe((isoCode: string) =>\n          this.setDirection(\n            this.winRef.document.documentElement,\n            this.getDirection(isoCode)\n          )\n        )\n    );\n    this.startsDetecting = true;\n  }\n\n  /**\n   * Sets the direction attribute for the given element. If the direction is undefined, the `dir`\n   * attribute is removed.\n   */\n  setDirection(el: HTMLElement, direction: DirectionMode): void {\n    if (direction) {\n      el.setAttribute('dir', direction);\n    } else {\n      el.removeAttribute('dir');\n    }\n  }\n\n  /**\n   * Gets the `DirectionMode` for the given language isoCode. The language isoCode is compared\n   * to the configured list of languages(`direction.rtlLanguages` vs `direction.ltrLanguages`).\n   *\n   * If no language is given, or no language mapping could be found, we fallback to the default\n   * `direction.mode`.\n   */\n  getDirection(language?: string): DirectionMode {\n    if (language && this.config?.rtlLanguages?.includes(language)) {\n      return DirectionMode.RTL;\n    }\n    if (language && this.config?.ltrLanguages?.includes(language)) {\n      return DirectionMode.LTR;\n    }\n    return this.config?.default;\n  }\n\n  ngOnDestroy(): void {\n    // Cleans up the subscription, to avoid memory leaks in SSR.\n    this.subscription.unsubscribe();\n  }\n}\n","import { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { FeatureConfigService, provideDefaultConfig } from '@spartacus/core';\nimport { defaultDirectionConfig } from './config/default-direction.config';\nimport { DirectionService } from './direction.service';\n\nexport function initHtmlDirAttribute(\n  directionService: DirectionService,\n  featureConfigService: FeatureConfigService\n): () => void {\n  const result = () => {\n    if (featureConfigService.isLevel('2.1')) {\n      return directionService.initialize();\n    }\n  };\n  return result;\n}\n\n/**\n * Provides a configuration and APP_INITIALIZER to add the correct (language drive) html direction.\n */\n@NgModule({\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      useFactory: initHtmlDirAttribute,\n      deps: [DirectionService, FeatureConfigService],\n    },\n    provideDefaultConfig(defaultDirectionConfig),\n  ],\n})\nexport class DirectionModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HamburgerMenuService } from './hamburger-menu.service';\n\n@Component({\n  selector: 'cx-hamburger-menu',\n  templateUrl: './hamburger-menu.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class HamburgerMenuComponent {\n  constructor(private hamburgerMenuService: HamburgerMenuService) {}\n\n  toggle(): void {\n    this.hamburgerMenuService.toggle();\n  }\n\n  get isExpanded(): Observable<boolean> {\n    return this.hamburgerMenuService.isExpanded;\n  }\n}\n","<button\n  class=\"cx-hamburger\"\n  type=\"button\"\n  (click)=\"toggle()\"\n  [class.is-active]=\"isExpanded | async\"\n  [attr.aria-expanded]=\"isExpanded | async\"\n  [attr.aria-label]=\"'common.menu' | cxTranslate\"\n  aria-controls=\"header-account-container, header-categories-container, header-locale-container\"\n>\n  <span class=\"hamburger-box\">\n    <span class=\"hamburger-inner\"></span>\n  </span>\n</button>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { HamburgerMenuComponent } from './hamburger-menu.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        HamburgerMenuComponent: {\n          component: HamburgerMenuComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [HamburgerMenuComponent],\n  exports: [HamburgerMenuComponent],\n})\nexport class HamburgerMenuModule {}\n","import {\n  ComponentRef,\n  Injectable,\n  Renderer2,\n  RendererFactory2,\n} from '@angular/core';\nimport { SiteContextConfig, THEME_CONTEXT_ID } from '@spartacus/core';\n\n@Injectable({ providedIn: 'root' })\nexport class ThemeService {\n  protected rootComponent: ComponentRef<any>;\n  protected renderer: Renderer2;\n  protected existingTheme: string;\n\n  constructor(\n    protected config: SiteContextConfig,\n    protected rendererFactory: RendererFactory2\n  ) {}\n\n  /**\n   * This function is to be called for the root component that is\n   * bootstrapped.\n   */\n  init(rootComponent: ComponentRef<any>): void {\n    this.renderer = this.rendererFactory.createRenderer(null, null);\n    this.rootComponent = rootComponent;\n    // Theme value is a string. It is put in the generic multi-value\n    // property of the SiteContextConfig. So the array's first item\n    // is the theme value.\n    this.setTheme(this.config.context[THEME_CONTEXT_ID]?.[0]);\n  }\n\n  setTheme(theme: string): void {\n    if (theme) {\n      const element = this.rootComponent.location.nativeElement;\n      // remove the old theme\n      this.renderer.removeClass(element, this.existingTheme);\n      // add the new theme\n      this.renderer.addClass(element, theme);\n      this.existingTheme = theme;\n    }\n  }\n}\n","import { APP_BOOTSTRAP_LISTENER, ComponentRef, NgModule } from '@angular/core';\nimport { ThemeService } from './theme.service';\n\nexport function initTheme(themeService: ThemeService) {\n  const result = (component: ComponentRef<any>) => themeService.init(component);\n  return result;\n}\n\n@NgModule({\n  providers: [\n    {\n      provide: APP_BOOTSTRAP_LISTENER,\n      multi: true,\n      useFactory: initTheme,\n      deps: [ThemeService],\n    },\n  ],\n})\nexport class ThemeModule {}\n","import { NgModule } from '@angular/core';\nimport { provideConfig } from '@spartacus/core';\nimport { OutletRefModule } from '../cms-structure/outlet/outlet-ref/outlet-ref.module';\nimport { defaultLayoutConfig } from './config/default-layout.config';\nimport { DirectionModule } from './direction/direction.module';\nimport { LaunchDialogModule } from './launch-dialog/index';\nimport { ThemeModule } from './theme/theme.module';\n\n@NgModule({\n  imports: [\n    OutletRefModule,\n    LaunchDialogModule.forRoot(),\n    DirectionModule,\n    ThemeModule,\n  ],\n  providers: [provideConfig(defaultLayoutConfig)],\n  exports: [OutletRefModule],\n})\nexport class LayoutModule {}\n","export enum StorefrontOutlets {\n  STOREFRONT = 'cx-storefront',\n}\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { RoutingService } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport {\n  FocusConfig,\n  KeyboardFocusService,\n} from '../a11y/keyboard-focus/index';\nimport { SkipLinkComponent } from '../a11y/skip-link/index';\nimport { HamburgerMenuService } from '../header/hamburger-menu/hamburger-menu.service';\nimport { StorefrontOutlets } from './storefront-outlets.model';\n\n@Component({\n  selector: 'cx-storefront',\n  templateUrl: './storefront.component.html',\n})\nexport class StorefrontComponent implements OnInit, OnDestroy {\n  navigateSubscription: Subscription;\n  isExpanded$: Observable<boolean> = this.hamburgerMenuService.isExpanded;\n\n  readonly StorefrontOutlets = StorefrontOutlets;\n\n  @HostBinding('class.start-navigating') startNavigating;\n  @HostBinding('class.stop-navigating') stopNavigating;\n\n  // required by esc focus\n  @HostBinding('tabindex') tabindex = '0';\n\n  @ViewChild(SkipLinkComponent) child: SkipLinkComponent;\n\n  private keyboardFocusConfig: FocusConfig = {\n    focusOnEscape: true,\n    focusOnDoubleEscape: true,\n  };\n\n  @HostListener('keydown.escape', ['$event'])\n  handleEscape(event: KeyboardEvent): void {\n    this.keyboardFocusService.handleEscape(\n      this.elementRef.nativeElement,\n      this.keyboardFocusConfig,\n      event\n    );\n  }\n\n  constructor(\n    private hamburgerMenuService: HamburgerMenuService,\n    private routingService: RoutingService,\n    protected elementRef: ElementRef<HTMLElement>,\n    protected keyboardFocusService: KeyboardFocusService\n  ) {}\n\n  ngOnInit(): void {\n    this.navigateSubscription = this.routingService\n      .isNavigating()\n      .subscribe((val) => {\n        this.startNavigating = val === true;\n        this.stopNavigating = val === false;\n      });\n  }\n\n  collapseMenuIfClickOutside(event: any): void {\n    const element = event.target;\n    if (\n      element.nodeName.toLowerCase() === 'header' &&\n      element.className.includes('is-expanded')\n    ) {\n      this.collapseMenu();\n    }\n  }\n\n  collapseMenu(): void {\n    this.hamburgerMenuService.toggle(true);\n  }\n\n  ngOnDestroy(): void {\n    if (this.navigateSubscription) {\n      this.navigateSubscription.unsubscribe();\n    }\n  }\n}\n","<ng-template [cxOutlet]=\"StorefrontOutlets.STOREFRONT\" cxPageTemplateStyle>\n  <ng-template cxOutlet=\"cx-header\">\n    <header\n      cxSkipLink=\"cx-header\"\n      [cxFocus]=\"{ disableMouseFocus: true }\"\n      [class.is-expanded]=\"isExpanded$ | async\"\n      (keydown.escape)=\"collapseMenu()\"\n      (click)=\"collapseMenuIfClickOutside($event)\"\n    >\n      <cx-page-layout section=\"header\"></cx-page-layout>\n      <cx-page-layout section=\"navigation\"></cx-page-layout>\n    </header>\n    <cx-page-slot position=\"BottomHeaderSlot\"></cx-page-slot>\n    <cx-global-message\n      aria-atomic=\"true\"\n      aria-live=\"assertive\"\n    ></cx-global-message>\n  </ng-template>\n\n  <main cxSkipLink=\"cx-main\" [cxFocus]=\"{ disableMouseFocus: true }\">\n    <router-outlet></router-outlet>\n  </main>\n\n  <ng-template cxOutlet=\"cx-footer\">\n    <footer cxSkipLink=\"cx-footer\" [cxFocus]=\"{ disableMouseFocus: true }\">\n      <cx-page-layout section=\"footer\"></cx-page-layout>\n    </footer>\n  </ng-template>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { GlobalMessageComponentModule } from '../../cms-components/misc/global-message/global-message.module';\nimport { OutletRefModule } from '../../cms-structure/outlet/outlet-ref/outlet-ref.module';\nimport { OutletModule } from '../../cms-structure/outlet/outlet.module';\nimport { PageLayoutModule } from '../../cms-structure/page/page-layout/page-layout.module';\nimport { PageSlotModule } from '../../cms-structure/page/slot/page-slot.module';\nimport { StorefrontComponent } from './storefront.component';\nimport { KeyboardFocusModule } from '../a11y/keyboard-focus/keyboard-focus.module';\nimport { SkipLinkModule } from '../a11y/skip-link/skip-link.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    GlobalMessageComponentModule,\n    OutletModule,\n    OutletRefModule,\n    PageLayoutModule,\n    PageSlotModule,\n    KeyboardFocusModule,\n    SkipLinkModule,\n  ],\n  declarations: [StorefrontComponent],\n  exports: [StorefrontComponent],\n})\nexport class StorefrontComponentModule {}\n","import { MediaConfig } from '../../shared/components/media/media.config';\n\nexport const mediaConfig: MediaConfig = {\n  mediaFormats: {\n    mobile: { width: 400 },\n    tablet: { width: 770 },\n    desktop: { width: 1140 },\n    widescreen: { width: 1400 },\n    // product media\n    cartIcon: { width: 65 },\n    thumbnail: { width: 96 },\n    product: { width: 284 },\n    zoom: { width: 515 },\n  },\n};\n","import { LayoutConfig } from '../../layout/config/layout-config';\n\n/**\n * The layout configuration is used to define the overall layout of the storefront.\n * The configuration includes the following aspects:\n * - breakpoint layout (AKA screen layout)\n * - Page sections slot configuration (i.e. header vs footer)\n * - page template slot configuration (i.e. landing page template vs PDP page template)\n * - deferred loading configuration\n *\n * The page slot configurations is directly related to the data in the backend. If you use the\n * Spartacus sample-data, you will have an aligned setup. However, if you introduce custom page\n * templates and/or slots, you most likely need to further adjust or replace this configuration.\n */\nexport const layoutConfig: LayoutConfig = {\n  // deferredLoading: {\n  //   strategy: DeferLoadingStrategy.DEFER,\n  //   intersectionMargin: '50px',\n  // },\n  layoutSlots: {\n    header: {\n      lg: {\n        slots: [\n          'PreHeader',\n          'SiteContext',\n          'SiteLinks',\n          'SiteLogo',\n          'SearchBox',\n          'SiteLogin',\n          'MiniCart',\n          'NavigationBar',\n        ],\n      },\n      slots: ['PreHeader', 'SiteLogo', 'SearchBox', 'MiniCart'],\n    },\n    navigation: {\n      lg: { slots: [] },\n      slots: ['SiteLogin', 'NavigationBar', 'SiteContext', 'SiteLinks'],\n    },\n    footer: {\n      slots: ['Footer'],\n    },\n    LandingPage2Template: {\n      pageFold: 'Section2B',\n      slots: [\n        'Section1',\n        'Section2A',\n        'Section2B',\n        'Section2C',\n        'Section3',\n        'Section4',\n        'Section5',\n      ],\n    },\n    ContentPage1Template: {\n      slots: ['Section2A', 'Section2B'],\n    },\n    CategoryPageTemplate: {\n      pageFold: 'Section2',\n      slots: ['Section1', 'Section2', 'Section3'],\n    },\n    ProductListPageTemplate: {\n      slots: ['ProductLeftRefinements', 'ProductListSlot'],\n    },\n    ProductGridPageTemplate: {\n      slots: ['ProductLeftRefinements', 'ProductGridSlot'],\n    },\n    SearchResultsListPageTemplate: {\n      slots: [\n        'Section2',\n        'ProductLeftRefinements',\n        'SearchResultsListSlot',\n        'Section4',\n      ],\n    },\n    SearchResultsGridPageTemplate: {\n      slots: [\n        'Section2',\n        'ProductLeftRefinements',\n        'SearchResultsGridSlot',\n        'Section4',\n      ],\n    },\n    ProductDetailsPageTemplate: {\n      lg: {\n        pageFold: 'UpSelling',\n      },\n      pageFold: 'Summary',\n      slots: [\n        'Summary',\n        'UpSelling',\n        'CrossSelling',\n        'Tabs',\n        'PlaceholderContentSlot',\n      ],\n    },\n    CartPageTemplate: {\n      slots: ['TopContent', 'CenterRightContentSlot', 'EmptyCartMiddleContent'],\n    },\n    AccountPageTemplate: {\n      slots: ['BodyContent', 'SideContent'],\n    },\n    LoginPageTemplate: {\n      slots: ['LeftContentSlot', 'RightContentSlot'],\n    },\n    ErrorPageTemplate: {\n      slots: ['TopContent', 'MiddleContent', 'BottomContent'],\n    },\n    OrderConfirmationPageTemplate: {\n      slots: ['BodyContent', 'SideContent'],\n    },\n    MultiStepCheckoutSummaryPageTemplate: {\n      slots: ['TopContent', 'BodyContent', 'SideContent', 'BottomContent'],\n    },\n    CheckoutLoginPageTemplate: {\n      slots: ['RightContentSlot'],\n    },\n  },\n};\n","import { ValueProvider } from '@angular/core';\nimport { provideCmsStructure } from '../../cms-structure/utils/cms-structure.util';\n\nexport const defaultCmsContentProviders: ValueProvider[] = [\n  provideCmsStructure({\n    componentId: 'HamburgerMenuComponent',\n    pageSlotPosition: 'PreHeader',\n  }),\n  provideCmsStructure({\n    componentId: 'LoginComponent',\n    pageSlotPosition: 'SiteLogin',\n  }),\n];\n","import { OnNavigateConfig } from './on-navigate-config';\n\nexport const defaultOnNavigateConfig: OnNavigateConfig = {\n  enableResetViewOnNavigate: {\n    active: true,\n    ignoreQueryString: false,\n    ignoreRoutes: [],\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class OnNavigateConfig {\n  enableResetViewOnNavigate?: {\n    active?: boolean;\n    ignoreQueryString?: boolean;\n    ignoreRoutes?: string[];\n  };\n}\n\ndeclare module '@spartacus/core' {\n  interface Config extends OnNavigateConfig {}\n}\n","import { ViewportScroller } from '@angular/common';\nimport {\n  ApplicationRef,\n  ComponentRef,\n  Injectable,\n  Injector,\n} from '@angular/core';\nimport { Router, Scroll } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { filter, pairwise } from 'rxjs/operators';\nimport { OnNavigateConfig } from './config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OnNavigateService {\n  protected subscription: Subscription;\n\n  get hostComponent(): ComponentRef<any> {\n    return this.injector.get(ApplicationRef)?.components?.[0];\n  }\n\n  constructor(\n    protected config: OnNavigateConfig,\n    protected router: Router,\n    protected viewportScroller: ViewportScroller,\n    protected injector: Injector\n  ) {}\n\n  /**\n   * Reads configuration and enables features based on flags set.\n   */\n  initializeWithConfig(): void {\n    if (this.config?.enableResetViewOnNavigate?.active) {\n      this.setResetViewOnNavigate(this.config.enableResetViewOnNavigate.active);\n    }\n  }\n\n  /**\n   * Resets view back to the original position when performing a back navigation and to the top when performing a front navigation\n   * and sets the focus back to the top of the page before skiplinks for any type of navigation\n   * @param enable Enable or disable this feature\n   */\n  setResetViewOnNavigate(enable: boolean): void {\n    this.subscription?.unsubscribe();\n\n    if (enable) {\n      this.subscription = this.router.events\n        .pipe(\n          filter((event): event is Scroll => event instanceof Scroll),\n          pairwise()\n        )\n        .subscribe((event) => {\n          const previousRoute = event[0];\n          const currentRoute = event[1];\n\n          if (currentRoute.position) {\n            // allow the pages to be repainted before scrolling to proper position\n            setTimeout(() =>\n              this.viewportScroller.scrollToPosition(currentRoute.position)\n            );\n          } else {\n            if (\n              this.config.enableResetViewOnNavigate?.ignoreQueryString &&\n              this.isPathEqual(previousRoute, currentRoute)\n            ) {\n              return;\n            }\n\n            if (this.isChildRoute(currentRoute)) {\n              return;\n            }\n\n            setTimeout(\n              () => this.viewportScroller.scrollToPosition([0, 0]),\n              100\n            );\n          }\n\n          this.hostComponent?.location?.nativeElement.focus();\n        });\n    }\n  }\n\n  /**\n   * Verifies if the current route is a child route from the given ignore config route\n   *\n   * @param route\n   * @returns boolean whether the route is a child route\n   */\n  private isChildRoute(route: Scroll): boolean {\n    return (\n      this.config.enableResetViewOnNavigate?.ignoreRoutes?.some((configRoute) =>\n        route.routerEvent.urlAfterRedirects.split('/').includes(configRoute)\n      ) ?? false\n    );\n  }\n\n  /**\n   * Verifies if the previous and current route are the same without the query string\n   *\n   * @param previousRoute\n   * @param currentRoute\n   * @returns boolean depending on the previous and current route are equal without the query strings\n   */\n  private isPathEqual(previousRoute: Scroll, currentRoute: Scroll): boolean {\n    return (\n      previousRoute.routerEvent.urlAfterRedirects.split('?')[0] ===\n      currentRoute.routerEvent.urlAfterRedirects.split('?')[0]\n    );\n  }\n}\n","import { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultOnNavigateConfig } from './config/default-on-navigate-config';\nimport { OnNavigateService } from './on-navigate.service';\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot([], {\n      anchorScrolling: 'enabled',\n      relativeLinkResolution: 'corrected',\n      initialNavigation: 'enabled',\n    }),\n  ],\n  providers: [\n    provideDefaultConfig(defaultOnNavigateConfig),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: onNavigateFactory,\n      deps: [OnNavigateService],\n      multi: true,\n    },\n  ],\n})\nexport class AppRoutingModule {}\n\nexport function onNavigateFactory(\n  onNavigateService: OnNavigateService\n): () => void {\n  const isReady = () => onNavigateService.initializeWithConfig();\n  return isReady;\n}\n","import { AbstractControl, FormArray, FormGroup } from '@angular/forms';\n\n/**\n * Utils for Angular forms\n */\nexport namespace FormUtils {\n  /**\n   * Calls the native Angular method `#updateValueAndValidity` for the given from control\n   * and all its descendants (in case when it's `FormGroup` or `FormArray`).\n   *\n   * In particular it's useful for triggering re-emission of observables\n   * `valueChanges` and `statusChanges` for all descendant form controls.\n   *\n   * _Note: Dropping this function may be considered, when it's implemented natively\n   * by Angular. See https://github.com/angular/angular/issues/6170_\n   *\n   * @param control form control\n   * @param options additional options\n   * * `emitEvent`: When true or not given (the default), the `statusChanges` and\n   * `valueChanges` observables emit the latest status and value. When false,\n   * it doesn't trigger observables emission.\n   */\n  export function deepUpdateValueAndValidity(\n    control: AbstractControl,\n    options: { emitEvent?: boolean } = {}\n  ): void {\n    if (control instanceof FormGroup || control instanceof FormArray) {\n      Object.values(control.controls).forEach(\n        (childControl: AbstractControl) => {\n          deepUpdateValueAndValidity(childControl, options);\n        }\n      );\n    }\n\n    control.updateValueAndValidity({\n      onlySelf: true, // avoid calling `#updateValueAndValidity` for all ancestors\n      emitEvent: options.emitEvent,\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BaseCoreModule } from '@spartacus/core';\nimport { GlobalMessageComponentModule } from './cms-components/misc/global-message/global-message.module';\nimport { OutletRefModule } from './cms-structure/outlet/outlet-ref/outlet-ref.module';\nimport { OutletModule } from './cms-structure/outlet/outlet.module';\nimport { PageComponentModule } from './cms-structure/page/component/page-component.module';\nimport { PageLayoutModule } from './cms-structure/page/page-layout/page-layout.module';\nimport { PageSlotModule } from './cms-structure/page/slot/page-slot.module';\nimport { PwaModule } from './cms-structure/pwa/pwa.module';\nimport { RoutingModule } from './cms-structure/routing/routing.module';\nimport { SeoModule } from './cms-structure/seo/seo.module';\nimport { KeyboardFocusModule } from './layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { SkipLinkModule } from './layout/a11y/skip-link/skip-link.module';\nimport { LayoutModule } from './layout/layout.module';\nimport { StorefrontComponentModule } from './layout/main/storefront-component.module';\nimport { MediaModule } from './shared/components/media/media.module';\n\n@NgModule({\n  imports: [\n    BaseCoreModule.forRoot(),\n    RouterModule,\n    GlobalMessageComponentModule,\n    OutletModule,\n    OutletRefModule,\n    PwaModule,\n    PageLayoutModule,\n    SeoModule,\n    PageComponentModule.forRoot(),\n    PageSlotModule,\n    SkipLinkModule,\n    KeyboardFocusModule,\n    LayoutModule,\n    RoutingModule.forRoot(),\n    MediaModule.forRoot(),\n    OutletModule.forRoot(),\n    StorefrontComponentModule,\n  ],\n  exports: [LayoutModule, StorefrontComponentModule],\n})\nexport class BaseStorefrontModule {}\n","/*\n * Public API Surface of storefrontlib\n */\n\nexport * from './cms-components/index';\nexport * from './cms-pages/index';\nexport * from './cms-structure/index';\nexport * from './context/index';\nexport * from './events/index';\nexport * from './layout/index';\nexport * from './recipes/index';\nexport * from './router/index';\nexport * from './shared/index';\nexport * from './utils/index';\nexport * from './base-storefront.module';\n\n/** AUGMENTABLE_TYPES_START */\nexport { BREAKPOINT } from './layout/config/layout-config';\nexport { LAUNCH_CALLER } from './layout/launch-dialog/config/launch-config';\nexport { ICON_TYPE } from './cms-components/misc/icon';\n/** AUGMENTABLE_TYPES_END */\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["TrapFocus","Injectable","Directive","Input","HostBinding","HostListener","EventEmitter","Output","Config","BREAKPOINT","isPlatformBrowser","map","distinctUntilChanged","of","PLATFORM_ID","Inject","filter","NavigationStart","take","CommonModule","RouterModule","provideDefaultConfig","APP_INITIALIZER","ConfigModule","NgModule","DIALOG_TYPE","LaunchRenderStrategy","DOCUMENT","BehaviorSubject","combineLatest","tap","isDevMode","resolveApplicable","Subscription","Component","ApplicationRef","Injector","OutletPosition","isNotNullable","first","Observable","flatMap","DeferLoadingStrategy","isPlatformServer","ReplaySubject","ComponentFactory","TemplateRef","InjectionToken","Optional","ComponentFactoryResolver","ICON_TYPE","IconResourceType","DirectionMode","ANONYMOUS_CONSENT_STATUS","ViewChild","I18nModule","FeaturesConfigModule","provideConfig","CartOutlets","withLatestFrom","ChangeDetectionStrategy","ImageLoadingStrategy","startWith","PromotionLocation","FormGroup","switchMap","shareReplay","switchMapTo","FormControl","ElementRef","isNotUndefined","skipWhile","GlobalMessageType","concat","scan","FormsModule","ReactiveFormsModule","AuthGuard","PopoverEvent","Subject","Pipe","UrlModule","isObject","NG_VALUE_ACCESSOR","forwardRef","PaginationItemType","PaginationNavigationPosition","NgSelectModule","NgbModalRef","delayWhen","timer","_a","LANGUAGE_CONTEXT_ID","CURRENCY_CONTEXT_ID","SiteContextModule","ContextServiceMap","SiteContextType","TableLayout","catchError","EMAIL_PATTERN","PASSWORD_PATTERN","Validators","NgbModule","CartValidationStatusCode","ProductImportStatus","ofType","CartActions","OrderEntriesSource","NavigationEnd","NavigationCancel","defer","ConfigChunk","InjectFlags","DefaultConfigChunk","deepMerge","forkJoin","mapTo","share","CxEvent","EMPTY","ChangeDetectorRef","finalize","PageType","endWith","isObservable","from","CartModule","SwRegistrationOptions","ServiceWorkerModule","Router","CoreRoutingModule","WindowRef","LanguageService","SecurityContext","PageSection","ViewChildren","UserAddressService","AmendOrderType","getLastValueSync","formatCurrency","getCurrencySymbol","moduleComponents","PageMetaModule","debounceTime","using","ViewModes","ProductDetailOutlets","ProductListOutlets","FacetGroupCollapsedState","pluck","HttpUrlEncodingCodec","observeOn","asapScheduler","interval","InfiniteScrollModule","OCC_USER_ID_ANONYMOUS","NotificationType","OAuthFlow","inject","UrlMatcherService","DEFAULT_URL_MATCHER","createFrom","ROUTER_NAVIGATED","skip","SkipLinkScrollPosition","FeatureConfigService","THEME_CONTEXT_ID","APP_BOOTSTRAP_LISTENER","StorefrontOutlets","Scroll","pairwise","FormUtils","FormArray","BaseCoreModule"],"mappings":"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"}