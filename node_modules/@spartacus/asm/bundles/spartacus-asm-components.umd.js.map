{"version":3,"file":"spartacus-asm-components.umd.js","sources":["../../../feature-libs/asm/components/services/asm-component.service.ts","../../../feature-libs/asm/components/asm-toggle-ui/asm-toggle-ui.component.ts","../../../feature-libs/asm/components/asm-toggle-ui/asm-toggle-ui.component.html","../../../feature-libs/asm/components/asm-session-timer/format-timer.pipe.ts","../../../feature-libs/asm/components/asm-session-timer/asm-session-timer.component.ts","../../../feature-libs/asm/components/asm-session-timer/asm-session-timer.component.html","../../../feature-libs/asm/components/customer-emulation/customer-emulation.component.ts","../../../feature-libs/asm/components/customer-emulation/customer-emulation.component.html","../../../feature-libs/asm/components/customer-selection/customer-selection.component.ts","../../../feature-libs/asm/components/customer-selection/customer-selection.component.html","../../../feature-libs/asm/components/csagent-login-form/csagent-login-form.component.ts","../../../feature-libs/asm/components/csagent-login-form/csagent-login-form.component.html","../../../feature-libs/asm/components/asm-main-ui/asm-main-ui.component.ts","../../../feature-libs/asm/components/asm-main-ui/asm-main-ui.component.html","../../../feature-libs/asm/components/default-asm-layout.config.ts","../../../feature-libs/asm/components/asm-components.module.ts","../../../feature-libs/asm/components/spartacus-asm-components.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  ASM_ENABLED_LOCAL_STORAGE_KEY,\n  CsAgentAuthService,\n} from '@spartacus/asm/root';\nimport { AuthService, WindowRef } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AsmComponentService {\n  constructor(\n    protected authService: AuthService,\n    protected csAgentAuthService: CsAgentAuthService,\n    protected winRef: WindowRef\n  ) {}\n\n  logoutCustomerSupportAgentAndCustomer(): void {\n    this.csAgentAuthService.logoutCustomerSupportAgent();\n  }\n\n  logoutCustomer(): void {\n    this.authService.logout();\n  }\n\n  isCustomerEmulationSessionInProgress(): Observable<boolean> {\n    return this.csAgentAuthService.isCustomerEmulated();\n  }\n\n  /**\n   * We're currently only removing the persisted storage in the browser\n   * to ensure the ASM experience isn't loaded on the next visit. There are a few\n   * optimizations we could think of:\n   * - drop the `asm` parameter from the URL, in case it's still there\n   * - remove the generated UI from the DOM (outlets currently do not support this)\n   */\n  unload() {\n    if (this.winRef.localStorage) {\n      this.winRef.localStorage.removeItem(ASM_ENABLED_LOCAL_STORAGE_KEY);\n    }\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AsmService, AsmUi } from '@spartacus/asm/core';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'cx-asm-toggle-ui',\n  templateUrl: './asm-toggle-ui.component.html',\n})\nexport class AsmToggleUiComponent implements OnInit, OnDestroy {\n  protected subscription = new Subscription();\n  isCollapsed: boolean;\n\n  constructor(protected asmService: AsmService) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      this.asmService.getAsmUiState().subscribe((uiState: AsmUi) => {\n        this.isCollapsed =\n          uiState.collapsed === undefined ? false : uiState.collapsed;\n      })\n    );\n  }\n\n  toggleUi(): void {\n    this.asmService.updateAsmUiState({ collapsed: !this.isCollapsed });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","<a class=\"toggleUi\" (click)=\"toggleUi()\">\n  <span [ngClass]=\"!isCollapsed ? 'collapseIcon' : 'expandIcon'\"></span>\n  <span *ngIf=\"!isCollapsed\" class=\"label\">\n    {{ 'asm.toggleUi.collapse' | cxTranslate }}\n  </span>\n  <span *ngIf=\"isCollapsed\" class=\"label\">\n    {{ 'asm.toggleUi.expand' | cxTranslate }}\n  </span>\n</a>\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'formatTimer',\n})\nexport class FormatTimerPipe implements PipeTransform {\n  transform(totalSeconds: number): string {\n    if (totalSeconds < 0) {\n      totalSeconds = 0;\n    }\n    const minutes: number = Math.floor(totalSeconds / 60);\n    const seconds: number = totalSeconds % 60;\n    let zeroPaddedMinutes: string;\n    if (minutes < 10) {\n      zeroPaddedMinutes = ('00' + minutes).slice(-2);\n    } else {\n      zeroPaddedMinutes = minutes + '';\n    }\n    const zeroPaddedSeconds: string = ('00' + seconds).slice(-2);\n    return `${zeroPaddedMinutes}:${zeroPaddedSeconds}`;\n  }\n}\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { AsmConfig } from '@spartacus/asm/core';\nimport { RoutingService, UserIdService } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { AsmComponentService } from '../services/asm-component.service';\n\n@Component({\n  selector: 'cx-asm-session-timer',\n  templateUrl: './asm-session-timer.component.html',\n})\nexport class AsmSessionTimerComponent implements OnInit, OnDestroy {\n  protected subscriptions = new Subscription();\n  protected interval: any;\n  protected maxStartDelayInSeconds = 60000;\n  timeLeft: number;\n\n  constructor(\n    protected config: AsmConfig,\n    protected asmComponentService: AsmComponentService,\n    protected routingService: RoutingService,\n    protected changeDetectorRef: ChangeDetectorRef,\n    protected userIdService: UserIdService\n  ) {}\n\n  ngOnInit(): void {\n    this.timeLeft = this.getTimerStartDelayInSeconds();\n    this.interval = setInterval(() => {\n      if (this.timeLeft > 0) {\n        this.timeLeft--;\n      } else {\n        clearInterval(this.interval);\n        this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n      }\n      this.changeDetectorRef.markForCheck();\n    }, 1000);\n\n    this.resetOnNavigate();\n    this.resetOnCustomerSessionChange();\n  }\n\n  protected resetOnNavigate(): void {\n    this.subscriptions.add(\n      this.routingService.isNavigating().subscribe((isNavigating) => {\n        if (isNavigating) {\n          this.resetTimer();\n        }\n      })\n    );\n  }\n\n  protected resetOnCustomerSessionChange(): void {\n    this.subscriptions.add(\n      this.userIdService\n        .getUserId()\n        .pipe(distinctUntilChanged())\n        .subscribe(() => this.resetTimer())\n    );\n  }\n\n  resetTimer(): void {\n    if (this.timeLeft > 0) {\n      this.timeLeft = this.getTimerStartDelayInSeconds();\n    }\n  }\n\n  protected getTimerStartDelayInSeconds(): number {\n    if (\n      this.config.asm?.agentSessionTimer?.startingDelayInSeconds === undefined\n    ) {\n      return 600;\n    }\n    if (\n      this.config.asm.agentSessionTimer.startingDelayInSeconds >\n      this.maxStartDelayInSeconds\n    ) {\n      return this.maxStartDelayInSeconds;\n    } else {\n      return this.config.asm.agentSessionTimer.startingDelayInSeconds;\n    }\n  }\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n}\n","<span class=\"label\">{{ 'asm.agentSessionTimer.label' | cxTranslate }}:</span>\n<span class=\"time\"\n  >{{ timeLeft | formatTimer }}\n  {{ 'asm.agentSessionTimer.minutes' | cxTranslate }}</span\n>\n<button\n  class=\"reset\"\n  title=\"{{ 'asm.agentSessionTimer.reset' | cxTranslate }}\"\n  (click)=\"resetTimer()\"\n></button>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { User, UserService } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { AsmComponentService } from '../services/asm-component.service';\n\n@Component({\n  selector: 'cx-customer-emulation',\n  templateUrl: './customer-emulation.component.html',\n})\nexport class CustomerEmulationComponent implements OnInit, OnDestroy {\n  customer: User;\n  isCustomerEmulationSessionInProgress$: Observable<boolean>;\n  protected subscription = new Subscription();\n\n  constructor(\n    protected asmComponentService: AsmComponentService,\n    protected userService: UserService\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.userService.get().subscribe((user) => {\n        if (user) this.customer = user;\n      })\n    );\n    this.isCustomerEmulationSessionInProgress$ =\n      this.asmComponentService.isCustomerEmulationSessionInProgress();\n  }\n\n  logoutCustomer() {\n    this.asmComponentService.logoutCustomer();\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","<ng-container *ngIf=\"isCustomerEmulationSessionInProgress$ | async\">\n  <input\n    formcontrolname=\"customer\"\n    type=\"text\"\n    disabled=\"true\"\n    placeholder=\"{{ customer?.name }}, {{ customer?.uid }}\"\n  />\n  <button (click)=\"logoutCustomer()\">\n    {{ 'asm.endSession' | cxTranslate }}\n  </button>\n</ng-container>\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AsmConfig, AsmService, CustomerSearchPage } from '@spartacus/asm/core';\nimport { User } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-customer-selection',\n  templateUrl: './customer-selection.component.html',\n  host: {\n    '(document:click)': 'onDocumentClick($event)',\n  },\n})\nexport class CustomerSelectionComponent implements OnInit, OnDestroy {\n  customerSelectionForm: FormGroup;\n  protected subscription = new Subscription();\n  searchResultsLoading$: Observable<boolean>;\n  searchResults: Observable<CustomerSearchPage>;\n  selectedCustomer: User | undefined;\n\n  @Output()\n  submitEvent = new EventEmitter<{ customerId?: string }>();\n\n  @ViewChild('resultList') resultList: ElementRef;\n  @ViewChild('searchTerm') searchTerm: ElementRef;\n\n  constructor(\n    protected fb: FormBuilder,\n    protected asmService: AsmService,\n    protected config: AsmConfig\n  ) {}\n\n  ngOnInit(): void {\n    this.customerSelectionForm = this.fb.group({\n      searchTerm: ['', Validators.required],\n    });\n    this.asmService.customerSearchReset();\n    this.searchResultsLoading$ =\n      this.asmService.getCustomerSearchResultsLoading();\n    this.searchResults = this.asmService.getCustomerSearchResults();\n\n    this.subscription.add(\n      this.customerSelectionForm.controls.searchTerm.valueChanges\n        .pipe(debounceTime(300))\n        .subscribe((searchTermValue) => {\n          this.handleSearchTerm(searchTermValue);\n        })\n    );\n  }\n\n  protected handleSearchTerm(searchTermValue: string) {\n    if (\n      !!this.selectedCustomer &&\n      searchTermValue !== this.selectedCustomer.name\n    ) {\n      this.selectedCustomer = undefined;\n    }\n    if (Boolean(this.selectedCustomer)) {\n      return;\n    }\n    this.asmService.customerSearchReset();\n    if (searchTermValue.trim().length >= 3) {\n      this.asmService.customerSearch({\n        query: searchTermValue,\n        pageSize: this.config.asm?.customerSearch?.maxResults,\n      });\n    }\n  }\n\n  selectCustomerFromList(customer: User) {\n    this.selectedCustomer = customer;\n    this.customerSelectionForm.controls.searchTerm.setValue(\n      this.selectedCustomer.name\n    );\n    this.asmService.customerSearchReset();\n  }\n\n  onSubmit(): void {\n    if (this.customerSelectionForm.valid && !!this.selectedCustomer) {\n      this.submitEvent.emit({ customerId: this.selectedCustomer.customerId });\n    } else {\n      this.customerSelectionForm.markAllAsTouched();\n    }\n  }\n\n  onDocumentClick(event: Event) {\n    if (Boolean(this.resultList)) {\n      if (\n        this.resultList.nativeElement.contains(event.target) ||\n        this.searchTerm.nativeElement.contains(event.target)\n      ) {\n        return;\n      } else {\n        this.asmService.customerSearchReset();\n      }\n    }\n  }\n\n  closeResults() {\n    this.asmService.customerSearchReset();\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.asmService.customerSearchReset();\n  }\n}\n","<form (ngSubmit)=\"onSubmit()\" [formGroup]=\"customerSelectionForm\">\n  <label>\n    <input\n      aria-required=\"true\"\n      #searchTerm\n      type=\"text\"\n      formControlName=\"searchTerm\"\n      placeholder=\"{{ 'asm.customerSearch.searchTerm.label' | cxTranslate }}\"\n    />\n    <cx-form-errors\n      aria-live=\"assertive\"\n      aria-atomic=\"true\"\n      [control]=\"customerSelectionForm.get('searchTerm')\"\n    ></cx-form-errors>\n  </label>\n  <button type=\"submit\">\n    {{ 'asm.customerSearch.submit' | cxTranslate }}\n  </button>\n</form>\n\n<div *ngIf=\"searchResults | async as results\" class=\"asm-results\" #resultList>\n  <button\n    *ngFor=\"let result of results.entries\"\n    (click)=\"selectCustomerFromList(result)\"\n  >\n    <span class=\"result-name\">{{ result.name }}</span>\n    <span class=\"result-id\">{{ result.uid }}</span>\n  </button>\n  <button\n    (click)=\"closeResults()\"\n    *ngIf=\"\n      !(searchResultsLoading$ | async) &&\n      searchTerm.value.length >= 3 &&\n      !!results.entries &&\n      results.entries.length <= 0\n    \"\n  >\n    {{ 'asm.customerSearch.noMatch' | cxTranslate }}\n  </button>\n</div>\n\n<div class=\"asm-results\" *ngIf=\"searchResultsLoading$ | async\">\n  <div\n    class=\"spinner\"\n    aria-hidden=\"false\"\n    [attr.aria-label]=\"'common.loading' | cxTranslate\"\n  >\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'cx-csagent-login-form',\n  templateUrl: './csagent-login-form.component.html',\n})\nexport class CSAgentLoginFormComponent implements OnInit {\n  csAgentLoginForm: FormGroup;\n\n  @Input()\n  csAgentTokenLoading = false;\n\n  @Output()\n  submitEvent = new EventEmitter<{ userId: string; password: string }>();\n\n  constructor(protected fb: FormBuilder) {}\n\n  ngOnInit(): void {\n    this.csAgentLoginForm = this.fb.group({\n      userId: ['', [Validators.required]],\n      password: ['', [Validators.required]],\n    });\n  }\n\n  onSubmit(): void {\n    if (this.csAgentLoginForm.valid) {\n      this.submitEvent.emit({\n        userId: this.csAgentLoginForm.get('userId')?.value,\n        password: this.csAgentLoginForm.get('password')?.value,\n      });\n    } else {\n      this.csAgentLoginForm.markAllAsTouched();\n    }\n  }\n}\n","<form\n  (ngSubmit)=\"onSubmit()\"\n  [formGroup]=\"csAgentLoginForm\"\n  *ngIf=\"!csAgentTokenLoading\"\n>\n  <label>\n    <input\n      aria-required=\"true\"\n      type=\"text\"\n      formControlName=\"userId\"\n      placeholder=\"{{ 'asm.loginForm.userId.label' | cxTranslate }}\"\n    />\n    <cx-form-errors\n      aria-live=\"assertive\"\n      aria-atomic=\"true\"\n      [control]=\"csAgentLoginForm.get('userId')\"\n    ></cx-form-errors>\n  </label>\n\n  <label>\n    <input\n      aria-required=\"true\"\n      type=\"password\"\n      placeholder=\"{{ 'asm.loginForm.password.label' | cxTranslate }}\"\n      formControlName=\"password\"\n    />\n    <cx-form-errors\n      aria-live=\"assertive\"\n      aria-atomic=\"true\"\n      [control]=\"csAgentLoginForm.get('password')\"\n    ></cx-form-errors>\n  </label>\n  <button type=\"submit\">\n    {{ 'asm.loginForm.submit' | cxTranslate }}\n  </button>\n</form>\n\n<div\n  *ngIf=\"csAgentTokenLoading\"\n  class=\"spinner\"\n  aria-hidden=\"false\"\n  [attr.aria-label]=\"'common.loading' | cxTranslate\"\n>\n  <div></div>\n  <div></div>\n  <div></div>\n</div>\n","import { Component, HostBinding, OnInit } from '@angular/core';\nimport { AsmService, AsmUi } from '@spartacus/asm/core';\nimport { CsAgentAuthService } from '@spartacus/asm/root';\nimport {\n  AuthService,\n  GlobalMessageService,\n  GlobalMessageType,\n  RoutingService,\n  User,\n  UserService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap, take } from 'rxjs/operators';\nimport { AsmComponentService } from '../services/asm-component.service';\n\n@Component({\n  selector: 'cx-asm-main-ui',\n  templateUrl: './asm-main-ui.component.html',\n})\nexport class AsmMainUiComponent implements OnInit {\n  customerSupportAgentLoggedIn$: Observable<boolean>;\n  csAgentTokenLoading$: Observable<boolean>;\n  customer$: Observable<User | undefined>;\n  isCollapsed$: Observable<boolean>;\n\n  @HostBinding('class.hidden') disabled = false;\n\n  protected startingCustomerSession = false;\n\n  constructor(\n    protected authService: AuthService,\n    protected csAgentAuthService: CsAgentAuthService,\n    protected userService: UserService,\n    protected asmComponentService: AsmComponentService,\n    protected globalMessageService: GlobalMessageService,\n    protected routingService: RoutingService,\n    protected asmService: AsmService\n  ) {}\n\n  ngOnInit(): void {\n    this.customerSupportAgentLoggedIn$ =\n      this.csAgentAuthService.isCustomerSupportAgentLoggedIn();\n    this.csAgentTokenLoading$ =\n      this.csAgentAuthService.getCustomerSupportAgentTokenLoading();\n    this.customer$ = this.authService.isUserLoggedIn().pipe(\n      switchMap((isLoggedIn) => {\n        if (isLoggedIn) {\n          this.handleCustomerSessionStartRedirection();\n          return this.userService.get();\n        } else {\n          return of(undefined);\n        }\n      })\n    );\n    this.isCollapsed$ = this.asmService\n      .getAsmUiState()\n      .pipe(\n        map((uiState: AsmUi) =>\n          uiState.collapsed === undefined ? false : uiState.collapsed\n        )\n      );\n  }\n\n  protected handleCustomerSessionStartRedirection(): void {\n    this.asmComponentService\n      .isCustomerEmulationSessionInProgress()\n      .pipe(take(1))\n      .subscribe((isCustomerEmulated) => {\n        if (this.startingCustomerSession && isCustomerEmulated) {\n          this.startingCustomerSession = false;\n          this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n          this.routingService.go('/');\n        }\n      });\n  }\n\n  loginCustomerSupportAgent({\n    userId,\n    password,\n  }: {\n    userId: string;\n    password: string;\n  }): void {\n    this.csAgentAuthService.authorizeCustomerSupportAgent(userId, password);\n  }\n\n  logout(): void {\n    this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n  }\n\n  startCustomerEmulationSession({ customerId }: { customerId?: string }): void {\n    if (customerId) {\n      this.csAgentAuthService.startCustomerEmulationSession(customerId);\n      this.startingCustomerSession = true;\n    } else {\n      this.globalMessageService.add(\n        { key: 'asm.error.noCustomerId' },\n        GlobalMessageType.MSG_TYPE_ERROR\n      );\n    }\n  }\n\n  hideUi(): void {\n    this.disabled = true;\n    this.asmComponentService.unload();\n  }\n}\n","<div class=\"asm-bar\">\n  <div class=\"asm-bar-branding\">\n    <img\n      class=\"logo\"\n      src=\"data:image/png;base64,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\"\n      width=\"48\"\n      height=\"24\"\n      alt=\"{{ 'asm.mainLogoLabel' | cxTranslate }}\"\n    />\n\n    <div class=\"asm-title\">\n      {{ 'asm.mainTitle' | cxTranslate }}\n    </div>\n  </div>\n  <div class=\"asm-bar-actions\">\n    <cx-asm-toggle-ui></cx-asm-toggle-ui>\n\n    <cx-asm-session-timer\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n    ></cx-asm-session-timer>\n\n    <button\n      class=\"close\"\n      title=\"{{ 'asm.hideUi' | cxTranslate }}\"\n      *ngIf=\"\n        !(customerSupportAgentLoggedIn$ | async) &&\n        !(csAgentTokenLoading$ | async)\n      \"\n      (click)=\"hideUi()\"\n    ></button>\n\n    <button\n      class=\"logout\"\n      title=\"{{ 'asm.logout' | cxTranslate }}\"\n      *ngIf=\"customerSupportAgentLoggedIn$ | async\"\n      (click)=\"logout()\"\n    ></button>\n  </div>\n</div>\n\n<ng-container *ngIf=\"!(isCollapsed$ | async) as notCollapsed\">\n  <ng-container\n    *ngIf=\"customerSupportAgentLoggedIn$ | async; else showLoginForm\"\n  >\n    <ng-container *ngIf=\"customer$ | async; else showCustomerSelection\">\n      <cx-customer-emulation *ngIf=\"notCollapsed\"></cx-customer-emulation>\n    </ng-container>\n    <ng-template #showCustomerSelection>\n      <cx-customer-selection\n        *ngIf=\"notCollapsed\"\n        (submitEvent)=\"startCustomerEmulationSession($event)\"\n      ></cx-customer-selection>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #showLoginForm>\n    <cx-csagent-login-form\n      *ngIf=\"notCollapsed\"\n      (submitEvent)=\"loginCustomerSupportAgent($event)\"\n      [csAgentTokenLoading]=\"csAgentTokenLoading$ | async\"\n    ></cx-csagent-login-form>\n  </ng-template>\n</ng-container>\n","import { LayoutConfig } from '@spartacus/storefront';\nimport { AsmMainUiComponent } from './asm-main-ui/asm-main-ui.component';\n\nexport const defaultAsmLayoutConfig: LayoutConfig = {\n  launch: {\n    ASM: {\n      outlet: 'cx-storefront',\n      component: AsmMainUiComponent,\n    },\n  },\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { I18nModule, provideConfig } from '@spartacus/core';\nimport { FormErrorsModule } from '@spartacus/storefront';\nimport { AsmMainUiComponent } from './asm-main-ui/asm-main-ui.component';\nimport { AsmSessionTimerComponent } from './asm-session-timer/asm-session-timer.component';\nimport { FormatTimerPipe } from './asm-session-timer/format-timer.pipe';\nimport { AsmToggleUiComponent } from './asm-toggle-ui/asm-toggle-ui.component';\nimport { CSAgentLoginFormComponent } from './csagent-login-form/csagent-login-form.component';\nimport { CustomerEmulationComponent } from './customer-emulation/customer-emulation.component';\nimport { CustomerSelectionComponent } from './customer-selection/customer-selection.component';\nimport { defaultAsmLayoutConfig } from './default-asm-layout.config';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, I18nModule, FormErrorsModule],\n  declarations: [\n    AsmMainUiComponent,\n    CSAgentLoginFormComponent,\n    CustomerSelectionComponent,\n    AsmSessionTimerComponent,\n    FormatTimerPipe,\n    CustomerEmulationComponent,\n    AsmToggleUiComponent,\n  ],\n  exports: [\n    AsmMainUiComponent,\n    CSAgentLoginFormComponent,\n    CustomerSelectionComponent,\n    AsmSessionTimerComponent,\n    FormatTimerPipe,\n    CustomerEmulationComponent,\n    AsmToggleUiComponent,\n  ],\n  providers: [provideConfig(defaultAsmLayoutConfig)],\n})\nexport class AsmComponentsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["ASM_ENABLED_LOCAL_STORAGE_KEY","Injectable","Subscription","Component","Pipe","distinctUntilChanged","EventEmitter","Validators","debounceTime","Output","ViewChild","Input","switchMap","of","map","take","GlobalMessageType","HostBinding","CommonModule","ReactiveFormsModule","I18nModule","FormErrorsModule","provideConfig","NgModule"],"mappings":"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"}